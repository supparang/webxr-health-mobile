/* ====== Base ====== */
:root {
  --bg:#0b1620;
  --fg:#e7f7ff;
  --fg-dim:#a9c3d1;
  --pill:#102333;
  --accent:#22e1b5;
}
* { box-sizing: border-box; }
html, body { height:100%; margin:0; background:var(--bg); color:var(--fg); font-family: ui-sans-serif, system-ui, "Segoe UI", Roboto, "Helvetica Neue", Arial; }

/* ====== Scene canvas (ต้องไม่บังการคลิกเมนู) ====== */
#c{
  position:fixed; inset:0;
  z-index:0;
  pointer-events:none !important;
}

/* ====== App root ====== */
#app{ position:relative; z-index:1; }

/* ====== MENU (ต้องคลิกได้แน่ๆ) ====== */
#menuBar{
  position:relative;
  z-index:50;                     /* ดันขึ้นเหนือทุกอย่าง */
  pointer-events:auto !important; /* กันโดนปิดจากพาเรนต์ */
  padding:24px;
}
#menuBar, #menuBar *{
  pointer-events:auto !important; /* ปลดล็อกให้ลูกทั้งหมด */
}

.menu .grid{
  display:grid;
  grid-template-columns: repeat(4, minmax(220px, 1fr));
  gap:16px;
  margin-bottom:16px;
}
.menu .tile{
  display:flex; flex-direction:column; gap:6px;
  background:linear-gradient(180deg,#0e2234,#0a1a28);
  border:1px solid #0f2a43; border-radius:14px;
  padding:16px; cursor:pointer;
  outline: none;
}
.menu .tile.active{ box-shadow:0 0 0 2px var(--accent) inset; }
.menu .tile i{ font-style:normal; font-size:28px; line-height:1; }
.menu .tile b{ font-weight:700; }
.menu .tile small{ color:var(--fg-dim); }

.menu .row{ display:flex; gap:24px; align-items:center; margin:10px 0 18px; }
.menu .seg{ display:flex; gap:8px; align-items:center; }
.menu .chip{
  border:1px solid #16415d; border-radius:999px;
  padding:6px 12px; background:#0a1f2e; cursor:pointer;
}
.menu .chip.active{ background:#0f2f44; box-shadow:0 0 0 2px var(--accent) inset; }

.menu .cta{ margin-top:6px; }
.menu .start{
  border:0; border-radius:999px; padding:12px 36px; font-size:18px; cursor:pointer;
  background: radial-gradient(120% 120% at 50% 0%, #2cf0c8, #0ec7a0 60%, #08a388);
  color:#07251e; font-weight:800; box-shadow:0 8px 22px #0ec7a044;
}

/* ====== GAME LAYER ====== */
#gameLayer{
  position:relative; height:58vh; margin:0 24px 24px; border-radius:16px;
  background:linear-gradient(180deg,#0b1e2c,#07131d);
  border:1px solid #0f2a43;
  z-index:10;
}
#spawnHost{ position:absolute; inset:0; }
.spawn-emoji{
  position:absolute; border:0; background:transparent; font-size:36px; cursor:pointer;
  filter: drop-shadow(0 2px 4px #0008);
}

/* ====== HUD (ตอนเล่นเท่านั้น) ====== */
#hudWrap{
  position:absolute; inset:0; display:none;
  z-index:30; pointer-events:none;    /* HUD เองไม่บังคลิก */
}
#hudWrap .pill,#scoreTime .pill{ background:var(--pill); border-radius:999px; padding:4px 10px; display:inline-flex; gap:8px; align-items:center; }
#questBar ul{ list-style:none; padding:0; margin:8px 0 0; display:flex; gap:8px; flex-wrap:wrap; }
#coachHUD{ position:absolute; left:12px; bottom:12px; }
#missionLine{ position:absolute; top:10px; left:50%; transform:translateX(-50%); }

/* ====== RESULT ====== */
#result{
  position:relative; z-index:60;
  background:transparent;
}

/* ====== Hard kill: ถ้ามีพ่อแม่ชุดไหนตั้ง pointer-events:none มาก่อน ====== */
#app, #app *{ /* อย่าปิดคลิกทับเมนู */
  /* ไม่ตั้ง none ที่นี่ เพื่อเลี่ยงผลข้างเคียง */
}
/* === PowerBar HUD (ไฟลุก) === */
#powerBar.power-bar {
  position: fixed;
  left: 50%;
  bottom: 20px;
  transform: translateX(-50%);
  display: flex;
  gap: 10px;
  z-index: 120;
  font-family: 'Prompt', ui-rounded, sans-serif;
  backdrop-filter: blur(8px);
  background: rgba(0,0,0,0.3);
  border-radius: 20px;
  padding: 6px 14px;
  box-shadow: 0 0 10px rgba(0,0,0,0.4);
}
#powerBar .pseg {
  position: relative;
  padding: 6px 14px;
  border-radius: 16px;
  font-weight: 700;
  color: #eee;
  background: linear-gradient(180deg,#333,#111);
  overflow: hidden;
  transition: all .25s;
  box-shadow: inset 0 0 4px rgba(255,255,255,0.2);
}
#powerBar .pseg i {
  position: absolute;
  left: 0; bottom: 0;
  width: 0%;
  height: 100%;
  transition: width .4s linear;
  z-index: 0;
  border-radius: inherit;
}
#powerBar .pseg span {
  position: relative;
  z-index: 1;
  font-size: 13px;
  user-select: none;
}

/* Active Glow Effect */
#powerBar .pseg.active {
  color: #fff;
  transform: scale(1.08);
  box-shadow: 0 0 12px rgba(255,200,50,0.7), 0 0 20px rgba(255,150,0,0.4);
}

/* Fire animation background */
@keyframes flameFlow {
  0% { background-position: 0 0; }
  100% { background-position: 100% 0; }
}
#powerBar .pseg.active i {
  width: 100%;
  background: linear-gradient(90deg,
    #ffbf00, #ff9100, #ff4500, #ff9100, #ffbf00);
  background-size: 300% 100%;
  animation: flameFlow 1.5s linear infinite;
  box-shadow: 0 0 16px rgba(255,140,0,0.9);
}

/* Shield color variant */
#powerBar .pseg[data-k="shield"].active i {
  background: linear-gradient(90deg,#6cf,#0cf,#00aaff,#0cf,#6cf);
  box-shadow: 0 0 12px rgba(0,180,255,0.8);
}
