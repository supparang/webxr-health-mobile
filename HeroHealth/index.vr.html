<!doctype html>
<html lang="th">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
<title>Hero Health VR — Nutrition Hub</title>
<meta name="color-scheme" content="light dark"/>
<style>
  html,body{height:100%;margin:0;background:#0b1324;color:#e8f0ff;font-family:system-ui,Segoe UI,Inter,Arial}
  .fallback{position:fixed;left:12px;bottom:12px;padding:8px 10px;background:#111a33;color:#cfe;border-radius:10px;z-index:10}
  .fallback strong{color:#9ff}
</style>
<script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
<script type="module">
  import { GameHub } from './vr/hub.js?v=menufix5';
  window.addEventListener('DOMContentLoaded',()=>{ window.__hub = new GameHub(); });
</script>
</head>
<body>
<div class="fallback" id="bootStatus">
  <div><strong>Status:</strong> Booting…</div>
  <button id="forceStartBtn" style="margin-top:6px;background:#2e8b57;color:#fff;border:0;padding:6px 10px;border-radius:6px;cursor:pointer">
    Force Start
  </button>
</div>

<a-scene background="color: #0b1324" vr-mode-ui="enterVRButton: true" renderer="colorManagement:true; physicallyCorrectLights:true">
  <a-entity light="type: ambient; intensity: 0.7"></a-entity>
  <a-entity light="type: directional; intensity: 0.9" position="1 2 1"></a-entity>
  <a-sky color="#0b1324"></a-sky>

  <!-- HUD -->
  <a-entity id="hudRoot" position="0 2.18 -2.8">
    <a-entity geometry="primitive: plane; width: 1.9; height: 0.30"
              material="color:#111a33; opacity:0.9; depthTest:false; depthWrite:false"></a-entity>
    <a-text id="tMode"  value="เลือกโหมด →"  position="-0.9 0.08 0.02" align="left" width="2.7" color="#9fd"></a-text>
    <a-text id="tTime"  value="เวลา: 60s"      position="-0.9 -0.02 0.02" align="left" width="2.7" color="#e8f0ff"></a-text>
    <a-text id="tScore" value="คะแนน: 0"       position="0.15 0.08 0.02"  align="left" width="2.7" color="#e8f0ff"></a-text>
    <a-text id="tCombo" value="คอมโบ: x1"      position="0.15 -0.02 0.02" align="left" width="2.7" color="#e8f0ff"></a-text>
    <a-entity position="0 -0.20 0">
      <a-entity geometry="primitive: plane; width: 1.9; height: 0.08"
                material="color:#1b2752; opacity:0.95; depthTest:false; depthWrite:false"></a-entity>
      <a-entity id="feverFill" geometry="primitive: plane; width: 0.0; height: 0.08" position="-0.95 0 0.02"
                material="color:#ff6600; opacity:0.95; depthTest:false; depthWrite:false"></a-entity>
      <a-text id="tFever" value="Fever 0%" position="-0.92 -0.01 0.03" align="left" width="2.4" color="#ffd54f"></a-text>
    </a-entity>
  </a-entity>

  <!-- Mini Quest -->
  <a-entity id="questPanel" position="0 1.65 -2.8" visible="false">
    <a-entity geometry="primitive: plane; width: 1.9; height: 0.28"
              material="color:#111a33; opacity:0.88; transparent:true; depthTest:false; depthWrite:false"></a-entity>
    <a-text value="Mini Quests" position="-0.9 0.09 0.03" align="left" width="2.7" color="#ffd54f"></a-text>
    <a-text id="tQ" value="" position="-0.9 -0.06 0.03" align="left" width="2.7" color="#e8f0ff"></a-text>
  </a-entity>

  <!-- Menu -->
  <a-entity id="modeMenu" position="0 1.35 -0.55">
    <a-entity geometry="primitive: plane; width: 1.10; height: 0.62"
              material="color:#0e1b38; opacity:0.98; transparent:true; depthTest:false; depthWrite:false"></a-entity>
    <a-text value="เลือกโหมดเกม" position="-0.42 0.25 0.06" width="1.8" color="#9fd"></a-text>

    <a-plane class="btn clickable" position="-0.28 0.08 0.03" width="0.46" height="0.18"
             color="#1f3a6d" data-mode="goodjunk"
             material="transparent:true; depthTest:false; depthWrite:false"></a-plane>
    <a-text value="ดี vs ขยะ" position="-0.41 0.075 0.06" width="1.6" color="#ffffff"></a-text>

    <a-plane class="btn clickable" position="0.28 0.08 0.03" width="0.46" height="0.18"
             color="#1f3a6d" data-mode="groups"
             material="transparent:true; depthTest:false; depthWrite:false"></a-plane>
    <a-text value="หมวดอาหาร" position="0.09 0.075 0.06" width="1.6" color="#ffffff"></a-text>

    <a-plane class="btn clickable" position="-0.28 -0.14 0.03" width="0.46" height="0.18"
             color="#1f3a6d" data-mode="hydration"
             material="transparent:true; depthTest:false; depthWrite:false"></a-plane>
    <a-text value="สมดุลน้ำ" position="-0.43 -0.145 0.06" width="1.6" color="#ffffff"></a-text>

    <a-plane class="btn clickable" position="0.28 -0.14 0.03" width="0.46" height="0.18"
             color="#1f3a6d" data-mode="plate"
             material="transparent:true; depthTest:false; depthWrite:false"></a-plane>
    <a-text value="จานสุขภาพ" position="0.08 -0.145 0.06" width="1.6" color="#ffffff"></a-text>
  </a-entity>

  <!-- Start Button -->
  <a-entity id="startPanel" position="0 0.75 -0.55" visible="false">
    <a-plane id="startBtn" class="clickable" width="0.80" height="0.22" color="#2e8b57"
             material="transparent:true; depthTest:false; depthWrite:false"></a-plane>
    <a-text id="startLbl" value="เลือกโหมดก่อน" position="-0.28 -0.005 0.06" width="1.6" color="#ffffff"></a-text>
  </a-entity>

  <!-- Result -->
  <a-entity id="resultPanel" position="0 1.6 -1.1" visible="false">
    <a-plane width="1.3" height="0.7" color="#111a33" opacity="0.95" material="depthTest:false; depthWrite:false"></a-plane>
    <a-text id="tResultTitle" value="RESULT" position="-0.55 0.24 0.03" width="2" color="#7ea8ff"></a-text>
    <a-text id="tResultBody"  value="-"      position="-0.55 0.02 0.03"  width="2" color="#e8f0ff"></a-text>
    <a-plane id="restartBtn" position="0 -0.22 0.03" width="0.7" height="0.22" color="#2e8b57" class="clickable"
             material="depthTest:false; depthWrite:false"></a-plane>
    <a-text value="กลับสู่ Hub" position="-0.27 -0.22 0.06" width="1.6" color="#fff"></a-text>
  </a-entity>

  <!-- กล้อง -->
  <a-entity id="rig" position="0 1.6 0">
    <a-entity id="camera" camera look-controls cursor="rayOrigin: mouse"
              raycaster="objects: .clickable, .target; far: 6">
      <a-entity position="0 0 -1" geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.015"
                material="color: #9fd; shader: flat; depthTest:false; depthWrite:false"></a-entity>
    </a-entity>
    <a-entity laser-controls="hand: right" raycaster="objects: .clickable, .target; far: 6"></a-entity>
  </a-entity>

  <!-- พื้นที่เกม -->
  <a-entity id="spawnZone" position="0 1.00 -3.80"></a-entity>
  <a-entity id="fxLayer" position="0 0 0"></a-entity>
</a-scene>
</body>
</html>
