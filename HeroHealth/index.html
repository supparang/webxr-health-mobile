<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1, user-scalable=no" />
  <title>Hero Health Academy</title>

  <!-- à¹ƒà¸Šà¹‰à¸à¸·à¹‰à¸™à¸«à¸¥à¸±à¸‡/à¸ªà¹„à¸•à¸¥à¹Œà¹€à¸”à¸´à¸¡ -->
  <link rel="stylesheet" href="/webxr-health-mobile/HeroHealth/styles/game.css" />
  <link rel="stylesheet" href="/webxr-health-mobile/HeroHealth/styles/groups.css" />

  <style>
    :root { --safe: env(safe-area-inset-bottom, 0px); }
    .hud .cardlike {
      background: linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,.5));
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 12px; padding: 6px 10px; backdrop-filter: blur(6px);
    }
    #missionLine { margin-top:8px; }
    .menu { padding-bottom: calc(12px + var(--safe)); }

    .modal .tbl { width:100%; border-collapse:collapse; }
    .modal .tbl th, .modal .tbl td { padding:6px 8px; border-bottom:1px solid rgba(255,255,255,.1); }
    .chip { display:inline-flex; gap:8px; align-items:center; padding:6px 10px; border-radius:999px;
            background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.12); margin:4px 6px 0 0; }

    /* --- pointer safety (à¸‹à¹‰à¸­à¸™à¸Šà¸±à¹‰à¸™à¹„à¸¡à¹ˆà¸šà¸±à¸‡à¸„à¸¥à¸´à¸) --- */
    #menuBar { pointer-events: auto; }
    #hudWrap { pointer-events: none; }     /* HUD à¹„à¸¡à¹ˆà¸à¸´à¸™à¸„à¸¥à¸´à¸ */
    #gameLayer { pointer-events: auto; }
    #spawnHost, .spawn-emoji { pointer-events: auto; }
    .btn, .chip, .tile, .tag { pointer-events: auto; }
    .modal { pointer-events: auto; }
  </style>

  <!-- Bootloader: import main.js à¸”à¹‰à¸§à¸¢ absolute path -->
  <script type="module">
    (async () => {
      const warn = document.createElement('div');
      warn.id = 'bootWarn';
      warn.style.cssText = 'position:fixed;top:0;left:0;right:0;background:#b00020;color:#fff;padding:10px 12px;font-weight:700;z-index:2000;display:none';
      warn.textContent = 'à¹‚à¸«à¸¥à¸”à¸ªà¸„à¸£à¸´à¸›à¸•à¹Œà¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ: à¸•à¸£à¸§à¸ˆ path /webxr-health-mobile/HeroHealth/game/main.js';
      document.addEventListener('DOMContentLoaded', ()=>document.body.appendChild(warn));

      const chip = document.createElement('div');
      chip.id = 'bootChip';
      chip.style.cssText = 'position:fixed;right:12px;bottom:calc(12px + var(--safe));background:#1b5e20;color:#fff;padding:8px 10px;border-radius:999px;font-weight:800;font-size:12px;z-index:2001;display:none;box-shadow:0 2px 8px rgba(0,0,0,.25)';
      chip.textContent = 'âœ… JS Loaded';
      document.addEventListener('DOMContentLoaded', ()=>document.body.appendChild(chip));

      const url = '/webxr-health-mobile/HeroHealth/game/main.js?v=live&cb=' + Date.now();
      try{
        await import(url);
        setTimeout(()=>{ if(window.__HHA_BOOT_OK){ warn.style.display='none'; chip.style.display='inline-block'; }}, 80);
      }catch(e){
        warn.textContent = 'à¹‚à¸«à¸¥à¸”à¸ªà¸„à¸£à¸´à¸›à¸•à¹Œà¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ: ' + (e?.message || e);
        warn.style.display = 'block';
      }
    })();
  </script>
</head>
<body>
  <header class="brand" role="banner">
    <div id="brandTitle">HERO HEALTH ACADEMY</div>
    <div class="spacer"></div>
    <button id="langToggle"   class="btn" type="button">ğŸ‡¹ğŸ‡­ TH/EN</button>
    <button id="gfxToggle"    class="btn" type="button">ğŸ›ï¸ à¸à¸£à¸²à¸Ÿà¸´à¸: à¸›à¸à¸•à¸´</button>
    <button id="soundToggle"  class="btn" type="button">ğŸ”Š à¹€à¸ªà¸µà¸¢à¸‡: à¹€à¸›à¸´à¸”</button>
    <button id="hapticToggle" class="btn" type="button">ğŸ“³ à¸ªà¸±à¹ˆà¸™: à¹€à¸›à¸´à¸”</button>
  </header>

  <canvas id="c" aria-hidden="true"></canvas>

  <!-- HUD (à¹ƒà¸«à¹‰ main.js à¹€à¸›à¸´à¸”à¸•à¸­à¸™à¹€à¸£à¸´à¹ˆà¸¡à¹€à¸à¸¡) -->
  <section class="hud" id="hudWrap" role="region" aria-label="HUD" style="display:none">
    <div class="cardlike">
      <span id="t_score">à¸„à¸°à¹à¸™à¸™</span>: <b id="score">0</b> |
      <span id="t_combo">à¸„à¸­à¸¡à¹‚à¸š</span>: <b id="combo">x0</b> |
      <span id="t_time">à¹€à¸§à¸¥à¸²</span>: <b id="time">60</b>s
    </div>

    <div id="feverBarWrap" class="bar slim"><div id="feverBar"></div></div>
    <div id="fever" class="fever" style="display:none">FEVER!</div>

    <div id="powerBar" class="powerbar" aria-label="Power-ups">
      <div class="pseg" data-k="x2"><span>Ã—2</span><i></i></div>
      <div class="pseg" data-k="freeze"><span>ğŸ§Š</span><i></i></div>
      <div class="pseg" data-k="sweep"><span>ğŸ§²</span><i></i></div>
      <div class="pseg" data-k="shield"><span data-base="Shield">ğŸ›¡ï¸ x0</span><i></i></div>

    </div>

    <div id="questChips" class="quests" aria-live="polite"></div>

    <div id="targetWrap" style="display:none">ğŸ¯ <span id="t_target">à¸«à¸¡à¸§à¸”</span>: <span id="targetBadge">â€”</span></div>
    <div id="plateTracker" style="display:none">ğŸ± <span id="t_quota">à¹‚à¸„à¸§à¸•à¸²</span>: <span id="platePills"></span></div>
    <div id="hydroWrap" style="display:none">
      ğŸ’§ <span id="t_hydro">à¸ªà¸¡à¸”à¸¸à¸¥à¸™à¹‰à¸³</span>:
      <span id="hydroLabel">â€”</span>
      <div class="bar"><div id="hydroBar"></div></div>
    </div>

    <div id="coachHUD" class="coach under-fever" style="display:flex">
      <div id="coachText">à¸à¸£à¹‰à¸­à¸¡à¹„à¸«à¸¡? à¸ªà¸¹à¹‰à¹†!</div>
    </div>

    <div id="missionLine" class="mission-line" style="display:none">â€”</div>
  </section>

  <!-- à¸à¸·à¹‰à¸™à¸—à¸µà¹ˆà¹€à¸¥à¹ˆà¸™à¸ˆà¸£à¸´à¸‡ + à¸—à¸µà¹ˆà¸§à¸²à¸‡ spawn -->
  <section id="gameLayer" aria-label="playfield" style="position:relative; width:min(980px,96vw); height:calc(100vh - 290px); min-height:360px; margin:10px auto; border-radius:16px; border:1px solid #152641; background:radial-gradient(1200px 500px at 50% -40%, #152644 12%, #0c1729 55%, #0b1626); overflow:hidden;">
    <div id="spawnHost" aria-live="polite" style="position:absolute; inset:0;"></div>
  </section>

  <!-- (à¸„à¸‡à¹„à¸§à¹‰à¹„à¸”à¹‰) à¹‚à¸„à¸£à¸‡ game-wrap à¹€à¸”à¸´à¸¡ à¸«à¸²à¸à¸¡à¸µà¹‚à¸«à¸¡à¸”à¸­à¸·à¹ˆà¸™à¹ƒà¸Šà¹‰ -->
  <main class="game-wrap" role="main" aria-label="Game area">
    <div id="modeRoot" tabindex="0" aria-label="Mode root"></div>
  </main>

  <section id="menuBar" class="menu" role="navigation" aria-label="à¹‚à¸«à¸¡à¸”à¹à¸¥à¸°à¸à¸²à¸£à¸„à¸§à¸šà¸„à¸¸à¸¡">
    <div class="row">
      <button class="tag" data-action="ui:start:goodjunk"  id="m_goodjunk"  type="button">ğŸ¥— à¸”à¸µ vs à¸‚à¸¢à¸°</button>
      <button class="tag" data-action="ui:start:groups"    id="m_groups"    type="button">ğŸ½ï¸ à¸ˆà¸²à¸™ 5 à¸«à¸¡à¸¹à¹ˆ</button>
      <button class="tag" data-action="ui:start:hydration" id="m_hydration" type="button">ğŸ’§ à¸ªà¸¡à¸”à¸¸à¸¥à¸™à¹‰à¸³</button>
      <button class="tag" data-action="ui:start:plate"     id="m_plate"     type="button">ğŸ± à¸ˆà¸±à¸”à¸ˆà¸²à¸™à¸ªà¸¸à¸‚à¸ à¸²à¸</button>
    </div>
    <div class="row">
      <button class="tag" data-action="diff" data-value="Easy"   id="d_easy"   type="button">à¸‡à¹ˆà¸²à¸¢</button>
      <button class="tag" data-action="diff" data-value="Normal" id="d_normal" type="button">à¸›à¸à¸•à¸´</button>
      <button class="tag" data-action="diff" data-value="Hard"   id="d_hard"   type="button">à¸¢à¸²à¸</button>
      <span class="modeLabel">
        <span id="t_mode">à¹‚à¸«à¸¡à¸”</span>: <b id="modeName">à¸”à¸µ vs à¸‚à¸¢à¸°</b> â€¢
        <span id="t_diff">à¸„à¸§à¸²à¸¡à¸¢à¸²à¸</span>: <b id="difficulty">à¸›à¸à¸•à¸´</b>
      </span>
    </div>
    <div class="row">
      <button class="btn" data-action="start"   id="btn_start"   type="button">â–¶ à¹€à¸£à¸´à¹ˆà¸¡à¹€à¸à¸¡</button>
      <button class="btn" data-action="pause"   id="btn_pause"   type="button">â¸ à¸à¸±à¸</button>
      <button class="btn" data-action="restart" id="btn_restart" type="button">â†» à¹€à¸£à¸´à¹ˆà¸¡à¹ƒà¸«à¸¡à¹ˆ</button>
      <button class="btn" data-action="help"    id="btn_help"    type="button">â“ à¸§à¸´à¸˜à¸µà¹€à¸¥à¹ˆà¸™</button>
      <button class="btn" data-action="helpScene" id="btn_helpScene" type="button">ğŸ“˜ à¸„à¸¹à¹ˆà¸¡à¸·à¸­à¸£à¸§à¸¡</button>

      <!-- à¹€à¸à¸´à¹ˆà¸¡à¸›à¸¸à¹ˆà¸¡à¹€à¸‚à¹‰à¸²à¸–à¸¶à¸‡à¸ªà¸–à¸´à¸•à¸´à¸£à¸§à¸¡ + à¸ à¸²à¸£à¸à¸´à¸ˆà¸£à¸²à¸¢à¸§à¸±à¸™ -->
      <button class="btn" data-action="statOpen"  id="btn_stats" type="button">ğŸ† à¸ªà¸–à¸´à¸•à¸´à¸£à¸§à¸¡</button>
      <button class="btn" data-action="dailyOpen" id="btn_daily" type="button">ğŸŒ à¸£à¸²à¸¢à¸§à¸±à¸™</button>
    </div>
  </section>

  <!-- Help (individual) -->
  <div id="help" class="modal" style="display:none" role="dialog" aria-modal="true" aria-labelledby="h_help">
    <div class="card">
      <h3 id="h_help">à¸§à¸´à¸˜à¸µà¹€à¸¥à¹ˆà¸™</h3>
      <pre id="helpBody">â€”</pre>
      <button class="btn" data-action="helpClose" id="btn_ok" type="button">à¹‚à¸­à¹€à¸„</button>
    </div>
  </div>

  <!-- Help (all) -->
  <div id="helpScene" class="modal" style="display:none" role="dialog" aria-modal="true" aria-labelledby="h_help_all">
    <div class="card scroll">
      <h3 id="h_help_all">à¸„à¸¹à¹ˆà¸¡à¸·à¸­à¸£à¸§à¸¡</h3>
      <div id="helpAllBody">â€”</div>
      <button class="btn" data-action="helpSceneClose" id="btn_ok_all" type="button">à¹‚à¸­à¹€à¸„</button>
    </div>
  </div>

  <!-- Stats Board -->
  <div id="statBoard" class="modal" style="display:none" role="dialog" aria-modal="true" aria-labelledby="h_stats">
    <div class="card scroll">
      <h3 id="h_stats">ğŸ† à¸šà¸­à¸£à¹Œà¸”à¸ªà¸–à¸´à¸•à¸´à¸£à¸§à¸¡</h3>
      <div id="statBoardBody">â€”</div>
      <button class="btn" data-action="statClose" type="button">à¸›à¸´à¸”</button>
    </div>
  </div>

  <!-- Daily Challenge -->
  <div id="dailyPanel" class="modal" style="display:none" role="dialog" aria-modal="true" aria-labelledby="h_daily">
    <div class="card">
      <h3 id="h_daily">ğŸŒ à¸ à¸²à¸£à¸à¸´à¸ˆà¸£à¸²à¸¢à¸§à¸±à¸™</h3>
      <div id="dailyBody">â€”</div>
      <div id="dailyReward" style="margin-top:8px; font-weight:800;"></div>
      <button class="btn" data-action="dailyClose" type="button">à¸›à¸´à¸”</button>
    </div>
  </div>

  <!-- Result -->
  <div id="result" class="modal" style="display:none" role="dialog" aria-modal="true" aria-labelledby="h_summary">
    <div class="card">
      <h3 id="h_summary">à¸ªà¸£à¸¸à¸›à¸œà¸¥</h3>
      <p id="resultText" style="opacity:.9;margin:.4rem 0 1rem">â€”</p>
      <div id="resCore"></div>
      <div id="resBreakdown"></div>
      <div id="resBoard"></div>
      <div id="resMissions" style="margin-top:8px"></div>
      <div id="resDaily" style="margin-top:8px"></div>
      <div style="margin-top:12px; display:flex; gap:8px; flex-wrap:wrap;">
        <button class="btn" data-result="replay" id="btn_replay" type="button">â†» à¹€à¸¥à¹ˆà¸™à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡</button>
        <button class="btn" data-result="home"   id="btn_home"   type="button">ğŸ  à¸«à¸™à¹‰à¸²à¸«à¸¥à¸±à¸</button>
      </div>
    </div>
  </div>

  <!-- SFX -->
  <audio id="sfx-good"     preload="auto" src="/webxr-health-mobile/HeroHealth/assets/sfx/good.mp3"></audio>
  <audio id="sfx-bad"      preload="auto" src="/webxr-health-mobile/HeroHealth/assets/sfx/bad.mp3"></audio>
  <audio id="sfx-perfect"  preload="auto" src="/webxr-health-mobile/HeroHealth/assets/sfx/perfect.mp3"></audio>
  <audio id="sfx-tick"     preload="auto" src="/webxr-health-mobile/HeroHealth/assets/sfx/tick.mp3"></audio>
  <audio id="sfx-powerup"  preload="auto" src="/webxr-health-mobile/HeroHealth/assets/sfx/powerup.mp3"></audio>

  <noscript>
    <div style="position:fixed;top:0;left:0;right:0;background:#b00020;color:#fff;padding:10px 12px;font-weight:700;z-index:2000">
      à¸ˆà¸³à¹€à¸›à¹‡à¸™à¸•à¹‰à¸­à¸‡à¹€à¸›à¸´à¸”à¹ƒà¸Šà¹‰à¸‡à¸²à¸™ JavaScript à¹€à¸à¸·à¹ˆà¸­à¹€à¸¥à¹ˆà¸™à¹€à¸à¸¡
    </div>
  </noscript>
</body>
</html>
