<!doctype html>
<html lang="th" data-hha-lang="TH">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>Hero Health Academy ‚Äî Hub</title>
  <meta name="color-scheme" content="dark only"/>

  <style>
  :root{
    --c-bg:#0b1626; --c-panel:#0f1d31; --c-ink:#eaf6ff;
    --c-accent:#37e3c6; --c-pill:#102038e0; --z-hud:95; --z-coach:96; --z-items:29;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{ margin:0; background:linear-gradient(180deg,#08111e,#0b1626 24%,#0b1626);
        color:var(--c-ink); font:500 16px/1.5 ui-rounded,system-ui,Segoe UI,Arial; overflow:hidden; }
  #app{ position:relative; height:100vh; width:100%;
        display:grid; grid-template-rows:auto auto 1fr; place-items:center;
        max-width:100vw; margin:0 auto; padding:10px 12px 14px; }

  /* Hero */
  #hero{text-align:center;margin:6px 0 10px}
  #hero h1{margin:0 0 6px; font:900 28px/1.1 ui-rounded}
  #hero .sub{margin:0; opacity:.75; font-size:14px}

  /* Menu */
  .menu{ width:min(980px,96vw); background:linear-gradient(180deg,#0f1d31,#0c1729);
         border:1px solid #152641; border-radius:16px; padding:14px; box-shadow:0 16px 60px rgba(0,0,0,.35); }
  .menu .grid{ display:grid; grid-template-columns:repeat(4,1fr); gap:10px; margin-bottom:8px; }
  .tile{ display:flex; flex-direction:column; align-items:flex-start; gap:6px;
         padding:14px; border-radius:14px; background:#0e1b30; border:1px solid #162640;
         color:#eaf6ff; text-align:left; cursor:pointer; transition:transform .15s, box-shadow .15s, border-color .15s, background .15s; }
  .tile i{ font-size:28px } .tile b{ font:800 16px/1 ui-rounded } .tile small{ opacity:.76; font-size:12px }
  .tile:hover{ transform:translateY(-2px); box-shadow:0 10px 30px rgba(0,0,0,.30) }
  .tile.active{ border-color:#2dd4bf80; box-shadow:0 0 0 2px #2dd4bf40 inset }

  .menu .row{ display:flex; flex-wrap:wrap; gap:14px; align-items:center; justify-content:space-between; margin-top:6px }
  .menu .seg{ display:flex; align-items:center; gap:10px }
  .menu .seg .lbl{ opacity:.8; font-weight:700; font-size:13px }
  .menu .seg .value{ font:800 15px ui-rounded }

  .chip{ padding:8px 12px; border-radius:999px; border:1px solid #19304e; background:#102038; color:#eaf6ff;
         cursor:pointer; font:800 12px ui-rounded; letter-spacing:.2px; }
  .chip.active{ border-color:#2dd4bf80; background:#0f2a25; color:#dbfffb }

  .menu .cta{ display:flex; justify-content:center; margin-top:8px }
  .start{ min-width:210px; padding:14px 22px; border-radius:999px; font:900 18px ui-rounded; letter-spacing:.4px;
          border:2px solid #1f3a63; color:#061222;
          background:linear-gradient(180deg,#42f9da,#22c1a5);
          box-shadow:0 20px 50px rgba(0,0,0,.35), 0 8px 0 #0a221d inset, 0 -8px 0 #3fe2c8 inset; cursor:pointer; }
  .start:active{ transform:translateY(1px) }

  /* Game Layer */
  #gameLayer{ position:relative; width:min(980px,96vw); height:calc(100vh - 290px); min-height:360px; margin:10px auto 0; border-radius:16px;
              border:1px solid #152641;
              background:radial-gradient(1200px 500px at 50% -40%, #152644 12%, #0c1729 55%, #0b1626);
              overflow:hidden; box-shadow:0 12px 50px rgba(0,0,0,.35); perspective:900px; perspective-origin:50% 45%; }
  #spawnHost{ position:absolute; inset:0; z-index:var(--z-items) }

  /* HUD */
  .hud{ position:absolute; left:50%; transform:translateX(-50%); top:72px;
        width:min(980px,96vw); z-index:var(--z-hud); pointer-events:none; }
  .pill{ display:inline-flex; gap:8px; align-items:center; padding:6px 10px; margin:0 6px 6px 0;
         background:var(--c-pill); border:1px solid #1a2c47b0; border-radius:999px; font:800 12px ui-rounded;
         box-shadow:0 6px 18px rgba(0,0,0,.22) }
  #scoreTime{ position:absolute; right:12px; top:-46px; display:flex; gap:8px }
  #targetWrap{ display:none; }
  #targetBadge{ font-weight:900; }

  /* Quests + lines */
  .toast{ pointer-events:none; position:absolute; left:50%; bottom:18px; transform:translateX(-50%); background:#102038f0; border:1px solid #1a2c47; color:#eaf6ff;
          padding:8px 12px; border-radius:999px; font:800 12px ui-rounded; opacity:0; transition:opacity .15s; z-index:var(--z-hud); }
  .toast.show{ opacity:1 }
  .mission-line{position:absolute; left:50%; top:118px; transform:translateX(-50%); background:#0a1a2ee6; border:1px solid #1b2e4b; color:#eaf6ff;
                padding:6px 10px; border-radius:10px; font:800 12px ui-rounded; display:none; z-index:var(--z-hud);}

  /* Coach */
  .coach{ position:absolute; left:50%; transform:translateX(-50%); top:120px;
          width:min(880px,92vw); display:none; justify-content:center; z-index:var(--z-coach); }
  .coach.show{ display:flex }
  #coachText{ padding:10px 14px; border-radius:12px; background:#102038eb; border:1px solid #1b2e4b; color:#eaf6ff;
              font:900 14px ui-rounded; letter-spacing:.2px; box-shadow:0 12px 30px rgba(0,0,0,.3) }

  @keyframes flashDanger{0%{filter:none}50%{filter:brightness(1.25) saturate(1.1)}100%{filter:none}}
  .flash-danger{animation:flashDanger .18s linear}

  /* Spawned emojis (DOM) */
  #gameLayer #spawnHost .spawn-emoji, #gameLayer .spawn-emoji{
    position:absolute !important; left:0; top:0; transform:translate(-50%,-50%);
    z-index:var(--z-items,29); pointer-events:auto !important;
    padding:8px 12px; border-radius:18px; border:0;
    background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(0,0,0,.10));
    box-shadow:0 14px 28px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.18), inset 0 -1px 0 rgba(0,0,0,.18);
    text-shadow:0 2px 8px rgba(0,0,0,.35), 0 0 1px rgba(0,0,0,.5);
    font-size:clamp(42px, 6.5vw, 56px); line-height:1; transform-style:preserve-3d; backface-visibility:hidden;
    transition:transform .15s ease, filter .15s ease, opacity .15s ease, box-shadow .15s ease;
    user-select:none; -webkit-tap-highlight-color:transparent;
  }
  @media(hover:hover){
    #gameLayer .spawn-emoji:hover{ transform:translate(-50%,-50%) translateZ(12px) scale(1.06); filter:drop-shadow(0 10px 24px rgba(0,0,0,.35)); box-shadow:0 16px 34px rgba(0,0,0,.40), inset 0 1px 0 rgba(255,255,255,.22), inset 0 -1px 0 rgba(0,0,0,.20); }
    #gameLayer .spawn-emoji:active{ transform:translate(-50%,-50%) translateZ(2px) scale(.98); filter:drop-shadow(0 6px 18px rgba(0,0,0,.32)); }
  }

  /* Modals */
  .modal{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:#0008; z-index:120 }
  .modal .box{ background:#0f1d31; border:1px solid #1b2e4b; border-radius:14px; padding:16px; width:min(680px,92vw) }
  .modal h3{ margin:0 0 8px; font:900 18px ui-rounded }
  .modal pre{ white-space:pre-wrap; margin:0 0 14px; font:13px/1.4 ui-monospace; color:#dff }

  #lb_table table{ width:100%; border-collapse:collapse; font:600 12px ui-rounded; }
  #lb_table th,#lb_table td{ padding:8px; border-bottom:1px solid #13243d; }
  #lb_table th{ text-align:left; border-bottom:1px solid #19304e; }
  #lb_table td:last-child{ text-align:right; }

  /* Plate HUD */
  #plateTracker{ display:none; position:fixed; left:50%; top:60px; transform:translateX(-50%); z-index:95; }
  .plate-pills{ display:flex; gap:10px; flex-wrap:wrap; justify-content:center }
  .plate-pills .pill{ position:relative; display:flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; background:#102038; border:1px solid #1a2c47; }
  .plate-pills .pill i{ position:absolute; left:0; top:0; bottom:0; border-radius:999px; background:#41d2a955; width:0%; transition:width .25s }
  .plate-pills .pill.ok{ background:#123522 }

  @media (max-width:820px){ #gameLayer{ height:calc(100vh - 320px) } #scoreTime{ top:-50px } }
  @media (max-width:560px){ #hero h1{ font-size:22px } .menu .grid{ grid-template-columns:repeat(2,1fr) } #gameLayer{ height:calc(100vh - 360px) } }
  </style>
</head>
<body data-mode="goodjunk" data-diff="Normal">
  <div id="app">
    <section id="hero">
      <h1>Hero Health Academy</h1>
      <p class="sub">‡πÇ‡∏†‡∏ä‡∏ô‡∏≤‡∏Å‡∏≤‡∏£ ‚Ä¢ ‡∏™‡∏°‡∏î‡∏∏‡∏•‡∏ô‡πâ‡∏≥ ‚Ä¢ ‡∏à‡∏±‡∏î‡∏à‡∏≤‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û ‚Äî ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÇ‡∏Ñ‡πâ‡∏ä‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</p>
    </section>

    <section class="menu" id="menuBar">
      <div class="grid">
        <button class="tile active" id="m_goodjunk" type="button">
          <i>ü•¶</i><b>Good vs Junk</b><small>‡πÄ‡∏Å‡πá‡∏ö‡∏î‡∏µ ‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏Ç‡∏¢‡∏∞</small>
        </button>
        <button class="tile" id="m_groups" type="button">
          <i>üç±</i><b>5 Food Groups</b><small>‡∏ï‡∏£‡∏á‡∏´‡∏°‡∏ß‡∏î ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πâ‡∏≤</small>
        </button>
        <button class="tile" id="m_hydration" type="button">
          <i>üíß</i><b>Hydration</b><small>‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏ä‡πà‡∏ß‡∏á 45‚Äì65%</small>
        </button>
        <button class="tile" id="m_plate" type="button">
          <i>üçΩÔ∏è</i><b>Healthy Plate</b><small>‡∏à‡∏±‡∏î‡∏à‡∏≤‡∏ô‡∏Ñ‡∏£‡∏ö‡πÇ‡∏Ñ‡∏ß‡∏ï‡∏≤</small>
        </button>
      </div>

      <div class="row">
        <div class="seg"><span class="lbl">Mode</span><span class="value" id="modeName">Good vs Junk</span></div>
        <div class="seg">
          <span class="lbl">Difficulty</span>
          <button class="chip" id="d_easy"  type="button">Easy</button>
          <button class="chip active" id="d_normal" type="button">Normal</button>
          <button class="chip" id="d_hard"  type="button">Hard</button>
          <span class="value" id="difficulty" style="margin-left:6px">Normal</span>
        </div>
        <div class="seg">
          <label class="lbl" for="playerName">Name</label>
          <input id="playerName" type="text" placeholder="Player"
                 style="padding:8px 10px;border-radius:10px;border:1px solid #19304e;background:#0e1b30;color:#eaf6ff;min-width:160px">
          <button class="chip" id="btn_board" type="button">Leaderboard</button>
          <button class="chip" id="langToggle"  type="button">TH</button>
          <button class="chip" id="soundToggle" type="button">üîä</button>
          <button class="chip" id="gfxToggle"   type="button">‚ú®</button>
        </div>
      </div>

      <div class="cta"><button id="btn_start" class="start" type="button">START</button></div>
    </section>

    <section id="gameLayer" aria-label="playfield">
      <div id="spawnHost" aria-live="polite"></div>

      <!-- HUD -->
      <div class="hud" id="hudWrap" aria-hidden="false">
        <span class="pill" id="targetWrap"><span id="targetBadge">‚Äî</span></span>
        <div id="scoreTime">
          <span class="pill">‚≠ê <b id="score">0</b></span>
          <span class="pill">‚è± <b id="time">45</b>s</span>
        </div>
        <div id="questBar"><ul id="questChips"></ul></div>
        <div class="coach" id="coachHUD"><span id="coachText">Ready?</span></div>
        <div class="toast" id="toast"></div>
        <div class="mission-line" id="missionLine"></div>
      </div>

      <!-- Plate HUD -->
      <div id="plateTracker"><div id="platePills" class="plate-pills"></div></div>
    </section>
  </div>

  <!-- Help -->
  <div class="modal" id="help" role="dialog" aria-modal="true" aria-labelledby="h_help">
    <div class="box">
      <h3 id="h_help">‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏•‡πà‡∏ô</h3>
      <pre id="helpBody"></pre>
      <div style="display:flex;gap:10px;justify-content:flex-end">
        <button id="btn_ok" class="chip" type="button">OK</button>
      </div>
    </div>
  </div>

  <!-- Result -->
  <div class="modal" id="result" role="dialog" aria-modal="true" aria-label="Result">
    <div class="box" style="text-align:center">
      <h3>‡∏à‡∏ö‡πÄ‡∏Å‡∏°</h3>
      <p id="resultText" style="opacity:.9;margin:.4rem 0 1rem">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏™‡∏£‡∏∏‡∏õ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà</p>
      <div id="pbRow" style="font:700 13px ui-rounded;margin:.5rem 0;opacity:.9"></div>
      <div id="miniTop" style="text-align:left;background:#0b1626;border:1px solid #19304e;border-radius:10px;padding:10px;max-height:200px;overflow:auto"></div>
      <div style="display:flex;gap:10px;justify-content:center;margin-top:10px">
        <button class="chip" data-result="replay" type="button">Replay</button>
        <button class="chip" data-result="home"   type="button">Home</button>
        <button class="chip" id="btn_open_board"  type="button">Open Leaderboard</button>
      </div>
    </div>
  </div>

  <!-- Leaderboard -->
  <div class="modal" id="boardModal" role="dialog" aria-modal="true" aria-label="Leaderboard">
    <div class="box" style="width:min(820px,96vw)">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:10px;margin-bottom:8px">
        <h3 style="margin:0">Leaderboard</h3>
        <div style="display:flex;gap:8px;align-items:center">
          <select id="lb_scope" class="chip" style="padding:8px 10px">
            <option value="week">This Week</option>
            <option value="month" selected>This Month</option>
            <option value="year">This Year</option>
            <option value="all">All Time</option>
          </select>
          <button class="chip" id="lb_close" type="button">Close</button>
        </div>
      </div>
      <div id="lb_info" style="opacity:.85;margin:.25rem 0 .5rem"></div>
      <div id="lb_table" style="max-height:56vh;overflow:auto;border:1px solid #19304e;border-radius:10px"></div>
    </div>
  </div>

  <!-- Audio (unlocked in UI) -->
  <audio id="bgm-main" loop preload="auto" src=""></audio>
  <audio id="sfx-good"     preload="auto" src=""></audio>
  <audio id="sfx-bad"      preload="auto" src=""></audio>
  <audio id="sfx-perfect"  preload="auto" src=""></audio>
  <audio id="sfx-tick"     preload="auto" src=""></audio>
  <audio id="sfx-powerup"  preload="auto" src=""></audio>

  <!-- Scripts -->
  <script type="module" src="game/boot.js"></script>
  <script type="module" src="game/ui.js"></script>
  <!-- main.js loaded dynamically by boot.js (points to game/main.js) -->
</body>
</html>
