<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hero Health Academy</title>

  <!-- ‡∏ä‡∏µ‡πâ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå HeroHealth ‡∏ö‡∏ô GitHub Pages -->
  <base href="/webxr-health-mobile/HeroHealth/">

  <link rel="stylesheet" href="styles/game.css" />

  <!-- ‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏±‡∏î: HUD/‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô‡∏™‡∏∏‡∏î‡πÄ‡∏™‡∏°‡∏≠ + canvas ‡πÑ‡∏°‡πà‡∏Å‡∏¥‡∏ô‡∏Ñ‡∏•‡∏¥‡∏Å -->
  <style>
    #c{position:fixed;inset:0;z-index:1;pointer-events:none}
    .hud,.menu,.modal,.coach,.item{z-index:220;pointer-events:auto}
    .hud{font-weight:800;text-shadow:0 2px 6px rgba(0,0,0,.7)}
    .item{font-size:clamp(40px,6vw,68px);min-width:56px;min-height:56px}
    #statusLine{
      position:fixed;top:68px;left:50%;transform:translateX(-50%);
      padding:6px 12px;border-radius:10px;font-weight:900;z-index:300;
      background:rgba(0,0,0,.45);color:#fff
    }
    #menuBar{
      position:fixed;left:10px;bottom:10px;top:auto;transform:none;
      width:auto;max-width:52vw;backdrop-filter:blur(6px)
    }
    .modal .card{background:rgba(20,24,44,.95);border:1px solid rgba(255,255,255,.15);border-radius:16px}
  </style>
</head>
<body>
  <!-- Header / Toggles -->
  <header class="brand">
    <div id="brandTitle">HERO HEALTH ACADEMY</div>
    <div class="spacer"></div>
    <button id="langToggle" class="btn">üáπüá≠ TH/EN</button>
    <button id="gfxToggle" class="btn">üéõÔ∏è ‡∏Å‡∏£‡∏≤‡∏ü‡∏¥‡∏Å: ‡∏õ‡∏Å‡∏ï‡∏¥</button>
    <button id="soundToggle" class="btn">üîä ‡πÄ‡∏™‡∏µ‡∏¢‡∏á: ‡πÄ‡∏õ‡∏¥‡∏î</button>
  </header>

  <!-- Render Surface -->
  <canvas id="c"></canvas>

  <!-- HUD -->
  <section class="hud">
    <div>
      <span id="t_score">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</span>: <b id="score">0</b> |
      <span id="t_combo">‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö</span>: <b id="combo">x0</b> |
      <span id="t_time">‡πÄ‡∏ß‡∏•‡∏≤</span>: <b id="time">60</b>s
    </div>

    <!-- Fever -->
    <div id="feverBarWrap" class="bar slim"><div id="feverBar" style="width:0%"></div></div>

    <!-- Mission / ‡πÄ‡∏õ‡πâ‡∏≤ / ‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤ / ‡∏ô‡πâ‡∏≥ -->
    <div id="missionLine" style="display:none; font-weight:800;">‚Äî</div>
    <div id="targetWrap" style="display:none">üéØ <span id="t_target">‡∏´‡∏°‡∏ß‡∏î</span>: <span id="targetBadge">‚Äî</span></div>
    <div id="plateTracker" style="display:none">üç± <span id="t_quota">‡πÇ‡∏Ñ‡∏ß‡∏ï‡∏≤</span>: <span id="platePills"></span></div>
    <div id="hydroWrap" style="display:none">
      üíß <span id="t_hydro">‡∏™‡∏°‡∏î‡∏∏‡∏•‡∏ô‡πâ‡∏≥</span>: <span id="hydroLabel">‚Äî</span>
      <div class="bar"><div id="hydroBar"></div></div>
    </div>

    <div id="fever" class="fever" style="display:none">FEVER!</div>
  </section>

  <!-- ‡πÇ‡∏´‡∏°‡∏î/‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô -->
  <div id="statusLine">‡πÇ‡∏´‡∏°‡∏î: ‡∏î‡∏µ vs ‡∏Ç‡∏¢‡∏∞ ‚Ä¢ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å: ‡∏õ‡∏Å‡∏ï‡∏¥</div>

  <!-- ‡πÇ‡∏Ñ‡πâ‡∏ä -->
  <div id="coachHUD" class="coach" style="display:none">
    <div id="coachText">...</div>
  </div>

  <!-- ‡πÄ‡∏°‡∏ô‡∏π -->
  <section id="menuBar" class="menu">
    <div class="row">
      <button class="tag" data-action="mode" data-value="goodjunk"  id="m_goodjunk">ü•ó ‡∏î‡∏µ vs ‡∏Ç‡∏¢‡∏∞</button>
      <button class="tag" data-action="mode" data-value="groups"    id="m_groups">üçΩÔ∏è ‡∏à‡∏≤‡∏ô 5 ‡∏´‡∏°‡∏π‡πà</button>
      <button class="tag" data-action="mode" data-value="hydration" id="m_hydration">üíß ‡∏™‡∏°‡∏î‡∏∏‡∏•‡∏ô‡πâ‡∏≥</button>
      <button class="tag" data-action="mode" data-value="plate"     id="m_plate">üç± ‡∏à‡∏±‡∏î‡∏à‡∏≤‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</button>
    </div>
    <div class="row">
      <button class="tag" data-action="diff" data-value="Easy"   id="d_easy">‡∏á‡πà‡∏≤‡∏¢</button>
      <button class="tag" data-action="diff" data-value="Normal" id="d_normal">‡∏õ‡∏Å‡∏ï‡∏¥</button>
      <button class="tag" data-action="diff" data-value="Hard"   id="d_hard">‡∏¢‡∏≤‡∏Å</button>
      <span class="modeLabel">
        <span id="t_mode">‡πÇ‡∏´‡∏°‡∏î</span>: <b id="modeName">‡∏î‡∏µ vs ‡∏Ç‡∏¢‡∏∞</b> ‚Ä¢
        <span id="t_diff">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å</span>: <b id="difficulty">‡∏õ‡∏Å‡∏ï‡∏¥</b>
      </span>
    </div>
    <div class="row">
      <button class="btn" data-action="start"   id="btn_start">‚ñ∂ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</button>
      <button class="btn" data-action="pause"   id="btn_pause">‚è∏ ‡∏û‡∏±‡∏Å</button>
      <button class="btn" data-action="restart" id="btn_restart">‚Üª ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
      <button class="btn" data-action="help"    id="btn_help">‚ùì ‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏•‡πà‡∏ô</button>
    </div>
  </section>

  <!-- Help -->
  <div id="help" class="modal" style="display:none">
    <div class="card">
      <h3 id="h_help">‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏•‡πà‡∏ô</h3>
      <pre id="helpBody">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î ‚Üí ‡πÄ‡∏Å‡πá‡∏ö‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‚Üí ‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏Å‡∏±‡∏ö‡∏î‡∏±‡∏Å</pre>
      <button class="btn" id="btn_ok">‡πÇ‡∏≠‡πÄ‡∏Ñ</button>
    </div>
  </div>

  <!-- Result -->
  <div id="result" class="modal" style="display:none">
    <div class="card">
      <h3>‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•</h3>
      <div id="resCore"></div>
      <div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap">
        <button class="btn" id="btn_replay">‚Üª ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
        <button class="btn" id="btn_home">üè† ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
      </div>
    </div>
  </div>

  <!-- SFX -->
  <audio id="sfx-good"     preload="auto" src="assets/sfx/good.mp3"></audio>
  <audio id="sfx-bad"      preload="auto" src="assets/sfx/bad.mp3"></audio>
  <audio id="sfx-perfect"  preload="auto" src="assets/sfx/perfect.mp3"></audio>
  <audio id="sfx-tick"     preload="auto" src="assets/sfx/tick.mp3"></audio>
  <audio id="sfx-powerup"  preload="auto" src="assets/sfx/powerup.mp3"></audio>

  <!-- ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏´‡∏•‡∏±‡∏Å (‡πÇ‡∏°‡∏î‡∏π‡∏•‡∏ï‡∏±‡∏ß‡πÄ‡∏ï‡πá‡∏°) -->
  <script type="module" src="game/main.js"></script>

  <!-- Fallback ‡πÅ‡∏à‡πâ‡∏á error ‡∏ñ‡πâ‡∏≤ main.js ‡πÑ‡∏°‡πà‡∏ö‡∏π‡∏ï -->
  <script>
    (function(){
      const w=document.createElement('div');
      w.id='bootWarn';
      w.style.cssText='position:fixed;top:0;left:0;right:0;background:#b00020;color:#fff;padding:10px 12px;font-weight:700;z-index:9999;display:none';
      w.textContent='‚ö†Ô∏è ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ‡∏ï‡∏£‡∏ß‡∏à path game/main.js ‡∏´‡∏£‡∏∑‡∏≠ base href';
      document.body.appendChild(w);
      setTimeout(()=>{ if(!window.__HHA_BOOT_OK){ w.style.display='block'; } }, 1800);
    })();
  </script>

  <!-- HOWTO ‡∏ï‡πà‡∏≠‡πÇ‡∏´‡∏°‡∏î (‡∏≠‡πà‡∏≤‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏à‡∏≤‡∏Å main.js) -->
  <script>
    const HOWTO = {
      TH:{
        goodjunk:`üéØ ‡∏î‡∏µ vs ‡∏Ç‡∏¢‡∏∞
‡πÄ‡∏Å‡πá‡∏ö‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏î‡∏µ ü•¶üçé ‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏Ç‡∏≠‡∏á‡∏Ç‡∏¢‡∏∞ üçîüçüü•§
‡∏ï‡πà‡∏≠‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö‡πÉ‡∏´‡πâ‡∏™‡∏π‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠ Fever!`,
        groups:`üçΩÔ∏è ‡∏à‡∏≤‡∏ô 5 ‡∏´‡∏°‡∏π‡πà
‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏´‡∏°‡∏ß‡∏î‡∏ö‡∏ô HUD (‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤/‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö)`,
        hydration:`üíß ‡∏™‡∏°‡∏î‡∏∏‡∏•‡∏ô‡πâ‡∏≥
‡∏£‡∏±‡∏Å‡∏©‡∏≤ 45‚Äì65% ‚Ä¢ ‡∏ô‡πâ‡∏≥‡πÄ‡∏õ‡∏•‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°, ‡∏ô‡πâ‡∏≥‡∏´‡∏ß‡∏≤‡∏ô/‡∏Å‡∏≤‡πÅ‡∏ü‡∏•‡∏î
>65 + ‡∏ô‡πâ‡∏≥‡∏´‡∏ß‡∏≤‡∏ô = ‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ‚Ä¢ <45 + ‡∏ô‡πâ‡∏≥‡∏´‡∏ß‡∏≤‡∏ô = ‡∏´‡∏±‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
N=Normalize(55%) cd25s ‚Ä¢ G=Guard 5s`,
        plate:`üç± ‡∏à‡∏±‡∏î‡∏à‡∏≤‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û
‡πÉ‡∏™‡πà‡∏Ñ‡∏£‡∏ö: ‡∏ò‡∏±‡∏ç‡∏û‡∏∑‡∏ä2 ‡∏ú‡∏±‡∏Å2 ‡πÇ‡∏õ‡∏£‡∏ï‡∏µ‡∏ô1 ‡∏ú‡∏•‡πÑ‡∏°‡πâ1 ‡∏ô‡∏°1 ‡πÄ‡∏û‡∏∑‡πà‡∏≠ Perfect Bonus`
      },
      EN:{
        goodjunk:`üéØ Good vs Junk
Collect healthy ü•¶üçé, avoid junk üçîüçüü•§
Build combo to enter Fever!`,
        groups:`üçΩÔ∏è 5 Food Groups
Match the HUD target group (rotates by time/combo)`,
        hydration:`üíß Hydration
Keep 45‚Äì65% ‚Ä¢ Water up, Sugary/Coffee down
>65 + sugary = +score ‚Ä¢ <45 + sugary = -score
N=Normalize(55%) cd25s ‚Ä¢ G=Guard 5s`,
        plate:`üç± Healthy Plate
Complete: Grain2 Veg2 Protein1 Fruit1 Dairy1 for Perfect Bonus`
      }
    };
    function getLang(){ return /TH/.test(document.getElementById('langToggle')?.textContent||'TH') ? 'TH' : 'EN'; }
    function getMode(){ return (window.__HHA_STATE?.modeKey) || 'goodjunk'; }
    document.getElementById('btn_help')?.addEventListener('click', ()=>{
      const body=document.getElementById('helpBody');
      body.textContent = HOWTO[getLang()][getMode()] || HOWTO.TH.goodjunk;
      document.getElementById('help').style.display='flex';
    });
    document.getElementById('btn_ok')?.addEventListener('click', ()=> document.getElementById('help').style.display='none');
    document.getElementById('btn_replay')?.addEventListener('click', ()=>{ document.getElementById('result').style.display='none'; window.start?.(); });
    document.getElementById('btn_home')  ?.addEventListener('click', ()=>{ document.getElementById('result').style.display='none'; });
  </script>
</body>
</html>
