<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hero Health Academy</title>

  <!-- ‚úÖ Base Path ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö GitHub Pages -->
  <base href="/webxr-health-mobile/HeroHealth/">

  <!-- ‚úÖ Styles -->
  <link rel="stylesheet" href="styles/game.css" />

  <style>
    /* ===== HUD + MENU ‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡πÅ‡∏•‡∏∞‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô‡∏™‡∏∏‡∏î‡πÄ‡∏™‡∏°‡∏≠ ===== */
    #c { pointer-events: none; z-index: 1; position: fixed; inset: 0; }
    .hud, .menu, .coach, .modal { pointer-events: auto; z-index: 200; }
    .hud {
      font-size: 18px; font-weight: 800;
      background: rgba(0,0,0,0.3); border-radius: 10px;
      padding: 6px 10px; text-shadow: 0 2px 6px #000;
    }
    .menu { bottom: 10px; left: 10px; right: auto; max-width: 500px; }
    .item { font-size: 48px !important; }
    #statusLine {
      position: fixed; top: 80px; left: 50%;
      transform: translateX(-50%);
      background: rgba(0,0,0,0.4);
      border-radius: 8px; padding: 6px 12px;
      font-weight: 900; color: #fff; z-index: 300;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="brand">
    <div id="brandTitle">HERO HEALTH ACADEMY</div>
    <div class="spacer"></div>
    <button id="langToggle" class="btn">üáπüá≠ TH/EN</button>
    <button id="gfxToggle" class="btn">üéõÔ∏è ‡∏Å‡∏£‡∏≤‡∏ü‡∏¥‡∏Å: ‡∏õ‡∏Å‡∏ï‡∏¥</button>
    <button id="soundToggle" class="btn">üîä ‡πÄ‡∏™‡∏µ‡∏¢‡∏á: ‡πÄ‡∏õ‡∏¥‡∏î</button>
  </header>

  <!-- Canvas -->
  <canvas id="c"></canvas>

  <!-- HUD -->
  <section class="hud">
    <div>
      ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <b id="score">0</b> |
      ‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö: <b id="combo">x0</b> |
      ‡πÄ‡∏ß‡∏•‡∏≤: <b id="time">60</b>s
    </div>
    <div id="feverBarWrap" class="bar slim">
      <div id="feverBar" style="width:0%"></div>
    </div>
    <div id="missionLine" style="display:none;">‚Äî</div>
  </section>

  <div id="statusLine">‡πÇ‡∏´‡∏°‡∏î: ‡∏î‡∏µ vs ‡∏Ç‡∏¢‡∏∞ ‚Ä¢ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å: ‡∏õ‡∏Å‡∏ï‡∏¥</div>

  <!-- Coach -->
  <div id="coachHUD" class="coach" style="display:none">
    <div id="coachText">...</div>
  </div>

  <!-- Menu -->
  <section id="menuBar" class="menu">
    <div class="row">
      <button class="tag" data-action="mode" data-value="goodjunk">ü•ó ‡∏î‡∏µ vs ‡∏Ç‡∏¢‡∏∞</button>
      <button class="tag" data-action="mode" data-value="groups">üçΩÔ∏è ‡∏à‡∏≤‡∏ô 5 ‡∏´‡∏°‡∏π‡πà</button>
      <button class="tag" data-action="mode" data-value="hydration">üíß ‡∏™‡∏°‡∏î‡∏∏‡∏•‡∏ô‡πâ‡∏≥</button>
      <button class="tag" data-action="mode" data-value="plate">üç± ‡∏à‡∏±‡∏î‡∏à‡∏≤‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</button>
    </div>
    <div class="row">
      <button class="tag" data-action="diff" data-value="Easy">‡∏á‡πà‡∏≤‡∏¢</button>
      <button class="tag" data-action="diff" data-value="Normal">‡∏õ‡∏Å‡∏ï‡∏¥</button>
      <button class="tag" data-action="diff" data-value="Hard">‡∏¢‡∏≤‡∏Å</button>
    </div>
    <div class="row">
      <button class="btn" data-action="start" id="btn_start">‚ñ∂ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</button>
      <button class="btn" data-action="pause" id="btn_pause">‚è∏ ‡∏û‡∏±‡∏Å</button>
      <button class="btn" data-action="restart" id="btn_restart">‚Üª ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
      <button class="btn" data-action="help" id="btn_help">‚ùì ‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏•‡πà‡∏ô</button>
    </div>
  </section>

  <!-- Help Modal -->
  <div id="help" class="modal" style="display:none">
    <div class="card">
      <h3>‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏•‡πà‡∏ô</h3>
      <pre id="helpBody">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î ‚Üí ‡πÄ‡∏Å‡πá‡∏ö‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‚Üí ‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏Å‡∏±‡∏ö‡∏î‡∏±‡∏Å</pre>
      <button id="btn_ok" class="btn">‡πÇ‡∏≠‡πÄ‡∏Ñ</button>
    </div>
  </div>

  <!-- Result Modal -->
  <div id="result" class="modal" style="display:none">
    <div class="card">
      <h3>‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•</h3>
      <div id="resCore"></div>
      <div style="margin-top:12px; display:flex; gap:8px;">
        <button id="btn_replay" class="btn">‚Üª ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
        <button id="btn_home" class="btn">üè† ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
      </div>
    </div>
  </div>

  <!-- Sound -->
  <audio id="sfx-good" preload="auto" src="assets/sfx/good.mp3"></audio>
  <audio id="sfx-bad" preload="auto" src="assets/sfx/bad.mp3"></audio>
  <audio id="sfx-powerup" preload="auto" src="assets/sfx/powerup.mp3"></audio>

  <!-- Scripts -->
  <script type="module" src="game/main.js"></script>

  <!-- Fallback -->
  <script>
    (function(){
      const w=document.createElement('div');
      w.textContent='‚ö†Ô∏è ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ‡∏ï‡∏£‡∏ß‡∏à path game/main.js ‡∏´‡∏£‡∏∑‡∏≠ base href';
      w.style.cssText='position:fixed;top:0;left:0;right:0;background:#b00020;color:#fff;padding:10px;font-weight:700;display:none;z-index:9999';
      document.body.appendChild(w);
      setTimeout(()=>{ if(!window.__HHA_BOOT_OK){ w.style.display='block'; } },2000);
    })();
  </script>
    <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏ö‡∏ö ‚Äú‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏•‡πà‡∏ô‡∏ï‡πà‡∏≠‡πÇ‡∏´‡∏°‡∏î‚Äù -->
  <script>
  const HOWTO = {
    TH: {
      goodjunk:`üéØ ‡πÇ‡∏´‡∏°‡∏î‡∏î‡∏µ vs ‡∏Ç‡∏¢‡∏∞  
‡πÄ‡∏Å‡πá‡∏ö‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏î‡∏µ ü•¶üçé ‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏Ç‡∏≠‡∏á‡∏Ç‡∏¢‡∏∞ üçîüçüü•§  
‡∏ï‡πà‡∏≠‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö‡πÑ‡∏î‡πâ‡πÇ‡∏ö‡∏ô‡∏±‡∏™ x2 x4 x8 ‡πÅ‡∏•‡∏∞‡∏à‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡πÇ‡∏´‡∏°‡∏î Fever!`,
      groups:`üçΩÔ∏è ‡πÇ‡∏´‡∏°‡∏î‡∏à‡∏≤‡∏ô 5 ‡∏´‡∏°‡∏π‡πà  
‡πÄ‡∏Å‡πá‡∏ö‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏´‡∏°‡∏ß‡∏î‡∏ó‡∏µ‡πà HUD ‡∏£‡∏∞‡∏ö‡∏∏ (‡πÄ‡∏ä‡πà‡∏ô ‡∏ú‡∏•‡πÑ‡∏°‡πâ / ‡πÇ‡∏õ‡∏£‡∏ï‡∏µ‡∏ô / ‡∏ú‡∏±‡∏Å)  
‡∏ñ‡∏π‡∏Å +7 ‡∏ú‡∏¥‡∏î ‚Äì2 ‡∏ó‡∏∏‡∏Å 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏à‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏°‡∏ß‡∏î‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢`,
      hydration:`üíß ‡πÇ‡∏´‡∏°‡∏î‡∏™‡∏°‡∏î‡∏∏‡∏•‡∏ô‡πâ‡∏≥  
‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏°‡∏î‡∏∏‡∏• 45‚Äì65 %  
‡∏ô‡πâ‡∏≥‡πÄ‡∏õ‡∏•‡πà‡∏≤ = ‡πÄ‡∏û‡∏¥‡πà‡∏° / ‡∏ô‡πâ‡∏≥‡∏´‡∏ß‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏≤‡πÅ‡∏ü = ‡∏•‡∏î  
‡∏ñ‡πâ‡∏≤ >65 ‡πÅ‡∏•‡πâ‡∏ß‡∏¢‡∏±‡∏á‡∏î‡∏∑‡πà‡∏° ‡∏ô‡πâ‡∏≥‡∏´‡∏ß‡∏≤‡∏ô = ‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô  
‡∏ñ‡πâ‡∏≤ <45 ‡πÅ‡∏•‡πâ‡∏ß‡∏î‡∏∑‡πà‡∏° ‡∏ô‡πâ‡∏≥‡∏´‡∏ß‡∏≤‡∏ô = ‡∏´‡∏±‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô  
‡∏õ‡∏∏‡πà‡∏° N = Normalize (55 %) ‡∏Ñ‡∏π‡∏•‡∏î‡∏≤‡∏ß‡∏ô‡πå 25 s  
‡∏õ‡∏∏‡πà‡∏° G = Guard 5 s`,
      plate:`üç± ‡πÇ‡∏´‡∏°‡∏î‡∏à‡∏±‡∏î‡∏à‡∏≤‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û  
‡∏à‡∏±‡∏î‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö 5 ‡∏´‡∏°‡∏π‡πà (‡∏ò‡∏±‡∏ç‡∏û‡∏∑‡∏ä2 ‡∏ú‡∏±‡∏Å2 ‡πÇ‡∏õ‡∏£‡∏ï‡∏µ‡∏ô1 ‡∏ú‡∏•‡πÑ‡∏°‡πâ1 ‡∏ô‡∏°1)  
‡∏Ñ‡∏£‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‚ÄúPerfect Plate!‚Äù ‡πÑ‡∏î‡πâ‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏™‡∏π‡∏á`
    },
    EN: {
      goodjunk:`üéØ Good vs Junk  
Collect healthy foods ü•¶üçé and avoid junk üçîüçüü•§  
Chain combos for x2/x4/x8 bonus and Fever mode!`,
      groups:`üçΩÔ∏è 5 Food Groups  
Collect the food matching the HUD target group  
Right +7 / Wrong ‚Äì2 ‚Äî changes target every 10 s`,
      hydration:`üíß Hydration Balance  
Keep your hydration 45‚Äì65 %  
Water increases / Sugary or coffee drinks decrease  
If >65 and choose sugary ‚Üí gain score  
If <45 and choose sugary ‚Üí lose score  
Keys: N = Normalize (55 %) cd 25 s ‚Ä¢ G = Guard 5 s`,
      plate:`üç± Healthy Plate  
Fill all 5 food groups (2 grains, 2 veg, 1 protein, 1 fruit, 1 dairy)  
Complete for a Perfect Plate bonus!`
    }
  };

  document.getElementById('btn_help')?.addEventListener('click', ()=>{
    const lang = /TH/.test(document.getElementById('langToggle')?.textContent||'') ? 'TH':'EN';
    const mode = document.querySelector('.tag[data-action="mode"].active')?.dataset.value ||
                 (window.state?.modeKey || 'goodjunk');
    const body = document.getElementById('helpBody');
    body.textContent = (HOWTO[lang][mode] || HOWTO[lang].goodjunk);
    document.getElementById('help').style.display='flex';
  });
  document.getElementById('btn_ok')?.addEventListener('click',()=>{
    document.getElementById('help').style.display='none';
  });
  </script>

</body>
</html>
