<!doctype html>
<html lang="th" data-hha-mode="hub">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
  <title>Hero Health Academy</title>

  <!-- Styles -->
  <link rel="stylesheet" href="./styles/game.css?v=2025-10-28"/>
  <link rel="stylesheet" href="./styles/groups.css?v=2025-10-28"/>

  <meta name="color-scheme" content="dark light"/>
</head>
<body class="ui-mode-menu">

  <!-- ====== BG Canvas (doesn't block click) ====== -->
  <canvas id="c" aria-hidden="true"></canvas>

  <!-- ====== Header / Brand & Quick Controls ====== -->
  <header class="brand" id="menuHeader">
    <strong>Hero Health Academy</strong>
    <span class="spacer"></span>

    <button class="btn" data-action="toggle-lang" aria-label="Language">TH/EN</button>
    <button class="btn" data-action="open-help" aria-label="How to play">?</button>
  </header>

  <!-- ====== HUD (score / combo / time / fever / quests / target / plate / hydration) ====== -->
  <section id="hudWrap" class="hud">
    <!-- Top row: Score / Combo / Time -->
    <div class="cardlike" id="scoreRow" style="display:inline-flex;gap:10px;align-items:center;">
      <div class="cardlike" style="padding:6px 10px;border-radius:10px;background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.12);">
        <b>Score</b>&nbsp;<span id="score">0</span>
      </div>
      <div class="cardlike" style="padding:6px 10px;border-radius:10px;background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.12);">
        <b>Combo</b>&nbsp;<span id="combo">x0</span>
      </div>
      <div class="cardlike" style="padding:6px 10px;border-radius:10px;background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.12);">
        <b>Time</b>&nbsp;<span id="time">60</span>s
      </div>
      <div class="cardlike fever" id="fever" style="padding:6px 10px;border-radius:10px;background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.12);">
        FEVER
      </div>
    </div>

    <!-- Fever bar -->
    <div id="feverBarWrap" class="bar slim cardlike" style="width:min(680px,90vw);">
      <div id="feverBar" style="width:0%"></div>
    </div>

    <!-- Power-ups bar -->
    <div id="powerBar" class="powerbar cardlike" aria-label="Power-ups">
      <button class="pseg" data-k="x2" data-action="power-x2" aria-label="Score x2">
        <span>√ó2</span><i></i>
      </button>
      <button class="pseg" data-k="freeze" data-action="power-freeze" aria-label="Freeze time">
        <span>‚ùÑ</span><i></i>
      </button>
      <button class="pseg" data-k="sweep" data-action="power-sweep" aria-label="Sweep">
        <span>üßπ</span><i></i>
      </button>
    </div>

    <!-- Mini Quests -->
    <div id="questChips" class="cardlike" aria-live="polite" style="align-self:center;max-width:min(96vw,980px);"></div>

    <!-- Target badge (Groups mode & others) -->
    <div id="targetWrap" class="hud-passive" style="display:none;">
      <span>üéØ</span>
      <span id="targetBadge">‚Äî</span>
    </div>

    <!-- Healthy Plate tracker -->
    <aside id="plateTracker" class="hud-passive" style="display:none">
      <h4>Healthy Plate</h4>
      <div id="platePills">
        <!-- plate.js ‡∏à‡∏∞‡πÄ‡∏ï‡∏¥‡∏° .pill ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏´‡∏°‡∏ß‡∏î‡∏•‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏≠‡∏á -->
        <!-- ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á (‡πÇ‡∏Ñ‡∏£‡∏á): 
        <div class="pill"><b>‡∏ú‡∏±‡∏Å</b><span>0/3</span><i style="width:0%"></i></div>
        -->
      </div>
    </aside>

    <!-- Hydration bar -->
    <div id="hydroWrap" class="hud-passive" style="display:none">
      <div id="hydroBar" class="hydroBar" data-zone="OK">
        <div class="seg low">LOW</div>
        <div class="seg ok">OK</div>
        <div class="seg high">HIGH</div>
        <div class="needle" id="hydroNeedle" style="left:50%"></div>
        <!-- optional fever flames -->
        <div class="flame"><i></i><i></i><i></i></div>
      </div>
    </div>
  </section>

  <!-- Coach bubble (auto-creates if missing, but‡πÄ‡∏£‡∏≤‡∏ß‡∏≤‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏¢) -->
  <div id="coachHUD" class="hud-passive" style="position:fixed;top:104px;left:50%;transform:translateX(-50%);z-index:96;display:flex;">
    <span id="coachText">‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÑ‡∏´‡∏°? ‡∏•‡∏∏‡∏¢‡πÄ‡∏•‡∏¢!</span>
  </div>

  <!-- Toast (mini) -->
  <div id="toast" class="toast" style="display:none" aria-live="polite"></div>

  <!-- Mission line (optional) -->
  <div id="missionLine" class="hud-passive" aria-live="polite" style="display:none"></div>

  <!-- ====== Game Layer (DOM targets spawn here; click receives) ====== -->
  <main id="stage">
    <div id="gameLayer" class="game-wrap" role="application" aria-label="Gameplay Area">
      <div id="spawnHost" aria-hidden="true"></div>
    </div>
  </main>

  <!-- ====== Countdown Overlay ====== -->
  <div id="cdOverlay" style="display:none;">
    <div id="cdNum">3</div>
  </div>

  <!-- ====== Result / Help Modal (skeleton) ====== -->
  <div id="resultModal" class="modal" aria-hidden="true">
    <div class="card">
      <header style="display:flex;align-items:center;justify-content:space-between;gap:8px;">
        <h3 style="margin:0;">‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô / Results</h3>
        <button class="btn" data-modal-close>‚úï</button>
      </header>
      <div class="body" id="resultBody" style="margin-top:12px;">
        <!-- main.js ‡∏à‡∏∞‡πÄ‡∏ï‡∏¥‡∏°‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏• -->
      </div>
      <footer style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end;">
        <button class="btn" data-action="restart">‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
        <button class="btn" data-action="back-to-menu">‡πÄ‡∏°‡∏ô‡∏π</button>
      </footer>
    </div>
  </div>

  <!-- ====== Bottom Menu (modes & actions) ====== -->
  <nav id="menuBar" class="menu" data-ui="menu">
    <div class="row">
      <span class="tag">Mode</span>
      <button class="btn" data-mode="goodjunk">Good vs Trash</button>
      <button class="btn" data-mode="plate">Balanced Plate</button>
      <button class="btn" data-mode="hydration">Water Balance</button>
      <button class="btn" data-mode="healthy">Healthy Plate</button>
      <span class="spacer"></span>
      <span class="modeLabel" id="modeLabel">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î</span>
    </div>
    <div class="row">
      <button class="btn" data-action="start">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô</button>
      <button class="btn" data-action="stats">‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</button>
      <button class="btn" data-action="daily">Daily Quest</button>
      <button class="btn" data-action="help">‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏•‡πà‡∏ô</button>
    </div>
  </nav>

  <!-- ====== Optional Gaze Reticle host (for XR) ====== -->
  <div id="gazeReticle" class="hud-passive" aria-hidden="true" style="position:fixed;left:50%;top:50%;">
    <i></i><b></b>
  </div>

  <!-- ====== Scripts ====== -->
  <!-- THREE is imported inside main.js via ESM; keep type="module" -->
  <script type="module" src="./game/main.js?v=live"></script>

  <!-- Fallback note:
       ‡∏ñ‡πâ‡∏≤ path ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏ï‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡πÇ‡∏Ñ‡∏£‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡πÉ‡∏´‡πâ‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏ä‡∏µ‡πâ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÑ‡∏ü‡∏•‡πå‡∏à‡∏£‡∏¥‡∏á ‡πÄ‡∏ä‡πà‡∏ô ../HeroHealth/game/main.js -->
</body>
</html>
