<!doctype html>
<html lang="th" data-hha-lang="TH">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Hero Health Academy</title>

  <link rel="preconnect" href="https://unpkg.com" crossorigin>
  <link rel="stylesheet" href="./styles/game.css">

  <!-- SFX / BGM assets -->
  <audio id="bgm-main" preload="auto" loop></audio>
  <audio id="sfx-good" preload="auto"></audio>
  <audio id="sfx-bad" preload="auto"></audio>
  <audio id="sfx-perfect" preload="auto"></audio>
  <audio id="sfx-tick" preload="auto"></audio>
  <audio id="sfx-powerup" preload="auto"></audio>
</head>
<body data-mode="goodjunk" data-diff="Normal">
  <canvas id="c" aria-hidden="true"></canvas>

  <div id="app">
    <!-- HERO -->
    <section id="hero">
      <h1>Hero Health Academy</h1>
      <p class="sub">‡πÇ‡∏†‡∏ä‡∏ô‡∏≤‡∏Å‡∏≤‡∏£ ‚Ä¢ ‡∏ô‡πâ‡∏≥‡∏î‡∏∑‡πà‡∏° ‚Ä¢ ‡∏à‡∏≤‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û ‚Ä¢ ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏≠‡∏≤‡∏´‡∏≤‡∏£</p>
    </section>

    <!-- MENU -->
    <section id="menuBar" class="menu">
      <div class="grid">
        <button id="m_goodjunk" class="tile active" data-mode="goodjunk"><i>ü•ó</i><b>Good vs Junk</b><small>‡πÅ‡∏¢‡∏Å‡∏Ç‡∏≠‡∏á‡∏î‡∏µ/‡∏Ç‡∏¢‡∏∞</small></button>
        <button id="m_groups"   class="tile" data-mode="groups"><i>üß∫</i><b>5 Food Groups</b><small>‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏´‡∏°‡∏ß‡∏î</small></button>
        <button id="m_hydration"class="tile" data-mode="hydration"><i>üíß</i><b>Hydration</b><small>‡∏™‡∏°‡∏î‡∏∏‡∏•‡∏ô‡πâ‡∏≥‡πÉ‡∏ô‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢</small></button>
        <button id="m_plate"    class="tile" data-mode="plate"><i>üçΩÔ∏è</i><b>Healthy Plate</b><small>‡πÄ‡∏ï‡∏¥‡∏°‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏´‡∏°‡∏ß‡∏î</small></button>
      </div>

      <div class="row">
        <div class="seg">
          <span class="lbl">Mode:</span>
          <span id="modeName" class="value">Good vs Junk</span>
        </div>
        <div class="seg">
          <span class="lbl">Difficulty:</span>
          <button id="d_easy"   class="chip">Easy</button>
          <button id="d_normal" class="chip active">Normal</button>
          <button id="d_hard"   class="chip">Hard</button>
          <span id="difficulty" class="value" style="margin-left:8px">Normal</span>
        </div>
        <div class="seg" style="display:flex;gap:8px;align-items:center;flex-wrap:wrap">
          <button id="soundToggle" class="chip" title="Toggle Sound">üîä</button>
          <button class="chip" id="toggleVR" data-action="toggle-vr" title="VR / Gaze">üï∂Ô∏è VR</button>
          <span class="lbl">Gaze:</span>
          <button class="chip" id="dwellMinus" data-action="dwell-">‚àí</button>
          <span id="dwellVal" class="value">850ms</span>
          <button class="chip" id="dwellPlus" data-action="dwell+">Ôºã</button>
          <label class="lbl" for="gazeCooldown">Cooldown</label>
          <input id="gazeCooldown" type="range" min="0" max="1000" step="50" value="350" style="vertical-align:middle">
          <span id="gazeCooldownVal" class="value">350ms</span>
          <button class="chip" id="reticleLight" data-action="reticle-light">Reticle Light</button>
          <button class="chip" id="reticleBold"  data-action="reticle-bold">Reticle Bold</button>
        </div>
      </div>

      <div class="cta">
        <button id="btn_start" class="start" data-action="play">Start</button>
      </div>
    </section>

    <!-- GAME LAYER -->
    <section id="gameLayer" aria-live="polite" aria-label="playfield">
      <div id="spawnHost"></div>

      <!-- HUD -->
      <div id="hudWrap" class="hud" style="display:none">
        <!-- Groups mode target pill -->
        <div class="pill" id="targetWrap" style="display:none">
          <span id="targetBadge">target</span>
        </div>

        <div id="scoreTime">
          <div class="pill">‚≠ê <span id="score">0</span></div>
          <div class="pill">‚è± <span id="time">45</span>s</div>
          <div class="pill">Combo <span id="combo">0</span></div>
        </div>

        <!-- Quests -->
        <div id="questBar">
          <ul id="questChips"></ul>
        </div>

        <!-- Plate tracker (used by plate.js) -->
        <div id="plateTracker" style="display:none;pointer-events:none">
          <div id="platePills" class="pillrow"></div>
        </div>

        <!-- Coach / Toast / Mission line -->
        <div id="coachHUD" class="coach"><span id="coachText"></span></div>
        <div id="missionLine" class="missionLine"></div>
        <div id="toast" class="toast"></div>
      </div>
    </section>

    <!-- RESULT -->
    <section id="result" style="display:none;align-items:center;justify-content:center;gap:16px;flex-direction:column">
      <h2 id="resultText">Score 0</h2>
      <ul id="pbRow" style="list-style:none;padding:0;margin:0;display:flex;gap:8px;flex-wrap:wrap"></ul>
      <div style="display:flex;gap:10px">
        <button class="chip" data-result="home">üè† Home</button>
        <button class="chip" data-result="replay">üîÑ Replay</button>
      </div>
    </section>
  </div>

  <!-- RUNTIME -->
  <script type="module" src="./game/main.js"></script>
  <script src="./game/ui.js" defer></script>
</body>
</html>
