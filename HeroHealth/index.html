<!doctype html>
<html lang="th">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
<title>Hero Health Academy</title>
<meta name="color-scheme" content="light dark"/>
<style>
:root{--bg:#0b1020;--fg:#e8f3ff;--muted:#94a3b8;--accent:#22d3ee;}
*{box-sizing:border-box}
body{margin:0;background:radial-gradient(1200px 800px at 50% -10%,#173056 10%,var(--bg) 55%);color:var(--fg);
font:500 16px/1.5 ui-rounded,system-ui,Segoe UI,Arial,sans-serif;-webkit-tap-highlight-color:transparent}
.game-wrap{position:relative;min-height:100dvh;overflow:hidden;}
/* ‡∏Å‡∏±‡∏ô canvas ‡∏Ç‡∏ß‡∏≤‡∏á‡∏Ñ‡∏•‡∏¥‡∏Å */
canvas#c, canvas{pointer-events:none !important;z-index:1;position:fixed;inset:0}
#gameLayer,#spawnHost{position:fixed;inset:0;}
#menuBar{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:9999;
background:linear-gradient(#0b1020d0,#0b1020d0);pointer-events:auto;}
#menuBar[data-hidden="1"]{display:none}
.menu-card{width:min(860px,94vw);background:#0e1930;border:1px solid #132a4f;border-radius:16px;
padding:18px;box-shadow:0 18px 60px rgba(0,0,0,.45);}
.row{display:flex;flex-wrap:wrap;gap:10px}
.btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 12px;
border-radius:12px;background:#0f1e38;color:#e6f2ff;border:1px solid #16325d;cursor:pointer;user-select:none}
.btn:hover{filter:brightness(1.08)}
.btn[data-mode].active,.btn[data-diff].active{outline:2px solid var(--accent);box-shadow:0 0 0 4px #22d3ee22}
#hudTop{position:fixed;top:10px;left:10px;right:10px;display:flex;justify-content:space-between;gap:8px;z-index:50;pointer-events:none}
.badge{background:#0f1e38;border:1px solid #16325d;border-radius:10px;padding:6px 10px;pointer-events:auto}
#scoreVal{font-weight:900}
.toast{position:fixed;left:50%;top:68px;transform:translateX(-50%);background:#0e1930;border:1px solid #214064;
color:#e8f3ff;padding:8px 12px;border-radius:10px;opacity:0;transition:opacity .3s;z-index:60}
.toast.show{opacity:1}
</style>
</head>
<body>

<div class="game-wrap">
  <div id="gameLayer"></div>
  <div id="spawnHost"></div>

  <div id="hudTop">
    <div class="badge">Mode: <b id="modeBadge">goodjunk</b> ‚Ä¢ Diff: <b id="diffBadge">Normal</b></div>
    <div class="badge">Score: <span id="scoreVal">0</span></div>
    <div class="badge">Time: <span id="timeVal">45</span>s</div>
  </div>

  <div id="menuBar" aria-label="Main menu">
    <div class="menu-card">
      <h2 style="margin:4px 0 12px;font:900 22px ui-rounded">Hero Health Academy</h2>
      <div>
        <h3>Play Mode</h3>
        <div class="row" role="group" aria-label="Mode">
          <div class="btn active" data-mode="goodjunk">ü•ó Good vs Junk</div>
          <div class="btn" data-mode="groups">üß∫ 5 Food Groups</div>
          <div class="btn" data-mode="hydration">üíß Hydration</div>
          <div class="btn" data-mode="plate">üçΩÔ∏è Healthy Plate</div>
        </div>
      </div>
      <hr style="margin:12px 0;border-color:#133"/>
      <div>
        <h3>Difficulty</h3>
        <div class="row" role="group" aria-label="Difficulty">
          <div class="btn" data-diff="Easy">Easy</div>
          <div class="btn active" data-diff="Normal">Normal</div>
          <div class="btn" data-diff="Hard">Hard</div>
        </div>
      </div>
      <hr style="margin:12px 0;border-color:#133"/>
      <div class="row">
        <button id="btn_start" class="btn" data-action="start" type="button" tabindex="0" aria-label="Start game">‚ñ∂Ô∏è Start</button>
        <div class="btn" data-action="howto" role="button" tabindex="0">‚ùì How to Play</div>
        <div class="btn" data-action="sound" role="button" tabindex="0">üîä Sound</div>
      </div>
    </div>
  </div>
</div>

<!-- SFX -->
<audio id="sfx-good" preload="auto" src="assets/sfx/good.mp3"></audio>
<audio id="sfx-bad" preload="auto" src="assets/sfx/bad.mp3"></audio>
<audio id="sfx-perfect" preload="auto" src="assets/sfx/perfect.mp3"></audio>
<audio id="sfx-tick" preload="auto" src="assets/sfx/tick.mp3"></audio>
<audio id="sfx-powerup" preload="auto" src="assets/sfx/powerup.mp3"></audio>

<!-- ‡∏ï‡∏±‡∏ß‡∏´‡∏•‡∏±‡∏Å -->
<script type="module" src="./game/main.js"></script>

<!-- ‡∏ï‡∏±‡∏ß‡∏ä‡πà‡∏ß‡∏¢ bind ‡∏õ‡∏∏‡πà‡∏° Start ‡∏Å‡∏±‡∏ô‡∏û‡∏•‡∏≤‡∏î -->
<script type="module">
(function bindStartStrong(){
  const btn = document.getElementById('btn_start'); if(!btn) return;
  const clone = btn.cloneNode(true); btn.replaceWith(clone);
  const go = (e)=>{ e.preventDefault(); e.stopPropagation();
    if (window.HHA?.startGame) { window.HHA.startGame(); }
    else import('./game/main.js?ts='+Date.now()).then(()=>window.HHA?.startGame?.());
  };
  ['click','pointerup','touchend'].forEach(ev=>clone.addEventListener(ev,go,{capture:true,passive:false}));
  clone.addEventListener('keydown',(e)=>{ if(e.key==='Enter'||e.key===' '){ go(e); } },{capture:true});
})();
</script>

<div id="toast" class="toast"></div>
</body>
</html>
