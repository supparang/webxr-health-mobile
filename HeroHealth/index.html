<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hero Health Academy</title>

  <!-- ‡∏ä‡∏µ‡πâ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå HeroHealth ‡∏ö‡∏ô GitHub Pages -->
  <base href="/webxr-health-mobile/HeroHealth/">
  <link rel="stylesheet" href="styles/game.css" />

  <style>
    /* Canvas ‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏•‡∏¥‡∏Å */
    #c { pointer-events:none; z-index:1; }

    /* HUD ‡∏°‡∏∏‡∏°‡∏ã‡πâ‡∏≤‡∏¢‡∏ö‡∏ô ‡∏ä‡∏±‡∏î */
    .hud{
      position:fixed; top:56px; left:12px;
      display:flex; flex-direction:column; gap:8px;
      z-index:120; text-shadow:0 2px 8px rgba(0,0,0,.6);
    }
    .hud-line,#statusLine{
      background:rgba(8,10,20,.62);
      border:1px solid rgba(255,255,255,.18);
      border-radius:10px; padding:8px 12px; font-weight:900; color:#fff;
    }

    /* ‡πÄ‡∏°‡∏ô‡∏π‡∏ï‡∏£‡∏∂‡∏á‡∏•‡πà‡∏≤‡∏á‡∏ã‡πâ‡∏≤‡∏¢ */
    .menu{
      position:fixed; bottom:12px; left:12px; right:auto;
      background:rgba(10,10,25,.90); border-radius:12px; padding:10px;
      backdrop-filter:blur(8px); z-index:110; transition:.25s ease;
    }
    /* ‡∏ã‡πà‡∏≠‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏•‡πà‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ö‡∏±‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡∏¥‡∏Å */
    body.state-playing .menu{
      opacity:0; pointer-events:none; transform:translateY(8px) scale(.98);
    }
    body.state-menu .menu,
    body.state-paused .menu,
    body.state-result .menu{
      opacity:1; pointer-events:auto; transform:none;
    }

    .btn,.tag{
      background:rgba(255,255,255,.1);
      border:1px solid rgba(255,255,255,.2);
      color:#fff; border-radius:10px; cursor:pointer; font-weight:700;
      padding:10px 14px;
    }
    .btn:hover,.tag:hover{ background:rgba(255,255,255,.25); }

    /* ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô item ‡πÉ‡∏´‡πâ‡πÉ‡∏´‡∏ç‡πà‡∏ä‡∏±‡∏î */
    .item{
      font-size:clamp(42px,6vw,78px); min-width:72px; min-height:72px;
      padding:12px; border-radius:16px; background:rgba(255,255,255,.10);
      z-index:120; pointer-events:auto;
    }

    /* ===== Modals ‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠ ‡∏ä‡∏±‡∏î ‡πÅ‡∏•‡∏∞ z-index ‡∏™‡∏π‡∏á ===== */
    .modal{
      position:fixed; inset:0; display:none;
      align-items:center; justify-content:center; padding:20px;
      background:rgba(0,0,0,.55); z-index:999;  /* ‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤ HUD/‡πÄ‡∏°‡∏ô‡∏π */
    }
    .modal .card{
      width:min(820px,92vw); background:rgba(18,22,44,.96);
      border:1px solid rgba(255,255,255,.18);
      border-radius:16px; padding:18px; color:#fff;
      box-shadow:0 20px 60px rgba(0,0,0,.45);
    }
    .modal .card h3{ margin:0 0 10px 0; font-size:22px; }
    .modal .card pre{
      background:#0c1224; color:#cfe7ff; border:1px solid rgba(255,255,255,.12);
      padding:14px; border-radius:12px; max-height:46vh; overflow:auto; white-space:pre-wrap; font-size:16px;
    }
  </style>
</head>
<body class="state-menu">
  <!-- Header -->
  <header class="brand">
    <div id="brandTitle">HERO HEALTH ACADEMY</div>
    <div class="spacer"></div>
    <button id="langToggle" class="btn">üáπüá≠ TH/EN</button>
    <button id="gfxToggle" class="btn">üéõÔ∏è ‡∏Å‡∏£‡∏≤‡∏ü‡∏¥‡∏Å</button>
    <button id="soundToggle" class="btn">üîä ‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
  </header>

  <!-- Canvas -->
  <canvas id="c"></canvas>

  <!-- HUD -->
  <section class="hud">
    <div id="statusLine">‡πÇ‡∏´‡∏°‡∏î: ‚Äî ‚Ä¢ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å: ‚Äî</div>
    <div class="hud-line">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô <b id="score">0</b> | ‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö <b id="combo">x0</b> | ‡πÄ‡∏ß‡∏•‡∏≤ <b id="time">60</b>s</div>
    <div id="missionLine" style="display:none; font-weight:700;">‚Äî</div>
    <div id="targetWrap" style="display:none;">üéØ <span id="targetBadge">‚Äî</span></div>
    <div id="feverBarWrap" class="bar slim"><div id="feverBar" style="width:0%"></div></div>
    <div id="fever" class="fever" style="display:none">FEVER!</div>
  </section>

  <!-- Coach -->
  <div id="coachHUD" class="coach" style="display:none"><div id="coachText">...</div></div>

  <!-- ‡πÄ‡∏°‡∏ô‡∏π -->
  <section id="menuBar" class="menu">
    <div class="row">
      <button class="tag" data-action="mode" data-value="goodjunk"  id="m_goodjunk">ü•ó ‡∏î‡∏µ vs ‡∏Ç‡∏¢‡∏∞</button>
      <button class="tag" data-action="mode" data-value="groups"    id="m_groups">üçΩÔ∏è ‡∏à‡∏≤‡∏ô 5 ‡∏´‡∏°‡∏π‡πà</button>
      <button class="tag" data-action="mode" data-value="hydration" id="m_hydration">üíß ‡∏™‡∏°‡∏î‡∏∏‡∏•‡∏ô‡πâ‡∏≥</button>
      <button class="tag" data-action="mode" data-value="plate"     id="m_plate">üç± ‡∏à‡∏±‡∏î‡∏à‡∏≤‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</button>
    </div>
    <div class="row">
      <button class="tag" data-action="diff" data-value="Easy"   id="d_easy">‡∏á‡πà‡∏≤‡∏¢</button>
      <button class="tag" data-action="diff" data-value="Normal" id="d_normal">‡∏õ‡∏Å‡∏ï‡∏¥</button>
      <button class="tag" data-action="diff" data-value="Hard"   id="d_hard">‡∏¢‡∏≤‡∏Å</button>
    </div>
    <div class="row">
      <button class="btn" data-action="start"   id="btn_start">‚ñ∂ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</button>
      <button class="btn" data-action="pause"   id="btn_pause">‚è∏ ‡∏û‡∏±‡∏Å</button>
      <button class="btn" data-action="restart" id="btn_restart">‚Üª ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
      <button class="btn" data-action="help"    id="btn_help">‚ùì ‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏•‡πà‡∏ô</button>
    </div>
  </section>

  <!-- Help -->
  <div id="help" class="modal" style="display:none">
    <div class="card">
      <h3 id="h_help">‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏•‡πà‡∏ô</h3>
      <pre id="helpBody">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î ‚Üí ‡πÄ‡∏Å‡πá‡∏ö‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‚Üí ‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏Å‡∏±‡∏ö‡∏î‡∏±‡∏Å</pre>
      <div style="display:flex; gap:8px; margin-top:10px;">
        <button class="btn" id="btn_ok">‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏•‡∏∏‡∏¢!</button>
        <button class="btn" id="btn_help_close">‡∏õ‡∏¥‡∏î</button>
      </div>
    </div>
  </div>

  <!-- Result -->
  <div id="result" class="modal" style="display:none">
    <div class="card">
      <h3>‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•</h3>
      <div id="resCore"></div>
      <div style="margin-top:10px; display:flex; gap:8px;">
        <button class="btn" id="btn_home">üè† ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π</button>
        <button class="btn" id="btn_replay">‚Üª ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
      </div>
    </div>
  </div>

  <!-- SFX / BGM -->
  <audio id="sfx-good" preload="auto" src="assets/sfx/good.mp3"></audio>
  <audio id="sfx-bad" preload="auto" src="assets/sfx/bad.mp3"></audio>
  <audio id="sfx-perfect" preload="auto" src="assets/sfx/perfect.mp3"></audio>
  <audio id="sfx-tick" preload="auto" src="assets/sfx/tick.mp3"></audio>
  <audio id="sfx-powerup" preload="auto" src="assets/sfx/powerup.mp3"></audio>
  <audio id="bgm-main" preload="auto" src="assets/bgm/stage1.mp3" loop></audio>

  <!-- Scripts -->
  <script type="module" src="game/main.js"></script>
  <script type="module" src="game/ui.js"></script>

  <!-- bootWarn -->
  <script>
    (function(){
      const warn=document.createElement('div');
      warn.id='bootWarn';
      warn.textContent='‚ö†Ô∏è ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ‡∏ï‡∏£‡∏ß‡∏à path game/main.js ‡∏´‡∏£‡∏∑‡∏≠ base href';
      Object.assign(warn.style,{
        position:'fixed',top:0,left:0,right:0,background:'#b00020',color:'#fff',
        padding:'10px',fontWeight:'700',display:'none',zIndex:10000
      });
      document.body.appendChild(warn);
      setTimeout(()=>{ if(!window.__HHA_BOOT_OK) warn.style.display='block'; },2000);
    })();
  </script>
</body>
</html>
