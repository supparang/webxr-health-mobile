// === groups.safe.js ‚Äî Food Groups (20 ‡∏ï‡πà‡∏≠‡∏Å‡∏•‡∏∏‡πà‡∏°; ‡∏Ñ‡∏•‡∏¥‡∏Å "‡∏î‡∏µ" ‡πÑ‡∏î‡πâ‡πÅ‡∏ï‡πâ‡∏°) ===
import { boot as baseBoot } from '../vr/mode-factory.js';

// 4 ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á (‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏•‡∏∞ ~10‚Äì12 ‡∏ä‡∏¥‡πâ‡∏ô, ‡∏£‡∏ß‡∏°‡∏™‡∏∏‡πà‡∏°‡πÑ‡∏õ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢)
const FRUIT  = ['üçé','üçè','üçá','üçì','üçí','üçç','üçâ','üçê','üçä','ü´ê','ü•ù','üçã','üçà','ü•≠','üçë'];
const VEGGIE = ['ü•¶','ü•ï','üåΩ','üçÖ','ü•í','üßÑ','üßÖ','ü•¨','üçÜ','ü´ë'];
const PROTEIN= ['üêü','üçó','ü•ö','ü•ú','ü´ò','ü•©','üßÄ','üçñ','ü¶ê','ü¶ë'];
const GRAINS = ['üçû','ü•ñ','ü•Ø','ü•®','üçö','üçô','üçò','üåÆ','üåØ','üçù'];

const GOOD = [...FRUIT, ...VEGGIE, ...PROTEIN, ...GRAINS].slice(0, 40); // ‡πÄ‡∏≠‡∏≤ 40 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏£‡∏Å
const JUNK = ['üçî','üçü','üçï','üå≠','üç©','üç™','üßÅ','üç∞','üç´','üç¨','üç≠','ü•§','üßã','üçπ','üç®','üçß','üçø','ü•ì','ü•†','ü•Ø'];

export async function boot(cfg={}) {
  return baseBoot({
    ...cfg,
    name: 'groups',
    pools: { good: GOOD, bad: JUNK },
    goldenRate: 0.06,
    goodRate:   0.75,
    judge: (ch) => {
      if(!ch) return { good:false, scoreDelta:-5 };
      const healthy = GOOD.includes(ch);
      // ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤ "‡∏î‡∏µ" ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î, ‡∏Ç‡∏≠‡∏á‡∏´‡∏ß‡∏≤‡∏ô/‡∏ü‡∏≤‡∏™‡∏ï‡πå‡∏ü‡∏π‡πâ‡∏î "‡πÑ‡∏°‡πà‡∏î‡∏µ"
      return { good: healthy, scoreDelta: healthy?10:-5, feverDelta: healthy?5:0 };
    }
  });
}
