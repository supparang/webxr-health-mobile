<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>VR Fitness ‚Äî Rhythm Boxer</title>
  <meta name="color-scheme" content="dark light"/>
  <link rel="icon" href="favicon.ico"/>

  <link rel="stylesheet" href="css/rhythm-boxer.css"/>
</head>
<body>
<div id="rb-wrap" data-diff="normal">
  <!-- flash ‡∏ï‡∏≠‡∏ô‡πÇ‡∏î‡∏ô / miss -->
  <div id="rb-flash"></div>

  <!-- ===== VIEW: MENU ===== -->
  <main id="rb-view-menu" class="rb-view">
    <header class="rb-header">
      <div>
        <h1 class="rb-title">Rhythm Boxer</h1>
        <p class="rb-subtitle">
          ‡∏ï‡πà‡∏≠‡∏¢‡∏ï‡∏≤‡∏°‡πÇ‡∏ô‡πâ‡∏ï‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞ ‡∏ù‡∏∂‡∏Å‡∏™‡∏°‡∏≤‡∏ò‡∏¥ + ‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á ¬∑ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÇ‡∏´‡∏°‡∏î‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡πÄ‡∏Å‡πá‡∏ö CSV
        </p>
      </div>
      <a href="hub.html" class="rb-back-link">‚Üê ‡∏Å‡∏•‡∏±‡∏ö HUB</a>
    </header>

    <!-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î -->
    <section class="rb-card rb-card-menu">
      <h2 class="rb-section-title">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô</h2>
      <div class="rb-mode-row">
        <label class="rb-radio">
          <input type="radio" name="rb-mode" value="normal" checked/>
          <span>Normal</span>
        </label>
        <label class="rb-radio">
          <input type="radio" name="rb-mode" value="research"/>
          <span>Research (‡∏ß‡∏¥‡∏à‡∏±‡∏¢)</span>
        </label>
      </div>
      <p id="rb-mode-desc" class="rb-hint">
        Normal: ‡πÄ‡∏•‡πà‡∏ô‡∏™‡∏ô‡∏∏‡∏Å / ‡πÉ‡∏ä‡πâ‡∏™‡∏≠‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°)
      </p>
    </section>

    <!-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏•‡∏á / ‡∏£‡∏∞‡∏î‡∏±‡∏ö -->
    <section class="rb-card rb-card-menu">
      <h2 class="rb-section-title">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏•‡∏á / ‡∏£‡∏∞‡∏î‡∏±‡∏ö</h2>
      <p id="rb-track-mode-label" class="rb-subsection-title">
        ‡πÇ‡∏´‡∏°‡∏î Normal ‚Äî ‡πÄ‡∏û‡∏•‡∏á 3 ‡∏£‡∏∞‡∏î‡∏±‡∏ö: ‡∏á‡πà‡∏≤‡∏¢ / ‡∏õ‡∏Å‡∏ï‡∏¥ / ‡∏¢‡∏≤‡∏Å
      </p>

      <div id="rb-track-options" class="rb-mode-row">
        <!-- Normal: 3 ‡πÄ‡∏û‡∏•‡∏á (n1,n2,n3) -->
        <label class="rb-radio" data-mode="normal">
          <input type="radio" name="rb-track" value="n1" checked/>
          <span>Warm-up Groove ¬∑ ‡∏á‡πà‡∏≤‡∏¢ ¬∑ 100 BPM</span>
        </label>
        <label class="rb-radio" data-mode="normal">
          <input type="radio" name="rb-track" value="n2"/>
          <span>Focus Combo ¬∑ ‡∏õ‡∏Å‡∏ï‡∏¥ ¬∑ 120 BPM</span>
        </label>
        <label class="rb-radio" data-mode="normal">
          <input type="radio" name="rb-track" value="n3"/>
          <span>Speed Rush ¬∑ ‡∏¢‡∏≤‡∏Å ¬∑ 140 BPM</span>
        </label>

        <!-- Research-only (r1) -->
        <label class="rb-radio" data-mode="research">
          <input type="radio" name="rb-track" value="r1"/>
          <span>Research Track 120 ¬∑ ‡∏ó‡∏î‡∏•‡∏≠‡∏á ¬∑ 120 BPM</span>
        </label>
      </div>

      <p id="rb-track-hint" class="rb-hint">
        ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å Warm-up Groove (‡∏á‡πà‡∏≤‡∏¢) ‡∏Å‡πà‡∏≠‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡∏•‡∏≠‡∏á‡πÄ‡∏û‡∏•‡∏á‡∏ó‡∏µ‡πà‡∏¢‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô
      </p>
    </section>

    <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ß‡∏¥‡∏à‡∏±‡∏¢ -->
    <section id="rb-research-fields" class="rb-card rb-card-menu rb-research hidden">
      <h2 class="rb-section-title">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢</h2>

      <div class="rb-field-row">
        <label for="rb-participant">Participant ID</label>
        <input id="rb-participant" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô P001, S05 ‡∏Ø‡∏•‡∏Ø"/>
      </div>
      <div class="rb-field-row">
        <label for="rb-group">‡∏Å‡∏•‡∏∏‡πà‡∏° / ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç</label>
        <input id="rb-group" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô Control, VR-High, L/R-Swap"/>
      </div>
      <div class="rb-field-row">
        <label for="rb-note">‡πÇ‡∏ô‡πâ‡∏ï‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</label>
        <input id="rb-note" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏£‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏ù‡∏∂‡∏Å, ‡∏´‡∏•‡∏±‡∏á‡∏ù‡∏∂‡∏Å, ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏•‡πà‡∏ô ‡∏Ø‡∏•‡∏Ø"/>
      </div>

      <p class="rb-hint">
        ‡πÇ‡∏´‡∏°‡∏î‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡∏à‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Event CSV + Session CSV ‡∏û‡∏£‡πâ‡∏≠‡∏° offset, side (L/R), FEVER ‡πÅ‡∏•‡∏∞ HP
        ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏ä‡∏¥‡∏á‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
      </p>
    </section>

    <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏° -->
    <section class="rb-card rb-card-menu">
      <div class="rb-menu-actions">
        <button id="rb-btn-start" class="rb-btn rb-btn-primary">
          ‚ñ∂ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô Rhythm Boxer
        </button>
      </div>
      <p class="rb-hint">
        üí° ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö: ‡πÉ‡∏´‡πâ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏•‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á‡∏á‡πà‡∏≤‡∏¢ 1‚Äì2 ‡∏£‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô ‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏Ñ‡πà‡∏≠‡∏¢‡πÉ‡∏ä‡πâ Research Track
        ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ä‡∏¥‡∏á‡∏ß‡∏¥‡∏à‡∏±‡∏¢
      </p>
    </section>
  </main>

  <!-- ===== VIEW: PLAY ===== -->
  <main id="rb-view-play" class="rb-view hidden">
    <header class="rb-header rb-header-play">
      <div>
        <h1 class="rb-title">Rhythm Boxer ¬∑ Play</h1>
        <p class="rb-subtitle">
          ‡πÅ‡∏ï‡∏∞‡πÄ‡∏•‡∏ô‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞ ¬∑ ‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï FEVER bar ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô
        </p>
      </div>
      <button id="rb-btn-stop" class="rb-btn rb-btn-ghost">
        ‚èπ ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏ß‡∏•‡∏≤
      </button>
    </header>

    <!-- HUD + ‡πÅ‡∏ñ‡∏ö FEVER/Progress (‡∏≠‡∏±‡∏î‡πÉ‡∏´‡πâ‡∏™‡∏±‡πâ‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏à‡∏≠) -->
    <section class="rb-card">
      <div class="rb-hud-line">
        <span class="rb-tag">Mode</span>
        <span id="rb-hud-mode" class="rb-hud-val">Normal</span>
        <span class="rb-tag">Track</span>
        <span id="rb-hud-track" class="rb-hud-val">Warm-up Groove</span>
      </div>
      <div class="rb-hud-line">
        <span class="rb-tag">Score</span>
        <span id="rb-hud-score" class="rb-hud-val rb-hud-score">0</span>
        <span class="rb-tag">Combo</span>
        <span id="rb-hud-combo" class="rb-hud-val">0</span>
        <span class="rb-tag">Acc</span>
        <span id="rb-hud-acc" class="rb-hud-val">0.0%</span>
      </div>
      <div class="rb-hud-line">
        <span class="rb-tag">HP</span>
        <span id="rb-hud-hp" class="rb-hud-val">100</span>
        <span class="rb-tag">Shield</span>
        <span id="rb-hud-shield" class="rb-hud-val">0</span>
        <span class="rb-tag">Time</span>
        <span id="rb-hud-time" class="rb-hud-val">0.0</span>
      </div>

      <div class="rb-hitstats-row">
        <span>Perfect: <strong id="rb-hud-perfect">0</strong></span>
        <span>Great: <strong id="rb-hud-great">0</strong></span>
        <span>Good: <strong id="rb-hud-good">0</strong></span>
        <span>Miss: <strong id="rb-hud-miss">0</strong></span>
      </div>

      <div class="rb-bars">
        <div class="rb-bar-label-row">
          <span>FEVER</span>
          <span id="rb-fever-status" class="rb-fever-status">READY</span>
        </div>
        <div class="rb-fever-bar">
          <div id="rb-fever-fill" class="rb-fever-fill"></div>
        </div>

        <div class="rb-bar-label-row rb-bar-label-row-progress">
          <span>PROGRESS</span>
          <span id="rb-progress-text" class="rb-hud-val">0%</span>
        </div>
        <div class="rb-progress-bar">
          <div id="rb-progress-fill" class="rb-progress-fill"></div>
        </div>
      </div>
    </section>

    <!-- ‡∏™‡∏ô‡∏≤‡∏° + ‡πÄ‡∏•‡∏ô -->
    <section id="rb-field">
      <!-- ‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏µ + ‡πÑ‡∏Å‡∏î‡πå‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞ -->
      <div class="rb-timing-guide">
        <div class="rb-timing-row">
          <span class="rb-beat">‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞‡∏ï‡∏µ</span>
          <span>‡∏ï‡∏µ‡πÉ‡∏´‡πâ‡πÇ‡∏ô‡πâ‡∏ï‡∏ï‡∏£‡∏á‡πÄ‡∏™‡πâ‡∏ô‡∏à‡∏∏‡∏î‡πÑ‡∏Ç‡πà‡∏õ‡∏•‡∏≤</span>
        </div>
        <div class="rb-hit-line"></div>
      </div>

      <div id="rb-feedback" class="rb-feedback"></div>

      <div id="rb-lanes" class="rb-lanes">
        <div class="rb-lane" data-lane="0">
          <div class="rb-lane-label">L2</div>
        </div>
        <div class="rb-lane" data-lane="1">
          <div class="rb-lane-label">L1</div>
        </div>
        <div class="rb-lane" data-lane="2">
          <div class="rb-lane-label">C</div>
        </div>
        <div class="rb-lane" data-lane="3">
          <div class="rb-lane-label">R1</div>
        </div>
        <div class="rb-lane" data-lane="4">
          <div class="rb-lane-label">R2</div>
        </div>
      </div>
    </section>

    <footer class="rb-footer-play">
      <span>‡πÅ‡∏ï‡∏∞‡πÄ‡∏•‡∏ô‡∏ã‡πâ‡∏≤‡∏¢/‡∏Ç‡∏ß‡∏≤‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÇ‡∏ô‡πâ‡∏ï‡∏ó‡∏µ‡πà‡∏ï‡∏Å‡∏•‡∏á‡∏°‡∏≤ ¬∑ ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏à‡∏≠‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™‡πÅ‡∏•‡∏∞‡πÄ‡∏°‡∏≤‡∏™‡πå</span>
    </footer>

    <audio id="rb-audio" preload="auto"></audio>
  </main>

  <!-- ===== VIEW: RESULT ===== -->
  <main id="rb-view-result" class="rb-view hidden">
    <header class="rb-header rb-header-play">
      <div>
        <h1 class="rb-title">‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏• ¬∑ Rhythm Boxer</h1>
        <p class="rb-subtitle">
          ‡πÉ‡∏ä‡πâ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô / ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á
        </p>
      </div>
    </header>

    <section class="rb-card rb-result-grid">
      <div class="rb-result-card">
        <h2 class="rb-section-title">Overview</h2>
        <div class="rb-result-line"><span>Mode</span> ¬∑ <b id="rb-res-mode">-</b></div>
        <div class="rb-result-line"><span>Track</span> ¬∑ <b id="rb-res-track">-</b></div>
        <div class="rb-result-line"><span>End reason</span> ¬∑ <b id="rb-res-endreason">-</b></div>
        <div class="rb-result-line"><span>Score</span> ¬∑ <b id="rb-res-score">0</b></div>
        <div class="rb-result-line"><span>Max Combo</span> ¬∑ <b id="rb-res-maxcombo">0</b></div>
        <div class="rb-result-line">
          <span>Hit P / G / Gd / Miss</span> ¬∑
          <b id="rb-res-detail-hit">0 / 0 / 0 / 0</b>
        </div>
        <div class="rb-result-line"><span>Accuracy</span> ¬∑ <b id="rb-res-acc">0.0 %</b></div>
        <div class="rb-result-line"><span>Duration</span> ¬∑ <b id="rb-res-duration">0.0 s</b></div>
        <div class="rb-result-line"><span>Rank</span> ¬∑ <b id="rb-res-rank">-</b></div>
      </div>

      <div class="rb-result-card">
        <h2 class="rb-section-title">Timing / Research</h2>
        <div class="rb-result-line"><span>Offset mean</span> ¬∑ <b id="rb-res-offset-avg">-</b></div>
        <div class="rb-result-line"><span>Offset std</span> ¬∑ <b id="rb-res-offset-std">-</b></div>
        <div class="rb-result-line"><span>Participant</span> ¬∑ <b id="rb-res-participant">-</b></div>
      </div>
    </section>

    <p id="rb-res-quality-note" class="rb-quality-note hidden"></p>

    <section class="rb-card rb-result-actions">
      <button id="rb-btn-again" class="rb-btn rb-btn-primary">
        üîÅ ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á‡πÄ‡∏î‡∏¥‡∏°‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
      </button>
      <button id="rb-btn-back-menu" class="rb-btn rb-btn-secondary">
        ‚¨Ö ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î
      </button>
    </section>

    <section class="rb-card">
      <h2 class="rb-section-title">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î CSV ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢</h2>
      <p class="rb-hint">
        Event CSV: ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÇ‡∏ô‡πâ‡∏ï / ‡∏Å‡∏≤‡∏£‡∏Å‡∏î‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏£‡∏±‡πâ‡∏á ¬∑ Session CSV: ‡∏™‡∏£‡∏∏‡∏õ 1 ‡πÅ‡∏ñ‡∏ß‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô 1 ‡∏£‡∏≠‡∏ö
      </p>
      <div class="rb-result-actions">
        <button id="rb-btn-dl-events" class="rb-btn rb-btn-ghost">‚¨á ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î Event CSV</button>
        <button id="rb-btn-dl-sessions" class="rb-btn rb-btn-ghost">‚¨á ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î Session CSV</button>
      </div>
    </section>
  </main>
</div>

<!-- SCRIPTS -->
<script src="js/dom-renderer-rhythm.js"></script>
<script src="js/rhythm-engine.js"></script>
<script src="js/rhythm-boxer.js"></script>
</body>
</html>
