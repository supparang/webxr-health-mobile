<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>Rhythm Boxer</title>
  <link rel="stylesheet" href="css/rhythm-boxer.css"/>
</head>
<body>
<div id="rb-wrap">
  <!-- ========= VIEW: MENU ========= -->
  <main id="rb-view-menu" class="rb-view rb-view-active">
    <div class="rb-card rb-card-menu">
      <header class="rb-menu-header">
        <div class="rb-title">Rhythm Boxer <span class="rb-title-emoji">üéµü•ä</span></div>
        <div class="rb-subtitle">‡πÄ‡∏Å‡∏°‡∏ù‡∏∂‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞‡∏ï‡πà‡∏≠‡∏¢‡∏´‡∏°‡∏±‡∏î‡∏ï‡∏≤‡∏°‡πÄ‡∏û‡∏•‡∏á ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢</div>
      </header>

      <section class="rb-menu-body">
        <div class="rb-field">
          <div class="rb-label">‡πÇ‡∏´‡∏°‡∏î</div>
          <div class="rb-radio-row">
            <label class="rb-radio">
              <input type="radio" name="mode" value="normal" checked>
              <span>Normal</span>
            </label>
            <label class="rb-radio">
              <input type="radio" name="mode" value="research">
              <span>Research</span>
            </label>
          </div>
        </div>

        <div id="rb-research-fields" class="rb-field rb-research-fields hidden">
          <div class="rb-label">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏¥‡∏à‡∏±‡∏¢ (‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î Research)</div>
          <div class="rb-grid-3">
            <label class="rb-input-label">
              ‡∏£‡∏´‡∏±‡∏™‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°
              <input id="rb-participant" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô P01">
            </label>
            <label class="rb-input-label">
              ‡∏Å‡∏•‡∏∏‡πà‡∏°
              <input id="rb-group" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô G1 / Control">
            </label>
            <label class="rb-input-label">
              ‡πÇ‡∏ô‡πâ‡∏ï‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°
              <input id="rb-note" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ä‡πà‡∏ß‡∏á‡∏ó‡∏î‡∏•‡∏≠‡∏á‡∏ó‡∏µ‡πà 1">
            </label>
          </div>
        </div>

        <div class="rb-field">
          <div class="rb-label">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏•‡∏á</div>
          <select id="rb-track" class="rb-select">
            <option value="t1">Warm-up Groove (Easy)</option>
            <option value="t2">Punch Rush (Normal)</option>
            <option value="t3">Ultra Beat Combo (Hard)</option>
            <option value="research">Research Track 120 (Fixed Pattern)</option>
          </select>
        </div>
      </section>

      <footer class="rb-menu-footer">
        <button id="rb-btn-start" class="rb-btn rb-btn-primary">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô ‚ñ∂</button>
        <a href="index.html" class="rb-btn rb-btn-ghost">‡∏Å‡∏•‡∏±‡∏ö Hub</a>
      </footer>
    </div>
  </main>

  <!-- ========= VIEW: PLAY ========= -->
  <section id="rb-view-play" class="rb-view hidden">
    <div class="rb-card rb-card-play">
      <!-- HUD -->
      <div class="rb-hud">
        <div class="rb-hud-left">
          <div>Mode: <span id="rb-hud-mode">Normal</span></div>
          <div>Track: <span id="rb-hud-track">Warm-up Groove</span></div>
          <div>‡πÄ‡∏ß‡∏•‡∏≤: <span id="rb-hud-time">0.0</span>s</div>
        </div>
        <div class="rb-hud-mid">
          <div>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <span id="rb-hud-score">0</span></div>
          <div>Combo: <span id="rb-hud-combo">0</span></div>
          <div>Acc: <span id="rb-hud-acc">0.0%</span></div>
          <div>P/Gd/G/Ms:
            <span id="rb-hud-perfect">0</span> /
            <span id="rb-hud-great">0</span> /
            <span id="rb-hud-good">0</span> /
            <span id="rb-hud-miss">0</span>
          </div>
        </div>
        <div class="rb-hud-right">
          <div class="rb-progress-wrap">
            <div class="rb-progress-bar">
              <div id="rb-progress-fill" class="rb-progress-fill"></div>
            </div>
            <div id="rb-progress-text" class="rb-progress-text">0%</div>
          </div>

          <div class="rb-fever-wrap">
            <div class="rb-fever-label">
              FEVER <span id="rb-fever-status" class="rb-fever-status">FEVER</span>
            </div>
            <div class="rb-fever-bar">
              <div id="rb-fever-fill" class="rb-fever-fill"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- PLAY FIELD -->
      <div id="rb-play-field">
        <div id="rb-lanes">
          <div class="rb-lane" data-lane="0">
            <div class="rb-hitline"></div>
          </div>
          <div class="rb-lane" data-lane="1">
            <div class="rb-hitline"></div>
          </div>
          <div class="rb-lane" data-lane="2">
            <div class="rb-hitline"></div>
          </div>
          <div class="rb-lane" data-lane="3">
            <div class="rb-hitline"></div>
          </div>
          <div class="rb-lane" data-lane="4">
            <div class="rb-hitline"></div>
          </div>
        </div>
      </div>

      <!-- FEEDBACK & CONTROL -->
      <div class="rb-bottom-bar">
        <div id="rb-feedback" class="rb-feedback">
          ‡πÇ‡∏ü‡∏Å‡∏±‡∏™‡∏ó‡∏µ‡πà‡πÄ‡∏™‡πâ‡∏ô‡∏•‡πà‡∏≤‡∏á ‡πÅ‡∏•‡πâ‡∏ß‡∏ï‡∏µ‡πÇ‡∏ô‡πâ‡∏ï‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞‡∏ô‡∏∞ üéØ
        </div>
        <button id="rb-btn-stop" class="rb-btn rb-btn-outline">‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏ß‡∏•‡∏≤</button>
      </div>
    </div>
  </section>

  <!-- ========= VIEW: RESULT ========= -->
  <section id="rb-view-result" class="rb-view hidden">
    <div class="rb-card rb-card-result">
      <header class="rb-result-header">
        <div class="rb-title">‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏• Rhythm Boxer</div>
        <div class="rb-subtitle">‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏•‡πå CSV ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏≥‡πÑ‡∏õ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏ä‡∏¥‡∏á‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</div>
      </header>

      <div class="rb-result-grid">
        <div class="rb-result-block">
          <div>‡πÇ‡∏´‡∏°‡∏î: <span id="rb-res-mode">-</span></div>
          <div>‡πÄ‡∏û‡∏•‡∏á: <span id="rb-res-track">-</span></div>
          <div>‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏à‡∏ö‡πÄ‡∏Å‡∏°: <span id="rb-res-reason">-</span></div>
          <div>‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏•‡πà‡∏ô: <span id="rb-res-duration">-</span></div>
          <div>‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°: <span id="rb-res-participant">-</span></div>
        </div>

        <div class="rb-result-block">
          <div>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°: <span id="rb-res-score">0</span></div>
          <div>Max Combo: <span id="rb-res-maxcombo">0</span></div>
          <div>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÇ‡∏ô‡πâ‡∏ï‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: <span id="rb-res-totalnotes">0</span></div>
          <div>P/Gd/G/Ms:
            <span id="rb-res-detail-hit">0 / 0 / 0 / 0</span>
          </div>
          <div>Accuracy: <span id="rb-res-acc">0.0%</span></div>
        </div>

        <div class="rb-result-block">
          <div>Offset ‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢: <span id="rb-res-offset-avg">-</span></div>
          <div>Offset SD: <span id="rb-res-offset-std">-</span></div>
          <div>Rank: <span id="rb-res-rank">-</span></div>
          <div id="rb-res-quality-note" class="rb-res-quality-note hidden"></div>
        </div>
      </div>

      <footer class="rb-result-footer">
        <div class="rb-result-left">
          <button id="rb-btn-again" class="rb-btn rb-btn-primary">‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á‡πÄ‡∏î‡∏¥‡∏°‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á üîÅ</button>
          <button id="rb-btn-back-menu" class="rb-btn rb-btn-ghost">‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏•‡∏á</button>
        </div>
        <div class="rb-result-right">
          <button id="rb-btn-dl-events" class="rb-btn rb-btn-outline">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î CSV: Event</button>
          <button id="rb-btn-dl-sessions" class="rb-btn rb-btn-outline">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î CSV: Session</button>
        </div>
      </footer>
    </div>
  </section>

  <!-- ========= OVERLAYS ========= -->

  <!-- Research guard overlay -->
  <div id="rb-overlay-research" class="rb-overlay hidden">
    <div class="rb-overlay-box">
      <div id="rb-overlay-message" class="rb-overlay-message">
        ‡πÇ‡∏´‡∏°‡∏î‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏à‡∏ô‡πÄ‡∏û‡∏•‡∏á‡∏à‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏Ñ‡πà‡∏∞
      </div>
      <button id="rb-overlay-continue" class="rb-btn rb-btn-primary">
        ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏•‡πà‡∏ô‡∏ï‡πà‡∏≠
      </button>
    </div>
  </div>

  <!-- Audio unlock banner -->
  <div id="rb-audio-banner" class="rb-audio-banner hidden">
    <div class="rb-audio-text">
      ‡πÄ‡∏ö‡∏£‡∏≤‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ö‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÑ‡∏ß‡πâ ‡πÅ‡∏ï‡∏∞ "‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏•‡∏á üéµ
    </div>
    <button id="rb-audio-unlock" class="rb-btn rb-btn-primary rb-btn-sm">
      ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á
    </button>
  </div>
</div>

<!-- Audio element -->
<audio id="rb-audio" preload="auto"></audio>

<script type="module" src="js/rhythm-engine.js"></script>
</body>
</html>