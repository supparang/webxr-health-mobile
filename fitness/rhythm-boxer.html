<!-- === /fitness/rhythm-boxer.html === -->
<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>VR Fitness ‚Äî Rhythm Boxer</title>
  <meta name="color-scheme" content="dark light"/>
  <link rel="icon" href="favicon.ico"/>
  <link rel="stylesheet" href="css/rhythm-boxer.css"/>
</head>
<body>
<div id="rb-wrap" data-diff="normal">
  <div id="rb-flash"></div>

  <!-- ===== VIEW: MENU ===== -->
  <main id="rb-view-menu" class="rb-view">
    <header class="rb-header">
      <div class="rb-head-main">
        <span class="rb-pill">VR Fitness ¬∑ Rhythm</span>
        <h1 class="rb-title">Rhythm Boxer</h1>
        <p class="rb-sub">‡∏ï‡πà‡∏≠‡∏¢‡∏°‡∏∑‡∏≠‡∏ï‡∏≤‡∏°‡πÇ‡∏ô‡πâ‡∏ï‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞ ¬∑ ‡∏ù‡∏∂‡∏Å‡∏™‡∏°‡∏≤‡∏ò‡∏¥ + ‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á ¬∑ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÇ‡∏´‡∏°‡∏î‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡πÄ‡∏Å‡πá‡∏ö CSV</p>
        <span class="rb-sub-small">Tip: ‡πÄ‡∏£‡∏¥‡πà‡∏° Easy 1‚Äì2 ‡∏£‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢ Research</span>
      </div>
      <a href="hub.html" class="rb-back">‚Üê ‡∏Å‡∏•‡∏±‡∏ö HUB</a>
    </header>

    <section class="rb-section rb-grid-2">
      <div class="rb-research-box">
        <h2 class="rb-section-title">‡πÇ‡∏´‡∏°‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô</h2>

        <div class="rb-mode-toggle" role="radiogroup" aria-label="mode">
          <label class="rb-mode-btn">
            <input type="radio" name="rb-mode" value="normal" checked/>
            <span>Normal</span>
          </label>
          <label class="rb-mode-btn">
            <input type="radio" name="rb-mode" value="research"/>
            <span>Research</span>
          </label>
        </div>

        <p id="rb-mode-desc" class="rb-mode-desc">Normal: ‡πÄ‡∏•‡πà‡∏ô‡∏™‡∏ô‡∏∏‡∏Å / ‡πÉ‡∏ä‡πâ‡∏™‡∏≠‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°)</p>

        <div id="rb-research-fields" class="rb-section hidden">
          <h3 class="rb-section-subtitle">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢</h3>

          <div class="rb-field">
            <label for="rb-participant">Participant ID</label>
            <input id="rb-participant" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô P001, S05 ‡∏Ø‡∏•‡∏Ø"/>
          </div>
          <div class="rb-field">
            <label for="rb-group">‡∏Å‡∏•‡∏∏‡πà‡∏° / ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç</label>
            <input id="rb-group" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô Control, VR-High, L/R-Swap"/>
          </div>
          <div class="rb-field">
            <label for="rb-note">‡πÇ‡∏ô‡πâ‡∏ï‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</label>
            <input id="rb-note" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏£‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏ù‡∏∂‡∏Å, ‡∏´‡∏•‡∏±‡∏á‡∏ù‡∏∂‡∏Å, ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏•‡πà‡∏ô ‡∏Ø‡∏•‡∏Ø"/>
          </div>

          <p class="rb-hint-inline">
            Research ‡∏à‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Event CSV + Session CSV (offset, side, FEVER, HP) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏ä‡∏¥‡∏á‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
          </p>
        </div>
      </div>

      <div class="rb-research-box">
        <h2 class="rb-section-title">‡πÄ‡∏û‡∏•‡∏á / ‡∏£‡∏∞‡∏î‡∏±‡∏ö</h2>
        <p id="rb-track-mode-label" class="rb-section-subtitle">‡πÇ‡∏´‡∏°‡∏î Normal ‚Äî ‡πÄ‡∏û‡∏•‡∏á 3 ‡∏£‡∏∞‡∏î‡∏±‡∏ö: ‡∏á‡πà‡∏≤‡∏¢ / ‡∏õ‡∏Å‡∏ï‡∏¥ / ‡∏¢‡∏≤‡∏Å</p>

        <div id="rb-track-options" class="rb-section">
          <label class="rb-mode-btn" data-mode="normal">
            <input type="radio" name="rb-track" value="n1" checked/>
            <span>Warm-up Groove ¬∑ ‡∏á‡πà‡∏≤‡∏¢ ¬∑ 100 BPM</span>
          </label>
          <label class="rb-mode-btn" data-mode="normal">
            <input type="radio" name="rb-track" value="n2"/>
            <span>Focus Combo ¬∑ ‡∏õ‡∏Å‡∏ï‡∏¥ ¬∑ 120 BPM</span>
          </label>
          <label class="rb-mode-btn" data-mode="normal">
            <input type="radio" name="rb-track" value="n3"/>
            <span>Speed Rush ¬∑ ‡∏¢‡∏≤‡∏Å ¬∑ 140 BPM</span>
          </label>

          <label class="rb-mode-btn" data-mode="research">
            <input type="radio" name="rb-track" value="r1"/>
            <span>Research Track 120 ¬∑ ‡∏ó‡∏î‡∏•‡∏≠‡∏á ¬∑ 120 BPM</span>
          </label>
        </div>

        <div class="rb-hint-block">
          <p class="rb-hint-title">‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏•‡πà‡∏ô</p>
          <ul class="rb-hint-list">
            <li>‡πÅ‡∏ï‡∏∞‡πÄ‡∏•‡∏ô (L2,L1,C,R1,R2) ‡πÉ‡∏´‡πâ‡πÇ‡∏ô‡πâ‡∏ï‡∏ï‡∏£‡∏á‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏µ</li>
            <li>Perfect/Great/Good ‡πÄ‡∏û‡∏¥‡πà‡∏° FEVER; Miss ‡∏•‡∏î HP</li>
            <li>‡∏Å‡∏î‡∏û‡∏•‡∏≤‡∏î (blank tap) ‡∏à‡∏∞‡πÇ‡∏î‡∏ô‡∏´‡∏±‡∏Å‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏±‡∏ô ‚Äú‡∏Å‡∏î‡∏£‡∏±‡∏ß‚Äù</li>
          </ul>
        </div>

        <div class="rb-section">
          <button id="rb-btn-start" class="rb-btn rb-btn-primary">‚ñ∂ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô Rhythm Boxer</button>
        </div>
      </div>
    </section>
  </main>

  <!-- ===== VIEW: PLAY ===== -->
  <main id="rb-view-play" class="rb-view hidden">
    <header class="rb-play-header">
      <div>
        <h1 class="rb-title-sm">Rhythm Boxer ¬∑ Play</h1>
        <p class="rb-sub-sm">‡πÅ‡∏ï‡∏∞‡πÄ‡∏•‡∏ô‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞ ¬∑ ‡∏î‡∏π FEVER / ACC / HP</p>
      </div>
      <button id="rb-btn-stop" class="rb-btn rb-btn-ghost">‚èπ ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏ß‡∏•‡∏≤</button>
    </header>

    <section class="rb-research-box rb-hud">
      <div class="rb-hud-row">
        <span class="rb-chip">Mode: <b id="rb-hud-mode">Normal</b></span>
        <span class="rb-chip">Track: <b id="rb-hud-track">Warm-up Groove</b></span>
      </div>
      <div class="rb-hud-row">
        <span class="rb-chip">Score: <b id="rb-hud-score">0</b></span>
        <span class="rb-chip">Combo: <b id="rb-hud-combo">0</b></span>
        <span class="rb-chip">Acc: <b id="rb-hud-acc">0.0%</b></span>
      </div>
      <div class="rb-hud-row rb-hud-row-ai">
        <span class="rb-chip rb-chip-ai">AI Fatigue: <b id="rb-hud-ai-fatigue">0%</b></span>
        <span class="rb-chip rb-chip-ai">AI Skill: <b id="rb-hud-ai-skill">50%</b></span>
        <span class="rb-chip rb-chip-ai">Suggest: <b id="rb-hud-ai-suggest">normal</b></span>
      </div>
      <div class="rb-hud-row rb-hud-row-ai">
        <span class="rb-chip rb-chip-ai rb-chip-tip"><span class="rb-chip-tip-label">Coach:</span> <b id="rb-hud-ai-tip" class="hidden"></b></span>
      </div>
      <div class="rb-hud-row">
        <span class="rb-chip">HP: <b id="rb-hud-hp">100</b></span>
        <span class="rb-chip">Shield: <b id="rb-hud-shield">0</b></span>
        <span class="rb-chip">Time: <b id="rb-hud-time">0.0</b></span>
      </div>
      <div class="rb-hud-row rb-hud-judge-row">
        <span class="rb-chip">Perfect: <b id="rb-hud-perfect">0</b></span>
        <span class="rb-chip">Great: <b id="rb-hud-great">0</b></span>
        <span class="rb-chip">Good: <b id="rb-hud-good">0</b></span>
        <span class="rb-chip">Miss: <b id="rb-hud-miss">0</b></span>
      </div>

      <div class="rb-bars">
        <div class="rb-bar-block">
          <span class="rb-bar-label">FEVER</span>
          <div class="rb-bar"><div id="rb-fever-fill" class="rb-bar-fill rb-bar-fever"></div></div>
          <span id="rb-fever-status" class="rb-bar-status">READY</span>
        </div>
        <div class="rb-bar-block">
          <span class="rb-bar-label">PROG</span>
          <div class="rb-bar"><div id="rb-progress-fill" class="rb-bar-fill rb-bar-progress"></div></div>
          <span id="rb-progress-text" class="rb-bar-status">0%</span>
        </div>
      </div>
    </section>

    <section class="rb-field-wrap">
      <div id="rb-field">
        <div id="rb-feedback" class="rb-feedback">‡∏û‡∏£‡πâ‡∏≠‡∏°!</div>
        <div class="rb-lanes" id="rb-lanes">
          <div class="rb-lane" data-lane="0"><div class="rb-lane-label">L2</div></div>
          <div class="rb-lane" data-lane="1"><div class="rb-lane-label">L1</div></div>
          <div class="rb-lane" data-lane="2"><div class="rb-lane-label">C</div></div>
          <div class="rb-lane" data-lane="3"><div class="rb-lane-label">R1</div></div>
          <div class="rb-lane" data-lane="4"><div class="rb-lane-label">R2</div></div>
        </div>
      </div>
      <p class="rb-howto-inline">‡πÅ‡∏ï‡∏∞‡πÄ‡∏•‡∏ô‡πÉ‡∏´‡πâ‡πÇ‡∏ô‡πâ‡∏ï‡∏ï‡∏£‡∏á‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏µ (‡πÄ‡∏™‡πâ‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏õ‡πâ‡∏≤‡∏¢‡πÄ‡∏•‡∏ô) ¬∑ ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏à‡∏≠‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™‡πÅ‡∏•‡∏∞‡πÄ‡∏°‡∏≤‡∏™‡πå</p>
    </section>

    <audio id="rb-audio" preload="auto"></audio>
  </main>

  <!-- ===== VIEW: RESULT ===== -->
  <main id="rb-view-result" class="rb-view hidden">
    <header class="rb-header">
      <div class="rb-head-main">
        <span class="rb-pill">Result</span>
        <h1 class="rb-title">‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏• ¬∑ Rhythm Boxer</h1>
        <p class="rb-sub">‡πÉ‡∏ä‡πâ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô / ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á</p>
      </div>
    </header>

    <section class="rb-result-grid">
      <div class="rb-result-card">
        <h2 class="rb-result-title">Overview</h2>
        <div class="rb-result-row"><span>Mode</span><b id="rb-res-mode">-</b></div>
        <div class="rb-result-row"><span>Track</span><b id="rb-res-track">-</b></div>
        <div class="rb-result-row"><span>End reason</span><b id="rb-res-endreason">-</b></div>
        <div class="rb-result-row"><span>Score</span><b id="rb-res-score">0</b></div>
        <div class="rb-result-row"><span>Max Combo</span><b id="rb-res-maxcombo">0</b></div>
        <div class="rb-result-row"><span>Hit P/G/Gd/Miss</span><b id="rb-res-detail-hit">0 / 0 / 0 / 0</b></div>
        <div class="rb-result-row"><span>Accuracy</span><b id="rb-res-acc">0.0 %</b></div>
        <div class="rb-result-row"><span>Duration</span><b id="rb-res-duration">0.0 s</b></div>
        <div class="rb-result-row"><span>Rank</span><b id="rb-res-rank">-</b></div>
      </div>

      <div class="rb-result-card">
        <h2 class="rb-result-title">Timing / Research</h2>
        <div class="rb-result-row"><span>Offset mean</span><b id="rb-res-offset-avg">-</b></div>
        <div class="rb-result-row"><span>Offset std</span><b id="rb-res-offset-std">-</b></div>
        <div class="rb-result-row"><span>Participant</span><b id="rb-res-participant">-</b></div>
      </div>
    </section>

    <p id="rb-res-quality-note" class="rb-quality-note hidden"></p>

    <section class="rb-section rb-btn-row">
      <button id="rb-btn-again" class="rb-btn rb-btn-primary">üîÅ ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á‡πÄ‡∏î‡∏¥‡∏°‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
      <button id="rb-btn-back-menu" class="rb-btn">‚¨Ö ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î</button>
    </section>

    <section class="rb-research-box rb-section">
      <h2 class="rb-section-title-sm">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î CSV ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢</h2>
      <p class="rb-hint-inline">Event CSV: ‡∏Å‡∏≤‡∏£‡∏Å‡∏î‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏£‡∏±‡πâ‡∏á ¬∑ Session CSV: ‡∏™‡∏£‡∏∏‡∏õ 1 ‡πÅ‡∏ñ‡∏ß‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô 1 ‡∏£‡∏≠‡∏ö</p>
      <div class="rb-btn-row">
        <button id="rb-btn-dl-events" class="rb-btn rb-btn-sm">‚¨á Event CSV</button>
        <button id="rb-btn-dl-sessions" class="rb-btn rb-btn-sm">‚¨á Session CSV</button>
      </div>
    </section>
  </main>
</div>

<script src="js/ai-predictor.js"></script>
<script src="js/dom-renderer-rhythm.js"></script>
<script src="js/rhythm-engine.js"></script>
<script src="js/rhythm-boxer.js"></script>
</body>
</html>