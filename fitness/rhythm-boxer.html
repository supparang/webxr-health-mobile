<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>Rhythm Boxer ‚Äî 5 Lane Research Mode</title>
  <meta name="color-scheme" content="dark light"/>
  <link rel="stylesheet" href="rhythm-boxer.css"/>
</head>
<body>
<div id="rb-wrap">
  <!-- ====== Research Overlay (prevent early stop) ====== -->
  <div id="rb-overlay-research" class="rb-overlay hidden">
    <div class="rb-overlay-box">
      <div id="rb-overlay-message" class="rb-overlay-message">
        ‡πÇ‡∏´‡∏°‡∏î‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏à‡∏ô‡πÄ‡∏û‡∏•‡∏á‡∏à‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏Ñ‡πà‡∏∞
      </div>
      <button id="rb-overlay-continue" class="rb-btn rb-btn-primary">
        ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏•‡πâ‡∏ß
      </button>
    </div>
  </div>

  <!-- ====== MENU VIEW ====== -->
  <section id="rb-view-menu" class="rb-view">
    <header class="rb-header">
      <h1>Rhythm Boxer ü•äüéµ</h1>
      <p class="rb-subtitle">
        ‡πÄ‡∏Å‡∏°‡∏ù‡∏∂‡∏Å‡∏´‡∏°‡∏±‡∏î‡∏ï‡∏≤‡∏°‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞‡πÄ‡∏û‡∏•‡∏á ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢ + ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏¥‡∏à‡∏±‡∏¢ (Reaction Time / Accuracy)
      </p>
    </header>

    <!-- Mode select -->
    <div class="rb-card">
      <h2>‡πÇ‡∏´‡∏°‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô</h2>
      <div class="rb-mode-row">
        <label class="rb-radio">
          <input type="radio" name="mode" value="normal" checked>
          <span>‡πÇ‡∏´‡∏°‡∏î‡∏õ‡∏Å‡∏ï‡∏¥ (‡πÄ‡∏•‡πà‡∏ô‡∏™‡∏ô‡∏∏‡∏Å / ‡∏ù‡∏∂‡∏Å‡∏ã‡πâ‡∏≠‡∏°)</span>
        </label>
        <label class="rb-radio">
          <input type="radio" name="mode" value="research">
          <span>‡πÇ‡∏´‡∏°‡∏î‡∏ß‡∏¥‡∏à‡∏±‡∏¢ (‡∏•‡πá‡∏≠‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏à‡∏ô‡πÄ‡∏û‡∏•‡∏á‡∏à‡∏ö)</span>
        </label>
      </div>

      <!-- Research meta fields -->
      <div id="rb-research-fields" class="rb-research-fields hidden">
        <div class="rb-field-row">
          <label for="rb-participant">‡∏£‡∏´‡∏±‡∏™‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏° (Participant ID)</label>
          <input id="rb-participant" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô P001"/>
        </div>
        <div class="rb-field-row">
          <label for="rb-group">‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏î‡∏•‡∏≠‡∏á / ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°</label>
          <input id="rb-group" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô G1 / Control"/>
        </div>
        <div class="rb-field-row">
          <label for="rb-note">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ (‡πÄ‡∏ä‡πà‡∏ô ‡∏£‡∏∏‡πà‡∏ô‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå / ‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤)</label>
          <input id="rb-note" type="text" placeholder="optional"/>
        </div>
      </div>
    </div>

    <!-- Track select -->
    <div class="rb-card">
      <h2>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏•‡∏á / ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å</h2>
      <div class="rb-field-row">
        <label for="rb-track">‡πÄ‡∏û‡∏•‡∏á</label>
        <select id="rb-track">
          <option value="t1">Warm-up Groove ‚Äî Easy (98 BPM)</option>
          <option value="t2">Punch Rush ‚Äî Normal (128 BPM)</option>
          <option value="t3">Ultra Beat Combo ‚Äî Hard (145 BPM)</option>
          <option value="research">Research Track 120 ‚Äî Moderate (120 BPM)</option>
        </select>
      </div>
      <p class="rb-help">
        ‡πÉ‡∏ä‡πâ Research Track ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏ö‡∏ö (pattern ‡πÄ‡∏î‡∏¥‡∏°‡∏ã‡πâ‡∏≥‡∏ó‡∏∏‡∏Å phrase)
      </p>
      <button id="rb-btn-start" class="rb-btn rb-btn-primary rb-btn-lg">
        ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô üéÆ
      </button>
    </div>

    <footer class="rb-footer">
      <p>Tip: ‡πÉ‡∏ä‡πâ‡∏´‡∏π‡∏ü‡∏±‡∏á ‡πÅ‡∏•‡∏∞‡∏¢‡∏∑‡∏ô‡∏´‡πà‡∏≤‡∏á‡∏à‡∏≠‡∏û‡∏≠‡∏™‡∏°‡∏Ñ‡∏ß‡∏£ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡πÑ‡∏î‡πâ‡∏™‡∏∞‡∏î‡∏ß‡∏Å</p>
    </footer>
  </section>

  <!-- ====== PLAY VIEW ====== -->
  <section id="rb-view-play" class="rb-view hidden">
    <!-- HUD top -->
    <div class="rb-hud-top">
      <div class="rb-hud-group">
        <div class="rb-hud-label">‡πÇ‡∏´‡∏°‡∏î</div>
        <div id="rb-hud-mode" class="rb-hud-value">Normal</div>
      </div>
      <div class="rb-hud-group">
        <div class="rb-hud-label">‡πÄ‡∏û‡∏•‡∏á</div>
        <div id="rb-hud-track" class="rb-hud-value">-</div>
      </div>
      <div class="rb-hud-group">
        <div class="rb-hud-label">‡πÄ‡∏ß‡∏•‡∏≤</div>
        <div id="rb-hud-time" class="rb-hud-value">0.0</div>
      </div>
      <div class="rb-hud-group">
        <div class="rb-hud-label">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>
        <div id="rb-hud-score" class="rb-hud-value">0</div>
      </div>
      <div class="rb-hud-group">
        <div class="rb-hud-label">COMBO</div>
        <div id="rb-hud-combo" class="rb-hud-value">0</div>
      </div>
      <div class="rb-hud-group">
        <div class="rb-hud-label">Accuracy</div>
        <div id="rb-hud-acc" class="rb-hud-value">0.0%</div>
      </div>
    </div>

    <!-- Hit detail -->
    <div class="rb-hud-mid">
      <div class="rb-hit-box">
        <span>Perfect</span>
        <strong id="rb-hud-perfect">0</strong>
      </div>
      <div class="rb-hit-box">
        <span>Great</span>
        <strong id="rb-hud-great">0</strong>
      </div>
      <div class="rb-hit-box">
        <span>Good</span>
        <strong id="rb-hud-good">0</strong>
      </div>
      <div class="rb-hit-box miss">
        <span>Miss</span>
        <strong id="rb-hud-miss">0</strong>
      </div>
    </div>

    <!-- FEVER bar -->
    <div class="rb-fever-row">
      <div class="rb-fever-label">FEVER</div>
      <div class="rb-fever-bar">
        <div id="rb-fever-fill" class="rb-fever-fill"></div>
      </div>
      <div id="rb-fever-status" class="rb-fever-status">FEVER</div>
    </div>

    <!-- Progress bar -->
    <div class="rb-progress-row">
      <div class="rb-progress-bar">
        <div id="rb-progress-fill" class="rb-progress-fill"></div>
      </div>
      <div id="rb-progress-text" class="rb-progress-text">0%</div>
    </div>

    <!-- Lane field -->
    <div id="rb-lanes" class="rb-lanes">
      <div class="rb-lane" data-lane="0">
        <div class="rb-lane-label">L2</div>
      </div>
      <div class="rb-lane" data-lane="1">
        <div class="rb-lane-label">L1</div>
      </div>
      <div class="rb-lane" data-lane="2">
        <div class="rb-lane-label">C</div>
      </div>
      <div class="rb-lane" data-lane="3">
        <div class="rb-lane-label">R1</div>
      </div>
      <div class="rb-lane" data-lane="4">
        <div class="rb-lane-label">R2</div>
      </div>
      <div id="rb-feedback" class="rb-feedback">
        ‡πÅ‡∏ï‡∏∞‡∏ó‡∏µ‡πà lane ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡πÄ‡∏™‡πâ‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏ï‡∏≤‡∏°‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞‡πÄ‡∏û‡∏•‡∏á üéµ
      </div>
    </div>

    <!-- Bottom controls -->
    <div class="rb-bottom-bar">
      <button id="rb-btn-stop" class="rb-btn rb-btn-ghost">
        ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏ß‡∏•‡∏≤
      </button>
    </div>

    <!-- Audio (‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÑ‡∏ü‡∏•‡πå audio/rb_*.mp3 ‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô) -->
    <audio id="rb-audio" preload="auto"></audio>
  </section>

  <!-- ====== RESULT VIEW ====== -->
  <section id="rb-view-result" class="rb-view hidden">
    <div class="rb-card rb-card-result">
      <h2>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô</h2>
      <div class="rb-result-grid">
        <div class="rb-result-item">
          <span class="rb-result-label">‡πÇ‡∏´‡∏°‡∏î</span>
          <span id="rb-res-mode" class="rb-result-value">-</span>
        </div>
        <div class="rb-result-item">
          <span class="rb-result-label">‡πÄ‡∏û‡∏•‡∏á</span>
          <span id="rb-res-track" class="rb-result-value">-</span>
        </div>
        <div class="rb-result-item">
          <span class="rb-result-label">‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏à‡∏ö‡πÄ‡∏Å‡∏°</span>
          <span id="rb-res-reason" class="rb-result-value">-</span>
        </div>
        <div class="rb-result-item">
          <span class="rb-result-label">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°</span>
          <span id="rb-res-score" class="rb-result-value">0</span>
        </div>
        <div class="rb-result-item">
          <span class="rb-result-label">Max Combo</span>
          <span id="rb-res-maxcombo" class="rb-result-value">0</span>
        </div>
        <div class="rb-result-item">
          <span class="rb-result-label">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÇ‡∏ô‡πâ‡∏ï</span>
          <span id="rb-res-totalnotes" class="rb-result-value">0</span>
        </div>
        <div class="rb-result-item">
          <span class="rb-result-label">Perfect / Great / Good / Miss</span>
          <span id="rb-res-detail-hit" class="rb-result-value">0 / 0 / 0 / 0</span>
        </div>
        <div class="rb-result-item">
          <span class="rb-result-label">Accuracy</span>
          <span id="rb-res-acc" class="rb-result-value">0.0 %</span>
        </div>
        <div class="rb-result-item">
          <span class="rb-result-label">Offset ‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</span>
          <span id="rb-res-offset-avg" class="rb-result-value">-</span>
        </div>
        <div class="rb-result-item">
          <span class="rb-result-label">Offset SD</span>
          <span id="rb-res-offset-std" class="rb-result-value">-</span>
        </div>
        <div class="rb-result-item">
          <span class="rb-result-label">‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏•‡πà‡∏ô</span>
          <span id="rb-res-duration" class="rb-result-value">0.0 s</span>
        </div>
        <div class="rb-result-item">
          <span class="rb-result-label">Participant</span>
          <span id="rb-res-participant" class="rb-result-value">-</span>
        </div>
        <div class="rb-result-item">
          <span class="rb-result-label">Rank</span>
          <span id="rb-res-rank" class="rb-result-value rb-rank">-</span>
        </div>
      </div>

      <p id="rb-res-quality-note" class="rb-quality-note hidden"></p>

      <div class="rb-result-actions">
        <button id="rb-btn-again" class="rb-btn rb-btn-primary">
          ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á‡πÄ‡∏î‡∏¥‡∏°‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á üîÅ
        </button>
        <button id="rb-btn-back-menu" class="rb-btn rb-btn-ghost">
          ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å
        </button>
      </div>

      <div class="rb-result-actions">
        <button id="rb-btn-dl-events" class="rb-btn rb-btn-secondary">
          ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î Event CSV
        </button>
        <button id="rb-btn-dl-sessions" class="rb-btn rb-btn-secondary">
          ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î Session CSV
        </button>
      </div>
    </div>
  </section>
</div>

<script type="module" src="rhythm-engine.js"></script>
</body>
</html>
