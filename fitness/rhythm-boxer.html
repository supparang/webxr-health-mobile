<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <title>Rhythm Boxer ‚Äî VR Fitness Suite</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <meta name="color-scheme" content="dark light"/>
  <link rel="stylesheet" href="./css/rhythm-boxer.css"/>
</head>
<body class="rhythm-bg">
  <div id="app">

    <!-- ===== VIEW: MENU ===== -->
    <section id="view-menu" class="view">
      <h1 class="title">ü•Å Rhythm Boxer <span class="sub">Neon Dojo</span></h1>
      <p class="subtitle">
        ‡πÄ‡∏Å‡∏°‡∏ï‡∏µ‡∏ï‡∏≤‡∏°‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞‡∏ö‡∏ô‡πÅ‡∏ú‡πà‡∏ô‡πÄ‡∏õ‡πâ‡∏≤ 4 ‡∏ó‡∏¥‡∏® / Rhythm punch pads (4 lanes) ‚Äî ‡∏ß‡∏±‡∏î timing, fatigue & spatial accuracy
      </p>

      <div class="field">
        <label for="difficulty">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å / Difficulty</label>
        <select id="difficulty">
          <option value="easy">‡∏á‡πà‡∏≤‡∏¢ (Easy) ‚Äî BPM ~100</option>
          <option value="normal" selected>‡∏õ‡∏Å‡∏ï‡∏¥ (Normal) ‚Äî BPM ~130</option>
          <option value="hard">‡∏¢‡∏≤‡∏Å (Hard) ‚Äî BPM ~160</option>
        </select>
      </div>

      <div class="field">
        <label for="tempoMode">‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞ / Tempo mode</label>
        <select id="tempoMode">
          <option value="fixed" selected>Fixed BPM ‚Äî ‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏±‡πâ‡∏á‡πÄ‡∏Å‡∏°</option>
          <option value="ramp">Increasing BPM ‚Äî ‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢ ‡πÜ</option>
          <option value="random">Random BPM ‚Äî ‡πÅ‡∏Å‡∏ß‡πà‡∏á‡∏™‡∏∏‡πà‡∏°‡∏£‡∏≠‡∏ö base tempo</option>
        </select>
      </div>

      <div class="btn-row">
        <button data-action="start-normal" class="btn primary">
          üéÆ ‡πÄ‡∏•‡πà‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥ / Play
        </button>
        <button data-action="goto-research" class="btn">
          üìä ‡πÇ‡∏´‡∏°‡∏î‡∏ß‡∏¥‡∏à‡∏±‡∏¢ / Research mode
        </button>
        <button data-action="goto-calib" class="btn ghost">
          üß™ Calibration 30s
        </button>
      </div>

      <div class="btn-row secondary">
        <button class="btn ghost" onclick="location.href='./index.html'">
          ‚¨Ö ‡∏Å‡∏•‡∏±‡∏ö Fitness Hub / Back to Hub
        </button>
      </div>
    </section>

    <!-- ===== VIEW: RESEARCH FORM ===== -->
    <section id="view-research" class="view hidden">
      <h2>üìä ‡πÇ‡∏´‡∏°‡∏î‡∏ß‡∏¥‡∏à‡∏±‡∏¢ / Research mode</h2>
      <p class="subtitle">
        ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏° / Fill participant info
      </p>
      <div class="field">
        <label for="researchId">‡∏£‡∏´‡∏±‡∏™‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏° / Participant ID</label>
        <input id="researchId" placeholder="‡πÄ‡∏ä‡πà‡∏ô P001, S01, E01"/>
      </div>
      <div class="field">
        <label for="researchGroup">‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ß‡∏¥‡∏à‡∏±‡∏¢ / Group</label>
        <input id="researchGroup" placeholder="‡πÄ‡∏ä‡πà‡∏ô Control / Training / VR-Only"/>
      </div>
      <div class="field">
        <label for="researchPhase">‡∏£‡∏∞‡∏¢‡∏∞ / Phase</label>
        <input id="researchPhase" placeholder="‡πÄ‡∏ä‡πà‡∏ô Pre-test / Post-test / Follow-up"/>
      </div>

      <div class="btn-row">
        <button data-action="start-research" class="btn primary">
          ‚ñ∂ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÇ‡∏´‡∏°‡∏î‡∏ß‡∏¥‡∏à‡∏±‡∏¢ / Start research
        </button>
        <button data-action="back-menu" class="btn ghost">
          ‚¨Ö ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π / Back
        </button>
      </div>
    </section>

    <!-- ===== VIEW: CALIBRATION ===== -->
    <section id="view-calib" class="view hidden">
      <h2>üß™ Calibration 30s</h2>
      <p class="subtitle">
        ‡πÅ‡∏ï‡∏∞‡πÄ‡∏õ‡πâ‡∏≤‡∏ï‡∏≤‡∏°‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì reaction time ‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢<br/>
        Tap pads on beat to estimate personal RT window
      </p>
      <div class="field">
        <label for="calibId">‡∏£‡∏´‡∏±‡∏™‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏° / Participant ID</label>
        <input id="calibId" placeholder="‡πÄ‡∏ä‡πà‡∏ô P001 (‡πÉ‡∏ä‡πâ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö‡πÇ‡∏´‡∏°‡∏î‡∏ß‡∏¥‡∏à‡∏±‡∏¢)"/>
      </div>
      <div class="field">
        <label for="calibDiff">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ Calibration</label>
        <select id="calibDiff">
          <option value="easy">Easy</option>
          <option value="normal" selected>Normal</option>
          <option value="hard">Hard</option>
        </select>
      </div>
      <div class="btn-row">
        <button data-action="start-calib" class="btn primary">
          ‚ñ∂ ‡πÄ‡∏£‡∏¥‡πà‡∏° Calibration 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
        </button>
        <button data-action="back-menu" class="btn ghost">
          ‚¨Ö ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π / Back
        </button>
      </div>
    </section>

    <!-- ===== VIEW: PLAY ===== -->
    <section id="view-play" class="view hidden">
      <div id="hud">
        <span>Mode: <b id="hud-mode">-</b></span>
        <span>Diff: <b id="hud-diff">-</b></span>
        <span>BPM: <b id="hud-bpm">-</b></span>
      </div>
      <div id="hud2">
        <span>Score / ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <b id="hud-score">0</b></span>
        <span>Combo: <b id="hud-combo">0</b></span>
        <span>Miss: <b id="hud-miss">0</b></span>
        <span>Time: <b id="hud-time">60.0</b>s</span>
      </div>

      <div id="feverWrap">
        <div id="feverFill"></div>
      </div>

      <div id="playArea">
        <div id="padWrap">
          <div class="pad" data-pad="0">
            <div class="pad-label">LEFT</div>
            <div class="pad-emoji">ü•ä</div>
          </div>
          <div class="pad" data-pad="1">
            <div class="pad-label">MID-L</div>
            <div class="pad-emoji">‚≠ê</div>
          </div>
          <div class="pad" data-pad="2">
            <div class="pad-label">MID-R</div>
            <div class="pad-emoji">‚ö°</div>
          </div>
          <div class="pad" data-pad="3">
            <div class="pad-label">RIGHT</div>
            <div class="pad-emoji">üéØ</div>
          </div>
        </div>

        <div id="judgeLabel" class="judge">READY</div>
      </div>

      <p class="howto">
        ‡πÅ‡∏ï‡∏∞‡πÅ‡∏ú‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏ß‡πà‡∏≤‡∏á‡∏ï‡∏£‡∏á‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞‡πÄ‡∏û‡∏•‡∏á (Perfect / Good / Late)<br/>
        Tap the glowing pad on beat ‚Äî avoid wrong pads and late hits.
      </p>

      <div class="btn-row">
        <button data-action="stop" class="btn ghost">
          ‚èπ ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ / Stop early
        </button>
        <button class="btn ghost" onclick="location.href='./index.html'">
          ‚¨Ö Hub
        </button>
      </div>
    </section>

    <!-- ===== VIEW: RESULT ===== -->
    <section id="view-result" class="view hidden">
      <h2>üìà ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏• / Session summary</h2>

      <div class="result-grid">
        <div class="result-row"><span>Mode</span><b id="res-mode"></b></div>
        <div class="result-row"><span>Difficulty</span><b id="res-diff"></b></div>
        <div class="result-row"><span>Tempo mode</span><b id="res-tempo"></b></div>
        <div class="result-row"><span>Base BPM</span><b id="res-bpm"></b></div>
        <div class="result-row"><span>End reason</span><b id="res-end"></b></div>

        <div class="result-row"><span>Score / ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°</span><b id="res-score"></b></div>
        <div class="result-row"><span>Max combo</span><b id="res-maxcombo"></b></div>
        <div class="result-row"><span>Total hits</span><b id="res-hits"></b></div>
        <div class="result-row"><span>Total miss</span><b id="res-miss"></b></div>
        <div class="result-row"><span>Accuracy (hit/beat)</span><b id="res-acc"></b></div>

        <div class="result-row"><span>Perfect count</span><b id="res-perfect"></b></div>
        <div class="result-row"><span>Good count</span><b id="res-good"></b></div>
        <div class="result-row"><span>Late count</span><b id="res-late"></b></div>

        <div class="result-row"><span>RT mean</span><b id="res-rtmean"></b></div>
        <div class="result-row"><span>RT SD</span><b id="res-rtsd"></b></div>
        <div class="result-row"><span>IBI error mean |ŒîIBI|</span><b id="res-ibi"></b></div>
        <div class="result-row"><span>Tempo drift</span><b id="res-drift"></b></div>
        <div class="result-row"><span>Fatigue index</span><b id="res-fatigue"></b></div>

        <div class="result-row"><span>Spatial accuracy</span><b id="res-spatial"></b></div>
        <div class="result-row"><span>Spatial correct</span><b id="res-spatial-ok"></b></div>
        <div class="result-row"><span>Spatial wrong / empty</span><b id="res-spatial-bad"></b></div>
      </div>

      <p class="note">
        CSV ‡∏à‡∏∞‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏à‡∏ö‡∏£‡∏≠‡∏ö‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏ß‡∏¥‡∏à‡∏±‡∏¢ / CSV is auto-downloaded at end of research session.
      </p>

      <div class="btn-row">
        <button data-action="play-again" class="btn primary">üîÅ ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á / Play again</button>
        <button data-action="back-menu" class="btn ghost">üè† ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π / Back to menu</button>
      </div>
    </section>

    <!-- Overlay: Coach & Combo -->
    <div id="coachBubble" class="coach hidden"></div>
    <div id="comboCall" class="comboCall"></div>

  </div>

  <script type="module" src="./js/rhythm-boxer.js"></script>
</body>
</html>