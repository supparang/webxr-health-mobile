<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>VR Fitness ‚Äî Rhythm Boxer</title>
  <meta name="color-scheme" content="dark light"/>
  <link rel="icon" href="favicon.ico"/>

  <!-- CSS ‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á Rhythm Boxer -->
  <link rel="stylesheet" href="css/rhythm-boxer.css"/>

</head>
<body>
<div id="rb-wrap" data-diff="normal">
  <!-- flash ‡∏ï‡∏≠‡∏ô‡πÇ‡∏î‡∏ô / miss -->
  <div id="rb-flash"></div>

  <!-- ===== VIEW: MENU ===== -->
  <main id="rb-view-menu" class="rb-view">
    <header class="rb-header">
      <div class="rb-head-main">
        <p class="rb-pill">VR Fitness Academy ¬∑ Rhythm Mode</p>
        <h1 class="rb-title">Rhythm&nbsp;Boxer</h1>
        <p class="rb-sub">
          ‡∏ï‡πà‡∏≠‡∏¢‡∏ï‡∏≤‡∏°‡πÇ‡∏ô‡πâ‡∏ï‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞ ‡∏ù‡∏∂‡∏Å‡∏™‡∏°‡∏≤‡∏ò‡∏¥ + ‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á
          <span class="rb-sub-small">‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÇ‡∏´‡∏°‡∏î‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡πÄ‡∏Å‡πá‡∏ö CSV</span>
        </p>
      </div>
      <a href="hub.html" class="rb-back">‚¨Ö ‡∏Å‡∏•‡∏±‡∏ö HUB</a>
    </header>

    <!-- ‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏•‡πà‡∏ô / ‡∏ß‡∏¥‡∏à‡∏±‡∏¢ -->
    <section class="rb-section">
      <h2 class="rb-section-title">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô</h2>
      <div class="rb-mode-toggle">
        <label class="rb-mode-btn">
          <input type="radio" name="mode" value="normal" checked/>
          <span>Normal</span>
        </label>
        <label class="rb-mode-btn">
          <input type="radio" name="mode" value="research"/>
          <span>Research</span>
        </label>
      </div>
      <p id="rb-mode-desc" class="rb-mode-desc">
        Normal: ‡πÄ‡∏•‡πà‡∏ô‡∏™‡∏ô‡∏∏‡∏Å / ‡πÉ‡∏ä‡πâ‡∏™‡∏≠‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°)
      </p>
    </section>

    <!-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏•‡∏á -->
    <section class="rb-section rb-grid-2">
      <div>
        <h3 class="rb-section-subtitle">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏•‡∏á / ‡∏£‡∏∞‡∏î‡∏±‡∏ö</h3>
        <div class="rb-field">
          <label for="rb-track">‡πÄ‡∏û‡∏•‡∏á</label>
          <select id="rb-track">
            <option value="t1">Warm-up Groove (‡∏á‡πà‡∏≤‡∏¢ ¬∑ 100 BPM)</option>
            <option value="research">Research Track 120 (‡∏ó‡∏î‡∏•‡∏≠‡∏á ¬∑ 120 BPM)</option>
          </select>
        </div>

        <div class="rb-hint-block">
          <p class="rb-hint-title">‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏•‡πà‡∏ô‡∏¢‡πà‡∏≠</p>
          <ul class="rb-hint-list">
            <li>‡πÅ‡∏ï‡∏∞/‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏ô‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏™‡∏µ‡∏Ç‡∏≠‡∏á‡πÇ‡∏ô‡πâ‡∏ï</li>
            <li>Perfect / Great / Good ‚Üí ‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏Å‡∏à FEVER</li>
            <li>Miss ‡∏ö‡πà‡∏≠‡∏¢ ‡πÜ HP ‡∏à‡∏∞‡∏•‡∏î‡∏•‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏à‡∏∞‡∏ï‡πà‡∏≥‡∏•‡∏á</li>
          </ul>
        </div>
      </div>

      <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ß‡∏¥‡∏à‡∏±‡∏¢ -->
      <div id="rb-research-fields" class="rb-research-box hidden">
        <h3 class="rb-section-subtitle">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢</h3>
        <div class="rb-field">
          <label for="rb-participant">Participant ID</label>
          <input id="rb-participant" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô P001, S05 ‡∏Ø‡∏•‡∏Ø"/>
        </div>
        <div class="rb-field">
          <label for="rb-group">‡∏Å‡∏•‡∏∏‡πà‡∏° / ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç</label>
          <input id="rb-group" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô Control, VR-High, L/R-Swap"/>
        </div>
        <div class="rb-field">
          <label for="rb-note">‡πÇ‡∏ô‡πâ‡∏ï‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</label>
          <textarea id="rb-note" rows="2" placeholder="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏™‡∏±‡πâ‡∏ô ‡πÜ ‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏•‡πà‡∏ô, ‡∏†‡∏≤‡∏ß‡∏∞‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û ‡∏Ø‡∏•‡∏Ø"></textarea>
        </div>
        <p class="rb-hint-inline">
          ‡πÇ‡∏´‡∏°‡∏î Research: ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Event CSV + Session CSV ‡∏û‡∏£‡πâ‡∏≠‡∏° offset, side (L/R), FEVER ‡πÅ‡∏•‡∏∞ HP ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏ä‡∏¥‡∏á‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
        </p>
      </div>
    </section>

    <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏° / ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠ -->
    <section class="rb-section">
      <div class="rb-btn-row">
        <button id="rb-btn-start" class="rb-btn rb-btn-primary">
          ‚ñ∂ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô Rhythm Boxer
        </button>
        <button type="button" class="rb-btn rb-btn-ghost" onclick="alert('‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö: ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡πÄ‡∏û‡∏•‡∏á Warm-up Groove ‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î Normal ‡∏Å‡πà‡∏≠‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡∏™‡∏•‡∏±‡∏ö‡πÑ‡∏õ Research Track ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏Ñ‡∏∏‡πâ‡∏ô‡πÄ‡∏Ñ‡∏¢‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏∞‡∏Ñ‡∏∞ üòä');">
          üí° ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏£‡∏π / ‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡∏à‡∏±‡∏¢
        </button>
      </div>
    </section>
  </main>

  <!-- ===== VIEW: PLAY ===== -->
  <main id="rb-view-play" class="rb-view hidden">
    <header class="rb-play-header">
      <div>
        <h1 class="rb-title-sm">Rhythm Boxer ¬∑ Play</h1>
        <p class="rb-sub-sm">
          ‡πÅ‡∏ï‡∏∞‡πÄ‡∏•‡∏ô‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞ ¬∑ ‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï FEVER bar ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô
        </p>
      </div>
      <button id="rb-btn-stop" class="rb-btn rb-btn-ghost rb-btn-sm">
        ‚èπ ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏ß‡∏•‡∏≤
      </button>
    </header>

    <!-- HUD ‡πÅ‡∏ñ‡∏ß‡∏ö‡∏ô -->
    <section class="rb-hud">
      <div class="rb-hud-row">
        <div class="rb-chip">Mode: <span id="rb-hud-mode">Normal</span></div>
        <div class="rb-chip">Track: <span id="rb-hud-track">Warm-up</span></div>
        <div class="rb-chip">Score: <span id="rb-hud-score">0</span></div>
        <div class="rb-chip">Combo: <span id="rb-hud-combo">0</span></div>
        <div class="rb-chip">Acc: <span id="rb-hud-acc">0.0%</span></div>
      </div>
      <div class="rb-hud-row">
        <div class="rb-chip">HP: <span id="rb-hud-hp">100</span></div>
        <div class="rb-chip">Shield: <span id="rb-hud-shield">0</span></div>
        <div class="rb-chip">Time: <span id="rb-hud-time">0.0</span>s</div>
      </div>
      <div class="rb-hud-row rb-hud-judge-row">
        <div class="rb-chip">Perfect: <span id="rb-hud-perfect">0</span></div>
        <div class="rb-chip">Great: <span id="rb-hud-great">0</span></div>
        <div class="rb-chip">Good: <span id="rb-hud-good">0</span></div>
        <div class="rb-chip">Miss: <span id="rb-hud-miss">0</span></div>
      </div>
    </section>

    <!-- FEVER / Progress -->
    <section class="rb-bars">
      <div class="rb-bar-block">
        <div class="rb-bar-label">FEVER</div>
        <div class="rb-bar">
          <div id="rb-fever-fill" class="rb-bar-fill rb-bar-fever"></div>
        </div>
        <div id="rb-fever-status" class="rb-bar-status">READY</div>
      </div>
      <div class="rb-bar-block">
        <div class="rb-bar-label">PROGRESS</div>
        <div class="rb-bar">
          <div id="rb-progress-fill" class="rb-bar-fill rb-bar-progress"></div>
        </div>
        <div id="rb-progress-text" class="rb-bar-status">0%</div>
      </div>
    </section>

    <!-- ‡∏™‡∏ô‡∏≤‡∏° + ‡πÄ‡∏•‡∏ô -->
    <section class="rb-field-wrap">
      <div id="rb-field" class="rb-field">
        <div id="rb-feedback" class="rb-feedback"></div>

        <div id="rb-lanes" class="rb-lanes">
          <div class="rb-lane" data-lane="0">
            <div class="rb-lane-label">L2</div>
          </div>
          <div class="rb-lane" data-lane="1">
            <div class="rb-lane-label">L1</div>
          </div>
          <div class="rb-lane" data-lane="2">
            <div class="rb-lane-label">C</div>
          </div>
          <div class="rb-lane" data-lane="3">
            <div class="rb-lane-label">R1</div>
          </div>
          <div class="rb-lane" data-lane="4">
            <div class="rb-lane-label">R2</div>
          </div>
        </div>
      </div>
    </section>

    <p class="rb-howto-inline">
      ‡πÅ‡∏ï‡∏∞‡πÄ‡∏•‡∏ô‡∏ã‡πâ‡∏≤‡∏¢/‡∏Ç‡∏ß‡∏≤‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÇ‡∏ô‡πâ‡∏ï‡∏ó‡∏µ‡πà‡∏ï‡∏Å‡∏•‡∏á‡∏°‡∏≤ ¬∑ ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏à‡∏≠‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™‡πÅ‡∏•‡∏∞‡πÄ‡∏°‡∏≤‡∏™‡πå
    </p>

    <!-- audio -->
    <audio id="rb-audio" preload="auto"></audio>
  </main>

  <!-- ===== VIEW: RESULT ===== -->
  <main id="rb-view-result" class="rb-view hidden">
    <header class="rb-play-header">
      <div>
        <h1 class="rb-title-sm">‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏• ¬∑ Rhythm Boxer</h1>
        <p class="rb-sub-sm">
          ‡πÉ‡∏ä‡πâ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô / ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á
        </p>
      </div>
    </header>

    <section class="rb-result-grid">
      <div class="rb-result-card">
        <h2 class="rb-result-title">Overview</h2>
        <div class="rb-result-row">
          <span>Mode</span><b id="rb-res-mode">-</b>
        </div>
        <div class="rb-result-row">
          <span>Track</span><b id="rb-res-track">-</b>
        </div>
        <div class="rb-result-row">
          <span>End reason</span><b id="rb-res-endreason">-</b>
        </div>
        <div class="rb-result-row">
          <span>Score</span><b id="rb-res-score">0</b>
        </div>
        <div class="rb-result-row">
          <span>Max Combo</span><b id="rb-res-maxcombo">0</b>
        </div>
        <div class="rb-result-row">
          <span>Hit P / G / Gd / Miss</span>
          <b id="rb-res-detail-hit">0 / 0 / 0 / 0</b>
        </div>
        <div class="rb-result-row">
          <span>Accuracy</span><b id="rb-res-acc">0.0 %</b>
        </div>
        <div class="rb-result-row">
          <span>Duration</span><b id="rb-res-duration">0.0 s</b>
        </div>
        <div class="rb-result-row">
          <span>Rank</span><b id="rb-res-rank">-</b>
        </div>
      </div>

      <div class="rb-result-card">
        <h2 class="rb-result-title">Timing / Research</h2>
        <div class="rb-result-row">
          <span>Offset mean</span><b id="rb-res-offset-avg">-</b>
        </div>
        <div class="rb-result-row">
          <span>Offset std</span><b id="rb-res-offset-std">-</b>
        </div>
        <div class="rb-result-row">
          <span>Participant</span><b id="rb-res-participant">-</b>
        </div>
      </div>
    </section>

    <p id="rb-res-quality-note" class="rb-quality-note hidden">
      <!-- ‡πÄ‡∏ï‡∏¥‡∏°‡∏à‡∏≤‡∏Å engine ‡∏ñ‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• trial ‡πÑ‡∏°‡πà‡∏Ñ‡πà‡∏≠‡∏¢‡∏î‡∏µ -->
    </p>

    <section class="rb-section">
      <div class="rb-btn-row">
        <button id="rb-btn-again" class="rb-btn rb-btn-primary">
          üîÅ ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á‡πÄ‡∏î‡∏¥‡∏°‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
        </button>
        <button id="rb-btn-back-menu" class="rb-btn rb-btn-ghost">
          ‚¨Ö ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î
        </button>
      </div>
    </section>

    <section class="rb-section rb-section-border">
      <h2 class="rb-section-title-sm">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î CSV ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢</h2>
      <p class="rb-hint-inline">
        Event CSV: ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÇ‡∏ô‡πâ‡∏ï / ‡∏Å‡∏≤‡∏£‡∏Å‡∏î‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏£‡∏±‡πâ‡∏á &nbsp;¬∑&nbsp;
        Session CSV: ‡∏™‡∏£‡∏∏‡∏õ 1 ‡πÅ‡∏ñ‡∏ß‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô 1 ‡∏£‡∏≠‡∏ö
      </p>
      <div class="rb-btn-row">
        <button id="rb-btn-dl-events" class="rb-btn rb-btn-ghost">
          ‚¨á ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î Event CSV
        </button>
        <button id="rb-btn-dl-sessions" class="rb-btn rb-btn-ghost">
          ‚¨á ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î Session CSV
        </button>
      </div>
    </section>
  </main>
</div>

<!-- SCRIPTS -->
<script src="js/particle.js"></script>
<script src="js/dom-renderer-rb.js"></script>
<script src="js/rhythm-engine.js"></script>
<script src="js/rhythm-boxer.js"></script>
</body>
</html>
