/* === Rhythm Boxer — Main layout === */

:root{
  color-scheme: light dark;
}

*{ box-sizing:border-box; }

body{
  margin:0;
  min-height:100vh;
  font-family:system-ui,Segoe UI,Inter,Roboto,sans-serif;
  background:
    radial-gradient(circle at top left, rgba(56,189,248,0.16), transparent 55%),
    radial-gradient(circle at bottom right, rgba(34,197,94,0.2), transparent 55%),
    #020617;
  color:#e5e7eb;
}

main{
  max-width:900px;
  margin:16px auto 32px;
  padding:0 12px 24px;
}

.card{
  background:#020617cc;
  border-radius:18px;
  border:1px solid #1f2937;
  box-shadow:0 18px 45px rgba(15,23,42,0.75);
  padding:16px 16px 18px;
  margin-bottom:16px;
}

/* headings */

h1{
  margin:0 0 6px 0;
  font-size:22px;
  display:flex;
  align-items:center;
  gap:8px;
}

.subtitle{
  font-size:14px;
  color:#9ca3af;
  margin-bottom:8px;
}

.section-title{
  font-size:16px;
  margin:10px 0 6px;
}

/* layout helpers */

.row{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  margin-top:8px;
}

.col{
  flex:1 1 180px;
}

/* form */

label{
  font-size:13px;
  color:#9ca3af;
  display:block;
  margin-bottom:3px;
}

input, select{
  width:100%;
  padding:8px 9px;
  border-radius:10px;
  border:1px solid #334155;
  background:#020617;
  color:#e5e7eb;
  font:14px system-ui,Segoe UI,Inter,Roboto,sans-serif;
}

/* buttons */

.btn-row{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  margin-top:8px;
}

button{
  border:none;
  border-radius:999px;
  padding:8px 16px;
  font-size:14px;
  cursor:pointer;
  background:#111827;
  color:#e5e7eb;
}

button.primary{
  background:linear-gradient(135deg,#3b82f6,#a855f7);
  color:#f9fafb;
}

button:active{
  transform:translateY(1px);
}

.hidden{ display:none !important; }

/* === PLAY HUD === */

.play-top{
  display:flex;
  justify-content:space-between;
  gap:10px;
  align-items:flex-start;
}

.stats{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
}

.tag{
  padding:4px 8px;
  border-radius:999px;
  background:#020617;
  border:1px solid #1f2937;
  font-size:12px;
}

.timer{
  min-width:86px;
  text-align:right;
  border-radius:999px;
  border:1px solid #facc15;
  padding:4px 10px;
  font-size:14px;
}

/* === PLAY AREA === */

.play-area{
  margin-top:12px;
  border-radius:18px;
  border:1px solid #1f2937;
  background:radial-gradient(circle at top, #020617, #020617 60%, #000 100%);
  padding:8px;
  display:block; /* สำคัญ: ไม่บังคับสูงเท่าแม่ */
}

#target-layer{
  position:relative;
  width:100%;
  min-height:min(380px,60vh); /* สำคัญ: ให้มีความสูงจริง */
  border-radius:16px;
  background:#020617;
  overflow:hidden;
}

/* เป้าจังหวะ */

.rb-target{
  position:absolute;
  transform:translate(-50%,-50%);
  font-size:min(52px,7vh);
  cursor:pointer;
  transition:transform .1s ease-out, opacity .1s ease-out;
}

.rb-target.lane-0{
  filter:drop-shadow(0 0 10px rgba(56,189,248,0.9));
}
.rb-target.lane-1{
  filter:drop-shadow(0 0 10px rgba(34,197,94,0.9));
}
.rb-target.lane-2{
  filter:drop-shadow(0 0 10px rgba(244,114,182,0.9));
}

.rb-target-strong{
  transform:translate(-50%,-50%) scale(1.25);
}

/* label PERFECT / GOOD / BAD / MISS */

.rb-hit-label{
  position:absolute;
  transform:translate(-50%,-50%);
  font-size:12px;
  font-weight:700;
  padding:2px 6px;
  border-radius:999px;
  background:rgba(15,23,42,0.96);
  border:1px solid rgba(148,163,184,0.95);
  color:#e5e7eb;
  pointer-events:none;
  animation:rb-label-pop .4s ease-out forwards;
}

.rb-hit-perfect{ border-color:#22c55e; color:#bbf7d0; }
.rb-hit-good   { border-color:#3b82f6; color:#bfdbfe; }
.rb-hit-bad    { border-color:#f97316; color:#fed7aa; }
.rb-hit-miss   { border-color:#ef4444; color:#fecaca; }

@keyframes rb-label-pop{
  from{ opacity:0; transform:translate(-50%,-40%) scale(.8); }
  to  { opacity:1; transform:translate(-50%,-65%) scale(1); }
}

/* === GROOVE & TRACK === */

.groove-wrap{
  margin-top:10px;
}

.groove-label{
  font-size:12px;
  letter-spacing:.18em;
  text-transform:uppercase;
  color:#9ca3af;
}

.groove-bar{
  margin-top:4px;
  width:100%;
  height:10px;
  border-radius:999px;
  background:#020617;
  overflow:hidden;
  border:1px solid #1f2937;
}

.groove-fill{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,#22c55e,#eab308,#f97316);
  transition:width .12s linear;
}

.groove-status{
  margin-top:2px;
  font-size:12px;
  text-align:right;
  color:#e5e7eb;
}

.track-info{
  margin-top:10px;
}

.track-info #track-name{
  font-size:13px;
  color:#e5e7eb;
}

.track-bar{
  margin-top:4px;
  width:100%;
  height:6px;
  border-radius:999px;
  background:#020617;
  border:1px solid #1f2937;
  overflow:hidden;
}

#track-fill{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,#3b82f6,#a855f7);
  transition:width .12s linear;
}

/* === COACH === */

.coach-bubble{
  margin-top:10px;
  padding:8px 10px;
  border-radius:14px;
  background:#020617;
  border:1px solid #1f2937;
  display:flex;
  gap:8px;
  font-size:13px;
}

.coach-avatar{
  font-size:22px;
}

.coach-text{
  line-height:1.4;
}

/* === RESULT TABLE === */

.summary{
  width:100%;
  border-collapse:collapse;
  margin:6px 0 4px;
  font-size:13px;
}

.summary td{
  padding:3px 4px;
  border-bottom:1px dashed #1f2937;
}

.summary td:first-child{
  width:40%;
  color:#9ca3af;
}

/* === PAUSE OVERLAY === */

.pause-overlay{
  position:fixed;
  inset:0;
  background:rgba(15,23,42,0.82);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:40;
}

.pause-overlay.hidden{
  display:none;
}

.pause-box{
  width:min(360px,90vw);
  padding:16px 18px 14px;
  border-radius:18px;
  background:#020617;
  border:1px solid #1f2937;
  box-shadow:0 18px 45px rgba(0,0,0,.55);
}

.pause-title{
  font-weight:700;
  margin-bottom:4px;
}

.pause-text{
  font-size:13px;
  color:#e5e7eb;
  margin-bottom:12px;
}

/* small screens */

@media (max-width:480px){
  .card{ padding:14px 12px 16px; }
  .play-area{ padding:6px; }
  #target-layer{ min-height:55vh; }
}