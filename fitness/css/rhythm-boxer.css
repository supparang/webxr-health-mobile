/* === /fitness/css/rhythm-boxer.css ===
Rhythm Boxer â€” FULL CSS (hitline-bottom sync friendly)
PATCH focus:
- Hit line anchored at bottom
- Note head/tail visual aligned for engine translateY -> 0 at hitline
- Better tap targets + mobile readability
- HUD / Menu / Result complete for provided HTML
*/

:root{
  color-scheme: dark;

  --rb-bg0:#020617;
  --rb-bg1:#0b1220;
  --rb-panel: rgba(15,23,42,.88);
  --rb-panel-2: rgba(15,23,42,.72);
  --rb-line: rgba(148,163,184,.24);
  --rb-line-strong: rgba(148,163,184,.42);
  --rb-text: rgba(229,231,235,.96);
  --rb-muted: rgba(148,163,184,.96);

  --rb-accent:#38bdf8;
  --rb-accent2:#a855f7;
  --rb-good:#22c55e;
  --rb-warn:#f59e0b;
  --rb-bad:#fb7185;
  --rb-gold:#facc15;

  --rb-radius: 18px;
  --rb-shadow: 0 20px 48px rgba(0,0,0,.45);

  /* playfield geometry */
  --rb-field-h: clamp(360px, 56vh, 560px);
  --rb-lane-gap: 10px;
  --rb-lane-w-min: 72px;

  /* IMPORTANT: hit line location (from bottom of lane) */
  --rb-hitline-bottom: 56px;

  /* lane label area height */
  --rb-lane-label-h: 36px;

  /* note visuals */
  --rb-note-head-size: 32px;
  --rb-note-width: 18px;
  --rb-note-tail-w: 10px;

  /* safe paddings */
  --rb-sat: env(safe-area-inset-top, 0px);
  --rb-sar: env(safe-area-inset-right, 0px);
  --rb-sab: env(safe-area-inset-bottom, 0px);
  --rb-sal: env(safe-area-inset-left, 0px);
}

*{ box-sizing:border-box; }

html,body{
  margin:0;
  padding:0;
  min-height:100%;
  background:
    radial-gradient(1200px 800px at 10% -10%, rgba(56,189,248,.16), transparent 60%),
    radial-gradient(1000px 700px at 100% 0%, rgba(168,85,247,.14), transparent 62%),
    radial-gradient(800px 600px at 50% 110%, rgba(59,130,246,.10), transparent 60%),
    var(--rb-bg0);
  color:var(--rb-text);
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans Thai",sans-serif;
}

body{
  padding:
    max(10px, var(--rb-sat))
    max(10px, var(--rb-sar))
    max(14px, var(--rb-sab))
    max(10px, var(--rb-sal));
}

.hidden{ display:none !important; }

#rb-wrap{
  width:min(1180px, 100%);
  margin:0 auto;
  position:relative;
}

/* flash overlay */
#rb-flash{
  position:fixed;
  inset:0;
  pointer-events:none;
  opacity:0;
  background:
    radial-gradient(circle at 50% 62%, rgba(251,113,133,.14), transparent 45%),
    radial-gradient(circle at 50% 62%, rgba(255,255,255,.10), transparent 30%);
  transition:opacity .14s ease;
  z-index:90;
}
#rb-flash.active{ opacity:1; }

.rb-view{
  display:flex;
  flex-direction:column;
  gap:14px;
}

/* ---------- shared cards / panels ---------- */
.rb-research-box,
.rb-result-card,
.rb-section{
  background:
    linear-gradient(180deg, rgba(30,41,59,.34), rgba(15,23,42,.34)),
    var(--rb-panel);
  border:1px solid rgba(148,163,184,.18);
  border-radius:var(--rb-radius);
  box-shadow: var(--rb-shadow);
}

.rb-section{
  padding:14px;
}
.rb-research-box{
  padding:14px;
}
.rb-result-card{
  padding:14px;
}

/* ---------- headers ---------- */
.rb-header{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:14px;
  padding:14px;
  border-radius:var(--rb-radius);
  border:1px solid rgba(148,163,184,.18);
  background:
    radial-gradient(circle at top left, rgba(56,189,248,.10), transparent 55%),
    radial-gradient(circle at top right, rgba(168,85,247,.10), transparent 55%),
    var(--rb-panel);
  box-shadow: var(--rb-shadow);
}
.rb-head-main{
  min-width:0;
}
.rb-pill{
  display:inline-flex;
  align-items:center;
  gap:6px;
  font-size:.78rem;
  color:#bae6fd;
  border:1px solid rgba(56,189,248,.34);
  background:rgba(2,6,23,.52);
  border-radius:999px;
  padding:4px 10px;
}
.rb-title{
  margin:8px 0 4px;
  font-size:clamp(1.35rem, 2vw, 2rem);
  line-height:1.15;
}
.rb-sub{
  margin:0;
  color:var(--rb-muted);
  line-height:1.45;
  font-size:.92rem;
}
.rb-sub-small{
  display:inline-block;
  margin-top:6px;
  color:#cbd5e1;
  opacity:.92;
  font-size:.78rem;
}
.rb-back{
  color:#bfdbfe;
  text-decoration:none;
  border:1px solid rgba(148,163,184,.24);
  background:rgba(2,6,23,.35);
  border-radius:999px;
  padding:8px 12px;
  white-space:nowrap;
}
.rb-back:hover{
  background:rgba(2,6,23,.55);
  border-color:rgba(148,163,184,.36);
}

/* ---------- layout ---------- */
.rb-grid-2{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:14px;
}

.rb-section-title{
  margin:0 0 8px;
  font-size:1rem;
}
.rb-section-title-sm{
  margin:0 0 6px;
  font-size:.92rem;
}
.rb-section-subtitle{
  margin:0 0 10px;
  color:var(--rb-muted);
  font-size:.85rem;
}
.rb-mode-desc{
  margin:8px 0 0;
  color:var(--rb-muted);
  font-size:.84rem;
  line-height:1.4;
}

/* ---------- buttons ---------- */
.rb-btn{
  appearance:none;
  border:none;
  border-radius:12px;
  padding:10px 14px;
  font-size:.92rem;
  font-weight:600;
  color:var(--rb-text);
  background:rgba(30,41,59,.8);
  border:1px solid rgba(148,163,184,.24);
  cursor:pointer;
  transition: transform .08s ease, filter .12s ease, background .12s ease, border-color .12s ease;
}
.rb-btn:hover{
  filter:brightness(1.05);
  border-color:rgba(148,163,184,.36);
}
.rb-btn:active{
  transform:translateY(1px) scale(.995);
}
.rb-btn-primary{
  color:#06121f;
  border-color:transparent;
  background:linear-gradient(135deg, var(--rb-accent), var(--rb-accent2));
  box-shadow:0 10px 26px rgba(56,189,248,.22), 0 10px 26px rgba(168,85,247,.18);
}
.rb-btn-ghost{
  background:rgba(15,23,42,.5);
}
.rb-btn-sm{
  padding:8px 12px;
  font-size:.84rem;
}
.rb-btn-row{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
}

/* ---------- mode toggle / radio buttons ---------- */
.rb-mode-toggle{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}

.rb-mode-btn{
  position:relative;
  display:flex;
  align-items:center;
  gap:8px;
  padding:10px 12px;
  border-radius:12px;
  border:1px solid rgba(148,163,184,.22);
  background:rgba(15,23,42,.52);
  cursor:pointer;
  user-select:none;
  transition: border-color .12s ease, background .12s ease, transform .08s ease;
}
.rb-mode-btn:hover{
  border-color:rgba(148,163,184,.34);
  background:rgba(15,23,42,.68);
}
.rb-mode-btn:active{ transform:translateY(1px); }

.rb-mode-btn input{
  margin:0;
  accent-color: var(--rb-accent);
}
.rb-mode-btn:has(input:checked){
  border-color: rgba(56,189,248,.44);
  background:
    radial-gradient(circle at 10% 0%, rgba(56,189,248,.12), transparent 60%),
    rgba(15,23,42,.78);
  box-shadow: inset 0 0 0 1px rgba(56,189,248,.14);
}

/* ---------- form ---------- */
.rb-field{
  display:flex;
  flex-direction:column;
  gap:6px;
  margin-bottom:10px;
}
.rb-field label{
  font-size:.82rem;
  color:#dbeafe;
}
.rb-field input{
  width:100%;
  border-radius:10px;
  border:1px solid rgba(148,163,184,.26);
  background:rgba(2,6,23,.56);
  color:var(--rb-text);
  padding:10px 12px;
  outline:none;
}
.rb-field input:focus{
  border-color: rgba(56,189,248,.52);
  box-shadow:0 0 0 3px rgba(56,189,248,.12);
}

.rb-hint-inline,
.rb-hint-block,
.rb-howto-inline{
  color:var(--rb-muted);
  font-size:.82rem;
  line-height:1.45;
}
.rb-hint-block{
  border:1px dashed rgba(148,163,184,.2);
  border-radius:12px;
  background:rgba(2,6,23,.3);
  padding:10px 12px;
}
.rb-hint-title{
  margin:0 0 6px;
  color:#e2e8f0;
  font-weight:700;
  font-size:.84rem;
}
.rb-hint-list{
  margin:0;
  padding-left:18px;
}
.rb-hint-list li + li{ margin-top:3px; }

/* ---------- play header ---------- */
.rb-play-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
  padding:12px 14px;
  border-radius:var(--rb-radius);
  border:1px solid rgba(148,163,184,.18);
  background:var(--rb-panel);
  box-shadow: var(--rb-shadow);
}
.rb-title-sm{
  margin:0;
  font-size:1.04rem;
}
.rb-sub-sm{
  margin:2px 0 0;
  color:var(--rb-muted);
  font-size:.82rem;
}

/* ---------- HUD ---------- */
.rb-hud{
  display:flex;
  flex-direction:column;
  gap:8px;
}
.rb-hud-row{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}
.rb-chip{
  display:inline-flex;
  align-items:center;
  gap:6px;
  border-radius:999px;
  padding:6px 10px;
  border:1px solid rgba(148,163,184,.22);
  background:rgba(2,6,23,.38);
  color:#dbeafe;
  font-size:.78rem;
}
.rb-chip b{
  color:#f8fafc;
  font-weight:700;
}
.rb-chip-ai{
  border-color: rgba(56,189,248,.24);
  background:
    radial-gradient(circle at 0% 0%, rgba(56,189,248,.08), transparent 60%),
    rgba(2,6,23,.35);
}
.rb-chip-tip{
  max-width:min(100%, 860px);
}
.rb-chip-tip b{
  white-space:normal;
  word-break:break-word;
}
.rb-chip-tip-label{
  color:#7dd3fc;
  font-weight:700;
}

.rb-bars{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:10px;
  margin-top:4px;
}
.rb-bar-block{
  border-radius:12px;
  border:1px solid rgba(148,163,184,.18);
  background:rgba(2,6,23,.26);
  padding:8px 10px;
}
.rb-bar-label{
  display:block;
  font-size:.72rem;
  color:#cbd5e1;
  margin-bottom:5px;
}
.rb-bar{
  height:10px;
  border-radius:999px;
  background:rgba(148,163,184,.14);
  overflow:hidden;
  border:1px solid rgba(148,163,184,.14);
}
.rb-bar-fill{
  height:100%;
  width:0%;
  border-radius:999px;
  transition: width .10s linear;
}
.rb-bar-fever{
  background:linear-gradient(90deg, #f59e0b, #facc15);
  box-shadow:0 0 18px rgba(250,204,21,.24);
}
.rb-bar-progress{
  background:linear-gradient(90deg, #38bdf8, #a855f7);
}
.rb-bar-status{
  display:block;
  margin-top:5px;
  font-size:.75rem;
  color:var(--rb-muted);
}

/* ---------- PLAYFIELD ---------- */
.rb-field-wrap{
  display:flex;
  flex-direction:column;
  gap:8px;
}

#rb-field{
  position:relative;
  height:var(--rb-field-h);
  border-radius:20px;
  border:1px solid rgba(148,163,184,.20);
  background:
    radial-gradient(circle at 50% 0%, rgba(56,189,248,.06), transparent 50%),
    linear-gradient(180deg, rgba(2,6,23,.75), rgba(2,6,23,.94));
  box-shadow: var(--rb-shadow);
  overflow:hidden;
}

/* feedback floating */
.rb-feedback{
  position:absolute;
  left:50%;
  top:12px;
  transform:translateX(-50%);
  z-index:8;
  min-width:110px;
  text-align:center;
  border-radius:999px;
  padding:6px 12px;
  font-size:.86rem;
  font-weight:800;
  letter-spacing:.02em;
  color:#e2e8f0;
  border:1px solid rgba(148,163,184,.20);
  background:rgba(15,23,42,.72);
  pointer-events:none;
}
.rb-feedback.perfect{
  color:#111827;
  background:linear-gradient(135deg,#fde047,#f59e0b);
  border-color:transparent;
}
.rb-feedback.great{
  color:#031525;
  background:linear-gradient(135deg,#67e8f9,#38bdf8);
  border-color:transparent;
}
.rb-feedback.good{
  color:#052e16;
  background:linear-gradient(135deg,#86efac,#22c55e);
  border-color:transparent;
}
.rb-feedback.miss{
  color:#fff1f2;
  background:linear-gradient(135deg,#fb7185,#ef4444);
  border-color:transparent;
}

/* lanes container */
.rb-lanes{
  position:absolute;
  inset:0;
  display:grid;
  grid-template-columns:repeat(5, minmax(var(--rb-lane-w-min), 1fr));
  gap:var(--rb-lane-gap);
  padding:54px 12px 10px;
  align-items:stretch;
}

/* each lane */
.rb-lane{
  position:relative;
  border-radius:16px;
  overflow:hidden;
  border:1px solid rgba(148,163,184,.15);
  background:
    linear-gradient(180deg, rgba(15,23,42,.22), rgba(15,23,42,.38)),
    rgba(2,6,23,.22);
  touch-action:manipulation;
  user-select:none;
  cursor:pointer;
  min-height:0;
}

/* subtle vertical guides */
.rb-lane::after{
  content:"";
  position:absolute;
  left:50%;
  top:0;
  bottom:0;
  width:1px;
  transform:translateX(-50%);
  background:linear-gradient(180deg,
    rgba(148,163,184,.14),
    rgba(148,163,184,.05) 35%,
    rgba(148,163,184,.18) 70%,
    rgba(148,163,184,.10));
  pointer-events:none;
}

/* HIT LINE (gold line near bottom) */
.rb-lane::before{
  content:"";
  position:absolute;
  left:10px;
  right:10px;
  bottom:var(--rb-hitline-bottom);
  height:4px;
  border-radius:999px;
  background:
    linear-gradient(90deg,
      rgba(250,204,21,.12),
      rgba(250,204,21,.95) 18%,
      rgba(255,255,255,.96) 50%,
      rgba(250,204,21,.95) 82%,
      rgba(250,204,21,.12));
  box-shadow:
    0 0 0 1px rgba(250,204,21,.18),
    0 0 14px rgba(250,204,21,.35),
    0 0 28px rgba(250,204,21,.12);
  pointer-events:none;
  z-index:2;
}

/* hit line pulse (nice feel) */
#rb-wrap[data-diff="easy"] .rb-lane::before{ opacity:.95; }
#rb-wrap[data-diff="normal"] .rb-lane::before{ opacity:1; }
#rb-wrap[data-diff="hard"] .rb-lane::before{
  box-shadow:
    0 0 0 1px rgba(250,204,21,.22),
    0 0 18px rgba(250,204,21,.42),
    0 0 32px rgba(250,204,21,.18);
}

/* lane active tap feedback */
.rb-lane:active{
  background:
    radial-gradient(circle at 50% 75%, rgba(56,189,248,.12), transparent 45%),
    linear-gradient(180deg, rgba(15,23,42,.28), rgba(15,23,42,.46)),
    rgba(2,6,23,.24);
  border-color: rgba(56,189,248,.30);
}

/* lane labels */
.rb-lane-label{
  position:absolute;
  left:8px;
  right:8px;
  bottom:10px;
  height:var(--rb-lane-label-h);
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius:10px;
  border:1px solid rgba(148,163,184,.16);
  background:rgba(15,23,42,.56);
  color:#cbd5e1;
  font-size:.82rem;
  font-weight:700;
  letter-spacing:.02em;
  pointer-events:none;
  z-index:3;
}

/* ---------- NOTE VISUALS ---------- */
/* Engine anchors note at hitline and animates transform: translate(-50%, y)
   IMPORTANT: bottom == hitline so y=0 => head lands at hitline */
.rb-note{
  position:absolute;
  left:50%;
  bottom:var(--rb-hitline-bottom);
  width:var(--rb-note-width);
  height:var(--rb-note-head-size);
  transform:translate(-50%, -999px); /* engine updates */
  transform-origin:50% 100%;
  z-index:4;
  pointer-events:none;
  opacity:1;
  will-change:transform, opacity;
  filter: drop-shadow(0 2px 8px rgba(0,0,0,.35));
}

/* tail (extends upward from head) */
.rb-note::before{
  content:"";
  position:absolute;
  left:50%;
  bottom:calc(var(--rb-note-head-size) - 6px);
  transform:translateX(-50%);
  width:var(--rb-note-tail-w);
  height:var(--rb-note-len, 160px);
  border-radius:999px;
  background:
    linear-gradient(180deg,
      rgba(255,255,255,.06) 0%,
      rgba(56,189,248,.20) 14%,
      rgba(56,189,248,.55) 48%,
      rgba(168,85,247,.70) 100%);
  box-shadow:
    0 0 0 1px rgba(255,255,255,.04) inset,
    0 0 12px rgba(56,189,248,.18);
  opacity:.95;
}

/* glow core in tail */
.rb-note::after{
  content:"";
  position:absolute;
  left:50%;
  bottom:calc(var(--rb-note-head-size) + 8px);
  transform:translateX(-50%);
  width:4px;
  height:calc(var(--rb-note-len, 160px) - 12px);
  border-radius:999px;
  background:linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.65));
  opacity:.45;
}

/* head icon (emoji / note) */
.rb-note-ico{
  position:absolute;
  left:50%;
  bottom:0;
  transform:translate(-50%, 50%); /* center the head on hitline */
  width:var(--rb-note-head-size);
  height:var(--rb-note-head-size);
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius:999px;
  font-size:19px;
  line-height:1;
  background:
    radial-gradient(circle at 35% 30%, rgba(255,255,255,.90), rgba(255,255,255,.14) 34%, transparent 36%),
    linear-gradient(135deg, rgba(56,189,248,.95), rgba(168,85,247,.95));
  border:1px solid rgba(255,255,255,.25);
  box-shadow:
    0 0 0 2px rgba(2,6,23,.46),
    0 6px 18px rgba(56,189,248,.20),
    0 6px 18px rgba(168,85,247,.18);
  color:#06121f;
  text-shadow:none;
}

/* optional states if JS adds classes later */
.rb-note.is-approach .rb-note-ico{
  box-shadow:
    0 0 0 2px rgba(2,6,23,.46),
    0 0 22px rgba(250,204,21,.28),
    0 6px 18px rgba(56,189,248,.18);
}
.rb-note.is-hit{
  opacity:.0;
  transition:opacity .12s linear;
}

/* ---------- FX from dom-renderer-rhythm.js ---------- */
.rb-score-fx{
  position:fixed;
  transform:translate(-50%, -50%);
  z-index:100;
  pointer-events:none;
  opacity:0;
  font-weight:900;
  font-size:1rem;
  letter-spacing:.02em;
  text-shadow:0 2px 12px rgba(0,0,0,.55);
  transition:
    transform .42s cubic-bezier(.2,.9,.25,1),
    opacity .16s ease;
}
.rb-score-fx.is-live{
  opacity:1;
  transform:translate(-50%, -90%);
}
.rb-score-perfect{ color:#fde047; }
.rb-score-great{ color:#7dd3fc; }
.rb-score-good{ color:#86efac; }
.rb-score-miss{ color:#fda4af; }

.rb-frag{
  position:fixed;
  transform:translate(-50%, -50%);
  border-radius:999px;
  pointer-events:none;
  z-index:99;
  opacity:1;
  animation: rb-frag-fly var(--life, 420ms) ease-out forwards;
  box-shadow:0 0 10px rgba(255,255,255,.18);
}
.rb-frag-perfect{
  background: radial-gradient(circle, #fde047, #f59e0b);
}
.rb-frag-great{
  background: radial-gradient(circle, #67e8f9, #38bdf8);
}
.rb-frag-good{
  background: radial-gradient(circle, #86efac, #22c55e);
}
.rb-frag-miss{
  background: radial-gradient(circle, #fda4af, #ef4444);
}
@keyframes rb-frag-fly{
  0%{
    opacity:1;
    transform:translate(-50%, -50%) scale(1);
  }
  100%{
    opacity:0;
    transform:translate(calc(-50% + var(--dx,0px)), calc(-50% + var(--dy,0px))) scale(.55);
  }
}

/* ---------- Result ---------- */
.rb-result-grid{
  display:grid;
  grid-template-columns: 1.25fr .9fr;
  gap:14px;
}
.rb-result-title{
  margin:0 0 8px;
  font-size:.95rem;
}
.rb-result-row{
  display:flex;
  justify-content:space-between;
  gap:12px;
  padding:7px 0;
  border-bottom:1px dashed rgba(148,163,184,.12);
  font-size:.86rem;
}
.rb-result-row:last-child{ border-bottom:none; }
.rb-result-row span{
  color:var(--rb-muted);
}
.rb-result-row b{
  color:#f8fafc;
  text-align:right;
  word-break:break-word;
}
.rb-quality-note{
  margin:2px 0 0;
  border-radius:12px;
  padding:10px 12px;
  border:1px solid rgba(251,113,133,.24);
  background:rgba(127,29,29,.16);
  color:#fecdd3;
  font-size:.84rem;
}

/* ---------- helpers ---------- */
.rb-howto-inline{
  margin:0;
  padding:0 2px;
  font-size:.8rem;
}

/* ---------- responsive ---------- */
@media (max-width: 980px){
  .rb-grid-2{ grid-template-columns:1fr; }
  .rb-result-grid{ grid-template-columns:1fr; }
  .rb-header{
    flex-direction:column;
    align-items:flex-start;
  }
  .rb-play-header{
    flex-direction:column;
    align-items:flex-start;
  }
}

@media (max-width: 760px){
  :root{
    --rb-field-h: clamp(320px, 50vh, 460px);
    --rb-lane-gap: 8px;
    --rb-hitline-bottom: 52px;
    --rb-note-head-size: 30px;
    --rb-note-width: 16px;
    --rb-note-tail-w: 9px;
  }

  body{
    padding:
      max(8px, var(--rb-sat))
      max(8px, var(--rb-sar))
      max(12px, var(--rb-sab))
      max(8px, var(--rb-sal));
  }

  .rb-header, .rb-play-header, .rb-research-box, .rb-section, .rb-result-card{
    border-radius:14px;
    padding:12px;
  }

  .rb-lanes{
    padding:48px 8px 8px;
    gap:8px;
    grid-template-columns:repeat(5, minmax(0, 1fr));
  }

  .rb-lane-label{
    left:5px; right:5px; bottom:7px;
    font-size:.76rem;
    height:32px;
  }

  .rb-chip{
    font-size:.74rem;
    padding:5px 9px;
  }

  .rb-bars{
    grid-template-columns:1fr;
  }

  .rb-feedback{
    top:8px;
    font-size:.78rem;
    min-width:96px;
    padding:5px 10px;
  }

  .rb-note-ico{
    font-size:17px;
  }
}

@media (max-width: 520px){
  :root{
    --rb-hitline-bottom: 50px;
    --rb-field-h: clamp(300px, 46vh, 400px);
  }

  .rb-title{
    font-size:1.25rem;
  }

  .rb-lanes{
    gap:6px;
    padding:44px 6px 6px;
  }

  .rb-lane::before{
    left:6px; right:6px;
    height:3px;
  }

  .rb-lane-label{
    font-size:.72rem;
    letter-spacing:0;
  }

  .rb-btn{
    width:100%;
    justify-content:center;
  }

  .rb-btn-row{
    flex-direction:column;
  }
}

/* ---------- optional 3-lane preset ----------
   If later HTML adds: <div id="rb-wrap" data-lanes="3">
*/
#rb-wrap[data-lanes="3"] .rb-lanes{
  grid-template-columns:repeat(3, minmax(96px, 1fr));
  max-width:760px;
  margin:0 auto;
}
#rb-wrap[data-lanes="3"] .rb-lane-label{
  font-size:.88rem;
}

/* ---------- visual alignment helper (debug) ----------
   Add data-debug-hitline="1" on #rb-wrap to show stronger hit line + marker
*/
#rb-wrap[data-debug-hitline="1"] .rb-lane::before{
  height:5px;
  box-shadow:
    0 0 0 1px rgba(250,204,21,.6),
    0 0 18px rgba(250,204,21,.55),
    0 0 40px rgba(250,204,21,.25);
}
#rb-wrap[data-debug-hitline="1"] .rb-note-ico{
  box-shadow:
    0 0 0 2px rgba(2,6,23,.46),
    0 0 24px rgba(255,255,255,.25),
    0 0 30px rgba(56,189,248,.20);
}