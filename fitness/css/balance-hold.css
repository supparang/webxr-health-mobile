:root{
  --bg:#070b16;
  --bg2:#0b1224;
  --panel:rgba(13,20,38,.82);
  --line:rgba(148,163,184,.22);
  --txt:#e5e7eb;
  --mut:#94a3b8;
  --pri:#60a5fa;
  --good:#34d399;
  --warn:#fbbf24;
  --bad:#f87171;
  --safe:#22c55e;
  --danger:#ef4444;
  --card-shadow: 0 14px 40px rgba(0,0,0,.35);
}

*{box-sizing:border-box}
html,body{
  margin:0; height:100%;
  background:
    radial-gradient(900px 600px at 10% 0%, rgba(59,130,246,.12), transparent 60%),
    radial-gradient(900px 700px at 90% 20%, rgba(16,185,129,.08), transparent 60%),
    linear-gradient(180deg, var(--bg2), var(--bg));
  color:var(--txt);
  font-family: system-ui, -apple-system, "Noto Sans Thai", "Segoe UI", sans-serif;
  -webkit-tap-highlight-color: transparent;
}

.hidden{ display:none !important; }

.bh-app{
  min-height:100%;
  display:grid;
  place-items:center;
  padding:16px;
}

.view{
  width:min(1100px, 100%);
}

.card{
  background:var(--panel);
  border:1px solid var(--line);
  border-radius:20px;
  box-shadow: var(--card-shadow);
  backdrop-filter: blur(8px);
}

.panel{
  padding:18px;
}

h1,h2{
  margin:0 0 8px 0;
  line-height:1.15;
}
.sub{
  margin:0 0 14px 0;
  color:var(--mut);
}

.grid2{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
}
@media (max-width:720px){
  .grid2{ grid-template-columns:1fr; }
}

.field{
  display:flex;
  flex-direction:column;
  gap:6px;
}
.field span{
  font-size:.92rem;
  color:var(--mut);
}
.field input,
.field select{
  width:100%;
  background:rgba(2,6,23,.75);
  color:var(--txt);
  border:1px solid var(--line);
  border-radius:12px;
  padding:10px 12px;
  font-size:1rem;
  outline:none;
}
.field input:focus,
.field select:focus{
  border-color:rgba(96,165,250,.65);
  box-shadow:0 0 0 3px rgba(96,165,250,.18);
}

.actions{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  margin-top:14px;
}
.btn{
  appearance:none;
  border:none;
  border-radius:12px;
  padding:10px 14px;
  font-size:1rem;
  cursor:pointer;
  background:#1f2937;
  color:var(--txt);
  border:1px solid rgba(255,255,255,.08);
}
.btn:hover{ filter:brightness(1.08); }
.btn.primary{
  background:linear-gradient(180deg, #3b82f6, #2563eb);
  border-color:rgba(255,255,255,.15);
}
.btn.danger{
  background:linear-gradient(180deg, #ef4444, #dc2626);
}
.help{
  margin-top:12px;
  border-top:1px dashed var(--line);
  padding-top:10px;
  color:var(--mut);
}
.help summary{
  cursor:pointer;
  color:var(--txt);
  margin-bottom:8px;
}

/* HUD */
.hud{
  padding:10px 14px;
  margin-bottom:12px;
}
.hud-row{
  display:flex;
  flex-wrap:wrap;
  gap:12px 16px;
  align-items:center;
  color:#dbeafe;
}
.hud-row + .hud-row{
  margin-top:6px;
  color:#dcfce7;
}

/* PLAY AREA */
.play-area{
  position:relative;
  border-radius:20px;
  border:1px solid var(--line);
  background:
    radial-gradient(700px 250px at 50% 10%, rgba(99,102,241,.12), transparent 65%),
    linear-gradient(180deg, rgba(15,23,42,.9), rgba(2,6,23,.92));
  min-height:480px;
  overflow:hidden;
  touch-action:none;
  user-select:none;
}

.coach-wrap{
  position:absolute;
  top:10px;
  left:10px;
  right:10px;
  z-index:4;
  pointer-events:none;
}
.coach-label{
  display:inline-block;
  background:rgba(2,6,23,.72);
  border:1px solid var(--line);
  border-radius:12px;
  padding:8px 10px;
  font-size:.92rem;
}
.coach-bubble{
  margin-top:8px;
  max-width:min(720px, 92%);
  background:rgba(15,23,42,.92);
  border:1px solid rgba(96,165,250,.3);
  border-left:4px solid var(--pri);
  border-radius:12px;
  padding:10px 12px;
  color:#e0f2fe;
  box-shadow:0 10px 26px rgba(0,0,0,.25);
  animation:coachIn .18s ease-out;
}
@keyframes coachIn{
  from{ transform:translateY(-6px); opacity:0; }
  to{ transform:translateY(0); opacity:1; }
}

/* Platform section */
.platform-wrap{
  position:absolute;
  left:50%;
  top:54%;
  transform:translate(-50%,-50%);
  width:min(760px, calc(100% - 32px));
  height:180px;
  display:grid;
  place-items:center;
}

.safe-zone{
  position:absolute;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  width:34%;
  height:86px;
  border-radius:999px;
  background:rgba(34,197,94,.10);
  border:1px dashed rgba(34,197,94,.42);
  box-shadow:0 0 0 8px rgba(34,197,94,.04) inset;
}

.center-line{
  position:absolute;
  left:50%;
  top:50%;
  width:2px;
  height:120px;
  transform:translate(-50%,-50%);
  background:linear-gradient(180deg, transparent, rgba(148,163,184,.55), transparent);
  border-radius:999px;
  opacity:.85;
}

.platform{
  position:relative;
  width:min(560px, 78%);
  height:20px;
  transform-origin:center center;
  transition:transform 70ms linear;
  filter: drop-shadow(0 14px 18px rgba(0,0,0,.32));
}

.platform::before{
  content:"";
  position:absolute;
  inset:-10px -12px;
  border-radius:999px;
  background:
    linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02)),
    linear-gradient(90deg, rgba(59,130,246,.18), rgba(16,185,129,.15));
  border:1px solid rgba(255,255,255,.10);
}
.platform-top{
  position:absolute;
  inset:0;
  border-radius:999px;
  background:linear-gradient(180deg, #cbd5e1, #94a3b8);
  box-shadow:inset 0 1px 0 rgba(255,255,255,.5);
}

/* indicator (player balance marker) */
.indicator{
  position:absolute;
  left:50%;
  top:50%;
  transform:translateX(0) translateY(-18px);
  width:36px; height:36px;
  display:grid; place-items:center;
  border-radius:50%;
  background:rgba(255,255,255,.10);
  border:1px solid rgba(255,255,255,.22);
  box-shadow:
    0 8px 20px rgba(0,0,0,.25),
    0 0 0 6px rgba(96,165,250,.07);
  font-size:20px;
  z-index:2;
}

/* obstacles */
.obstacle-layer{
  position:absolute;
  inset:0;
  pointer-events:none;
  z-index:3;
}
.obstacle{
  position:absolute;
  top:-24px;
  transform:translateX(-50%);
  font-size:26px;
  line-height:1;
  animation:obDrop 1.25s cubic-bezier(.16,.84,.28,1) forwards;
  filter: drop-shadow(0 6px 10px rgba(0,0,0,.35));
  will-change: transform, opacity;
}
.obstacle.avoid{
  animation:obAvoid .35s ease-out forwards;
}
.obstacle.hit{
  animation:obHit .35s ease-out forwards;
}
@keyframes obDrop{
  0%   { top:-28px; opacity:0; transform:translateX(-50%) scale(.8); }
  12%  { opacity:1; }
  75%  { opacity:1; }
  100% { top:76%; opacity:.92; transform:translateX(-50%) scale(1); }
}
@keyframes obAvoid{
  from{ opacity:1; transform:translateX(-50%) scale(1); filter:drop-shadow(0 6px 10px rgba(0,0,0,.35)); }
  to  { opacity:0; transform:translateX(-50%) translateY(-18px) scale(1.35); filter:drop-shadow(0 0 0 rgba(0,0,0,0)); }
}
@keyframes obHit{
  from{ opacity:1; transform:translateX(-50%) scale(1); }
  40% { opacity:1; transform:translateX(-50%) scale(1.4) rotate(8deg); }
  to  { opacity:0; transform:translateX(-50%) scale(.7) rotate(-10deg); }
}

.touch-hint{
  position:absolute;
  left:50%;
  bottom:10px;
  transform:translateX(-50%);
  background:rgba(2,6,23,.65);
  color:var(--mut);
  border:1px solid var(--line);
  border-radius:999px;
  padding:6px 10px;
  font-size:.85rem;
}

/* play action bar */
.play-actions{
  justify-content:flex-end;
}

/* results */
.result-grid{
  display:grid;
  grid-template-columns:repeat(4,minmax(0,1fr));
  gap:10px;
  margin-top:10px;
}
@media (max-width:900px){
  .result-grid{ grid-template-columns:repeat(2,minmax(0,1fr)); }
}
@media (max-width:560px){
  .result-grid{ grid-template-columns:1fr; }
}
.result-grid .item{
  background:rgba(2,6,23,.55);
  border:1px solid var(--line);
  border-radius:14px;
  padding:10px 12px;
  display:flex;
  flex-direction:column;
  gap:4px;
}
.result-grid .item span{
  color:var(--mut);
  font-size:.86rem;
}
.result-grid .item b{
  font-size:1.05rem;
  color:#f8fafc;
}