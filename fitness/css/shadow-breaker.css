/* === Shadow Breaker — layout / HUD / target styles (2025-11-23) === */

.sb-wrap{
  display:flex;
  flex-direction:column;
  gap:10px;
  min-height:min(720px,calc(100vh - 140px));
}

/* HUD แถวบน */
.sb-hud-row{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:12px;
}

.sb-hp-stack{
  flex:1;
  max-width:640px;
  display:flex;
  flex-direction:column;
  gap:6px;
}

.sb-hp{
  background:rgba(15,23,42,0.8);
  border-radius:999px;
  padding:6px 12px 8px;
  box-shadow:0 0 0 1px rgba(15,23,42,0.8);
}

.sb-hp-label{
  display:flex;
  justify-content:space-between;
  font-size:13px;
  margin-bottom:3px;
}

.sb-hp-name{
  font-weight:600;
}

.sb-hp-val{
  font-weight:600;
}

.sb-hp-bar{
  position:relative;
  height:8px;
  border-radius:999px;
  overflow:hidden;
  background:rgba(15,23,42,1);
}

.sb-hp-fill{
  position:absolute;
  inset:0;
  transform-origin:left center;
  transform:scaleX(1);
}

/* player/boss สีต่างกัน */
.sb-hp-player .sb-hp-fill{
  background:linear-gradient(90deg,#22c55e,#4ade80);
}
.sb-hp-boss .sb-hp-fill{
  background:linear-gradient(90deg,#f97316,#ef4444);
}

/* meta panel */
.sb-meta{
  min-width:140px;
  background:rgba(15,23,42,0.92);
  border-radius:18px;
  padding:10px 12px;
  font-size:13px;
  box-shadow:0 12px 30px rgba(15,23,42,0.9);
}
.sb-meta-row{
  display:flex;
  justify-content:space-between;
  margin-bottom:2px;
}
.sb-meta-row span:first-child{
  opacity:.7;
}

/* boss portrait */
.sb-boss-portrait{
  width:80px;
  height:80px;
  border-radius:24px;
  background:radial-gradient(circle at 30% 20%,#fef9c3,#f97316);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:40px;
  box-shadow:0 14px 40px rgba(15,23,42,0.9);
}
.boss-portrait-text{
  align-self:flex-end;
  text-align:right;
  font-size:13px;
  margin-top:-10px;
  margin-bottom:2px;
}
#boss-portrait-name{
  font-weight:600;
}
#boss-portrait-hint{
  opacity:.8;
}

/* shake เมื่อ HP ต่ำ */
.sb-shake{
  animation:sb-shake 0.35s infinite;
}
@keyframes sb-shake{
  0%{transform:translateX(0);}
  25%{transform:translateX(-2px);}
  50%{transform:translateX(2px);}
  75%{transform:translateX(-1px);}
  100%{transform:translateX(0);}
}

/* FEVER row */
.sb-fever-row{
  display:flex;
  align-items:center;
  gap:8px;
  margin:2px 0 4px;
}
.fever-label{
  font-size:13px;
  letter-spacing:.08em;
}
.fever-bar{
  flex:1;
  position:relative;
  height:8px;
  border-radius:999px;
  background:rgba(15,23,42,0.85);
  overflow:hidden;
}
.fever-fill{
  position:absolute;
  inset:0;
  transform-origin:left center;
  transform:scaleX(0);
  background:linear-gradient(90deg,#22c55e,#eab308,#f97316,#ec4899);
}
.fever-status{
  padding:3px 8px 4px;
  border-radius:999px;
  font-size:11px;
  border:1px solid rgba(148,163,184,0.7);
}
.fever-status.on{
  background:rgba(236,72,153,0.2);
  border-color:#f97316;
}

/* feedback bubble */
.sb-feedback{
  align-self:center;
  margin-top:2px;
  padding:6px 14px;
  border-radius:999px;
  font-size:13px;
  background:rgba(15,23,42,0.9);
  border:1px solid rgba(148,163,184,0.6);
  box-shadow:0 10px 25px rgba(15,23,42,0.8);
}
.sb-feedback.good{border-color:#22c55e;}
.sb-feedback.perfect{border-color:#eab308;}
.sb-feedback.miss{border-color:#f97316;}
.sb-feedback.bomb{border-color:#ef4444;}
.sb-feedback.heal{border-color:#38bdf8;}

/* play field อยู่กลางจอ */
.sb-field{
  position:relative;
  flex:1;
  min-height:260px;
  max-height:480px;
  margin:6px 0 12px;
  border-radius:22px;
  background:
    radial-gradient(circle at top left,rgba(56,189,248,0.18),transparent 55%),
    radial-gradient(circle at bottom right,rgba(37,99,235,0.18),transparent 55%),
    #020617;
  box-shadow:inset 0 0 0 1px rgba(15,23,42,0.9);
  overflow:hidden;
}

/* target */
.sb-target{
  position:absolute;
  transform:translate(-50%,-50%);
  border-radius:999px;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  transition:transform .18s ease-out, box-shadow .18s ease-out, opacity .18s ease-out;
}
.sb-target-inner{
  width:100%;
  height:100%;
  border-radius:inherit;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:40px;
  border:4px solid #22c55e;
  background:
    radial-gradient(circle at 30% 20%,#fefce8,#bbf7d0);
  box-shadow:0 10px 30px rgba(15,23,42,0.95);
}

/* สีขอบเป้าตาม diff */
.sb-wrap[data-diff="easy"]  .sb-target-inner{ border-color:#22c55e;} /* เขียว */
.sb-wrap[data-diff="normal"] .sb-target-inner{ border-color:#38bdf8;} /* ฟ้า */
.sb-wrap[data-diff="hard"] .sb-target-inner{ border-color:#f97316;}   /* ส้ม/แดง */

/* bomb */
.sb-target[data-type="bad"] .sb-target-inner{
  background:radial-gradient(circle at 30% 20%,#fee2e2,#fecaca);
}

/* boss face ให้เด่น */
.sb-target[data-boss-face="1"] .sb-target-inner{
  border-width:5px;
  box-shadow:0 0 0 2px rgba(250,250,250,0.8),0 16px 40px rgba(148,27,128,0.9);
  transform:scale(1.05);
}

/* hit effect (หด + fade) */
.sb-target.sb-hit{
  animation:sb-pop .22s ease-out forwards;
}
@keyframes sb-pop{
  0%{transform:translate(-50%,-50%) scale(1);}
  100%{transform:translate(-50%,-50%) scale(0.6); opacity:0;}
}

/* score popup */
.sb-fx-score{
  position:absolute;
  transform:translate(-50%,-50%);
  padding:4px 10px;
  font-size:13px;
  border-radius:999px;
  background:rgba(15,23,42,0.95);
  box-shadow:0 10px 28px rgba(15,23,42,0.9);
  animation:sb-pop-score .6s ease-out forwards;
  white-space:nowrap;
}
.sb-fx-score.sb-perfect{color:#fde68a;}
.sb-fx-score.sb-good{color:#bbf7d0;}
.sb-fx-score.sb-miss{color:#fecaca;}
.sb-fx-score.sb-decoy{color:#fecaca;}

@keyframes sb-pop-score{
  0%{opacity:0; transform:translate(-50%,-40%);}
  20%{opacity:1; transform:translate(-50%,-60%);}
  100%{opacity:0; transform:translate(-50%,-90%);}
}

/* hit particle (emoji) */
.hitParticle{
  position:absolute;
  transform:translate(-50%,-50%);
  font-size:32px;
  pointer-events:none;
  animation:sb-particle .48s ease-out forwards;
}
@keyframes sb-particle{
  0%{opacity:1; transform:translate(-50%,-50%) scale(0.9);}
  100%{opacity:0; transform:translate(-50%,-90%) scale(1.2);}
}

/* controls ล่าง */
.sb-controls{
  display:flex;
  justify-content:center;
  gap:16px;
}

/* boss intro */
.boss-intro{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(15,23,42,0.88);
  z-index:40;
}
.boss-intro.hidden{display:none;}
.boss-intro-card{
  max-width:320px;
  padding:20px 18px;
  background:radial-gradient(circle at top,#1f2937,#020617);
  border-radius:24px;
  text-align:center;
  box-shadow:0 24px 60px rgba(0,0,0,0.9);
}
.boss-intro-emoji{
  font-size:48px;
  margin-bottom:6px;
}
.boss-intro-name{
  font-weight:700;
  margin-bottom:4px;
}
.boss-intro-title{
  font-size:14px;
  color:#fde68a;
  margin-bottom:6px;
}
.boss-intro-desc{
  font-size:13px;
  margin-bottom:10px;
}
.boss-intro-hint{
  font-size:12px;
  opacity:.8;
}

/* responsive tweaks */
@media (max-width:768px){
  .sb-hud-row{
    flex-direction:column;
    align-items:stretch;
  }
  .sb-meta{
    order:2;
    margin-top:4px;
  }
  .sb-boss-portrait{
    align-self:flex-end;
  }
  .sb-field{
    min-height:260px;
  }
}
