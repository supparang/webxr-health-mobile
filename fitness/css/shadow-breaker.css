/* === Shadow Breaker â€” UI / HUD / Target Styles (2025-11-25 Final) === */

:root{
  --bg-dark: #020617;
  --panel: rgba(15,23,42,0.92);
  --border: rgba(148,163,184,0.6);
  --shadow-deep: rgba(15,23,42,0.95);
}

body{
  margin:0;
  background:#01050f;
  color:#e5e7eb;
  font-family:system-ui,Segoe UI,Inter,Roboto,sans-serif;
  -webkit-tap-highlight-color: transparent;
}

/* ========================= UTIL ========================= */

.hidden{ display:none !important; }

.card{
  max-width:480px;
  margin:14px auto;
  padding:20px 18px 26px;
  background:
    radial-gradient(circle at top left, rgba(56,189,248,0.10), transparent 55%),
    radial-gradient(circle at bottom right, rgba(37,99,235,0.10), transparent 55%),
    #0b1220;
  border-radius:22px;
  box-shadow:0 14px 36px rgba(0,0,0,0.72);
}

.title{
  font-size:26px;
  font-weight:700;
  margin-bottom:4px;
}

.subtitle{
  margin-top:0;
  opacity:.8;
}

.menu-block{
  margin-top:16px;
}

.menu-label{
  display:block;
  margin-bottom:4px;
  font-weight:600;
}

button,
select,
input,
textarea{
  font-family:inherit;
  font-size:15px;
}

select, input, textarea{
  width:100%;
  padding:8px 10px;
  border-radius:10px;
  border:1px solid rgba(148,163,184,0.32);
  background:#0f172a;
  color:#e5e7eb;
}

textarea{ resize:none; }

button{
  padding:10px 14px;
  border-radius:10px;
  border:1px solid rgba(148,163,184,0.32);
  background:#0f172a;
  color:#e5e7eb;
  cursor:pointer;
}

button.primary{
  background:#1d4ed8;
  border-color:#1d4ed8;
  color:#fff;
}

.btn-col{
  display:flex;
  flex-direction:column;
  gap:12px;
  margin-top:20px;
}

.btn-row{
  display:flex;
  gap:12px;
  margin-top:20px;
  justify-content:center;
}

/* ========================= WRAP ========================= */

.sb-wrap{
  max-width:900px;
  margin:0 auto 40px;
  padding:16px;
  display:flex;
  flex-direction:column;
  gap:14px;
}

/* ========================= HUD ========================= */

.sb-hud-row{
  display:flex;
  justify-content:space-between;
  gap:14px;
  align-items:flex-start;
}

.sb-hp-stack{
  flex:1;
  display:flex;
  flex-direction:column;
  gap:10px;
  min-width:240px;
}

.sb-hp{
  background:rgba(15,23,42,0.70);
  border-radius:18px;
  padding:10px 12px;
  box-shadow:0 0 0 1px rgba(15,23,42,0.7);
}

.sb-hp-label{
  display:flex;
  justify-content:space-between;
  font-size:14px;
  margin-bottom:6px;
}

.sb-hp-val{
  font-weight:600;
}

.sb-hp-bar{
  position:relative;
  height:10px;
  background:#0f172a;
  border-radius:999px;
  overflow:hidden;
}

.sb-hp-fill{
  position:absolute;
  inset:0;
  transform-origin:left center;
  transform:scaleX(1);
}

.sb-hp-player .sb-hp-fill{
  background:linear-gradient(90deg,#22c55e,#4ade80);
}

.sb-hp-boss .sb-hp-fill{
  background:linear-gradient(90deg,#f97316,#ef4444);
}

/* Meta panel */

.sb-meta{
  min-width:150px;
  background:var(--panel);
  padding:12px 14px;
  border-radius:18px;
  box-shadow:0 12px 30px rgba(0,0,0,0.8);
}

.sb-meta-row{
  display:flex;
  justify-content:space-between;
  margin-bottom:4px;
}
.sb-meta-row span:first-child{ opacity:.7; }

/* Boss portrait */

.boss-portrait-box{
  min-width:110px;
}

.sb-boss-portrait{
  width:80px;
  height:80px;
  border-radius:24px;
  background:radial-gradient(circle at 30% 20%,#fef9c3,#f97316);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:40px;
  box-shadow:0 14px 40px rgba(0,0,0,0.9);
}

.boss-portrait-text{
  margin-top:6px;
  font-size:13px;
  text-align:right;
}

#boss-portrait-name{ font-weight:600; }

/* Shake when low HP */
.sb-shake{
  animation:sb-shake 0.33s infinite;
}
@keyframes sb-shake{
  0%{transform:translateX(0);}
  25%{transform:translateX(-2px);}
  50%{transform:translateX(2px);}
  75%{transform:translateX(-1px);}
  100%{transform:translateX(0);}
}

/* ========================= FEVER ========================= */

.sb-fever-row{
  display:flex;
  align-items:center;
  gap:8px;
}

.fever-label{
  font-size:13px;
  opacity:.9;
}

.fever-bar{
  flex:1;
  height:10px;
  background:#0f172a;
  border-radius:999px;
  overflow:hidden;
}

.fever-fill{
  position:absolute;
  inset:0;
  transform:scaleX(0);
  transform-origin:left center;
  background:linear-gradient(90deg,#22c55e,#eab308,#f97316,#ec4899);
}

.fever-status{
  font-size:11px;
  padding:4px 10px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,0.7);
}
.fever-status.on{
  border-color:#f97316;
  background:rgba(236,72,153,0.18);
}

/* ========================= Feedback ========================= */

.sb-feedback{
  align-self:center;
  padding:8px 22px;
  background:#0f172a;
  border-radius:999px;
  border:1px solid var(--border);
  margin-bottom:6px;
  text-align:center;
  font-size:14px;
  box-shadow:0 12px 32px rgba(0,0,0,0.6);
}

.sb-feedback.good{border-color:#22c55e;}
.sb-feedback.perfect{border-color:#eab308;}
.sb-feedback.miss{border-color:#f97316;}
.sb-feedback.bomb{border-color:#ef4444;}
.sb-feedback.heal{border-color:#38bdf8;}

/* ========================= Play Field ========================= */

.sb-field{
  position:relative;
  flex:1;
  min-height:340px;
  max-height:520px;
  background:
    radial-gradient(circle at top left,rgba(56,189,248,0.15),transparent 60%),
    radial-gradient(circle at bottom right,rgba(37,99,235,0.15),transparent 60%),
    var(--bg-dark);
  margin-top:6px;
  border-radius:22px;
  box-shadow:inset 0 0 0 1px rgba(15,23,42,0.9);
  overflow:hidden;
}

/* ========================= Targets ========================= */

.sb-target{
  position:absolute;
  transform:translate(-50%,-50%);
  border-radius:999px;
  display:flex;
  align-items:center;
  justify-content:center;
  transition:transform .18s ease-out, opacity .18s ease-out;
  cursor:pointer;
}

.sb-target-inner{
  width:100%;
  height:100%;
  border-radius:inherit;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:40px;
  border:4px solid #38bdf8;
  background:radial-gradient(circle at 30% 20%,#fefce8,#bbf7d0);
  box-shadow:0 10px 30px var(--shadow-deep);
}

/* Difficulty border color */
.sb-wrap[data-diff="easy"]   .sb-target-inner{ border-color:#22c55e; }
.sb-wrap[data-diff="normal"] .sb-target-inner{ border-color:#38bdf8; }
.sb-wrap[data-diff="hard"]   .sb-target-inner{ border-color:#f97316; }

/* Bomb */
.sb-target[data-type="bad"] .sb-target-inner{
  background:radial-gradient(circle at 30% 20%,#fee2e2,#fecaca);
}

/* Boss face target */
.sb-target[data-boss-face="1"] .sb-target-inner{
  border-width:5px;
  box-shadow:
    0 0 0 2px rgba(250,250,250,0.85),
    0 16px 40px rgba(148,27,128,0.9);
  transform:scale(1.05);
}

/* Hit animation */
.sb-target.sb-hit{
  animation:sb-pop .22s ease-out forwards;
}
@keyframes sb-pop{
  0%{transform:translate(-50%,-50%) scale(1);}
  100%{transform:translate(-50%,-50%) scale(0.55); opacity:0;}
}

/* ========================= Score Popup ========================= */

.sb-fx-score{
  position:absolute;
  transform:translate(-50%,-50%);
  padding:4px 12px;
  font-size:14px;
  background:#0f172a;
  border-radius:999px;
  box-shadow:0 12px 32px rgba(0,0,0,0.7);
  animation:sb-pop-score .6s ease-out forwards;
  white-space:nowrap;
}

.sb-fx-score.sb-perfect{ color:#fde68a; }
.sb-fx-score.sb-good{ color:#bbf7d0; }
.sb-fx-score.sb-miss{ color:#fecaca; }
.sb-fx-score.sb-decoy{ color:#fecaca; }

@keyframes sb-pop-score{
  0%{opacity:0; transform:translate(-50%,-46%);}
  20%{opacity:1; transform:translate(-50%,-68%);}
  100%{opacity:0; transform:translate(-50%,-100%);}
}

/* ========================= Hit Emoji Particle ========================= */

.hitParticle{
  position:absolute;
  transform:translate(-50%,-50%);
  font-size:32px;
  pointer-events:none;
  animation:sb-particle .48s ease-out forwards;
}
@keyframes sb-particle{
  0%{opacity:1; transform:translate(-50%,-50%) scale(0.9);}
  100%{opacity:0; transform:translate(-50%,-85%) scale(1.25);}
}

/* ========================= Controls ========================= */

.sb-controls{
  margin-top:12px;
  display:flex;
  justify-content:center;
}

/* ========================= Boss Intro ========================= */

.boss-intro{
  position:fixed;
  inset:0;
  display:flex;
  justify-content:center;
  align-items:center;
  background:rgba(15,23,42,0.88);
  z-index:40;
}
.boss-intro.hidden{
  display:none !important;
}

.boss-intro-card{
  width:300px;
  padding:22px 18px;
  background:radial-gradient(circle at top,#1f2937,#020617);
  border-radius:24px;
  text-align:center;
  box-shadow:0 22px 60px rgba(0,0,0,0.92);
}

.boss-intro-emoji{
  font-size:56px;
  margin-bottom:8px;
}

.boss-intro-name{
  font-weight:700;
  font-size:20px;
}

.boss-intro-title{
  font-size:14px;
  color:#fde68a;
  margin-bottom:4px;
}

.boss-intro-desc{
  font-size:13px;
  opacity:.92;
  margin-bottom:12px;
}

.boss-intro-hint{
  font-size:12px;
  opacity:.75;
}

/* ========================= Responsive ========================= */

@media (max-width:768px){
  .sb-hud-row{
    flex-direction:column;
  }
  .sb-meta{
    order:3;
    width:100%;
  }
  .sb-boss-portrait{
    margin-left:auto;
  }
  .sb-field{
    min-height:300px;
  }
}
