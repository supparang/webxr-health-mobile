/* === css/shadow-breaker.css — Layout 4 views (2025-12-02) === */
:root{
  color-scheme: dark;
  --sb-bg: #020617;
  --sb-card: #020617;
  --sb-border: #1f2937;
  --sb-text: #e5e7eb;
  --sb-muted: #9ca3af;
  --sb-accent: #38bdf8;
  --sb-accent2: #a855f7;
  --sb-danger: #fb7185;
  --sb-gold: #facc15;
  --sb-success: #22c55e;
}

*,
*::before,
*::after{
  box-sizing:border-box;
}

html,body{
  margin:0;
  padding:0;
  height:100%;
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  background:
    radial-gradient(circle at top left,rgba(56,189,248,.18),transparent 55%),
    radial-gradient(circle at bottom right,rgba(168,85,247,.16),transparent 55%),
    var(--sb-bg);
  color:var(--sb-text);
}

/* ===== WRAP ===== */

#sb-wrap.sb-wrap{
  min-height:100vh;
  max-width:1120px;
  margin:0 auto;
  padding:16px 12px 28px;
}

/* ===== COMMON ===== */

.hidden{
  display:none !important;
}

.sb-card{
  background:
    radial-gradient(circle at top left,rgba(56,189,248,0.16),transparent 55%),
    radial-gradient(circle at bottom right,rgba(24,93,200,0.2),transparent 55%),
    rgba(15,23,42,0.98);
  border:1px solid rgba(15,23,42,0.98);
  border-radius:18px;
  padding:16px 16px 18px;
  box-shadow:0 18px 40px rgba(0,0,0,0.7);
}

.sb-card-main{
  margin-bottom:16px;
}

.sb-section{
  margin-bottom:12px;
}

.sb-section-title{
  margin:0 0 8px;
  font-size:1.05rem;
}

.sb-text{
  font-size:0.9rem;
  color:var(--sb-muted);
}

.sb-text-small{
  font-size:0.8rem;
}

.sb-hint{
  margin-top:8px;
  font-size:0.85rem;
  color:var(--sb-muted);
}

/* ===== HEADER BRAND ===== */

.sb-header-main{
  margin-bottom:12px;
  padding:10px 14px;
  border-radius:999px;
  border:1px solid rgba(56,189,248,0.5);
  background:
    radial-gradient(circle at top left, rgba(56,189,248,0.22), transparent 55%),
    radial-gradient(circle at bottom right, rgba(34,197,94,0.18), transparent 55%),
    rgba(15,23,42,0.96);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  box-shadow:0 18px 40px rgba(0,0,0,0.65);
}

.sb-brand{
  display:flex;
  align-items:center;
  gap:10px;
  min-width:0;
}

.sb-logo-pill{
  width:36px;
  height:36px;
  border-radius:999px;
  background:linear-gradient(145deg,#22c55e,#38bdf8);
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
  font-size:0.9rem;
  color:#020617;
  box-shadow:0 0 14px rgba(56,189,248,0.9);
}

.sb-brand-text{
  display:flex;
  flex-direction:column;
  gap:2px;
}
.sb-brand-title{
  margin:0;
  font-size:1.1rem;
  font-weight:600;
}
.sb-brand-subtitle{
  margin:0;
  font-size:0.82rem;
  color:var(--sb-muted);
}

.sb-back-main{
  font-size:0.85rem;
  padding:4px 10px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,0.7);
  background:rgba(15,23,42,0.96);
  color:var(--sb-text);
  text-decoration:none;
}
.sb-back-main:hover{
  background:rgba(30,64,175,0.96);
  border-color:#38bdf8;
}

/* ===== FORM / FIELDS ===== */

.sb-field-row{
  display:flex;
  flex-direction:column;
  gap:4px;
  margin-bottom:8px;
  font-size:0.9rem;
}
.sb-field-row label{
  color:var(--sb-muted);
}
.sb-field-row input,
.sb-field-row select,
.sb-field-row textarea{
  background:#020617;
  border:1px solid #1f2937;
  border-radius:10px;
  padding:7px 9px;
  color:var(--sb-text);
  font-size:0.9rem;
}
.sb-field-row input:focus,
.sb-field-row select:focus,
.sb-field-row textarea:focus{
  outline:none;
  border-color:var(--sb-accent);
  box-shadow:0 0 0 1px rgba(56,189,248,0.5);
}

.sb-select-pill select{
  width:100%;
  border-radius:999px;
}

/* ===== BUTTONS ===== */

.sb-actions{
  margin-top:10px;
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}

.sb-btn{
  border-radius:999px;
  border:1px solid transparent;
  padding:8px 16px;
  font-size:0.92rem;
  cursor:pointer;
  background:#111827;
  color:var(--sb-text);
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:6px;
}
.sb-btn-primary{
  background:linear-gradient(90deg,#38bdf8,#a855f7);
  color:#0b1120;
  font-weight:600;
}
.sb-btn-primary:hover{
  filter:brightness(1.06);
}
.sb-btn-secondary{
  border-color:#374151;
  background:#020617;
}
.sb-btn-ghost{
  border-color:transparent;
  background:transparent;
  color:var(--sb-muted);
}
.sb-btn-ghost:hover{
  color:var(--sb-text);
}

/* ===== LEGEND ===== */

.sb-legend{
  list-style:none;
  padding:0;
  margin:6px 0 0;
  font-size:0.88rem;
}
.sb-legend li{
  display:flex;
  align-items:center;
  gap:8px;
  margin-bottom:3px;
}
.sb-dot{
  width:9px;
  height:9px;
  border-radius:999px;
  box-shadow:0 0 6px rgba(0,0,0,.7);
}
.sb-dot-perfect{ background:#22c55e; }
.sb-dot-good{ background:#38bdf8; }
.sb-dot-bad{ background:#f97316; }
.sb-dot-bomb{ background:#fb7185; }
.sb-dot-heal{ background:#4ade80; }
.sb-dot-fever{ background:#facc15; }

/* ===== HUD ===== */

.sb-hud{
  display:flex;
  flex-wrap:wrap;
  gap:12px;
  font-size:0.86rem;
  margin-bottom:8px;
}
.sb-hud-col{
  flex:1 minmax(140px,1fr);
  min-width:0;
}
.sb-hud-row{
  display:flex;
  justify-content:space-between;
  margin-bottom:2px;
}
.sb-tag{
  font-size:0.75rem;
  text-transform:uppercase;
  letter-spacing:.06em;
  color:#9ca3af;
}
.sb-hud-row strong{
  font-variant-numeric:tabular-nums;
}

.sb-hud-fever{
  min-width:220px;
}
.sb-hud-row-label{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:2px;
}

/* FEVER BAR */

.sb-fever-bar{
  position:relative;
  width:100%;
  height:12px;
  border-radius:999px;
  overflow:hidden;
  background:linear-gradient(90deg,#020617,#020617);
  border:1px solid #1f2937;
}
.sb-fever-fill{
  position:absolute;
  inset:0;
  transform-origin:left center;
  transform:scaleX(0);
  background:linear-gradient(90deg,#f97316,#facc15);
  box-shadow:0 0 14px rgba(248,181,0,0.7);
}
.sb-fever-status{
  font-size:0.78rem;
  padding:1px 8px;
  border-radius:999px;
  border:1px solid #1f2937;
  background:#020617;
}
.sb-fever-status.on{
  border-color:#f97316;
  color:#fed7aa;
  box-shadow:0 0 10px rgba(249,115,22,0.9);
}

/* ===== HP ===== */

.sb-hp-wrap{
  margin:4px 0 8px;
  font-size:0.82rem;
}
.sb-hp-row{
  display:flex;
  align-items:center;
  gap:6px;
  margin-bottom:4px;
}
.sb-hp-label{
  width:52px;
  color:#9ca3af;
}
.sb-hp-bar{
  flex:1;
  position:relative;
  height:8px;
  border-radius:999px;
  overflow:hidden;
  background:#020617;
  border:1px solid #1f2937;
}
.sb-hp-fill{
  position:absolute;
  left:0;
  top:0;
  bottom:0;
  width:0%;
  transform-origin:left center;
}
.sb-hp-player{
  background:linear-gradient(90deg,#22c55e,#38bdf8);
}
.sb-hp-boss{
  background:linear-gradient(90deg,#fb7185,#f97316);
}

/* ===== PLAY LAYOUT ===== */

.sb-card-play{
  margin-bottom:14px;
}

.sb-play-layout{
  display:grid;
  grid-template-columns:minmax(0,2fr) minmax(220px,0.9fr);
  gap:12px;
  align-items:stretch;
}

.sb-field{
  position:relative;
  border-radius:18px;
  border:1px solid #111827;
  background:
    radial-gradient(circle at top,#1f2937,transparent 65%),
    #020617;
  min-height:320px;
  overflow:hidden;
  box-shadow:0 18px 40px rgba(0,0,0,0.75);
}

.sb-feedback{
  position:absolute;
  left:50%;
  top:10px;
  transform:translateX(-50%);
  padding:4px 10px;
  border-radius:999px;
  background:rgba(15,23,42,0.95);
  border:1px solid rgba(55,65,81,0.9);
  font-size:0.8rem;
  color:var(--sb-text);
  pointer-events:none;
  max-width:90%;
  text-align:center;
}

/* boss panel */

.sb-boss-panel{
  border-radius:16px;
  border:1px solid #1f2937;
  background:rgba(15,23,42,0.96);
  padding:10px 10px 12px;
  display:flex;
  flex-direction:column;
  gap:4px;
}
.sb-boss-emoji{
  font-size:2.3rem;
  filter:drop-shadow(0 0 10px rgba(0,0,0,0.9));
}
.sb-boss-name{
  font-weight:600;
  margin-top:2px;
}
.sb-boss-hint{
  font-size:0.82rem;
  color:var(--sb-muted);
}

/* boss intro overlay */

.sb-boss-intro{
  position:fixed;
  inset:0;
  background:rgba(15,23,42,0.94);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:50;
}
.sb-boss-intro-inner{
  max-width:360px;
  padding:18px 16px 16px;
  border-radius:18px;
  background:
    radial-gradient(circle at top left,rgba(56,189,248,.22),transparent 60%),
    rgba(15,23,42,0.98);
  border:1px solid #1f2937;
  text-align:center;
  box-shadow:0 20px 50px rgba(0,0,0,0.85);
}
.sb-boss-intro-emoji{
  font-size:3rem;
}
.sb-boss-intro-name{
  margin:6px 0 0;
}
.sb-boss-intro-title{
  margin:4px 0;
  font-size:0.9rem;
  color:#e5e7eb;
}
.sb-boss-intro-desc{
  font-size:0.86rem;
  color:var(--sb-muted);
}
.sb-boss-intro-hint{
  margin-top:8px;
  font-size:0.8rem;
  color:#93c5fd;
}

/* footer play */

.sb-footer-play{
  margin-top:10px;
  display:flex;
  justify-content:flex-end;
  gap:8px;
  font-size:0.82rem;
}

/* ===== RESULT ===== */

.sb-card-result{
  margin-bottom:14px;
}
.sb-result-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:10px;
  font-size:0.9rem;
}
.sb-result-col p{
  margin:2px 0;
}
.sb-end-hint{
  margin-top:8px;
  font-size:0.83rem;
  color:#fed7aa;
  padding:6px 8px;
  border-radius:8px;
  border:1px solid #f97316;
  background:rgba(30,64,175,0.35);
}
.sb-result-actions{
  margin-top:10px;
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}

/* ===== RESEARCH CARD ===== */

.sb-card-research{
  margin-top:14px;
}

/* ===== RESPONSIVE ===== */

@media (max-width:780px){
  #sb-wrap.sb-wrap{
    padding:10px 8px 24px;
  }
  .sb-header-main{
    flex-direction:column;
    align-items:flex-start;
  }
  .sb-play-layout{
    grid-template-columns:1fr;
  }
}
/* ===== Shadow Breaker — Target & Spawn FX ===== */

.sb-playfield {
  position: relative;
  width: 100%;
  aspect-ratio: 16 / 9;
  max-height: 420px;
  margin-top: 16px;
  border-radius: 24px;
  overflow: hidden;
  background: radial-gradient(circle at top,
              rgba(56,189,248,.12), transparent 55%),
              radial-gradient(circle at bottom,
              rgba(129,140,248,.16), transparent 55%),
              #020617;
}

/* ปุ่มเป้า */
.sb-target {
  position: absolute;
  border-radius: 999px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  background:
    radial-gradient(circle at 30% 20%,
      rgba(255,255,255,.9),
      rgba(15,23,42,.95));
  box-shadow:
    0 0 0 1px rgba(148,163,184,.7),
    0 12px 28px rgba(15,23,42,.8);
  transform: translate(-50%, -50%) scale(.8);
  cursor: pointer;
  transition:
    transform .12s ease-out,
    box-shadow .2s ease-out,
    filter .15s ease-out;
  touch-action: manipulation;
}

.sb-target-inner {
  font-size: 2.1rem;
  filter: drop-shadow(0 3px 6px rgba(15,23,42,.85));
}

/* วงแหวนรอบเป้า */
.sb-target-ring {
  --sb-ring-color: hsla(var(--sb-ring-hue, 210), 95%, 72%, 1);
  position: absolute;
  inset: -4px;
  border-radius: inherit;
  border: 2px solid var(--sb-ring-color);
  box-shadow: 0 0 0 0 var(--sb-ring-color);
  opacity: .9;
  pointer-events: none;
}

/* ตอนโผล่ให้เด้ง + มี ring pulse 1 ครั้ง */
.sb-target--spawn {
  animation: sbTargetPop .24s ease-out forwards;
}

.sb-target--spawn .sb-target-ring {
  animation: sbRingPulse .65s ease-out forwards;
}

/* ตอนโดนตี / ลบ */
.sb-target--bye,
.sb-target--timeout {
  pointer-events: none;
  animation: sbTargetBye .22s ease-in forwards;
}

@keyframes sbTargetPop {
  0%   { transform: translate(-50%, -50%) scale(.55); filter: brightness(1.4); }
  70%  { transform: translate(-50%, -50%) scale(1.07); filter: brightness(1.1); }
  100% { transform: translate(-50%, -50%) scale(1);    filter: brightness(1); }
}

@keyframes sbRingPulse {
  0% {
    transform: scale(.7);
    opacity: 1;
    box-shadow: 0 0 0 0 var(--sb-ring-color);
  }
  100% {
    transform: scale(1.18);
    opacity: 0;
    box-shadow: 0 0 0 18px transparent;
  }
}

@keyframes sbTargetBye {
  0%   { transform: translate(-50%, -50%) scale(1);   opacity: 1; }
  100% { transform: translate(-50%, -50%) scale(.5); opacity: 0; }
}
