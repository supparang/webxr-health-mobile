/* === /fitness/css/shadow-breaker.css ===
   Shadow Breaker — PRODUCTION PATCH (layout spacious + safe spawn + mobile compact)
   ✅ Less cramped layout
   ✅ HUD/Meta less blocking
   ✅ CSS safe-zone vars for dom-renderer-shadow.js
   ✅ Mobile compact mode
   ✅ Soft expire animation
*/

:root{
  --bg:#050814;
  --bg2:#0b1220;
  --panel: rgba(2,6,23,.78);
  --panel-2: rgba(15,23,42,.72);
  --line: rgba(148,163,184,.18);
  --line-2: rgba(148,163,184,.28);
  --txt: rgba(229,231,235,.95);
  --mut: rgba(148,163,184,.95);

  --good: rgba(16,185,129,.95);
  --warn: rgba(251,191,36,.95);
  --bad: rgba(239,68,68,.95);
  --boss: rgba(244,114,182,.95);
  --fever: rgba(250,204,21,.95);
  --accent: rgba(99,102,241,.95);

  --shadow-1: 0 10px 30px rgba(0,0,0,.28);
  --shadow-2: 0 14px 40px rgba(0,0,0,.34);

  --radius-xl: 20px;
  --radius-lg: 16px;
  --radius-md: 12px;
  --radius-sm: 10px;

  /* === SAFE ZONE (read by dom-renderer-shadow.js) ===
     renderer reads from documentElement computed style */
  --sb-safe-pad: 16;
  --sb-safe-top: 62;   /* top HUD bars area */
  --sb-safe-side: 14;  /* side gutters */
  --sb-safe-bot: 120;  /* bottom bars / fever area */

  --sb-stage-min-h: 420px;
  --sb-stage-max-h: 68svh;

  --sb-target-size-mobile-max: 112px;
}

*{ box-sizing:border-box; }
html,body{
  height:100%;
  margin:0;
  background:
    radial-gradient(1200px 800px at 15% -10%, rgba(99,102,241,.15), transparent 60%),
    radial-gradient(1000px 700px at 95% 15%, rgba(34,211,238,.10), transparent 58%),
    radial-gradient(900px 650px at 50% 120%, rgba(236,72,153,.08), transparent 60%),
    linear-gradient(180deg, #040712 0%, #060b17 45%, #050814 100%);
  color:var(--txt);
  font-family: system-ui, -apple-system, "Noto Sans Thai", "Segoe UI", Roboto, sans-serif;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

/* ---------- Layout Shell ---------- */
.sb-wrap{
  min-height:100%;
  padding:
    max(10px, env(safe-area-inset-top))
    10px
    max(10px, env(safe-area-inset-bottom))
    10px;
  display:grid;
  grid-template-rows:auto 1fr;
  gap:10px;
}

.sb-header{
  display:grid;
  grid-template-columns: 1.35fr .95fr;
  gap:10px;
  align-items:stretch;
}

.sb-header-left,
.sb-header-right{
  background: linear-gradient(180deg, rgba(15,23,42,.72), rgba(2,6,23,.72));
  border:1px solid var(--line);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-1);
  padding:10px 12px;
  min-width:0;
}

.sb-kicker{
  color:var(--mut);
  font-size:12px;
  letter-spacing:.04em;
  margin-bottom:3px;
}
.sb-title{
  margin:0;
  line-height:1.05;
  font-size:clamp(22px, 3.2vw, 30px);
  font-weight:900;
}
.sb-sub{
  margin-top:4px;
  color:var(--mut);
  font-size:13px;
  line-height:1.3;
}

.sb-tip{
  font-size:12px;
  color:var(--mut);
  line-height:1.35;
  margin-bottom:8px;
}
.sb-tip code,
.sb-mini-note code{
  background:rgba(15,23,42,.9);
  border:1px solid var(--line);
  border-radius:8px;
  padding:.05rem .35rem;
  color:#e2e8f0;
  font-size:.95em;
}

.sb-links{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}
.sb-link{
  display:inline-flex;
  align-items:center;
  gap:6px;
  text-decoration:none;
  color:#dbeafe;
  background:rgba(30,41,59,.55);
  border:1px solid var(--line);
  border-radius:999px;
  padding:7px 10px;
  font-size:13px;
}
.sb-link:hover{ border-color:var(--line-2); }

/* ---------- Main / Views ---------- */
.sb-main{
  min-height:0;
  display:grid;
}
.sb-view{
  display:none;
  min-height:0;
}
.sb-view.is-active{
  display:block;
}

.sb-panel{
  background: linear-gradient(180deg, rgba(15,23,42,.66), rgba(2,6,23,.72));
  border:1px solid var(--line);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-2);
  padding:12px;
}

/* ---------- Menu View ---------- */
.sb-mode-row{
  display:flex;
  gap:8px;
  margin-bottom:8px;
}
.sb-mode-btn{
  flex:1 1 0;
  border:1px solid var(--line);
  background:rgba(15,23,42,.65);
  color:var(--txt);
  border-radius:12px;
  padding:10px 12px;
  font-weight:700;
  cursor:pointer;
}
.sb-mode-btn.is-active{
  border-color:rgba(99,102,241,.42);
  box-shadow: inset 0 0 0 1px rgba(99,102,241,.18);
  background:linear-gradient(180deg, rgba(79,70,229,.22), rgba(30,41,59,.55));
}

.sb-mode-desc{
  color:var(--mut);
  font-size:13px;
  margin-bottom:10px;
}

.sb-form{
  display:grid;
  gap:10px;
}
.sb-field{
  display:grid;
  gap:6px;
}
.sb-label{
  font-size:12px;
  color:var(--mut);
}
.sb-input{
  width:100%;
  border:1px solid var(--line);
  background:rgba(2,6,23,.82);
  color:var(--txt);
  border-radius:12px;
  padding:10px 12px;
  font-size:14px;
  outline:none;
}
.sb-input:focus{
  border-color:rgba(99,102,241,.45);
  box-shadow: 0 0 0 3px rgba(99,102,241,.12);
}

.sb-actions{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}
.sb-btn{
  appearance:none;
  border:1px solid var(--line);
  background:rgba(30,41,59,.6);
  color:var(--txt);
  border-radius:12px;
  padding:10px 12px;
  font-weight:700;
  cursor:pointer;
  min-height:40px;
}
.sb-btn:hover{ border-color:var(--line-2); }
.sb-btn:active{ transform:translateY(1px); }

.sb-btn-primary{
  background: linear-gradient(180deg, rgba(79,70,229,.95), rgba(67,56,202,.92));
  border-color: rgba(129,140,248,.4);
  color:white;
}
.sb-btn-ghost{
  background: rgba(15,23,42,.45);
}

.sb-howto{
  display:none;
  border:1px solid var(--line);
  border-radius:12px;
  padding:10px 12px;
  background:rgba(2,6,23,.55);
  color:#e5e7eb;
}
.sb-howto.is-on{ display:block; }
.sb-howto ul{
  margin:0;
  padding-left:18px;
  line-height:1.45;
  font-size:13px;
}

.sb-mini-note{
  margin-top:2px;
  border-top:1px dashed var(--line);
  padding-top:8px;
  color:var(--mut);
  font-size:12px;
  line-height:1.35;
}

/* ---------- Play View ---------- */
.sb-play{
  min-height:0;
  display:grid;
  grid-template-rows:auto auto minmax(0,1fr) auto;
  gap:8px;
}

/* HUD top row */
.sb-hud{
  display:grid;
  grid-template-columns: 1.25fr minmax(120px, .9fr) auto;
  gap:8px;
  align-items:center;
  min-width:0;
}

.sb-hud-left,
.sb-hud-center,
.sb-hud-right{
  min-width:0;
  background:var(--panel);
  border:1px solid var(--line);
  border-radius:14px;
  box-shadow: var(--shadow-1);
  padding:8px 10px;
}

.sb-hud-left{
  display:grid;
  grid-template-columns: repeat(4, minmax(0,1fr));
  gap:6px;
}
.sb-stat{
  background:rgba(15,23,42,.45);
  border:1px solid rgba(148,163,184,.12);
  border-radius:10px;
  padding:6px 8px;
  min-width:0;
}
.sb-stat .k{
  display:block;
  color:var(--mut);
  font-size:11px;
  line-height:1.05;
  margin-bottom:3px;
}
.sb-stat .v{
  display:block;
  font-weight:800;
  font-size:14px;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.sb-hud-center{
  display:flex;
  align-items:center;
  justify-content:center;
}
.sb-boss-name{
  font-weight:900;
  font-size:clamp(14px, 2vw, 18px);
  text-align:center;
  line-height:1.1;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  max-width:100%;
}

.sb-hud-right{
  display:flex;
  align-items:center;
  gap:8px;
  justify-content:flex-end;
}

.sb-toggle{
  display:inline-flex;
  align-items:center;
  gap:6px;
  color:var(--txt);
  font-size:13px;
  border:1px solid rgba(148,163,184,.18);
  border-radius:10px;
  padding:6px 8px;
  background:rgba(15,23,42,.35);
  white-space:nowrap;
}
.sb-toggle input{
  margin:0;
  accent-color:#818cf8;
}

/* HP bars row */
.sb-bars{
  display:grid;
  gap:8px;
}
.sb-bars-top{
  grid-template-columns: 1fr 1fr;
}
.sb-bar{
  display:grid;
  grid-template-columns:auto 1fr;
  gap:8px;
  align-items:center;
  min-width:0;
  background:var(--panel);
  border:1px solid var(--line);
  border-radius:12px;
  padding:7px 9px;
}
.sb-bar-label{
  color:var(--mut);
  font-size:11px;
  font-weight:700;
  white-space:nowrap;
}
.sb-bar-track{
  position:relative;
  height:10px;
  background:rgba(15,23,42,.75);
  border-radius:999px;
  overflow:hidden;
  border:1px solid rgba(148,163,184,.12);
}
.sb-bar-fill{
  position:absolute;
  inset:0;
  transform-origin:left center;
  transform:scaleX(1);
  background:linear-gradient(90deg, rgba(34,197,94,.92), rgba(16,185,129,.92));
  transition: transform .14s linear;
}
.sb-bar-fill.boss{
  background:linear-gradient(90deg, rgba(236,72,153,.92), rgba(244,114,182,.95));
}

/* Stage */
.sb-stage{
  position:relative;
  min-height: clamp(var(--sb-stage-min-h), 58svh, var(--sb-stage-max-h));
  height: clamp(var(--sb-stage-min-h), 58svh, var(--sb-stage-max-h));
  border-radius: 18px;
  overflow:hidden;
  border:1px solid var(--line);
  box-shadow: var(--shadow-2);
  background:
    radial-gradient(900px 420px at 20% 0%, rgba(59,130,246,.10), transparent 65%),
    radial-gradient(700px 420px at 100% 100%, rgba(244,114,182,.08), transparent 60%),
    linear-gradient(180deg, rgba(2,6,23,.92), rgba(2,6,23,.82));
}

/* subtle arena grid */
.sb-stage::before{
  content:"";
  position:absolute; inset:0;
  pointer-events:none;
  background-image:
    linear-gradient(to right, rgba(148,163,184,.06) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(148,163,184,.05) 1px, transparent 1px);
  background-size: 26px 26px, 26px 26px;
  opacity:.35;
}

/* Target layer (actual play area) */
.sb-target-layer{
  position:absolute;
  inset:0;
  z-index:2;
  overflow:hidden;
  touch-action:manipulation;
}

/* Center message */
.sb-center-msg{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  pointer-events:none;
  z-index:3;
}
.sb-msg-main{
  max-width:min(88%, 520px);
  text-align:center;
  padding:8px 12px;
  border-radius:999px;
  background:rgba(2,6,23,.42);
  border:1px solid rgba(148,163,184,.12);
  color:#f8fafc;
  font-weight:800;
  font-size:14px;
  letter-spacing:.01em;
  backdrop-filter: blur(4px);
}
.sb-msg-main.good{
  color:#d1fae5;
  border-color:rgba(16,185,129,.25);
}
.sb-msg-main.perfect{
  color:#fef9c3;
  border-color:rgba(250,204,21,.32);
  box-shadow:0 0 0 1px rgba(250,204,21,.10) inset;
}
.sb-msg-main.bad,
.sb-msg-main.miss{
  color:#fecaca;
  border-color:rgba(239,68,68,.28);
}

/* Meta card (stage side) */
.sb-meta{
  position:absolute;
  top:10px;
  right:10px;
  z-index:4;
  width:min(250px, 42%);
  background:rgba(2,6,23,.62);
  border:1px solid rgba(148,163,184,.16);
  border-radius:14px;
  box-shadow: var(--shadow-1);
  backdrop-filter: blur(6px);
  overflow:hidden;
}
.sb-meta-rowtop{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
  padding:8px 10px;
  border-bottom:1px solid rgba(148,163,184,.10);
}
.sb-meta-emoji{
  font-size:22px;
  line-height:1;
}
.sb-meta-toggle{
  border:1px solid rgba(148,163,184,.18);
  background:rgba(15,23,42,.42);
  color:#e5e7eb;
  border-radius:9px;
  width:28px;
  height:28px;
  cursor:pointer;
}
.sb-meta-body{
  padding:8px 10px 9px;
  display:grid;
  gap:6px;
}
.sb-meta-name{
  font-weight:900;
  line-height:1.1;
  font-size:14px;
}
.sb-meta-desc{
  color:var(--mut);
  font-size:12px;
  line-height:1.3;
}
.sb-meta-row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:8px;
  font-size:12px;
  color:var(--mut);
  padding-top:2px;
}
.sb-meta-row b{
  color:var(--txt);
  font-size:13px;
}

/* Bottom bars / fever area */
.sb-bars-bottom{
  grid-template-columns: minmax(0,1.35fr) minmax(230px,.9fr);
  align-items:start;
}

.sb-fever{
  background:var(--panel);
  border:1px solid var(--line);
  border-radius:14px;
  box-shadow: var(--shadow-1);
  padding:8px 10px;
  min-width:0;
}
.sb-fever-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
  margin-bottom:6px;
}
.sb-fever-head .k{
  color:var(--mut);
  font-size:11px;
  margin-right:6px;
}
.sb-fever-head .v{
  font-weight:800;
  font-size:13px;
}
#sb-label-fever.on{
  color:#fef08a;
  text-shadow:0 0 12px rgba(250,204,21,.22);
}

.sb-fever-btn{
  appearance:none;
  border:1px solid rgba(250,204,21,.28);
  background:linear-gradient(180deg, rgba(250,204,21,.18), rgba(234,179,8,.12));
  color:#fef08a;
  border-radius:10px;
  padding:6px 10px;
  font-weight:800;
  font-size:12px;
  cursor:pointer;
  white-space:nowrap;
}
.sb-fever-btn:hover{
  border-color:rgba(250,204,21,.42);
}

.sb-fever-track{
  position:relative;
  height:10px;
  border-radius:999px;
  background:rgba(15,23,42,.75);
  border:1px solid rgba(148,163,184,.12);
  overflow:hidden;
}
.sb-fever-fill{
  position:absolute;
  inset:0;
  transform-origin:left center;
  transform:scaleX(0);
  transition: transform .14s linear;
  background:
    linear-gradient(90deg,
      rgba(250,204,21,.96),
      rgba(251,191,36,.96),
      rgba(245,158,11,.95));
  box-shadow:0 0 20px rgba(250,204,21,.18);
}
.sb-fever-hint{
  margin-top:5px;
  color:var(--mut);
  font-size:11px;
  line-height:1.25;
}

.sb-bars-compact{
  background:var(--panel);
  border:1px solid var(--line);
  border-radius:14px;
  box-shadow: var(--shadow-1);
  padding:8px 9px;
  display:grid;
  gap:7px;
}
.sb-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
  background:rgba(15,23,42,.42);
  border:1px solid rgba(148,163,184,.10);
  border-radius:10px;
  padding:6px 8px;
}
.sb-row .k{
  color:var(--mut);
  font-size:12px;
}
.sb-row .v{
  font-size:13px;
  font-weight:800;
}

/* ---------- Targets ---------- */
.sb-target{
  position:absolute;
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius:999px;
  user-select:none;
  cursor:pointer;
  z-index:2;

  font-size: clamp(30px, 4.4vw, 42px);
  line-height:1;
  text-shadow: 0 2px 10px rgba(0,0,0,.45);

  border:1px solid rgba(255,255,255,.16);
  box-shadow:
    0 8px 20px rgba(0,0,0,.32),
    inset 0 1px 0 rgba(255,255,255,.10);

  transform: translateZ(0) scale(1);
  transition:
    transform .08s ease,
    opacity .14s ease,
    filter .14s ease,
    box-shadow .14s ease;
  animation: sbTargetPop .14s ease-out;
}

.sb-target:hover{
  transform: scale(1.03);
  box-shadow:
    0 10px 24px rgba(0,0,0,.35),
    inset 0 1px 0 rgba(255,255,255,.12);
}
.sb-target:active{
  transform: scale(.96);
}

.sb-target--normal{
  background: radial-gradient(circle at 35% 25%, rgba(255,255,255,.18), rgba(59,130,246,.22) 35%, rgba(30,64,175,.22));
}
.sb-target--decoy{
  background: radial-gradient(circle at 35% 25%, rgba(255,255,255,.12), rgba(148,163,184,.15) 35%, rgba(71,85,105,.24));
  filter: saturate(.8);
}
.sb-target--bomb{
  background: radial-gradient(circle at 35% 25%, rgba(255,255,255,.10), rgba(239,68,68,.22) 35%, rgba(127,29,29,.28));
}
.sb-target--heal{
  background: radial-gradient(circle at 35% 25%, rgba(255,255,255,.12), rgba(16,185,129,.22) 35%, rgba(6,78,59,.28));
}
.sb-target--shield{
  background: radial-gradient(circle at 35% 25%, rgba(255,255,255,.12), rgba(168,85,247,.22) 35%, rgba(88,28,135,.28));
}
.sb-target--bossface{
  background: radial-gradient(circle at 35% 25%, rgba(255,255,255,.14), rgba(244,114,182,.24) 35%, rgba(131,24,67,.28));
  box-shadow:
    0 10px 24px rgba(236,72,153,.14),
    0 8px 20px rgba(0,0,0,.34),
    inset 0 1px 0 rgba(255,255,255,.12);
}

/* ✅ expire softly */
.sb-target.is-expiring{
  opacity:.10;
  transform: scale(.72);
  filter: blur(.5px) saturate(.75);
}

/* ---------- Result View ---------- */
.sb-result-title{
  margin:2px 0 10px;
  font-size:22px;
}
.sb-result-grid{
  display:grid;
  grid-template-columns: repeat(4, minmax(0,1fr));
  gap:8px;
}
.sb-result-card{
  background:rgba(15,23,42,.48);
  border:1px solid var(--line);
  border-radius:12px;
  padding:9px 10px;
  min-width:0;
}
.sb-result-card .k{
  color:var(--mut);
  font-size:11px;
  margin-bottom:4px;
}
.sb-result-card .v{
  font-size:18px;
  font-weight:900;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.sb-result-actions{
  margin-top:10px;
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}

/* ---------- FX text/particles helper classes (used by fx-burst.js) ---------- */
.sb-fx-hit{ color:#d1fae5 !important; }
.sb-fx-fever{ color:#fef08a !important; text-shadow:0 0 10px rgba(250,204,21,.22); }
.sb-fx-miss{ color:#fecaca !important; }
.sb-fx-bomb{ color:#fca5a5 !important; }
.sb-fx-heal{ color:#bbf7d0 !important; }
.sb-fx-shield{ color:#ddd6fe !important; }

/* ---------- Animations ---------- */
@keyframes sbTargetPop{
  from{ transform:scale(.86); opacity:.0; }
  to{ transform:scale(1); opacity:1; }
}

/* ---------- Tablet ---------- */
@media (max-width: 980px){
  .sb-header{
    grid-template-columns: 1fr;
  }
  .sb-header-right{
    padding-top:9px;
    padding-bottom:9px;
  }

  .sb-hud{
    grid-template-columns: 1fr;
    gap:7px;
  }
  .sb-hud-right{
    justify-content:space-between;
  }

  .sb-bars-bottom{
    grid-template-columns: 1fr;
  }

  .sb-meta{
    width:min(220px, 46%);
  }

  :root{
    --sb-safe-top: 84;
    --sb-safe-bot: 132;
  }
}

/* ---------- Mobile ---------- */
@media (max-width: 680px){
  .sb-wrap{
    padding-left:8px;
    padding-right:8px;
    gap:8px;
  }

  .sb-header{
    gap:8px;
  }
  .sb-header-left, .sb-header-right{
    padding:9px 10px;
    border-radius:14px;
  }
  .sb-kicker{ font-size:11px; }
  .sb-sub{ font-size:12px; }

  /* compact play layout */
  .sb-play{
    gap:6px;
  }

  .sb-hud-left{
    grid-template-columns: repeat(2, minmax(0,1fr));
    gap:5px;
    padding:7px 8px;
  }
  .sb-stat{
    padding:5px 7px;
    border-radius:9px;
  }
  .sb-stat .k{ font-size:10px; margin-bottom:2px; }
  .sb-stat .v{ font-size:13px; }

  .sb-hud-center,
  .sb-hud-right{
    padding:7px 8px;
  }
  .sb-boss-name{
    font-size:14px;
  }

  .sb-toggle{
    font-size:12px;
    padding:5px 7px;
  }
  .sb-btn{
    min-height:38px;
    padding:9px 10px;
    border-radius:10px;
    font-size:13px;
  }

  .sb-bars-top{
    grid-template-columns: 1fr;
    gap:6px;
  }
  .sb-bar{
    padding:6px 8px;
    border-radius:10px;
  }
  .sb-bar-label{
    font-size:10px;
  }
  .sb-bar-track{
    height:9px;
  }

  .sb-stage{
    min-height: 52svh;
    height: 52svh;
    border-radius: 14px;
  }

  .sb-center-msg{
    align-items:flex-start;
    justify-content:center;
    padding-top: 50px; /* avoid exact center crowding on small screens */
  }
  .sb-msg-main{
    max-width:90%;
    font-size:12px;
    padding:6px 10px;
  }

  /* meta collapses more and blocks less */
  .sb-meta{
    top:8px;
    right:8px;
    width:min(170px, 44%);
    border-radius:12px;
    background:rgba(2,6,23,.56);
  }
  .sb-meta-rowtop{
    padding:6px 8px;
  }
  .sb-meta-emoji{
    font-size:18px;
  }
  .sb-meta-body{
    padding:7px 8px 8px;
    gap:4px;
  }
  .sb-meta-name{
    font-size:12px;
  }
  .sb-meta-desc{
    font-size:11px;
    line-height:1.2;
    display:-webkit-box;
    -webkit-line-clamp:2;
    -webkit-box-orient:vertical;
    overflow:hidden;
  }
  .sb-meta-row{
    font-size:11px;
  }
  .sb-meta-row b{
    font-size:12px;
  }

  .sb-fever{
    padding:7px 8px;
    border-radius:12px;
  }
  .sb-fever-head{
    gap:6px;
    margin-bottom:5px;
  }
  .sb-fever-btn{
    padding:5px 8px;
    font-size:11px;
    border-radius:9px;
  }
  .sb-fever-hint{
    font-size:10px;
    margin-top:4px;
    display:none; /* ลดความแน่น */
  }

  .sb-bars-compact{
    padding:7px 8px;
    border-radius:12px;
    gap:6px;
  }
  .sb-row{
    padding:5px 7px;
    border-radius:9px;
  }
  .sb-row .k{ font-size:11px; }
  .sb-row .v{ font-size:12px; }

  .sb-result-grid{
    grid-template-columns: repeat(2, minmax(0,1fr));
  }
  .sb-result-card .v{
    font-size:16px;
  }

  /* === tighter safe zone for mobile but still protected from HUD/meta === */
  :root{
    --sb-safe-pad: 12;
    --sb-safe-top: 70;
    --sb-safe-side: 10;
    --sb-safe-bot: 132;
  }

  /* cap visual target scale perception on mobile */
  .sb-target{
    font-size: clamp(26px, 7vw, 34px);
  }
}

/* ---------- Very small phones ---------- */
@media (max-width: 420px){
  .sb-wrap{
    padding-left:6px;
    padding-right:6px;
  }

  .sb-header-right{
    display:none; /* ซ่อนส่วน tip/link header เพื่อเอาพื้นที่ให้เกม */
  }

  .sb-title{
    font-size:20px;
  }

  .sb-hud-left{
    grid-template-columns: repeat(2, minmax(0,1fr));
  }

  .sb-hud-right{
    flex-wrap:wrap;
    gap:6px;
  }

  .sb-stage{
    min-height: 50svh;
    height: 50svh;
  }

  .sb-meta{
    width:min(148px, 42%);
  }
  .sb-meta-desc{
    display:none; /* ลดบังพื้นที่ stage */
  }

  :root{
    --sb-safe-pad: 10;
    --sb-safe-top: 74;
    --sb-safe-side: 8;
    --sb-safe-bot: 126;
  }
}

/* ---------- Reduced motion ---------- */
@media (prefers-reduced-motion: reduce){
  *{
    animation-duration: .001ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: .001ms !important;
    scroll-behavior: auto !important;
  }
}