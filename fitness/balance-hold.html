<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <title>Balance Hold ‚Äî VR Fitness Suite</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <meta name="color-scheme" content="dark light"/>
  <link rel="stylesheet" href="./css/balance-hold.css"/>
</head>
<body>
  <div id="app">

    <!-- ===== VIEW: MENU ===== -->
    <section id="view-menu" class="view">
      <h1 class="title">‚öñÔ∏è Balance Hold <span class="sub">Platform & Obstacle</span></h1>
      <p class="subtitle">
        ‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏™‡∏°‡∏î‡∏∏‡∏•‡∏ö‡∏ô‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ó‡∏µ‡πà‡πÇ‡∏Ñ‡∏•‡∏á‡πÄ‡∏Ñ‡∏•‡∏á ‚Äî ‡∏´‡∏•‡∏ö‡∏™‡∏¥‡πà‡∏á‡∏£‡∏ö‡∏Å‡∏ß‡∏ô (‡∏•‡∏° üí® / ‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î üí£) ‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î<br/>
        Keep the platform level while avoiding balance shocks.
      </p>

      <div class="field">
        <label for="difficulty">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å / Difficulty</label>
        <select id="difficulty">
          <option value="easy">‡∏á‡πà‡∏≤‡∏¢ (Easy) ‚Äî ‡πÅ‡∏£‡∏á‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡πÄ‡∏ö‡∏≤, ‡πÇ‡∏ã‡∏ô‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏Å‡∏ß‡πâ‡∏≤‡∏á</option>
          <option value="normal" selected>‡∏õ‡∏Å‡∏ï‡∏¥ (Normal) ‚Äî ‡πÅ‡∏£‡∏á‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á</option>
          <option value="hard">‡∏¢‡∏≤‡∏Å (Hard) ‚Äî ‡πÅ‡∏£‡∏á‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡πÅ‡∏£‡∏á, ‡πÇ‡∏ã‡∏ô‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÅ‡∏Ñ‡∏ö</option>
        </select>
      </div>

      <div class="field">
        <label for="sessionDuration">‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏•‡πà‡∏ô / Duration</label>
        <select id="sessionDuration">
          <option value="45">45 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</option>
          <option value="60" selected>60 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</option>
          <option value="90">90 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</option>
        </select>
      </div>

      <div class="btn-row">
        <button data-action="start-normal" class="btn primary">
          üéÆ ‡πÄ‡∏•‡πà‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥ / Play
        </button>
        <button data-action="goto-research" class="btn">
          üìä ‡πÇ‡∏´‡∏°‡∏î‡∏ß‡∏¥‡∏à‡∏±‡∏¢ / Research mode
        </button>
      </div>

      <div class="btn-row secondary">
        <button class="btn ghost" onclick="location.href='./index.html'">
          ‚¨Ö ‡∏Å‡∏•‡∏±‡∏ö Fitness Hub / Back to Hub
        </button>
      </div>
    </section>

    <!-- ===== VIEW: RESEARCH FORM ===== -->
    <section id="view-research" class="view hidden">
      <h2 class="title-small">üìä ‡πÇ‡∏´‡∏°‡∏î‡∏ß‡∏¥‡∏à‡∏±‡∏¢ / Research mode</h2>
      <p class="subtitle">
        ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏° / Fill participant info
      </p>
      <div class="field">
        <label for="researchId">‡∏£‡∏´‡∏±‡∏™‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏° / Participant ID</label>
        <input id="researchId" placeholder="‡πÄ‡∏ä‡πà‡∏ô P001, S01, E01"/>
      </div>
      <div class="field">
        <label for="researchGroup">‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ß‡∏¥‡∏à‡∏±‡∏¢ / Group</label>
        <input id="researchGroup" placeholder="‡πÄ‡∏ä‡πà‡∏ô Control / Training / VR-only"/>
      </div>
      <div class="field">
        <label for="researchPhase">‡∏£‡∏∞‡∏¢‡∏∞ / Phase</label>
        <input id="researchPhase" placeholder="‡πÄ‡∏ä‡πà‡∏ô Pre-test / Post-test / Follow-up"/>
      </div>

      <div class="btn-row">
        <button data-action="start-research" class="btn primary">
          ‚ñ∂ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÇ‡∏´‡∏°‡∏î‡∏ß‡∏¥‡∏à‡∏±‡∏¢ / Start research
        </button>
        <button data-action="back-menu" class="btn ghost">
          ‚¨Ö ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π / Back
        </button>
      </div>
    </section>

    <!-- ===== VIEW: PLAY ===== -->
    <section id="view-play" class="view hidden">
      <div id="hud1">
        <span>Mode: <b id="hud-mode">-</b></span>
        <span>Diff: <b id="hud-diff">-</b></span>
        <span>Duration: <b id="hud-dur">-</b>s</span>
      </div>
      <div id="hud2">
        <span>Stability: <b id="hud-stability">0%</b></span>
        <span>Obstacles ‚õî: <b id="hud-obstacles">0 / 0</b></span>
        <span>Time: <b id="hud-time">0.0</b>s</span>
      </div>

      <div id="playArea">
        <div id="platform-wrap">
          <div id="safeZone"></div>
          <div id="platform">
            <div id="platform-top"></div>
          </div>
          <div id="indicator"></div>
          <div id="obstacle-layer"></div>
        </div>
        <div id="balance-markers">
          <span class="marker marker-left">‚óÄ</span>
          <span class="marker marker-center">‚óè</span>
          <span class="marker marker-right">‚ñ∂</span>
        </div>
        <div id="coachLabel" class="coach-label">‡∏à‡∏±‡∏ö/‡πÅ‡∏ï‡∏∞‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏õ‡∏ã‡πâ‡∏≤‡∏¢-‡∏Ç‡∏ß‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏™‡∏°‡∏î‡∏∏‡∏•</div>
      </div>

      <p class="howto">
        üì± PC/Mobile: ‡πÅ‡∏ï‡∏∞/‡∏•‡∏≤‡∏Å‡∏Ñ‡πâ‡∏≤‡∏á‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏°‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏õ‡∏ã‡πâ‡∏≤‡∏¢‚Äì‡∏Ç‡∏ß‡∏≤ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏±‡∏ô‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÉ‡∏´‡πâ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á<br/>
        üéÆ ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Ñ‡∏∑‡∏≠‡∏£‡∏±‡∏Å‡∏©‡∏≤ ‚Äú‡∏à‡∏∏‡∏î‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‚Äù ‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏ã‡∏ô‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÉ‡∏´‡πâ‡∏ô‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡πÅ‡∏•‡∏∞‡∏´‡∏•‡∏ö‡∏™‡∏¥‡πà‡∏á‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
      </p>

      <div class="btn-row">
        <button data-action="stop" class="btn ghost">
          ‚èπ ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ / Stop early
        </button>
        <button class="btn ghost" onclick="location.href='./index.html'">
          ‚¨Ö Hub
        </button>
      </div>
    </section>

    <!-- ===== VIEW: RESULT ===== -->
    <section id="view-result" class="view hidden">
      <h2 class="title-small">üìà ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏• / Session summary</h2>

      <div class="result-grid">
        <div class="result-row"><span>Mode</span><b id="res-mode"></b></div>
        <div class="result-row"><span>Difficulty</span><b id="res-diff"></b></div>
        <div class="result-row"><span>Duration (s)</span><b id="res-dur"></b></div>
        <div class="result-row"><span>End reason</span><b id="res-end"></b></div>

        <div class="result-row"><span>Stability time %</span><b id="res-stability"></b></div>
        <div class="result-row"><span>Mean |tilt|</span><b id="res-meanTilt"></b></div>
        <div class="result-row"><span>RMS tilt</span><b id="res-rmsTilt"></b></div>

        <div class="result-row"><span>Obstacles avoided</span><b id="res-avoid"></b></div>
        <div class="result-row"><span>Obstacles hit</span><b id="res-hit"></b></div>
        <div class="result-row"><span>Obstacle success %</span><b id="res-avoidRate"></b></div>

        <div class="result-row"><span>Fatigue index</span><b id="res-fatigue"></b></div>
        <div class="result-row"><span>Samples (n)</span><b id="res-samples"></b></div>
      </div>

      <p class="note">
        ‡πÇ‡∏´‡∏°‡∏î‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡∏à‡∏∞‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î CSV ‡πÉ‡∏´‡πâ‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏à‡∏ö‡πÄ‡∏Å‡∏° / In research mode a CSV will be auto-downloaded at the end.
      </p>

      <div class="btn-row">
        <button data-action="play-again" class="btn primary">üîÅ ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á / Play again</button>
        <button data-action="back-menu" class="btn ghost">üè† ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π / Back to menu</button>
      </div>
    </section>

    <!-- floating coach text -->
    <div id="coachBubble" class="coach hidden"></div>

  </div>

  <script type="module" src="./js/balance-hold.js"></script>
</body>
</html>