<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Shadow Breaker тАФ VR Fitness Academy</title>
  <meta name="color-scheme" content="light dark" />
  <link rel="stylesheet" href="../css/shadow-breaker.css" />
</head>
<body>

  <!-- ===== Main Wrapper ===== -->
  <div class="sb-wrap" id="sb-wrap">

    <!-- ========== MENU VIEW ========== -->
    <section id="view-menu">
      <h1 class="title">тЪб Shadow Breaker тЪб</h1>

      <label>р╕гр╕░р╕Фр╕▒р╕Ър╕Др╕зр╕▓р╕бр╕вр╕▓р╕Б</label>
      <select id="difficulty">
        <option value="easy">Easy тАФ р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щ</option>
        <option value="normal" selected>Normal тАФ р╕Ыр╕Бр╕Хр╕┤</option>
        <option value="hard">Hard тАФ р╕Чр╣Йр╕▓р╕Чр╕▓р╕в</option>
      </select>

      <label>р╕гр╕░р╕вр╕░р╣Ар╕зр╕ер╕▓р╣Ар╕ер╣Ир╕Щр╕Хр╣Ир╕нр╕гр╕нр╕Ъ</label>
      <select id="duration">
        <option value="45">45 р╕зр╕┤р╕Щр╕▓р╕Чр╕╡</option>
        <option value="60" selected>60 р╕зр╕┤р╕Щр╕▓р╕Чр╕╡</option>
        <option value="75">75 р╕зр╕┤р╕Щр╕▓р╕Чр╕╡</option>
      </select>

      <button data-action="start-normal" class="btn-main">тЪая╕П р╣Ар╕гр╕┤р╣Ир╕бр╣Ар╕ер╣Ир╕Щр╣Ар╕ер╕в</button>

      <hr />
      <button data-action="start-research" class="btn-sub">ЁЯУЛ р╣Ар╕ер╣Ир╕Щр╣Гр╕Щр╣Вр╕лр╕бр╕Фр╕зр╕┤р╕Ир╕▒р╕в</button>
      <p class="hint">р╕кр╕▓р╕бр╕▓р╕гр╕Цр╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕Ыр╣Зр╕Щ CSV р╣Др╕Фр╣Й</p>
    </section>

    <!-- ========== RESEARCH FORM ========== -->
    <section id="view-research-form" class="hidden">
      <h2>р╣Вр╕лр╕бр╕Фр╕зр╕┤р╕Ир╕▒р╕в (Research Mode)</h2>
      <label>р╕гр╕лр╕▒р╕кр╕Ьр╕╣р╣Йр╣Ар╕Вр╣Йр╕▓р╕гр╣Ир╕зр╕б</label>
      <input id="research-id" placeholder="P001" />

      <label>р╕Бр╕ер╕╕р╣Ир╕бр╕Чр╕Фр╕ер╕нр╕З</label>
      <input id="research-group" placeholder="A / B / C" />

      <label>р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕</label>
      <input id="research-note" placeholder="р╕гр╕░р╕Ър╕╕р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Хр╕┤р╕б" />

      <div class="form-btns">
        <button data-action="back-to-menu">р╕вр╣Йр╕нр╕Щр╕Бр╕ер╕▒р╕Ъ</button>
        <button data-action="research-begin-play" class="btn-main">тЦ╢ р╣Ар╕гр╕┤р╣Ир╕бр╣Ар╕ер╣Ир╕Щ</button>
      </div>
    </section>

    <!-- ========== PLAY VIEW ========== -->
    <section id="view-play" class="hidden">
      <div class="hud">
        <div class="stat-left">
          <div>PLAYER <div id="player-fill" class="bar green"></div></div>
          <div>BOSS <div id="boss-fill" class="bar red"></div></div>
        </div>

        <div class="stat-right">
          <div>TIME <span id="stat-time">00:00</span></div>
          <div>SCORE <span id="stat-score">0</span></div>
          <div>COMBO <span id="stat-combo">0</span></div>
          <div>PHASE <span id="stat-phase">1</span></div>
        </div>
      </div>

      <!-- Boss portrait -->
      <div class="boss-portrait" id="boss-portrait">
        <div id="boss-portrait-emoji" class="emoji">ЁЯРг</div>
        <div id="boss-portrait-name" class="name">Bubble Glove</div>
        <div id="boss-portrait-hint" class="hint">р╣Вр╕Яр╕Бр╕▒р╕кр╕Чр╕╡р╣Ир╣Ар╕Ыр╣Йр╕▓р╕Яр╕нр╕Зр╣Бр╕ер╣Йр╕зр╕Хр╕╡р╣Гр╕лр╣Йр╕Чр╕▒р╕Щ</div>
      </div>

      <!-- Target Layer -->
      <div id="target-layer" class="target-layer"></div>

      <!-- FEVER BAR -->
      <div class="fever-hud">
        <div class="label">FEVER</div>
        <div id="fever-fill" class="bar fever"></div>
        <div id="fever-status" class="status">Ready</div>
      </div>

      <!-- Feedback -->
      <div id="sb-feedback" class="sb-feedback">р╕Хр╕╡р╣Ар╕Ыр╣Йр╕▓р╣Гр╕лр╣Йр╕Чр╕▒р╕Щр╕Бр╣Ир╕нр╕Щр╕лр╕▓р╕вр╣Др╕Ы р╣Бр╕ер╣Йр╕зр╕Фр╕╣р╕зр╣Ир╕▓р╕Др╕нр╕бр╣Вр╕Ър╕Ир╕░р╕вр╕▓р╕зр╣Бр╕Др╣Ир╣Др╕лр╕Щ!</div>

      <div class="play-controls">
        <button data-action="stop-early">тП╣ р╕лр╕вр╕╕р╕Фр╕Бр╣Ир╕нр╕Щр╣Ар╕зр╕ер╕▓</button>
      </div>
    </section>

    <!-- ========== RESULT VIEW ========== -->
    <section id="view-result" class="hidden">
      <h2>ЁЯУК р╕кр╕гр╕╕р╕Ыр╕Ьр╕ер╕Бр╕▓р╕гр╣Ар╕ер╣Ир╕Щ</h2>
      <table class="result-table">
        <tr><td>р╣Вр╕лр╕бр╕Ф</td><td id="res-mode">-</td></tr>
        <tr><td>р╕гр╕░р╕Фр╕▒р╕Ър╕Др╕зр╕▓р╕бр╕вр╕▓р╕Б</td><td id="res-diff">-</td></tr>
        <tr><td>р╣Ар╕лр╕Хр╕╕р╕Ьр╕ер╕Ир╕Ър╣Ар╕Бр╕б</td><td id="res-endreason">-</td></tr>
        <tr><td>р╕Др╕░р╣Бр╕Щр╕Щр╕гр╕зр╕б</td><td id="res-score">0</td></tr>
        <tr><td>р╕Др╕нр╕бр╣Вр╕Ър╕кр╕╣р╕Зр╕кр╕╕р╕Ф</td><td id="res-maxcombo">0</td></tr>
        <tr><td>р╕Ир╕│р╕Щр╕зр╕Щр╕Юр╕ер╕▓р╕Ф</td><td id="res-miss">0</td></tr>
        <tr><td>р╕Др╕зр╕▓р╕бр╣Бр╕бр╣Ир╕Щр╕вр╕│</td><td id="res-accuracy">0%</td></tr>
        <tr><td>р╕Ир╕│р╕Щр╕зр╕Щр╣Ар╕Ыр╣Йр╕▓р╕Цр╕╣р╕Бр╕Хр╕╡</td><td id="res-totalhits">0</td></tr>
        <tr><td>Reaction Time (р╣Ар╕Ыр╣Йр╕▓р╕Ыр╕Бр╕Хр╕┤)</td><td id="res-rt-normal">-</td></tr>
        <tr><td>Reaction Time (р╣Ар╕Ыр╣Йр╕▓р╕лр╕ер╕нр╕Б)</td><td id="res-rt-decoy">-</td></tr>
        <tr><td>р╕Др╕░р╣Бр╕Щр╕Щр╣Ар╕Бр╕гр╕Ф</td><td id="res-grade">-</td></tr>

        <!-- ЁЯФ╣ р╕Кр╣Ир╕нр╕Зр╣Гр╕лр╕бр╣И -->
        <tr><td>тП▒ р╣Ар╕зр╕ер╕▓р╣Гр╕Щр╣Вр╕лр╕бр╕Ф FEVER р╕гр╕зр╕б</td><td id="res-fever-time">0.0 s</td></tr>
        <tr><td>ЁЯТе р╕Ир╕│р╕Щр╕зр╕Щр╕Ър╕нр╕кр╕Чр╕╡р╣Ир╕Ьр╣Ир╕▓р╕Щ</td><td id="res-bosses">0</td></tr>
        <tr><td>тЭдя╕ПтАНЁЯФе р╣Ар╕зр╕ер╕▓ HP р╕Хр╣Ир╕│р╕гр╕зр╕б</td><td id="res-lowhp-time">0.0 s</td></tr>
        <tr><td>тЪЩя╕П р╣Ар╕зр╕ер╕▓р╣Ар╕бр╕Щр╕╣ тЖТ р╣Ар╕ер╣Ир╕Щр╕Ир╕гр╕┤р╕З</td><td id="res-menu-latency">-</td></tr>
      </table>

      <h3>р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ьр╕╣р╣Йр╣Ар╕Вр╣Йр╕▓р╕гр╣Ир╕зр╕б</h3>
      <p>р╕гр╕лр╕▒р╕к: <span id="res-participant">-</span></p>

      <div class="result-btns">
        <button data-action="play-again">ЁЯФБ р╣Ар╕ер╣Ир╕Щр╕нр╕╡р╕Бр╕Др╕гр╕▒р╣Йр╕З</button>
        <button data-action="back-to-menu">ЁЯПа р╕Бр╕ер╕▒р╕Ър╣Ар╕бр╕Щр╕╣</button>
      </div>

      <div class="csv-btns">
        <button data-action="download-csv-events">ЁЯУД р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Ф Event CSV</button>
        <button data-action="download-csv-session">ЁЯУК р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Ф Session CSV</button>
      </div>
    </section>

    <!-- ========== BOSS INTRO ========== -->
    <div id="boss-intro" class="boss-intro hidden">
      <div id="boss-intro-emoji" class="emoji">ЁЯРг</div>
      <div id="boss-intro-name" class="name">Bubble Glove</div>
      <div id="boss-intro-title" class="title">р╕Ър╕нр╕кр╕бр╕╖р╕нр╣Гр╕лр╕бр╣Ир╕кр╕▓р╕вр╕Яр╕нр╕З</div>
      <div id="boss-intro-desc" class="desc">р╕Хр╕╡р╣Ар╕Ыр╣Йр╕▓р╣Гр╕лр╣Йр╣Бр╕Хр╕Бр╕Бр╣Ир╕нр╕Щр╕лр╕▓р╕вр╣Др╕Ы!</div>
      <p class="tap-hint">р╣Бр╕Хр╕░р╕лр╕гр╕╖р╕нр╕Др╕ер╕┤р╕Бр╣Ар╕Юр╕╖р╣Ир╕нр╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Ир╕нр╕кр╕╣р╣Й!</p>
    </div>

  </div> <!-- /sb-wrap -->

  <!-- ===== Scripts ===== -->
  <script type="module" src="../js/shadow-breaker.js"></script>
  <script type="module" src="../js/engine.js"></script>
  <script type="module" src="../js/dom-renderer.js"></script>
  <script type="module" src="../js/event-logger.js"></script>
  <script type="module" src="../js/session-logger.js"></script>
  <script type="module" src="../js/particle.js"></script>

  <!-- SFX -->
  <audio id="sfx-hit" src="../assets/hit.mp3" preload="auto"></audio>
  <audio id="sfx-boss" src="../assets/boss-intro.mp3" preload="auto"></audio>
  <audio id="sfx-fever" src="../assets/fever.mp3" preload="auto"></audio>

</body>
</html>
