<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>‚ö° Shadow Breaker ‚Äî VR Fitness Academy ‚ö°</title>
  <link rel="icon" href="./favicon.ico"/>
  <link rel="stylesheet" href="./css/shadow-breaker.css"/>

  <style>
    /* === Transition Animations === */
    .fade-in { animation: fadeIn 0.8s ease forwards; }
    .fade-out { animation: fadeOut 0.5s ease forwards; }
    .slide-up { animation: slideUp 0.7s ease-out forwards; }

    @keyframes fadeIn { from {opacity:0;} to {opacity:1;} }
    @keyframes fadeOut { from {opacity:1;} to {opacity:0;} }
    @keyframes slideUp { from {opacity:0; transform:translateY(30px);} to {opacity:1; transform:translateY(0);} }

    /* === Target Glow === */
    .target {
      transition: transform 0.2s ease, opacity 0.2s ease;
      box-shadow: 0 0 12px rgba(168,85,247,0.65);
      border-radius: 50%;
      background: radial-gradient(circle, #fff 20%, #c084fc 80%);
      opacity: 0;
      transform: scale(0.85);
    }
    .target.spawn { opacity: 1; transform: scale(1.15); }
    .target.hit { animation: popHit 0.3s ease; }
    @keyframes popHit {
      0% {transform:scale(1); opacity:1;}
      50% {transform:scale(1.4); opacity:0.8;}
      100% {transform:scale(0); opacity:0;}
    }

    /* === Fever bar === */
    .bar.fever {
      position: relative;
      overflow: hidden;
      background: linear-gradient(90deg,#fde047,#fbbf24);
      animation: pulseFever 1.8s infinite ease-in-out;
    }
    @keyframes pulseFever {
      0%,100% {box-shadow:0 0 10px rgba(255,200,0,0.4);}
      50% {box-shadow:0 0 24px rgba(255,255,120,0.7);}
    }

    /* === Boss portrait === */
    .boss-portrait {
      transition: transform 0.5s;
    }
    .boss-portrait.bounce {
      animation: bouncePortrait 0.8s ease;
    }
    @keyframes bouncePortrait {
      0%,100% {transform:translateY(0);}
      50% {transform:translateY(-8px);}
    }

    /* === HUD Glow === */
    .hud {
      background: rgba(17,24,39,0.55);
      border-radius: 12px;
      box-shadow: 0 0 12px rgba(147,197,253,0.15);
      padding: 10px 12px;
      margin-bottom: 10px;
    }
  </style>
</head>

<body>
  <div class="sb-wrap fade-in" id="sb-wrap">
    <!-- MENU -->
    <section id="view-menu" class="fade-in">
      <h1 class="title">‚ö° Shadow Breaker ‚ö°</h1>
      <label>‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å</label>
      <select id="difficulty">
        <option value="easy">Easy ‚Äî ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</option>
        <option value="normal" selected>Normal ‚Äî ‡∏õ‡∏Å‡∏ï‡∏¥</option>
        <option value="hard">Hard ‚Äî ‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢</option>
      </select>

      <label>‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏•‡πà‡∏ô‡∏ï‡πà‡∏≠‡∏£‡∏≠‡∏ö</label>
      <select id="duration">
        <option value="45">45 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</option>
        <option value="60" selected>60 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</option>
        <option value="75">75 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</option>
      </select>

      <button data-action="start-normal" class="btn-main">‚ö†Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏•‡∏¢</button>
      <hr/>
      <button data-action="start-research" class="btn-sub">üìã ‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏ß‡∏¥‡∏à‡∏±‡∏¢</button>
      <p class="hint">‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏õ‡πá‡∏ô CSV ‡πÑ‡∏î‡πâ</p>
    </section>

    <!-- PLAY -->
    <section id="view-play" class="hidden fade-in">
      <div class="hud">
        <div>PLAYER<div id="player-fill" class="bar green"></div></div>
        <div>BOSS<div id="boss-fill" class="bar red"></div></div>
      </div>
      <div class="stat-right">
        TIME <span id="stat-time">00:00</span> | SCORE <span id="stat-score">0</span> | COMBO <span id="stat-combo">0</span>
      </div>

      <div class="boss-portrait" id="boss-portrait">
        <div id="boss-portrait-emoji" class="emoji">ü•ä</div>
        <div id="boss-portrait-name" class="name">Neon Knuckle</div>
        <div id="boss-portrait-hint" class="hint">‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏•‡∏π‡∏Å‡∏´‡∏•‡∏≠‡∏Å‡∏™‡∏µ‡∏Ñ‡∏•‡πâ‡∏≤‡∏¢!</div>
      </div>

      <div id="target-layer" class="target-layer"></div>

      <div class="fever-hud">
        <div class="label">FEVER</div>
        <div id="fever-fill" class="bar fever"></div>
        <div id="fever-status" class="status">Ready</div>
      </div>

      <div id="sb-feedback" class="sb-feedback">‡∏ï‡∏µ‡πÄ‡∏õ‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏ó‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏≤‡∏¢‡πÑ‡∏õ ‡πÅ‡∏•‡πâ‡∏ß‡∏î‡∏π‡∏ß‡πà‡∏≤‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö‡∏à‡∏∞‡∏¢‡∏≤‡∏ß‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô!</div>
      <div class="play-controls"><button data-action="stop-early">‚èπ ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏ß‡∏•‡∏≤</button></div>
    </section>

    <!-- RESULT -->
    <section id="view-result" class="hidden fade-in">
      <h2>üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô</h2>
      <table class="result-table">
        <tr><td>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°</td><td id="res-score">0</td></tr>
        <tr><td>‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î</td><td id="res-maxcombo">0</td></tr>
        <tr><td>‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥</td><td id="res-accuracy">0%</td></tr>
        <tr><td>‚è± FEVER TIME</td><td id="res-fever-time">0.0 s</td></tr>
        <tr><td>üí• ‡∏ö‡∏≠‡∏™‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô</td><td id="res-bosses">0</td></tr>
      </table>
      <div class="result-btns">
        <button data-action="play-again">üîÅ ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
        <button data-action="back-to-menu">üè† ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π</button>
      </div>
    </section>
  </div>

  <!-- Scripts -->
  <script type="module" src="./js/shadow-breaker.js"></script>
  <script type="module" src="./js/engine.js"></script>
  <script type="module" src="./js/dom-renderer.js"></script>
  <script type="module" src="./js/event-logger.js"></script>
  <script type="module" src="./js/session-logger.js"></script>
  <script type="module" src="./js/particle.js"></script>
</body>
</html>
