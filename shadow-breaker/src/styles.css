
:root{--cyan:#39d3e6; --bg:#0b0f14; --panel:#121a22; --text:#e8eef6;}
html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:system-ui,Arial,sans-serif}
.center-card{min-height:100vh;display:grid;place-items:center}
.card{background:var(--panel);border:1px solid #1f2a33;border-radius:16px;padding:20px;width:min(92vw,760px);box-shadow:0 10px 30px rgba(0,0,0,.5)}
h1{margin:0 0 6px} h2{margin:0 0 14px;opacity:.9;font-size:16px}
.row{display:flex;gap:10px;flex-wrap:wrap}
.btn{flex:1 1 220px;background:var(--cyan);color:#001018;border:0;border-radius:12px;padding:14px 16px;cursor:pointer;font-weight:700;text-align:center;text-decoration:none}
.btn.secondary{background:#2a3540;color:#d8e6f0}

.hud{position:fixed;left:0;right:0;top:0;padding:8px 12px;display:flex;gap:8px;pointer-events:none;z-index:9999}
.hud .interactive{pointer-events:auto}
.hud.bottom{top:auto;bottom:0;justify-content:space-between}
.badge{background:rgba(0,0,0,.45);padding:6px 10px;border-radius:10px}
.toast{position:fixed;left:50%;transform:translateX(-50%);bottom:16px;background:rgba(0,0,0,.8);padding:10px 14px;border-radius:999px;display:none;z-index:10000}
#objective{position:fixed;left:50%;transform:translateX(-50%);top:56px;background:rgba(0,0,0,.55);padding:8px 12px;border-radius:12px;border:1px solid #23303a;color:#dff8ff;z-index:10001}

/* Overload OL-3 : BAR-C (Quantum Blue crack) */
#overloadBarWrap{
  position:fixed;left:50%;bottom:24px;transform:translateX(-50%);
  width:min(680px,92vw); height:18px; border-radius:14px; overflow:hidden;
  background:linear-gradient(180deg, rgba(10,16,22,.9), rgba(7,11,16,.9));
  box-shadow:0 0 18px rgba(57,211,230,.25), inset 0 0 10px rgba(57,211,230,.12);
  z-index:10002; border:1px solid rgba(57,211,230,.25);
}
#overloadBarFill{
  position:absolute; left:0; top:0; bottom:0; width:0%;
  background:linear-gradient(90deg, rgba(33,133,199,.85), rgba(57,211,230,.95));
  box-shadow:0 0 20px rgba(57,211,230,.7);
  transition:width .15s ease;
}
#overloadBarGlow{
  content:""; position:absolute; inset:-6px; pointer-events:none;
  background:radial-gradient(60% 120% at 50% 100%, rgba(57,211,230,.25), rgba(0,0,0,0) 60%);
  filter:blur(6px); opacity:.6;
}
#overloadBarCrack{
  position:absolute; inset:0; pointer-events:none; opacity:.4;
  background:
    repeating-linear-gradient( -10deg, rgba(170,240,255,.06) 0 2px, transparent 2px 9px),
    repeating-linear-gradient(  12deg, rgba(170,240,255,.09) 0 1px, transparent 1px 8px);
  mix-blend-mode:screen;
}
#overloadBarText{
  position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
  font-weight:800; font-size:12px; letter-spacing:.6px; color:#cfefff; text-shadow:0 0 8px rgba(57,211,230,.8);
  pointer-events:none;
}
#overloadBarWrap.danger{ box-shadow:0 0 22px rgba(57,211,230,.45), inset 0 0 14px rgba(57,211,230,.25); }
#overloadBarWrap.critical{ box-shadow:0 0 28px rgba(57,211,230,.65), inset 0 0 16px rgba(57,211,230,.35); }
#overloadBarWrap.z2{ box-shadow:0 0 36px rgba(57,211,230,.9), inset 0 0 20px rgba(57,211,230,.45); }

/* Pop score (from earlier patch) */
.hit-popup{position:absolute;pointer-events:none;font-weight:800}
.pop-score{color:#7fffd4;text-shadow:0 1px 8px rgba(0,255,255,.6);opacity:0;transform:translate(-50%,-50%) scale(.9);transition:all .45s ease}
.pop-score.show{opacity:1; transform:translate(-50%,-90%) scale(1.1)}

/* === Overload FX Part 2 (Anime Aura / Quantum Blue) === */
#overlayFX{position:fixed;inset:0;pointer-events:none;z-index:10003;opacity:0;transition:opacity .18s ease}
#overlayFX .fx-vignette{position:absolute;inset:0;background:
  radial-gradient(60% 70% at 50% 50%, rgba(0,0,0,0) 40%, rgba(0,0,0,.45) 85%);mix-blend-mode:multiply;}
#overlayFX .fx-veil{position:absolute;inset:-4px;background:
  radial-gradient(50% 120% at 50% 110%, rgba(57,211,230,.12), rgba(0,0,0,0) 60%),
  repeating-linear-gradient( 12deg, rgba(150,230,255,.06) 0 2px, rgba(0,0,0,0) 2px 9px);
  filter:blur(2px);opacity:.0;transition:opacity .2s ease;mix-blend-mode:screen;}
#overlayFX .fx-sparks{position:absolute;inset:0;background:
  radial-gradient(2px 2px at 20% 80%, rgba(160,240,255,.9), rgba(0,0,0,0)),
  radial-gradient(2px 2px at 70% 20%, rgba(160,240,255,.8), rgba(0,0,0,0)),
  radial-gradient(1.5px 1.5px at 40% 60%, rgba(160,240,255,.7), rgba(0,0,0,0)),
  radial-gradient(1.5px 1.5px at 85% 50%, rgba(160,240,255,.75), rgba(0,0,0,0));
  opacity:0; transition:opacity .25s ease; mix-blend-mode:screen; animation:twinkle 2.6s linear infinite;}
@keyframes twinkle{0%,100%{transform:translateY(0)}50%{transform:translateY(-1px)}}

/* Stage classes */
#overlayFX.stage-mild{opacity:.25}
#overlayFX.stage-mild .fx-veil{opacity:.2}
#overlayFX.stage-danger{opacity:.35}
#overlayFX.stage-danger .fx-veil{opacity:.35}
#overlayFX.stage-danger .fx-sparks{opacity:.4}
#overlayFX.stage-critical{opacity:.5}
#overlayFX.stage-critical .fx-veil{opacity:.55}
#overlayFX.stage-critical .fx-sparks{opacity:.7}
#overlayFX.stage-z2{opacity:.7}
#overlayFX.stage-z2 .fx-veil{opacity:.75}
#overlayFX.stage-z2 .fx-sparks{opacity:1}

/* Camera shake helper (applied to canvas wrapper) */
.shake-slight{animation:shakeSlight .18s linear infinite}
.shake-strong{animation:shakeStrong .12s linear infinite}
@keyframes shakeSlight{0%{transform:translate(0,0)}25%{transform:translate(1px,0)}50%{transform:translate(0,1px)}75%{transform:translate(-1px,0)}100%{transform:translate(0,0)}}
@keyframes shakeStrong{0%{transform:translate(0,0)}25%{transform:translate(2px,0)}50%{transform:translate(0,2px)}75%{transform:translate(-2px,0)}100%{transform:translate(0,0)}}

/* === Overload FX Part 3: Heat haze + distortion === */
#heatHaze{position:fixed;inset:0;pointer-events:none;z-index:10004;
  background:
    radial-gradient(30% 50% at 50% 110%, rgba(57,211,230,.10), rgba(0,0,0,0) 60%),
    repeating-conic-gradient(from 0deg at 50% 50%, rgba(160,240,255,.06) 0 6deg, rgba(0,0,0,0) 6deg 12deg);
  mix-blend-mode:screen; opacity:0; animation:shimmer 6s linear infinite;}
@keyframes shimmer{0%{filter:hue-rotate(0deg) blur(0.2px)}50%{filter:hue-rotate(6deg) blur(0.5px)}100%{filter:hue-rotate(0deg) blur(0.2px)}}
#heatHaze.stage-on{opacity:.18}
#heatHaze.stage-strong{opacity:.32}

canvas.distort1{filter:contrast(1.06) saturate(1.08) brightness(1.02) blur(0.3px)}
canvas.distort2{filter:contrast(1.12) saturate(1.12) brightness(1.04) blur(0.6px) hue-rotate(5deg)}
