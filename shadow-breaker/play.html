<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Play – Shadow Breaker</title>

  <!-- ===== Styles ===== -->
  <link rel="stylesheet" href="src/styles.css"/>

  <!-- ===== A-Frame ===== -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

  <!-- ===== FIX: โหลด components.js ให้ติดแน่นอน + กัน path พัง ===== -->
  <script>
  (function(){
    const paths = [
      "src/components.js?v=5",
      "./src/components.js?v=5",
      "../src/components.js?v=5",
      "/src/components.js?v=5"
    ];
    function reattachComponent(){
      const scene = document.querySelector("a-scene");
      if (!scene) return setTimeout(reattachComponent, 100);
      scene.removeAttribute("shadow-breaker-game");
      setTimeout(()=>scene.setAttribute("shadow-breaker-game",""), 0);
    }
    function load(i){
      if(i>=paths.length){
        alert("ERROR: ไม่พบ components.js – ตรวจสอบโฟลเดอร์ src");
        return;
      }
      const s = document.createElement("script");
      s.src = paths[i];
      s.async = false;
      s.onload = () => {
        console.log("[OK] Loaded:", paths[i]);
        reattachComponent();
      };
      s.onerror = () => load(i+1);
      document.head.appendChild(s);
    }
    load(0);
  })();
  </script>
</head>
<body>
