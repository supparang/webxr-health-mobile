<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
  <title>Hero Health - Safe Mode</title>
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>

  <style>
    /* ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô */
    body { margin: 0; overflow: hidden; background: #87CEEB; font-family: sans-serif; user-select: none; }
    
    /* UI Layer */
    #ui-layer {
      position: absolute; top: 0; left: 0; width: 100%; height: 100%;
      z-index: 100; pointer-events: none;
      display: flex; flex-direction: column; justify-content: space-between;
    }
    .pointer-auto { pointer-events: auto; }

    /* HUD ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô */
    .hud-top { padding: 15px; display: flex; justify-content: space-between; align-items: flex-start; }
    
    .card {
      background: rgba(0, 0, 0, 0.6); padding: 10px; border-radius: 10px;
      color: white; border: 1px solid rgba(255,255,255,0.3);
    }
    .val-big { font-size: 24px; font-weight: bold; color: #22c55e; }

    /* üî• Quest Box (‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ç‡∏≠) */
    .quest-box {
      background: rgba(0, 0, 0, 0.7);
      border-left: 5px solid #38bdf8;
      padding: 8px 15px; border-radius: 5px; margin-top: 5px;
      color: white;
    }

    /* üî• ‡πÄ‡∏õ‡πâ‡∏≤‡πÄ‡∏•‡πá‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠ (CSS) - ‡∏™‡∏µ‡πÅ‡∏î‡∏á ‡πÄ‡∏´‡πá‡∏ô‡∏ä‡∏±‡∏î 100% */
    #crosshair {
      position: absolute; top: 50%; left: 50%; 
      transform: translate(-50%, -50%);
      width: 40px; height: 40px; z-index: 999;
    }
    /* ‡πÄ‡∏™‡πâ‡∏ô‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á */
    #crosshair::before { content: ''; position: absolute; left: 50%; top: 0; height: 100%; width: 4px; background: red; transform: translateX(-50%); border: 1px solid white; }
    /* ‡πÄ‡∏™‡πâ‡∏ô‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô */
    #crosshair::after { content: ''; position: absolute; top: 50%; left: 0; width: 100%; height: 4px; background: red; transform: translateY(-50%); border: 1px solid white; }

    /* ‡∏à‡∏ö‡πÄ‡∏Å‡∏° */
    #game-over {
      display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9);
      z-index: 200; align-items: center; justify-content: center; flex-direction: column;
    }
  </style>
</head>
<body>

  <div id="ui-layer">
    <div class="hud-top">
      <div>
        <div class="card pointer-auto">
          <div style="font-size:10px; opacity:0.8;">SCORE</div>
          <div class="val-big" id="ui-score">0</div>
        </div>
        <div class="quest-box pointer-auto">
          <div style="font-size:12px; color:#38bdf8; font-weight:bold;">CURRENT OBJECTIVE</div>
          <div style="font-size:14px; font-weight:bold;">Collect Water üíß</div>
          <div style="font-size:10px; opacity:0.7;">Fill the bar to 100%</div>
        </div>
      </div>

      <div class="card pointer-auto" style="text-align:right;">
        <div style="font-size:10px; opacity:0.8;">HYDRATION</div>
        <div class="val-big" id="ui-water">50%</div>
      </div>
    </div>
    
    <div id="crosshair"></div>

    <div style="padding:20px; text-align:center;">
      <div class="card pointer-auto" style="display:inline-block; border-radius:30px; padding:10px 25px;">
        Tap screen to shoot!
      </div>
    </div>
  </div>

  <div id="game-over">
    <h1 style="color:white; font-size:40px;">GAME OVER</h1>
    <button style="padding:15px 30px; font-size:20px; margin-top:20px;" onclick="location.reload()">RESTART</button>
  </div>

  <a-scene background="color: #87CEEB">
    
    <a-entity light="type: ambient; color: #BBB"></a-entity>
    <a-entity light="type: directional; color: #FFF; intensity: 0.6; position: -0.5 1 1"></a-entity>

    <a-plane position="0 0 0" rotation="-90 0 0" width="100" height="100" color="#7BC8A4"></a-plane>
    <a-sky color="#87CEEB"></a-sky>

    <a-entity id="rig" position="0 0 0">
      <a-camera id="camera" position="0 1.6 0" look-controls="enabled: true">
        <a-entity cursor="fuse: false" position="0 0 -1" geometry="primitive: ring; radiusInner: 0.001; radiusOuter: 0.002" material="opacity:0" raycaster="objects: .clickable; far: 50"></a-entity>
      </a-camera>
    </a-entity>
    
    <a-entity id="playfield"></a-entity>
  </a-scene>

  <script>
    let score = 0;
    let water = 50;
    let playing = true;

    function spawnEmoji() {
      if(!playing) return;
      
      const ent = document.createElement('a-entity');
      
      // ‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á (‡∏£‡∏∞‡∏¢‡∏∞ 4 ‡πÄ‡∏°‡∏ï‡∏£)
      const angle = Math.random() * Math.PI * 2;
      const x = Math.sin(angle) * 4;
      const z = Math.cos(angle) * 4;
      const y = 1.5 + (Math.random() * 2); // ‡∏™‡∏π‡∏á 1.5 - 3.5 ‡πÄ‡∏°‡∏ï‡∏£

      ent.setAttribute('position', {x, y, z});
      
      // ‚ö†Ô∏è ‡πÉ‡∏ä‡πâ a-text ‡πÅ‡∏ö‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î Font ‡∏ô‡∏≠‡∏Å
      // ‚ö†Ô∏è ‡∏ï‡∏±‡πâ‡∏á Scale ‡πÄ‡∏õ‡πá‡∏ô 5 5 5 ‡πÄ‡∏•‡∏¢ (‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å 0) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡∏•‡πà‡∏≠‡∏á‡∏´‡∏ô
      ent.setAttribute('text', { value: 'üíß', align: 'center', width: 20, color: '#0000FF' });
      ent.setAttribute('scale', '5 5 5'); 
      
      // Hitbox ‡πÉ‡∏™‡πÜ ‡πÅ‡∏ú‡πà‡∏ô‡πÉ‡∏´‡∏ç‡πà‡πÜ
      ent.setAttribute('geometry', 'primitive: plane; width: 1.5; height: 1.5');
      ent.setAttribute('material', 'opacity: 0.0; transparent: true; color: red'); // ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô ‡πÉ‡∏´‡πâ‡πÅ‡∏Å‡πâ opacity: 0.5 ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡πÅ‡∏ú‡πà‡∏ô‡πÅ‡∏î‡∏á‡πÜ
      ent.setAttribute('class', 'clickable');
      
      ent.object3D.lookAt(0, 1.6, 0);

      // ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏¢‡∏¥‡∏á
      ent.addEventListener('click', () => {
        if(!playing) return;
        score += 100;
        water = Math.min(100, water + 10);
        
        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï UI
        document.getElementById('ui-score').innerText = score;
        document.getElementById('ui-water').innerText = Math.floor(water) + "%";

        // ‡∏•‡∏ö‡πÄ‡∏•‡∏¢‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ Animation ‡∏ï‡∏≤‡∏¢ ‡∏Å‡∏±‡∏ô‡∏Ñ‡πâ‡∏≤‡∏á)
        if(ent.parentNode) ent.parentNode.removeChild(ent);
      });

      // ‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡πÄ‡∏≠‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏ß‡∏•‡∏≤‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏õ
      setTimeout(() => {
        if(ent.parentNode) ent.parentNode.removeChild(ent);
      }, 3000);

      document.getElementById('playfield').appendChild(ent);
    }

    // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°
    window.addEventListener('load', () => {
      setInterval(spawnEmoji, 1000); // ‡∏°‡∏≤‡∏ó‡∏∏‡∏Å 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ

      // ‡∏ô‡πâ‡∏≥‡∏•‡∏î‡∏•‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ
      setInterval(() => {
        if(playing) {
          water -= 1;
          document.getElementById('ui-water').innerText = Math.floor(water) + "%";
          if(water <= 0) {
            playing = false;
            document.getElementById('game-over').style.display = 'flex';
          }
        }
      }, 1000);
    });
  </script>
</body>
</html>
