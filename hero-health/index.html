<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
  <title>HERO HEALTH ACADEMY</title>
  <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@600;700&family=Prompt:wght@400;600;700&display=swap" rel="stylesheet"/>
  <link rel="icon" href="./assets/logo.png?v=2"/>
  <link rel="alternate icon" type="image/svg+xml" href="./assets/logo.svg?v=2"/>
  <style>
    :root{--bg:#061018;--cy:#0ff;--cy2:rgba(0,255,255,.12);--fontTH:'Prompt',system-ui;--fontEN:'Exo 2',system-ui}
    html,body{margin:0;height:100%;overflow:hidden;background:#000}
    body::before{content:"";position:fixed;inset:0;background:url('./assets/background.jpg') center/cover no-repeat fixed;filter:saturate(1.1) brightness(1.05);z-index:0;pointer-events:none}
    canvas#c{position:fixed;inset:0;display:block;background:transparent;z-index:1;pointer-events:none}
    .brand{position:fixed;left:12px;top:10px;z-index:5;display:flex;gap:8px;align-items:center;color:#aee;font-family:var(--fontEN);text-shadow:0 0 10px rgba(0,255,255,.55)}
    .hud,#menuBar,#errors,#help,#result,#coachHUD{position:fixed;z-index:4;color:#0ff;font-family:var(--fontEN);text-shadow:0 0 8px rgba(0,255,255,.6)}
    .hud{left:50%;transform:translateX(-50%);top:10px;text-align:center}
    #menuBar{bottom:12px;left:50%;transform:translateX(-50%);text-align:center;max-width:min(96vw,1180px)}
    .row{display:flex;flex-wrap:wrap;gap:10px;justify-content:center}
    .btn,.tag{display:inline-block;padding:10px 14px;border:1px solid var(--cy);border-radius:12px;background:rgba(0,0,0,.35);color:#0ff;cursor:pointer;user-select:none}
    .btn:hover,.tag:hover{background:var(--cy2)}
    #errors{top:8px;right:8px;max-width:48ch;background:rgba(30,0,0,.85);padding:6px 10px;border:1px solid #f66;border-radius:8px;color:#ffb;display:none}
    #menuBar,#menuBar *{pointer-events:auto!important}
    canvas#c{pointer-events:none}
    #menuBar{z-index:20}
    .hud{z-index:19}
    #targetWrap,#plateTracker,#hydroWrap{display:none}
    .pills{display:flex;gap:6px;justify-content:center;flex-wrap:wrap}
    .pill{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border:1px solid var(--cy);border-radius:12px;background:rgba(0,0,0,.35)}
    .pill.done{border-color:#2ecc71;background:rgba(46,204,113,.22);color:#dbfff1;box-shadow:0 0 12px rgba(46,204,113,.25) inset}
  </style>
</head>
<body>
  <div class="brand">
    <img src="./assets/logo.png?v=2" alt="HERO HEALTH ACADEMY"
      onerror="this.onerror=null; this.src='./assets/logo.svg?v=2';"
      style="height:42px;filter:drop-shadow(0 0 10px rgba(0,255,255,.35))"/>
    <div>HERO HEALTH ACADEMY</div>
  </div>

  <!-- Settings -->
  <div id="settingsBar" style="position:fixed;right:10px;top:10px;z-index:6;display:flex;gap:8px;align-items:center">
    <button id="langToggle" class="btn" type="button">üáπüá≠/üá¨üáß</button>
    <button id="soundToggle" class="btn" type="button">üîä</button>
    <select id="gfxSelect" class="btn" style="padding:8px 10px">
      <option value="High">Graphics: High</option>
      <option value="Medium">Graphics: Medium</option>
      <option value="Low">Graphics: Low</option>
    </select>
  </div>

  <!-- 3D -->
  <canvas id="c"></canvas>

  <!-- HUD -->
  <div class="hud">
    <div>
      <span class="lbl-score">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</span>: <span id="score">0</span> |
      <span class="lbl-combo">‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö</span>: <span id="combo">x1</span> |
      <span class="lbl-time">‡πÄ‡∏ß‡∏•‡∏≤</span>: <span id="time">60</span>s |
      <span class="lbl-best">‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</span>: <span id="best">0</span>
      <span id="fever" style="display:none;margin-left:8px;border:1px solid #ff3;border-radius:999px;padding:2px 10px;color:#ff3;text-shadow:0 0 10px rgba(255,240,0,.85)">FEVER!</span>
    </div>

    <div id="targetWrap">üéØ <span class="lbl-target">‡∏´‡∏°‡∏ß‡∏î‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</span>: <span id="targetBadge" style="border:1px solid #0ff;border-radius:10px;padding:2px 8px;background:rgba(0,0,0,.35)">‚Äî</span></div>
    <div id="plateTracker">üç± <span class="lbl-quota">‡πÇ‡∏Ñ‡∏ß‡∏ï‡∏≤</span>: <div class="pills" id="platePills"></div></div>

    <div id="hydroWrap" style="margin-top:6px">
      üíß <span class="lbl-hydro">‡∏™‡∏°‡∏î‡∏∏‡∏•‡∏ô‡πâ‡∏≥</span>:
      <span id="hydroLabel" style="margin-left:6px">‚Äî</span>
      <div style="height:10px;border:1px solid #0ff;border-radius:999px;background:rgba(0,0,0,.35);width:min(60vw,520px);margin:6px auto;position:relative;overflow:hidden">
        <div id="hydroBar" style="height:100%;width:50%;background:linear-gradient(90deg,#09f,#0ff);opacity:.95"></div>
        <div id="hydroOpt" style="position:absolute;top:0;bottom:0;left:45%;right:35%;border-left:1px dashed #ff0;border-right:1px dashed #ff0;opacity:.8"></div>
      </div>
    </div>
  </div>

  <!-- Menu -->
  <div id="menuBar">
    <div class="row">
      <button class="tag" data-action="mode" data-value="goodjunk" type="button">ü•ó ‡∏î‡∏µ vs ‡∏Ç‡∏¢‡∏∞</button>
      <button class="tag" data-action="mode" data-value="groups" type="button">üçΩÔ∏è ‡∏à‡∏≤‡∏ô 5 ‡∏´‡∏°‡∏π‡πà</button>
      <button class="tag" data-action="mode" data-value="hydration" type="button">üíß ‡∏™‡∏°‡∏î‡∏∏‡∏•‡∏ô‡πâ‡∏≥</button>
      <button class="tag" data-action="mode" data-value="plate" type="button">üç± ‡∏à‡∏±‡∏î‡∏à‡∏≤‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</button>
    </div>
    <div class="row" style="margin:8px 0">
      <button class="tag" data-action="diff" data-value="Easy" type="button">‡∏á‡πà‡∏≤‡∏¢</button>
      <button class="tag" data-action="diff" data-value="Normal" type="button">‡∏õ‡∏Å‡∏ï‡∏¥</button>
      <button class="tag" data-action="diff" data-value="Hard" type="button">‡∏¢‡∏≤‡∏Å</button>
      <span style="color:#6ff;margin-left:8px;font-family:var(--fontEN)">Mode: <span id="modeName">‡∏î‡∏µ vs ‡∏Ç‡∏¢‡∏∞</span> ‚Ä¢ Diff: <span id="difficulty">‡∏õ‡∏Å‡∏ï‡∏¥</span></span>
    </div>
    <div class="row">
      <button class="btn" data-action="start" type="button">‚ñ∂ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</button>
      <button class="btn" data-action="pause" type="button">‚è∏ ‡∏û‡∏±‡∏Å</button>
      <button class="btn" data-action="restart" type="button">‚Üª ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
      <button class="btn" data-action="help" type="button">‚ùì ‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏•‡πà‡∏ô</button>
    </div>
  </div>

  <!-- Help -->
  <div id="help" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.6);align-items:center;justify-content:center;z-index:11">
    <div style="background:rgba(8,12,20,.96);border:1px solid var(--cy);border-radius:16px;padding:18px 20px;color:#0ff;width:min(94vw,820px);max-height:86vh;overflow:auto">
      <h2 style="font-family:var(--fontTH);margin:0 0 8px">‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏•‡πà‡∏ô (How to Play)</h2>
      <div id="helpBody" style="font-family:var(--fontTH);line-height:1.55"></div>
      <div style="margin-top:12px;text-align:right"><button class="btn" data-action="helpClose" type="button">‡πÇ‡∏≠‡πÄ‡∏Ñ</button></div>
    </div>
  </div>

  <!-- Result -->
  <div id="result" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.7);z-index:12;align-items:center;justify-content:center">
    <div style="width:min(92vw,860px);max-height:86vh;overflow:auto;background:rgba(8,12,20,.96);border:1px solid #0ff;border-radius:16px;padding:18px 20px;color:#0ff;font-family:'Prompt',system-ui">
      <h2 id="resTitle" style="margin:0 0 8px">‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•</h2>
      <div id="resCore" style="margin:6px 0 10px"></div>
      <div id="resBreakdown" style="line-height:1.6"></div>
      <div id="resTips" style="margin-top:10px;color:#aff"></div>
      <div style="margin-top:12px;text-align:right;display:flex;gap:8px;justify-content:flex-end;flex-wrap:wrap">
        <button class="btn" data-result="replay" type="button">‚Üª ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
        <button class="btn" data-result="home" type="button">üè† ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
      </div>
    </div>
  </div>

  <!-- Coach bubble -->
  <div id="coachHUD" style="position:fixed;left:50%;top:70px;transform:translateX(-50%);z-index:6;display:none;pointer-events:none">
    <div id="coachText" style="font-family:var(--fontTH);font-weight:700;color:#cfe;letter-spacing:.3px;background:rgba(0,0,0,.35);border:1px solid #0ff;border-radius:12px;padding:6px 10px;text-shadow:0 0 10px rgba(0,255,255,.6)"></div>
  </div>

  <!-- Audio -->
  <audio id="sfx-ding" src="./assets/ding.wav"></audio>
  <audio id="sfx-thud" src="./assets/thud.wav"></audio>
  <audio id="sfx-tick" src="./assets/tick.wav"></audio>
  <audio id="sfx-hero" src="./assets/hero_in.wav"></audio>
  <audio id="sfx-fever" src="./assets/fever_in.wav"></audio>
  <audio id="sfx-perfect" src="./assets/perfect.wav"></audio>

  <!-- libs -->
  <script src="https://unpkg.com/three@0.159.0/build/three.min.js"></script>
  <script src="https://unpkg.com/three@0.159.0/examples/js/VRButton.js" defer></script>

  <!-- main -->
  <script type="module" src="./game/main.js"></script>
</body>
</html>