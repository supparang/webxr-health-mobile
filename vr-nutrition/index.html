<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VR Nutrition — Minimal Spawn Test</title>
<script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
<style>
  html,body{margin:0;height:100%;background:#000}
  a-scene,canvas.a-canvas{position:fixed;inset:0;z-index:0!important}
  /* ปิดคลิกฉากก่อนเริ่ม */
  a-scene,canvas.a-canvas{pointer-events:none!important}
  body.game-running a-scene, body.game-running canvas.a-canvas{pointer-events:auto!important}

  /* UI */
  #bar,#dbg{position:fixed;z-index:2147483647!important;font:14px system-ui;color:#0ff}
  #bar{left:50%;transform:translateX(-50%);bottom:16px;background:rgba(0,0,0,.35);border:1px solid #0ff;border-radius:12px;padding:8px 10px}
  button{cursor:pointer;background:rgba(0,0,0,.4);color:#0ff;border:1px solid #0ff;border-radius:10px;padding:8px 12px;margin:0 6px}
  button:hover{background:rgba(0,255,255,.12)}
  #dbg{left:10px;bottom:10px;background:rgba(0,0,0,.5);border:1px solid #0ff;border-radius:8px;padding:6px 8px;min-width:220px}
</style>
<script>
  // debug helper
  function dbg(msg){
    const d=document.getElementById('dbg'); if(d) d.textContent=msg;
  }
  // fallback ปุ่ม (ทำงานแม้ game.js ยังไม่โหลด)
  function startFallback(){
    document.body.classList.add('game-running');
    dbg('start clicked (fallback) — waiting engine…');
    if (window.GAME_UI && typeof GAME_UI.start==='function') GAME_UI.start();
  }
  function pauseFallback(){
    if (window.GAME_UI && typeof GAME_UI.pause==='function') GAME_UI.pause();
  }
  function restartFallback(){
    document.body.classList.add('game-running');
    dbg('restart (fallback)');
    if (window.GAME_UI && typeof GAME_UI.restart==='function') GAME_UI.restart();
  }
</script>
</head>
<body>
  <div id="bar">
    <button onclick="startFallback()">▶ เริ่มเกม</button>
    <button onclick="pauseFallback()">⏸ พัก</button>
    <button onclick="restartFallback()">↻ เริ่มใหม่</button>
  </div>
  <div id="dbg">ready</div>

  <a-scene id="scene" background="color:#02040a"
           renderer="colorManagement:true;antialias:false;highRefreshRate:true;physicallyCorrectLights:true">
    <a-entity id="player" camera look-controls
              cursor="rayOrigin:entity; fuse:true; fuseTimeout:750"
              raycaster="objects:.clickable; far: 12">
      <a-entity position="0 0 -1"
                geometry="primitive:ring; radiusInner:0.005; radiusOuter:0.008"
                material="color:#0ff; shader:flat; opacity:0.9"></a-entity>
    </a-entity>

    <a-entity id="spawnerRoot" position="0 1.6 -2.2"></a-entity>
  </a-scene>

  <script src="game.js"></script>
</body>
</html>
