<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
<title>EAT TO POWER ‚Äì ENGINE (E2 Modules)</title>
<link rel="icon" href="./assets/logo.png"/>
<style>
:root{--bg:#061018;--cy:#0ff;--cy2:rgba(0,255,255,.12)}
html,body{margin:0;height:100%;overflow:hidden;background:#000}
body::before{content:"";position:fixed;inset:0;background:url('./assets/background.jpg') center/cover no-repeat fixed;filter:saturate(1.1) brightness(1.05);z-index:0;pointer-events:none}
canvas#c{position:fixed;inset:0;display:block;background:transparent;z-index:1}
.brand{position:fixed;left:12px;top:10px;z-index:3;display:flex;gap:8px;align-items:center;color:#aee;font-family:Rajdhani,Exo 2,system-ui;text-shadow:0 0 10px rgba(0,255,255,.55)}
.brand img{height:42px;filter:drop-shadow(0 0 10px rgba(0,255,255,.35))}
.hud,#menuBar,#errors,#help{position:fixed;z-index:4;color:#0ff;font-family:Rajdhani,Exo 2,system-ui;text-shadow:0 0 8px rgba(0,255,255,.6)}
.hud{left:50%;transform:translateX(-50%);top:10px;text-align:center}
#menuBar{bottom:12px;left:50%;transform:translateX(-50%);text-align:center;max-width:min(96vw,1180px)}
.row{display:flex;flex-wrap:wrap;gap:10px;justify-content:center}
.btn,.tag{display:inline-block;padding:10px 14px;border:1px solid var(--cy);border-radius:12px;background:rgba(0,0,0,.35);color:var(--cy);cursor:pointer;user-select:none}
.btn:hover,.tag:hover{background:var(--cy2)}
#errors{top:8px;right:8px;max-width:48ch;background:rgba(30,0,0,.85);padding:6px 10px;border:1px solid #f66;border-radius:8px;color:#ffb;display:none}
/* click safety */
#menuBar,#menuBar *{pointer-events:auto!important} canvas#c{pointer-events:none}
#targetWrap{margin-top:6px;display:none}
#plateTracker{display:none;margin-top:6px}
.pills{display:flex;gap:6px;justify-content:center;flex-wrap:wrap}
.pill{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border:1px solid var(--cy);border-radius:12px;background:rgba(0,0,0,.35)}
.pill.done{border-color:#2ecc71;background:rgba(46,204,113,.22);color:#dbfff1;box-shadow:0 0 12px rgba(46,204,113,.25) inset}
</style>
</head>
<body>
<div class="brand"><img src="./assets/logo.png" alt="logo"/><div>EAT TO POWER ‚Äì HERO ACADEMY</div></div>
<canvas id="c"></canvas>
<div id="toast" style="display:none"></div>

<div class="hud">
  <div><span>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</span>: <span id="score">0</span> | <span>‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö</span>: <span id="combo">x1</span> | <span>‡πÄ‡∏ß‡∏•‡∏≤</span>: <span id="time">60</span>s | <span>‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</span>: <span id="best">0</span>
    <span id="fever" style="display:none;margin-left:8px;border:1px solid #ff3;border-radius:999px;padding:2px 10px;color:#ff3;text-shadow:0 0 10px rgba(255,240,0,.85)">FEVER!</span>
  </div>
  <div><span>‡πÇ‡∏´‡∏°‡∏î</span>: <span id="modeName">‡∏î‡∏µ vs ‡∏Ç‡∏¢‡∏∞</span> | <span>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å</span>: <span id="difficulty">‡∏õ‡∏Å‡∏ï‡∏¥</span></div>
  <div id="targetWrap">üéØ ‡∏´‡∏°‡∏ß‡∏î‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: <span id="targetBadge" style="border:1px solid #0ff;border-radius:10px;padding:2px 8px;background:rgba(0,0,0,.35)">‚Äî</span></div>
  <div id="plateTracker">üç± ‡πÇ‡∏Ñ‡∏ß‡∏ï‡∏≤: <div class="pills" id="platePills"></div></div>
</div>

<div id="menuBar">
  <div class="row">
    <button class="tag" data-action="mode" data-value="goodjunk" type="button">ü•ó ‡∏î‡∏µ vs ‡∏Ç‡∏¢‡∏∞</button>
    <button class="tag" data-action="mode" data-value="groups" type="button">üçΩÔ∏è ‡∏à‡∏≤‡∏ô 5 ‡∏´‡∏°‡∏π‡πà</button>
    <button class="tag" data-action="mode" data-value="hydration" type="button">üíß ‡∏™‡∏°‡∏î‡∏∏‡∏•‡∏ô‡πâ‡∏≥</button>
    <button class="tag" data-action="mode" data-value="plate" type="button">üç± ‡∏à‡∏±‡∏î‡∏à‡∏≤‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</button>
  </div>
  <div class="row" style="margin:8px 0">
    <button class="tag" data-action="diff" data-value="Easy" type="button">‡∏á‡πà‡∏≤‡∏¢</button>
    <button class="tag" data-action="diff" data-value="Normal" type="button">‡∏õ‡∏Å‡∏ï‡∏¥</button>
    <button class="tag" data-action="diff" data-value="Hard" type="button">‡∏¢‡∏≤‡∏Å</button>
  </div>
  <div class="row">
    <button class="btn" data-action="start" type="button">‚ñ∂ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</button>
    <button class="btn" data-action="pause" type="button">‚è∏ ‡∏û‡∏±‡∏Å</button>
    <button class="btn" data-action="restart" type="button">‚Üª ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
    <button class="btn" data-action="help" type="button">‚ùì ‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏•‡πà‡∏ô</button>
  </div>
</div>

<div id="help" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.6);align-items:center;justify-content:center">
  <div style="background:rgba(8,12,20,.96);border:1px solid var(--cy);border-radius:16px;padding:18px 20px;color:#0ff;width:min(94vw,760px)">
    <h2>‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏•‡πà‡∏ô</h2>
    <div>‡∏Ñ‡∏•‡∏¥‡∏Å/‡πÅ‡∏ï‡∏∞ ‡∏´‡∏£‡∏∑‡∏≠‡∏à‡πâ‡∏≠‡∏á‡πÉ‡∏ô VR (~0.7s) ‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏ï‡∏≤‡∏°‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤‡πÇ‡∏´‡∏°‡∏î</div>
    <div style="margin-top:10px;text-align:right"><button class="btn" data-action="helpClose" type="button">‡πÇ‡∏≠‡πÄ‡∏Ñ</button></div>
  </div>
</div>

<audio id="sfx-ding" src="./assets/ding.wav"></audio>
<audio id="sfx-thud" src="./assets/thud.wav"></audio>
<audio id="sfx-tick" src="./assets/tick.wav"></audio>

<script src="https://unpkg.com/three@0.159.0/build/three.min.js"></script>
<script src="https://unpkg.com/three@0.159.0/examples/js/VRButton.js"></script>
<script type="module" src="./game/main.js"></script>
</body></html>
