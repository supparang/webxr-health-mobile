<!doctype html><html lang="th"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Play – Shadow Breaker</title><link rel="stylesheet" href="src/styles.css"/>
<script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
<script src="src/components.js" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function(){
  var back = document.getElementById('backLink');
  if(back){
    back.addEventListener('click', function(e){
      e.preventDefault();
      window.location.href = 'index.html';
    });
  }
});
</script>  
</head><body>
<div class="hud">
<div class="badge" id="hudScore">—</div>
<div class="badge" id="hudCombo">—</div>
<div class="badge" id="hudTime">—</div>
<div class="badge" id="hudArcane">—</div>
<div class="badge interactive">
  <a href="index.html" style="color:#8bd8ff;text-decoration:none" id="backLink">Back</a>
</div>
</div>
<div class="hud" style="top:auto;bottom:0;justify-content:space-between"><div class="badge" id="hudHP">HP: 100</div><div class="badge" id="hudOverload">Overload: 0%</div><div class="badge" id="hudBoss">Boss HP: —</div><div class="badge" style="pointer-events:auto"><button id="btnSkillWheel">Skill Wheel (Q)</button></div></div>
<div id="toast" class="toast"></div>
<a-scene renderer="colorManagement: true" shadow-breaker-game>
  <a-assets timeout="10000">
    <img id="bg" src="https://images.unsplash.com/photo-1499346030926-9a72daac6c63?q=80&w=1920&auto=format&fit=crop" crossorigin="anonymous">
  </a-assets>
  <a-sky src="#bg" color="#111122"></a-sky>
  <a-entity id="spawner"></a-entity>
  <a-entity id="rig" position="0 1.6 0">
    <a-camera id="camera" wasd-controls-enabled="false"></a-camera>
    <a-entity cursor="rayOrigin: mouse; fuse:false" raycaster="objects: .clickable; far: 30; interval: 0"></a-entity>
    <a-entity laser-controls="hand: right" raycaster="objects: .clickable; far: 30; interval: 0"></a-entity>
    <a-entity laser-controls="hand: left"  raycaster="objects: .clickable; far: 30; interval: 0"></a-entity>
  </a-entity>
  <a-entity light="type: ambient; color: #BBB"></a-entity>
  <a-entity light="type: directional; intensity: 0.6" position="0 4 -2"></a-entity>
</a-scene>
<script>
  const setLang=(v)=>{ localStorage.setItem('sb_lang', v); location.reload(); };
  document.addEventListener('DOMContentLoaded', ()=>{
    const th=document.getElementById('langTogglePlayTH'); const en=document.getElementById('langTogglePlayEN');
    if(th&&en){ th.onclick=()=>setLang('th'); en.onclick=()=>setLang('en'); }
  });
</script>
<!-- Overlay FX -->
<div id="overlayFX"></div>

<!-- Skill Wheel (Desktop/VR share) -->
<div id="skillWheelPanel" class="interactive">
  <h3>Skill Wheel • วงสกิล</h3>
  <div class="grid">
    <button data-skill="pulse">Arcane Pulse</button>
    <button data-skill="bind">Shadow Bind</button>
    <button data-skill="slash">Shadow Slash</button>
    <button data-skill="burst">Arcane Burst</button>
  </div>
  <p style="margin-top:10px;opacity:.8">Tip: VR กดปุ่ม A/X เพื่อเปิด/ปิด • เดสก์ท็อปกด Q</p>
</div>

<!-- Settings Modal -->
<div id="settingsModal">
  <div class="card interactive">
    <h3 style="margin:0 0 8px;color:#39d3e6">Settings</h3>
    <label>Difficulty:
      <select id="difficulty">
        <option value="easy">Easy</option>
        <option value="normal" selected>Normal</option>
        <option value="hard">Hard</option>
      </select>
    </label>
    <div style="margin-top:10px">
      <button id="btnCloseSettings">Close</button>
    </div>
  </div>
</div>

<script>
  // Hook buttons
  document.addEventListener('DOMContentLoaded', ()=>{
    // Skill wheel buttons
    document.querySelectorAll('#skillWheelPanel [data-skill]').forEach(b=>{
      b.addEventListener('click', ()=> window.dispatchEvent(new CustomEvent('sb-cast', {detail:{skill:b.dataset.skill}})));
    });
    document.getElementById('btnCloseSettings')?.addEventListener('click', ()=> document.getElementById('settingsModal').classList.remove('active'));
  });
</script>  
</body></html>
