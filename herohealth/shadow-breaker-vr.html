<!-- === /fitness/shadow-breaker.html ===
Shadow Breaker ‚Äî PATCH D
‚úÖ Force load shadow-breaker.css (no min.css) + cache-bust
‚úÖ Engine cache-bust
‚úÖ Research UI uses same theme (CSS handles it) + tidy layout
-->
<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>Shadow Breaker ‚Äî VR Fitness</title>
  <meta name="color-scheme" content="dark light"/>
  <link rel="icon" href="favicon.ico"/>

  <!-- ‚úÖ PATCH D: use ONLY this (do NOT load shadow-breaker.min.css) -->
  <link rel="stylesheet" href="./css/shadow-breaker.css?v=20260210d"/>
</head>
<body>
<div id="sb-wrap">

  <!-- HERO -->
  <section class="sb-hero">
    <div class="sb-pill">VR Fitness ‚Ä¢ Boss Targets</div>
    <h1>Shadow Breaker</h1>
    <p>‡πÄ‡∏Å‡∏°‡∏ï‡∏µ‡πÄ‡∏õ‡πâ‡∏≤ Boss ‡∏´‡∏•‡∏≤‡∏¢‡πÄ‡∏ü‡∏™ ‚Ä¢ RT/Combo/FEVER/Shield ‚Ä¢ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Normal/Research</p>
    <p style="margin-top:8px;">‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö: <b>PC</b> ‚Ä¢ <b>Mobile</b></p>
    <a class="sb-btn ghost" id="sb-btn-hub" href="./hub.html" style="margin-top:10px; display:inline-flex; text-decoration:none;">
      ‚Üê ‡∏Å‡∏•‡∏±‡∏ö Hub
    </a>
  </section>

  <!-- MENU VIEW -->
  <section id="sb-view-menu" class="sb-view is-active">
    <section class="sb-menu">
      <div class="sb-tabs">
        <button class="sb-tab is-on" id="sb-tab-normal" type="button">üéÆ Normal</button>
        <button class="sb-tab" id="sb-tab-research" type="button">üìä Research</button>
      </div>

      <div id="sb-mode-desc" style="color:var(--muted); font-size:var(--fs-sm);">
        Normal: ‡πÄ‡∏•‡πà‡∏ô‡∏™‡∏ô‡∏∏‡∏Å/‡∏™‡∏≠‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°
      </div>

      <div class="sb-row">
        <label>Difficulty</label>
        <select id="sb-sel-diff">
          <option value="easy">Easy</option>
          <option value="normal" selected>Normal</option>
          <option value="hard">Hard</option>
        </select>

        <label>Time (sec)</label>
        <select id="sb-sel-time">
          <option value="60">60</option>
          <option value="70" selected>70</option>
          <option value="80">80</option>
          <option value="90">90</option>
        </select>
      </div>

      <!-- Research fields -->
      <div id="sb-research-fields" style="display:none; margin-top:10px;">
        <div class="sb-row">
          <label>Participant ID</label>
          <input id="sb-inp-pid" placeholder="‡πÄ‡∏ä‡πà‡∏ô S05-001"/>

          <label>Group</label>
          <input id="sb-inp-group" placeholder="‡πÄ‡∏ä‡πà‡∏ô Control/Exp-A"/>

          <label>Note</label>
          <input id="sb-inp-note" placeholder="‡πÇ‡∏ô‡πâ‡∏ï‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)"/>
        </div>
      </div>

      <div style="margin-top:10px; color:var(--muted); font-size:var(--fs-sm);">
        AI (Play only): DL-lite Predictor ‚Ä¢ Explainable micro-tips ‚Ä¢ Pattern Generator ‚Ä¢ Fair adaptive pacing
      </div>

      <div class="sb-actions">
        <button class="sb-btn primary" id="sb-btn-play" type="button">‚ñ∂ Start Game</button>
        <button class="sb-btn" id="sb-btn-research" type="button">üìä Start Research</button>
        <button class="sb-btn ghost" id="sb-btn-howto" type="button">‚ùì How to play</button>
      </div>

      <div id="sb-howto" style="display:none; margin-top:12px; color:var(--text);">
        <ul style="margin:0; padding-left:18px; line-height:1.5;">
          <li>‡∏ä‡∏Å/‡πÅ‡∏ï‡∏∞‡πÄ‡∏õ‡πâ‡∏≤ ‚ÄúNormal‚Äù ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏≥‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö + ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</li>
          <li>‡πÄ‡∏õ‡πâ‡∏≤ ‚ÄúDecoy/Bomb‚Äù ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏™‡∏µ‡∏¢‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ Shield ‡∏à‡∏∞‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ)</li>
          <li>‡πÄ‡∏õ‡πâ‡∏≤ ‚ÄúHeal/Shield‚Äù ‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏≠‡∏≤‡∏ï‡∏±‡∏ß‡∏£‡∏≠‡∏î + ‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö</li>
          <li>FEVER ‡πÄ‡∏ï‡πá‡∏° ‚Üí ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô/‡∏î‡∏≤‡πÄ‡∏°‡∏à‡∏ö‡∏≠‡∏™‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡πà‡∏ß‡∏á‡∏™‡∏±‡πâ‡∏ô ‡πÜ</li>
          <li>HP ‡∏ö‡∏≠‡∏™‡πÉ‡∏Å‡∏•‡πâ‡∏´‡∏°‡∏î ‚Üí ‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏´‡∏ô‡πâ‡∏≤ Boss (Boss Face) ‡πÇ‡∏ú‡∏•‡πà 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</li>
        </ul>
      </div>
    </section>
  </section>

  <!-- PLAY VIEW -->
  <section id="sb-view-play" class="sb-view">
    <section class="sb-play-shell">

      <div class="sb-hud-top">
        <div class="sb-hud-left">
          <div class="sb-kv">Time <b id="sb-text-time">0.0 s</b></div>
          <div class="sb-kv">Score <b id="sb-text-score">0</b></div>
          <div class="sb-kv">Combo <b id="sb-text-combo">0</b></div>
        </div>

        <div class="sb-hud-right">
          <div class="sb-kv"><b id="sb-current-boss-name">Boss</b></div>
          <div class="sb-kv">Phase <b id="sb-text-phase">1</b></div>
          <div class="sb-kv">Miss <b id="sb-text-miss">0</b></div>
          <div class="sb-kv">Shield <b id="sb-text-shield">0</b></div>
        </div>
      </div>

      <div class="sb-bars">
        <div class="sb-kv" style="min-width:46px;">YOU</div>
        <div class="sb-bar"><i id="sb-hp-you-top"></i></div>
        <div class="sb-kv" style="min-width:52px; justify-content:flex-end;">BOSS</div>
        <div class="sb-bar"><i id="sb-hp-boss-top"></i></div>
      </div>

      <div class="sb-grid">
        <div id="sb-target-layer">
          <div id="sb-msg-main" class="sb-msg-main">‡∏û‡∏£‡πâ‡∏≠‡∏°!</div>
        </div>

        <aside class="sb-boss-card">
          <h3><span id="sb-meta-emoji">üê£</span> <span id="sb-meta-name">Boss</span></h3>
          <p id="sb-meta-desc">‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ‡∏ö‡∏≠‡∏™‚Ä¶</p>
          <div class="sb-boss-meta">
            <span>Phase: <b id="sb-boss-phase-label">1</b></span>
            <span>Shield: <b id="sb-boss-shield-label">0</b></span>
          </div>
          <div style="margin-top:10px;">
            <button class="sb-btn ghost" id="sb-btn-back-menu" type="button">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π</button>
          </div>
        </aside>
      </div>

      <div class="sb-hud-bottom">
        <div class="sb-fever">
          <div class="row">
            <div id="sb-label-fever">FEVER</div>
            <label style="display:flex; gap:8px; align-items:center; color:var(--muted); font-size:var(--fs-sm);">
              <input id="sb-btn-pause" type="checkbox" style="transform:scale(1.05);"/>
              Pause
            </label>
          </div>
          <div class="track"><div id="sb-fever-bar"></div></div>
        </div>

        <div class="sb-pausebox">
          <div>YOU</div>
          <div class="sb-bar" style="flex:1;"><i id="sb-hp-you-bottom"></i></div>
          <div>BOSS</div>
          <div class="sb-bar" style="flex:1;"><i id="sb-hp-boss-bottom"></i></div>
        </div>
      </div>

    </section>
  </section>

  <!-- RESULT VIEW -->
  <section id="sb-view-result" class="sb-view">
    <section class="sb-result">
      <h2>‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•</h2>
      <div class="grid">
        <div class="sb-chip">Time <b id="sb-res-time">0.0 s</b></div>
        <div class="sb-chip">Score <b id="sb-res-score">0</b></div>
        <div class="sb-chip">Max Combo <b id="sb-res-max-combo">0</b></div>
        <div class="sb-chip">Miss <b id="sb-res-miss">0</b></div>
        <div class="sb-chip">Phase <b id="sb-res-phase">1</b></div>
        <div class="sb-chip">Boss Cleared <b id="sb-res-boss-cleared">0</b></div>
        <div class="sb-chip">Accuracy <b id="sb-res-acc">0%</b></div>
        <div class="sb-chip">Grade <b id="sb-res-grade">C</b></div>
      </div>

      <div class="actions">
        <button class="sb-btn primary" id="sb-btn-result-retry" type="button">‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
        <button class="sb-btn" id="sb-btn-result-menu" type="button">‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π</button>
        <button class="sb-btn ghost" id="sb-btn-download-events" type="button">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î events.csv</button>
        <button class="sb-btn ghost" id="sb-btn-download-session" type="button">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î session.csv</button>
      </div>
    </section>
  </section>

</div>

<!-- ‚úÖ PATCH D: engine cache-bust -->
<script type="module" src="./js/engine.js?v=20260210d"></script>

<script>
/* small menu behavior (no dependency) */
(function(){
  const $ = (s)=>document.querySelector(s);
  const tabN = $('#sb-tab-normal');
  const tabR = $('#sb-tab-research');
  const rf = $('#sb-research-fields');
  const desc = $('#sb-mode-desc');
  const howtoBtn = $('#sb-btn-howto');
  const howto = $('#sb-howto');

  function setMode(m){
    const isR = (m==='research');
    tabN?.classList.toggle('is-on', !isR);
    tabR?.classList.toggle('is-on', isR);
    if(rf) rf.style.display = isR ? '' : 'none';
    if(desc) desc.textContent = isR
      ? 'Research: ‡πÉ‡∏ä‡πâ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏•‡∏≠‡∏á (‡∏Å‡∏£‡∏≠‡∏Å Participant/Group ‡πÑ‡∏î‡πâ)'
      : 'Normal: ‡πÄ‡∏•‡πà‡∏ô‡∏™‡∏ô‡∏∏‡∏Å/‡∏™‡∏≠‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°';
  }
  tabN?.addEventListener('click', ()=>setMode('normal'));
  tabR?.addEventListener('click', ()=>setMode('research'));
  howtoBtn?.addEventListener('click', ()=>{ if(howto) howto.style.display = (howto.style.display==='none'||!howto.style.display) ? '' : 'none'; });

  setMode('normal');
})();
</script>
</body>
</html>