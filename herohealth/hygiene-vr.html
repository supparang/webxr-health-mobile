<!-- === /herohealth/hygiene-vr.html ===
HygieneVR LAUNCHER ‚Äî ROOT (Auto-detect, NO override if ?view= exists)
‚úÖ Redirects to ./hygiene-vr/hygiene-vr.html
‚úÖ If ?view exists => use it (DO NOT override)
‚úÖ Else auto-detect: mobile/pc (and allow buttons for vr/cvr if user wants)
‚úÖ Pass-through: hub/run/diff/time/seed/studyId/phase/conditionGroup/style/log/boss/dd/coach
-->
<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>HeroHealth ‚Äî HygieneVR Launcher</title>
  <meta name="color-scheme" content="light dark" />
  <link rel="icon" href="./favicon.ico" />
  <style>
    :root{
      color-scheme: dark;
      --bg:#020617; --panel:rgba(2,6,23,.78); --panel2:rgba(15,23,42,.70);
      --stroke:rgba(148,163,184,.18); --text:#e5e7eb; --muted:#94a3b8;
      --accent:#22c55e; --violet:#a78bfa; --cyan:#22d3ee; --warn:#f59e0b;
      --radius:22px; --pill:999px;
      --sat: env(safe-area-inset-top, 0px);
      --sab: env(safe-area-inset-bottom, 0px);
    }
    html,body{margin:0; height:100%; background:var(--bg); color:var(--text); font-family:system-ui,-apple-system,"Noto Sans Thai",Segoe UI,Roboto,sans-serif;}
    body{display:grid; place-items:center; padding: calc(18px + var(--sat)) 18px calc(18px + var(--sab));}
    .card{
      width:min(820px, 100%);
      border:1px solid var(--stroke);
      border-radius: var(--radius);
      background: var(--panel);
      box-shadow: 0 22px 70px rgba(0,0,0,.48);
      padding: 16px;
    }
    .title{font-weight:1200; font-size:18px;}
    .sub{margin-top:6px; color:var(--muted); font-weight:900; line-height:1.5; font-size:13px;}
    .row{display:flex; gap:10px; flex-wrap:wrap; margin-top:12px;}
    .btn{
      appearance:none; border:1px solid rgba(148,163,184,.18);
      background: var(--panel2); color:var(--text);
      padding: 10px 12px; border-radius: 14px; cursor:pointer; font-weight:1000;
      -webkit-tap-highlight-color: transparent;
    }
    .btn.primary{ background: rgba(34,197,94,.16); border-color: rgba(34,197,94,.45); }
    .btn.vr{ background: rgba(167,139,250,.14); border-color: rgba(167,139,250,.45); }
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      border:1px solid rgba(148,163,184,.18);
      background: rgba(2,6,23,.55);
      border-radius: var(--pill);
      padding: 8px 10px;
      font-weight: 950;
      font-size: 12px;
      color: rgba(229,231,235,.95);
      margin-top:10px;
      flex-wrap:wrap;
    }
    code{ color:#a7f3d0; font-weight:1000; }
  </style>
</head>
<body>
  <div class="card">
    <div class="title">üßº HygieneVR ‚Äî Handwash Survival</div>
    <div class="sub">
      ‡πÄ‡∏•‡πà‡∏ô‡∏ï‡∏≤‡∏° <b>7 ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏•‡πâ‡∏≤‡∏á‡∏°‡∏∑‡∏≠</b> ‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å ‚Ä¢ ‡∏´‡∏•‡∏ö‡πÄ‡∏ä‡∏∑‡πâ‡∏≠ ü¶† ‚Ä¢ ‡πÄ‡∏Å‡πá‡∏ö‡∏™‡∏ö‡∏π‡πà üßº ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏±‡∏ô‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏ä‡πà‡∏ß‡∏á‡∏ö‡∏≠‡∏™<br/>
      <b>‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤‡πÉ‡∏ô‡πÄ‡∏Å‡∏°</b>: MISS = ‡∏ú‡∏¥‡∏î‡∏Ç‡∏±‡πâ‡∏ô + ‡πÇ‡∏î‡∏ô‡πÄ‡∏ä‡∏∑‡πâ‡∏≠ (‡∏Ñ‡∏£‡∏ö 3 ‡∏à‡∏ö‡∏ó‡∏±‡∏ô‡∏ó‡∏µ) ‚Ä¢ ‡∏°‡∏µ BOSS ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏≠‡∏ö ‡πÜ
    </div>

    <div class="row">
      <button class="btn primary" id="go">‡πÄ‡∏£‡∏¥‡πà‡∏° (Auto-detect)</button>
      <button class="btn" id="goMobile">Mobile</button>
      <button class="btn vr" id="goVR">Cardboard VR</button>
      <button class="btn vr" id="goCVR">cVR</button>
    </div>

    <div class="pill" id="pill">
      Pass-through: <code>hub</code> <code>run</code> <code>diff</code> <code>time</code> <code>seed</code> <code>studyId</code>
      <code>phase</code> <code>conditionGroup</code> <code>style</code> <code>log</code> <code>boss</code> <code>dd</code> <code>coach</code>
    </div>

    <div class="sub" style="margin-top:10px">
      * ‡∏ñ‡πâ‡∏≤ URL ‡∏°‡∏µ <code>?view=</code> ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (‡πÑ‡∏°‡πà override)
    </div>
  </div>

<script>
(function(){
  'use strict';
  const qs = (k, d=null)=>{ try{ return new URL(location.href).searchParams.get(k) ?? d; } catch { return d; } };

  function detectView(){
    // ‚úÖ NO override rule: ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ view ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏•‡∏¢
    const forced = (qs('view','')||'').toLowerCase();
    if(forced) return forced;

    const ua = navigator.userAgent || '';
    const isMobile = /Android|iPhone|iPad|iPod/i.test(ua);
    return isMobile ? 'mobile' : 'pc';
  }

  function go(viewOverride=null){
    const u = new URL(location.href);

    // ‚úÖ pass-through ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô + hygiene extras
    const pass = ['hub','run','diff','time','seed','studyId','phase','conditionGroup','style','log','boss','dd','coach'];

    const out = new URL('./hygiene-vr/hygiene-vr.html', u);
    pass.forEach(k=>{
      const v = u.searchParams.get(k);
      if(v!=null && v!=='') out.searchParams.set(k,v);
    });

    // ‚úÖ NO override if ?view exists; if not exists, allow override or detect
    const forced = (u.searchParams.get('view')||'').toLowerCase();
    if(forced){
      out.searchParams.set('view', forced);
    }else{
      out.searchParams.set('view', (viewOverride || detectView()));
    }

    location.href = out.toString();
  }

  document.getElementById('go').onclick = ()=>go(null);
  document.getElementById('goMobile').onclick = ()=>go('mobile');
  document.getElementById('goVR').onclick = ()=>go('vr');
  document.getElementById('goCVR').onclick = ()=>go('cvr');
})();
</script>
</body>
</html>