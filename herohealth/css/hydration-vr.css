/* ===== Hydration VR – Coach + Judge FX (2025-12-12) ===== */

/* ---------- ชั้นโค้ชเต้น + กล่องคำพูด ---------- */
.hydr-coach-layer {
  position: fixed;
  left: 50%;
  bottom: 68px;
  transform: translateX(-50%);
  display: flex;
  align-items: flex-end;
  gap: 12px;
  z-index: 40;
  pointer-events: none;
}

@media (max-width: 768px) {
  .hydr-coach-layer {
    bottom: 100px;
    max-width: 92vw;
  }
}

.hydr-coach-avatar {
  width: 64px;
  height: 64px;
  border-radius: 999px;
  background: radial-gradient(circle at 30% 20%, #a7f3d0, #22c55e 40%, #166534 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 36px;
  box-shadow:
    0 0 0 2px rgba(15, 23, 42, .9),
    0 18px 30px rgba(15, 23, 42, .85);
  animation: hydrCoachIdle 1.8s ease-in-out infinite;
}

.hydr-coach-avatar--celebrate {
  animation: hydrCoachDance .6s ease-in-out infinite;
}

.hydr-coach-speech {
  max-width: min(420px, 72vw);
  padding: 10px 14px;
  border-radius: 999px;
  background: rgba(15, 23, 42, .96);
  border: 1px solid rgba(56, 189, 248, .65);
  color: #e5e7eb;
  font-size: 14px;
  line-height: 1.4;
  box-shadow: 0 14px 32px rgba(15, 23, 42, .8);
  transform-origin: left bottom;
  animation: hydrCoachBubbleIn .22s ease-out;
  white-space: pre-line;
}

/* ---------- ชั้น FX คำตัดสิน + คะแนน ---------- */
.hydr-judge-layer {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 45;
}

.hydr-judge-pop {
  position: absolute;
  min-width: 80px;
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 14px;
  font-weight: 600;
  display: inline-flex;
  gap: 6px;
  align-items: center;
  justify-content: center;
  box-shadow: 0 14px 30px rgba(15, 23, 42, .9);
  transform: translate(-50%, -50%);
  animation: hydrJudgePop .55s ease-out forwards;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

.hydr-judge-pop__label {
  text-transform: uppercase;
  letter-spacing: .04em;
}

.hydr-judge-pop__score {
  font-variant-numeric: tabular-nums;
}

/* สีของคำตัดสินแต่ละแบบ */
.hydr-judge-pop--bad {
  background: rgba(248, 113, 113, .9);
  color: #111827;
}

.hydr-judge-pop--good {
  background: rgba(52, 211, 153, .95);
  color: #022c22;
}

.hydr-judge-pop--perfect {
  background: linear-gradient(90deg, #22c55e, #38bdf8);
  color: #0b1120;
}

.hydr-judge-pop--fever {
  background: radial-gradient(circle at 0 0, #fee2e2, #fb923c 55%, #ea580c 100%);
  color: #111827;
  box-shadow:
    0 0 0 2px rgba(248, 250, 252, .6),
    0 0 32px rgba(249, 115, 22, .85);
}

/* ---------- Toast ฉลอง Goal / Mini / All ---------- */
.hydr-quest-toast-wrap {
  position: fixed;
  top: 18px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 50;
  display: flex;
  flex-direction: column;
  gap: 8px;
  pointer-events: none;
}

.hydr-quest-toast {
  padding: 8px 14px;
  border-radius: 999px;
  font-size: 13px;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  box-shadow: 0 16px 35px rgba(15, 23, 42, .85);
  background: rgba(15, 23, 42, .96);
  border: 1px solid rgba(56, 189, 248, .7);
  color: #e5e7eb;
  animation:
    hydrQuestToastIn .25s ease-out,
    hydrQuestToastOut .35s ease-in 2.4s forwards;
}

.hydr-quest-toast__badge {
  width: 26px;
  height: 26px;
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
}

/* โทนสีตามประเภทภารกิจ */
.hydr-quest-toast--goal .hydr-quest-toast__badge {
  background: rgba(34, 197, 94, .1);
}

.hydr-quest-toast--mini .hydr-quest-toast__badge {
  background: rgba(129, 140, 248, .16);
}

.hydr-quest-toast--all {
  background: linear-gradient(90deg, rgba(56, 189, 248,.95), rgba(45, 212, 191,.98));
  color: #0b1120;
}

/* ---------- Animations ---------- */

@keyframes hydrCoachIdle {
  0%,100% { transform: translateY(0) scale(1); }
  50%     { transform: translateY(-4px) scale(1.03); }
}

@keyframes hydrCoachDance {
  0%   { transform: translateY(0)   rotate(-4deg) scale(1.04); }
  25%  { transform: translateY(-4px) rotate(4deg)  scale(1.12); }
  50%  { transform: translateY(-2px) rotate(-3deg) scale(1.06); }
  75%  { transform: translateY(-5px) rotate(5deg)  scale(1.16); }
  100% { transform: translateY(0)   rotate(-2deg) scale(1.05); }
}

@keyframes hydrCoachBubbleIn {
  0%   { opacity: 0; transform: scale(.85) translateY(10px); }
  100% { opacity: 1; transform: scale(1)   translateY(0); }
}

@keyframes hydrJudgePop {
  0%   { opacity: 0; transform: translate(-50%, -60%) scale(.6); }
  35%  { opacity: 1; transform: translate(-50%, -52%) scale(1.05); }
  65%  { opacity: 1; transform: translate(-50%, -50%) scale(1); }
  100% { opacity: 0; transform: translate(-50%, -40%) scale(.85); }
}

@keyframes hydrQuestToastIn {
  0%   { opacity: 0; transform: translateY(-10px) scale(.92); }
  100% { opacity: 1; transform: translateY(0)     scale(1); }
}

@keyframes hydrQuestToastOut {
  0%   { opacity: 1; transform: translateY(0)     scale(1); }
  100% { opacity: 0; transform: translateY(-10px) scale(.94); }
}

/* ---------- Fix layout กล่องสรุปไม่ตกขอบมือถือ ---------- */
@media (max-width: 768px) {
  .hh-summary-dialog,
  .hydr-summary-dialog {
    max-width: 88vw;
    left: 50%;
    transform: translateX(-50%);
  }
}