<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>HeroHealth ‚Äî Hydration VR</title>
  <meta name="color-scheme" content="dark" />
  <link rel="icon" href="./favicon.ico" />

  <link rel="stylesheet" href="./hydration-vr/hydration-vr.css" />

  <!-- FX + Logger (optional) -->
  <script src="./vr/particles.js" defer></script>
  <script src="./vr/hha-cloud-logger.js" defer></script>
</head>

<body class="view-mobile">
  <!-- START OVERLAY -->
  <div id="start-overlay" class="startOverlay">
    <div class="startCard">
      <div class="startTitle">üíß Hydration VR</div>
      <div class="startSub">
        Goal: ‡∏Ñ‡∏∏‡∏°‡πÇ‡∏ã‡∏ô <b>GREEN</b> ‡πÉ‡∏´‡πâ‡∏™‡∏∞‡∏™‡∏°‡∏Ñ‡∏£‡∏ö‡∏ï‡∏≤‡∏°‡πÄ‡∏õ‡πâ‡∏≤<br>
        Mini: ‡∏ï‡∏≠‡∏ô <b>STORM</b> ‡πÉ‡∏´‡πâ‡∏ó‡∏≥ <b>LOW/HIGH + BLOCK</b> ‡∏ä‡πà‡∏ß‡∏á‡∏ó‡πâ‡∏≤‡∏¢‡∏û‡∏≤‡∏¢‡∏∏
      </div>

      <div class="startRow">
        <button id="btnStart" class="btn primary">‚ñ∂ Start</button>
        <button id="btnHow" class="btn">‚ùì ‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏•‡πà‡∏ô</button>
      </div>

      <div class="startHints">
        <div class="hint">üéØ ‡πÄ‡∏•‡πá‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠ ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î <b>SHOOT</b> ‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏ï‡∏∞‡πÄ‡∏õ‡πâ‡∏≤</div>
        <div class="hint">üõ°Ô∏è ‡πÄ‡∏Å‡πá‡∏ö‡πÇ‡∏•‡πà‡πÑ‡∏ß‡πâ ‚ÄúBLOCK‚Äù ‡∏ä‡πà‡∏ß‡∏á‡∏ó‡πâ‡∏≤‡∏¢‡∏û‡∏≤‡∏¢‡∏∏</div>
        <div class="hint">üìå ‡πÇ‡∏´‡∏°‡∏î: <code>?mode=focus|challenge|training|endless</code></div>
      </div>
    </div>

    <div id="howPanel" class="howPanel" hidden>
      <div class="howCard">
        <div class="howTitle">‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏•‡πà‡∏ô</div>
        <ul>
          <li>‡∏¢‡∏¥‡∏á üíß ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏°‡πÇ‡∏ã‡∏ô‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà GREEN (‡∏™‡∏∞‡∏™‡∏°‡πÄ‡∏ß‡∏•‡∏≤)</li>
          <li>‡∏´‡∏•‡∏ö ü•§ ‡∏ñ‡πâ‡∏≤‡πÇ‡∏î‡∏ô‡∏à‡∏∞ MISS ‡πÅ‡∏•‡∏∞‡∏î‡∏±‡∏ô‡∏ô‡πâ‡∏≥‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å GREEN</li>
          <li>‡πÄ‡∏Å‡πá‡∏ö üõ°Ô∏è ‡πÄ‡∏û‡∏∑‡πà‡∏≠ BLOCK ‡∏ï‡∏≠‡∏ô‡∏ó‡πâ‡∏≤‡∏¢ STORM (Mini)</li>
          <li>Cardboard: ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° <b>CARDBOARD</b> ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô</li>
        </ul>
        <button id="btnHowClose" class="btn primary">‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏•‡πâ‡∏ß</button>
      </div>
    </div>
  </div>

  <!-- TOP HUD -->
  <div id="hudTop" class="hudTop">
    <div class="hudPills">
      <div class="pill"><span>‚è±Ô∏è</span><b>TIME</b><i id="stat-time">70</i></div>
      <div class="pill"><span>üèÜ</span><b>SCORE</b><i id="stat-score">0</i></div>
      <div class="pill"><span>‚ö°</span><b>COMBO</b><i id="stat-combo">0</i></div>
      <div class="pill"><span>üí•</span><b>MISS</b><i id="stat-miss">0</i></div>
      <div class="pill"><span>üéñÔ∏è</span><b>GRADE</b><i id="stat-grade">C</i></div>
      <div class="pill"><span>üåÄ</span><b>STORM</b><i id="storm-left">0</i>s</div>
      <div class="pill"><span>üõ°Ô∏è</span><b>SHIELD</b><i id="shield-count">0</i></div>
    </div>
  </div>

  <!-- MAIN STAGE -->
  <div class="stage">
    <div class="playWrap">

      <!-- Normal playfield -->
      <div id="playfield" class="playfield">
        <div id="hvr-layer" class="hvr-layer"></div>
        <div class="crosshair" aria-hidden="true"></div>
      </div>

      <!-- Cardboard playfield (split) -->
      <div id="cb-playfield" class="cbPlayfield" hidden>
        <div class="cbEye">
          <div id="hvr-layerL" class="hvr-layer cbLayer"></div>
          <div class="crosshair" aria-hidden="true"></div>
        </div>
        <div class="cbEye">
          <div id="hvr-layerR" class="hvr-layer cbLayer"></div>
          <div class="crosshair" aria-hidden="true"></div>
        </div>
      </div>

      <!-- Bottom panels -->
      <div class="bottomPanels">

        <!-- Water Gauge Panel (your ui-water.js will render inside if needed) -->
        <div class="panel waterPanel">
          <div class="panelTitle">üíß Water Gauge (0‚Äì100)</div>
          <div id="waterGaugeHost" class="waterGaugeHost"></div>
          <div class="panelHint">Goal: ‡∏≠‡∏¢‡∏π‡πà GREEN ‚Ä¢ Mini: ‡∏ó‡∏≥ LOW/HIGH + BLOCK ‡∏ä‡πà‡∏ß‡∏á‡∏ó‡πâ‡∏≤‡∏¢‡∏û‡∏≤‡∏¢‡∏∏</div>
        </div>

        <!-- Quest -->
        <div class="panel questPanel">
          <div class="panelTitle">üß© Quest</div>
          <div class="questLines">
            <div id="quest-line1" class="qLine">-</div>
            <div id="quest-line2" class="qLine">-</div>
            <div id="quest-line3" class="qLine">-</div>
            <div id="quest-line4" class="qLine">-</div>
          </div>
          <div class="tierRow">
            <span class="tag" id="stat-tier">Tier: Beginner</span>
            <span class="tag" id="stat-mode">Mode: play</span>
          </div>
        </div>

        <!-- Coach -->
        <div class="panel coachPanel">
          <div class="panelTitle">üß† Coach</div>
          <div class="coachRow">
            <img id="coach-img" class="coachImg" alt="coach" src="./img/hydration-neutral.png" />
            <div class="coachText">
              <div id="coach-text" class="coachMain">‡πÄ‡∏•‡πá‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏¢‡∏¥‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢!</div>
              <div id="coach-sub" class="coachSub">Tip: ‡∏Ñ‡∏∏‡∏° GREEN ‡∏Å‡πà‡∏≠‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡∏•‡∏∏‡∏¢ STORM</div>
            </div>
          </div>
        </div>

      </div>
    </div>

    <!-- Controls -->
    <div class="controls">
      <button id="btnCardboard" class="btn">üì¶ CARDBOARD</button>
      <button id="btnShoot" class="btn primary">üéØ SHOOT</button>
      <button id="btnStop" class="btn danger">‚õî STOP</button>
    </div>

  </div>

  <!-- SUMMARY MODAL -->
  <div id="resultBackdrop" class="resultBackdrop" hidden>
    <div class="resultCard">
      <div class="resultHead">
        <div class="resultTitle">üèÅ Summary</div>
        <div class="resultActions">
          <button id="btnRetry" class="btn">üîÅ Retry (Hold)</button>
          <button id="btnBackHub" class="btn">üè† Back HUB (Hold)</button>
        </div>
      </div>

      <div class="resultGrid">
        <div class="rBox"><b>Score</b><div id="rScore">0</div></div>
        <div class="rBox"><b>Grade</b><div id="rGrade">C</div></div>
        <div class="rBox"><b>Accuracy</b><div id="rAcc">0%</div></div>

        <div class="rBox"><b>Combo Max</b><div id="rComboMax">0</div></div>
        <div class="rBox"><b>Miss</b><div id="rMiss">0</div></div>
        <div class="rBox"><b>Goals</b><div id="rGoals">0/1</div></div>

        <div class="rBox"><b>Minis</b><div id="rMinis">0/999</div></div>
        <div class="rBox"><b>Time in GREEN</b><div id="rGreen">0.0s</div></div>
        <div class="rBox"><b>Streak Max</b><div id="rStreak">0</div></div>

        <div class="rBox"><b>Storm Cycles</b><div id="rStormCycles">0</div></div>
        <div class="rBox"><b>Storm Success</b><div id="rStormOk">0</div></div>
        <div class="rBox"><b>Storm Rate</b><div id="rStormRate">0%</div></div>
      </div>

      <div class="resultTips">
        <div class="tipsTitle">ü§ñ AI Tips (‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)</div>
        <div id="rTips" class="tipsBody">-</div>
        <div class="tipsMeta">
          <span class="tag" id="rTier">Tier: -</span>
          <span class="tag" id="rNext">Next Focus: -</span>
        </div>
      </div>

      <div class="resultTools">
        <button id="btnCopyJSON" class="btn">üìã Copy JSON</button>
        <button id="btnDownloadCSV" class="btn">‚¨áÔ∏è Download CSV</button>
        <button id="btnCloseSummary" class="btn primary">‡∏õ‡∏¥‡∏î</button>
      </div>

      <div class="holdHint">* ‡∏õ‡∏∏‡πà‡∏° Retry/Back HUB ‡∏ï‡πâ‡∏≠‡∏á ‚Äú‡∏Å‡∏î‡∏Ñ‡πâ‡∏≤‡∏á‚Äù ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏±‡∏ô‡∏Å‡∏î‡∏û‡∏•‡∏≤‡∏î</div>
    </div>
  </div>

  <!-- Modules -->
  <script src="./vr/coach-manager.js" defer></script>
  <script type="module" src="./hydration-vr/hydration.safe.js"></script>

  <script>
    // Start overlay wiring (simple)
    (function(){
      const ov = document.getElementById('start-overlay');
      const btnStart = document.getElementById('btnStart');
      const btnHow = document.getElementById('btnHow');
      const howPanel = document.getElementById('howPanel');
      const btnHowClose = document.getElementById('btnHowClose');
      const btnHowClose2 = document.getElementById('btnHowClose');

      btnHow?.addEventListener('click', ()=>{ howPanel.hidden = false; });
      btnHowClose?.addEventListener('click', ()=>{ howPanel.hidden = true; });

      btnStart?.addEventListener('click', ()=>{
        ov.style.display = 'none';
      });
    })();
  </script>
</body>
</html>