<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Hero Health ‚Äî Hydration VR</title>
  <meta name="color-scheme" content="light dark" />
  <link rel="icon" href="./favicon.ico" />

  <!-- A-Frame core (‡πÉ‡∏ä‡πâ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô GoodJunk / Groups VR) -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

  <style>
    :root{
      color-scheme: light dark;
      --bg:#020617;
      --panel:#020617;
      --panel-soft:#0b1120;
      --accent:#22c55e;
      --accent-soft:rgba(34,197,94,0.25);
      --danger:#fb923c;
      --text:#e5e7eb;
      --muted:#9ca3af;
    }
    *{box-sizing:border-box;margin:0;padding:0;}

    body{
      margin:0;
      min-height:100vh;
      font-family:system-ui,Segoe UI,Inter,Roboto,sans-serif;
      background:
        radial-gradient(circle at top left, rgba(56,189,248,0.2), transparent 55%),
        radial-gradient(circle at bottom right, rgba(34,197,94,0.25), transparent 55%),
        var(--bg);
      color:var(--text);
      overflow:hidden;
    }

    .app-wrap{
      width:100%;
      height:100vh;
      display:flex;
      flex-direction:column;
    }

    header.hha-bar{
      padding:8px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      background:linear-gradient(180deg,rgba(15,23,42,0.9),rgba(15,23,42,0.7));
      border-bottom:1px solid rgba(148,163,184,0.5);
      box-shadow:0 14px 30px rgba(15,23,42,0.7);
      z-index:10;
    }
    .hha-title{
      display:flex;
      align-items:center;
      gap:10px;
      font-size:15px;
      font-weight:600;
    }
    .hha-title span.emoji{font-size:20px;}
    .hha-sub{
      font-size:11px;
      color:var(--muted);
    }

    .hha-bar-right{
      display:flex;
      align-items:center;
      gap:8px;
      font-size:12px;
    }
    .pill{
      padding:4px 10px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.7);
      background:rgba(15,23,42,0.9);
      display:inline-flex;
      align-items:center;
      gap:6px;
      color:var(--muted);
      white-space:nowrap;
    }
    .pill strong{color:var(--text);}

    .pill.badge-easy{border-color:#22c55e;}
    .pill.badge-normal{border-color:#38bdf8;}
    .pill.badge-hard{border-color:#f97316;}

    .hud-main{
      flex:1;
      position:relative;
      display:flex;
      justify-content:center;
      align-items:stretch;
      padding:8px 8px 12px;
      gap:10px;
    }

    /* ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà VR */
    .vr-shell{
      flex:1;
      position:relative;
      border-radius:18px;
      overflow:hidden;
      background:#000;
      border:1px solid rgba(15,23,42,0.9);
      box-shadow:0 24px 50px rgba(15,23,42,0.9);
      min-height:220px;
    }

    a-scene{
      width:100%;
      height:100%;
    }

    /* ‡πÅ‡∏ú‡∏á Quest */
    .quest-panel{
      width:270px;
      max-width:40%;
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .card{
      background:linear-gradient(145deg,var(--panel-soft),var(--panel));
      border-radius:16px;
      padding:10px 11px;
      border:1px solid rgba(148,163,184,0.6);
      box-shadow:0 18px 30px rgba(15,23,42,0.85);
      font-size:12px;
    }
    .card h3{
      font-size:12px;
      font-weight:600;
      margin-bottom:4px;
      display:flex;
      align-items:center;
      gap:6px;
    }
    .card h3 span.icon{font-size:15px;}
    .card .line{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:6px;
      margin-top:2px;
    }
    .card .label{
      color:var(--muted);
      font-size:11px;
    }
    .card .value{
      font-weight:600;
    }
    .card .hint{
      margin-top:4px;
      font-size:11px;
      color:var(--muted);
    }
    .progress{
      margin-top:4px;
      width:100%;
      height:6px;
      border-radius:999px;
      background:#020617;
      overflow:hidden;
    }
    .progress .bar{
      height:100%;
      width:0%;
      border-radius:999px;
      background:linear-gradient(90deg,var(--accent),#4ade80);
      transition:width .25s ease-out;
    }

    /* Panel ‡∏™‡∏£‡∏∏‡∏õ‡∏ï‡∏≠‡∏ô‡∏à‡∏ö */
    .end-panel{
      position:absolute;
      inset:0;
      background:radial-gradient(circle at top,rgba(15,23,42,0.9),rgba(15,23,42,0.97));
      display:flex;
      justify-content:center;
      align-items:center;
      z-index:20;
      padding:16px;
      opacity:0;
      pointer-events:none;
      transition:opacity .3s ease-out;
    }
    .end-panel.active{
      opacity:1;
      pointer-events:auto;
    }
    .end-card{
      max-width:420px;
      width:100%;
      background:rgba(15,23,42,0.98);
      border-radius:18px;
      border:1px solid rgba(148,163,184,0.8);
      padding:16px 16px 14px;
      box-shadow:0 26px 60px rgba(0,0,0,0.95);
      font-size:13px;
    }
    .end-card h2{
      font-size:16px;
      margin-bottom:4px;
      display:flex;
      align-items:center;
      gap:8px;
    }
    .end-card h2 span.emoji{font-size:22px;}
    .end-card .sub{
      font-size:11px;
      color:var(--muted);
      margin-bottom:10px;
    }
    .end-grid{
      display:grid;
      grid-template-columns:repeat(2,minmax(0,1fr));
      gap:6px 12px;
    }
    .end-item{
      font-size:11px;
      color:var(--muted);
    }
    .end-item strong{
      color:var(--text);
      font-size:12px;
    }
    .end-actions{
      margin-top:10px;
      display:flex;
      justify-content:space-between;
      gap:8px;
      font-size:11px;
      color:var(--muted);
    }
    .btn{
      border:none;
      border-radius:999px;
      padding:6px 12px;
      font-size:12px;
      font-weight:500;
      cursor:pointer;
      background:linear-gradient(135deg,var(--accent),#4ade80);
      color:#022c22;
      box-shadow:0 14px 26px rgba(34,197,94,0.5);
      display:inline-flex;
      align-items:center;
      gap:6px;
    }
    .btn span.emoji{font-size:15px;}
    .btn:active{
      transform:translateY(1px);
      box-shadow:0 10px 18px rgba(34,197,94,0.6);
    }

    /* loading ‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠ */
    .loading-banner{
      position:absolute;
      left:50%;
      top:50%;
      transform:translate(-50%,-50%);
      padding:6px 12px;
      border-radius:999px;
      background:rgba(15,23,42,0.9);
      border:1px solid rgba(148,163,184,0.8);
      font-size:12px;
      color:var(--muted);
      display:flex;
      align-items:center;
      gap:8px;
      z-index:15;
      pointer-events:none;
    }

    footer.hha-foot{
      padding:4px 10px 6px;
      font-size:10px;
      color:var(--muted);
      text-align:center;
    }

    @media (max-width:900px){
      .hud-main{
        flex-direction:column;
      }
      .quest-panel{
        width:100%;
        max-width:none;
        order:-1;
        flex-direction:row;
        flex-wrap:wrap;
      }
      .quest-panel .card{
        flex:1 1 160px;
      }
    }

    @media (max-width:600px){
      header.hha-bar{
        flex-direction:column;
        align-items:flex-start;
      }
    }
  </style>
</head>
<body>
<div class="app-wrap">
  <header class="hha-bar">
    <div>
      <div class="hha-title">
        <span class="emoji">üíß</span>
        <span>Hero Health ‚Äì Hydration VR</span>
      </div>
      <div class="hha-sub">
        ‡∏ù‡∏∂‡∏Å‡∏™‡∏°‡∏î‡∏∏‡∏•‡∏Å‡∏≤‡∏£‡∏î‡∏∑‡πà‡∏°‡∏ô‡πâ‡∏≥ + ‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à GREEN Zone ‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏ß‡∏™‡∏ï‡πå‡∏¢‡πà‡∏≠‡∏¢‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢
      </div>
    </div>
    <div class="hha-bar-right">
      <div id="hud-diff-pill" class="pill badge-normal">
        üéØ ‡πÇ‡∏´‡∏°‡∏î: <strong id="hud-diff-label">Normal</strong>
      </div>
      <div class="pill">
        ‚è± ‡πÄ‡∏ß‡∏•‡∏≤ <strong id="hud-timer">‚Äì</strong>
      </div>
      <div class="pill">
        ‚≠ê ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô <strong id="hud-score">0</strong>
      </div>
    </div>
  </header>

  <main class="hud-main">
    <!-- VR viewport -->
    <section class="vr-shell">
      <!-- Loading text -->
      <div id="hud-loading" class="loading-banner">
        <span class="emoji">‚è≥</span>
        <span>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏â‡∏≤‡∏Å Hydration VR...</span>
      </div>

      <!-- A-Frame scene -->
      <a-scene
        id="hydration-scene"
        renderer="antialias:true; colorManagement:true"
        vr-mode-ui="enabled: true"
        cursor="rayOrigin: mouse"
        embedded>
        <a-entity position="0 1.6 0">
          <a-entity
            camera
            look-controls="pointerLockEnabled: false"
          ></a-entity>
        </a-entity>

        <!-- ‡πÅ‡∏™‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢ -->
        <a-entity light="type:ambient; intensity:0.6; color:#ffffff"></a-entity>
        <a-entity light="type:directional; intensity:0.6; color:#ffffff" position="0 2 -1"></a-entity>

        <!-- ‡∏û‡∏∑‡πâ‡∏ô‡∏™‡∏µ‡πÄ‡∏Ç‡πâ‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏ö ‡πÜ -->
        <a-plane
          position="0 0 -3"
          rotation="-90 0 0"
          width="10"
          height="10"
          color="#020617">
        </a-plane>
      </a-scene>

      <!-- Panel ‡∏™‡∏£‡∏∏‡∏õ‡∏ï‡∏≠‡∏ô‡∏à‡∏ö -->
      <div id="end-panel" class="end-panel">
        <div class="end-card">
          <h2>
            <span class="emoji">üìä</span>
            <span>‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡πÇ‡∏´‡∏°‡∏î Hydration</span>
          </h2>
          <div class="sub" id="end-sub">
            ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏£‡∏≠‡∏ö‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡∏î‡πâ‡∏≤‡∏ô‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏î‡∏∑‡πà‡∏°‡∏ô‡πâ‡∏≥
          </div>

          <div class="end-grid">
            <div class="end-item">
              ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°<br/>
              <strong id="end-score">0</strong>
            </div>
            <div class="end-item">
              ‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î<br/>
              <strong id="end-combo">0</strong>
            </div>
            <div class="end-item">
              ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏û‡∏•‡∏≤‡∏î<br/>
              <strong id="end-miss">0</strong>
            </div>
            <div class="end-item">
              ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏•‡πà‡∏ô (s)<br/>
              <strong id="end-duration">0</strong>
            </div>
            <div class="end-item">
              ‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏ô GREEN (s)<br/>
              <strong id="end-green">0</strong>
            </div>
            <div class="end-item">
              ‡πÄ‡∏Ñ‡∏ß‡∏™‡∏ï‡πå‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à<br/>
              <strong id="end-goals">0 / 0</strong>
            </div>
            <div class="end-item">
              Mini quest ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à<br/>
              <strong id="end-minis">0 / 0</strong>
            </div>
            <div class="end-item">
              ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ô‡πâ‡∏≥‡∏ï‡∏≠‡∏ô‡∏à‡∏ö<br/>
              <strong id="end-water">‚Äì</strong>
            </div>
          </div>

          <div class="end-actions">
            <button class="btn" id="btn-restart">
              <span class="emoji">üîÅ</span>
              ‡πÄ‡∏•‡πà‡∏ô‡∏£‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà
            </button>
            <div>
              ‡πÇ‡∏´‡∏°‡∏î: <strong id="end-mode-label">hydration / normal</strong>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Quest / HUD panel -->
    <aside class="quest-panel">
      <div class="card">
        <h3><span class="icon">üéØ</span>Goal ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</h3>
        <div class="line">
          <div class="label" id="goal-label">‚Äì</div>
          <div class="value" id="goal-progress">0 / 0</div>
        </div>
        <div class="progress">
          <div id="goal-bar" class="bar"></div>
        </div>
        <div class="hint" id="goal-hint"></div>
      </div>

      <div class="card">
        <h3><span class="icon">üß©</span>Mini quest</h3>
        <div class="line">
          <div class="label" id="mini-label">‚Äì</div>
          <div class="value" id="mini-progress">0 / 0</div>
        </div>
        <div class="progress">
          <div id="mini-bar" class="bar"></div>
        </div>
        <div class="hint" id="mini-hint"></div>
      </div>

      <div class="card">
        <h3><span class="icon">üíß</span>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ô‡πâ‡∏≥ & ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö</h3>
        <div class="line">
          <div class="label">‡πÇ‡∏ã‡∏ô‡∏ô‡πâ‡∏≥:</div>
          <div class="value" id="hud-zone">‚Äì</div>
        </div>
        <div class="line">
          <div class="label">MISS:</div>
          <div class="value" id="hud-miss">0</div>
        </div>
        <div class="hint" id="hud-hint">
          ‚Äì
        </div>
      </div>
    </aside>
  </main>

  <footer class="hha-foot">
    URL param ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö: <code>?diff=easy|normal|hard&amp;time=60</code> ¬∑ ‡πÇ‡∏´‡∏°‡∏î‡∏ß‡∏¥‡∏à‡∏±‡∏¢ Hydration ‚Äì Hero Health
  </footer>
</div>

<script type="module">
    import hydrationMode from './hydration.safe.js';
  const url = new URL(window.location.href);
  const diffParam = (url.searchParams.get('diff') || 'normal').toLowerCase();
  const timeParam = parseInt(url.searchParams.get('time') || url.searchParams.get('duration') || '60', 10);
  let duration = timeParam;
  if (isNaN(duration) || duration <= 0) duration = 60;
  if (duration < 20) duration = 20;
  if (duration > 180) duration = 180;

  // HUD elements
  const elDiffPill   = document.getElementById('hud-diff-pill');
  const elDiffLabel  = document.getElementById('hud-diff-label');
  const elTimer      = document.getElementById('hud-timer');
  const elScore      = document.getElementById('hud-score');
  const elMiss       = document.getElementById('hud-miss');
  const elZone       = document.getElementById('hud-zone');
  const elHint       = document.getElementById('hud-hint');
  const elLoading    = document.getElementById('hud-loading');

  const elGoalLabel   = document.getElementById('goal-label');
  const elGoalProg    = document.getElementById('goal-progress');
  const elGoalBar     = document.getElementById('goal-bar');
  const elGoalHint    = document.getElementById('goal-hint');

  const elMiniLabel   = document.getElementById('mini-label');
  const elMiniProg    = document.getElementById('mini-progress');
  const elMiniBar     = document.getElementById('mini-bar');
  const elMiniHint    = document.getElementById('mini-hint');

  const endPanel      = document.getElementById('end-panel');
  const endScore      = document.getElementById('end-score');
  const endCombo      = document.getElementById('end-combo');
  const endMiss       = document.getElementById('end-miss');
  const endDuration   = document.getElementById('end-duration');
  const endGreen      = document.getElementById('end-green');
  const endGoals      = document.getElementById('end-goals');
  const endMinis      = document.getElementById('end-minis');
  const endWater      = document.getElementById('end-water');
  const endModeLabel  = document.getElementById('end-mode-label');
  const btnRestart    = document.getElementById('btn-restart');

  function setDiffBadge(diff) {
    elDiffPill.classList.remove('badge-easy','badge-normal','badge-hard');
    if (diff === 'easy') elDiffPill.classList.add('badge-easy');
    else if (diff === 'hard') elDiffPill.classList.add('badge-hard');
    else elDiffPill.classList.add('badge-normal');

    const labelMap = { easy:'Easy', normal:'Normal', hard:'Hard' };
    elDiffLabel.textContent = labelMap[diff] || 'Normal';
  }

  setDiffBadge(diffParam);

  // ===== ‡∏ü‡∏±‡∏á quest:update ‡∏à‡∏≤‡∏Å hydration.safe.js =====
  window.addEventListener('quest:update', (e) => {
    const d = e.detail || {};
    const goal = d.goal || null;
    const mini = d.mini || null;
    const goalsAll = d.goalsAll || [];
    const minisAll = d.minisAll || [];
    const hint = d.hint || '';

    // goal ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
    if (goal) {
      const cur = goal.progress || 0;
      const tgt = goal.target  || 0;
      elGoalLabel.textContent = goal.label || '‚Äì';
      elGoalProg.textContent  = `${cur} / ${tgt}`;
      const pct = tgt > 0 ? Math.min(100, Math.max(0, (cur / tgt) * 100)) : 0;
      elGoalBar.style.width = pct + '%';
    } else {
      elGoalLabel.textContent = '‚Äì';
      elGoalProg.textContent  = '0 / 0';
      elGoalBar.style.width   = '0%';
    }

    // mini quest
    if (mini) {
      const cur = mini.progress || 0;
      const tgt = mini.target  || 0;
      elMiniLabel.textContent = mini.label || '‚Äì';
      elMiniProg.textContent  = `${cur} / ${tgt}`;
      const pct = tgt > 0 ? Math.min(100, Math.max(0, (cur / tgt) * 100)) : 0;
      elMiniBar.style.width = pct + '%';
    } else {
      elMiniLabel.textContent = '‚Äì';
      elMiniProg.textContent  = '0 / 0';
      elMiniBar.style.width   = '0%';
    }

    // hint / ‡πÇ‡∏ã‡∏ô‡∏ô‡πâ‡∏≥
    elHint.textContent = hint || '‚Äì';

    // ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏î‡∏∂‡∏á zone ‡∏à‡∏≤‡∏Å hint ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ field zone ‡πÅ‡∏¢‡∏Å
    if (hint && hint.includes('‡πÇ‡∏ã‡∏ô‡∏ô‡πâ‡∏≥:')) {
      elZone.textContent = hint.split('‡πÇ‡∏ã‡∏ô‡∏ô‡πâ‡∏≥:').pop().trim();
    }
  });

  // ===== ‡∏ü‡∏±‡∏á‡πÄ‡∏ß‡∏•‡∏≤ hha:time (‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á) =====
  window.addEventListener('hha:time', (e) => {
    const sec = (e.detail && typeof e.detail.sec === 'number')
      ? e.detail.sec
      : (e.detail?.sec | 0);

    if (sec >= 0) {
      elTimer.textContent = sec + 's';
    }
  });

  // ===== ‡∏ü‡∏±‡∏á‡∏ï‡∏≠‡∏ô‡∏à‡∏ö‡πÄ‡∏Å‡∏° hha:end =====
  window.addEventListener('hha:end', (e) => {
    const d = e.detail || {};

    const score     = d.score       ?? 0;
    const comboMax  = d.comboMax    ?? 0;
    const misses    = d.misses      ?? 0;
    const dur       = d.duration    ?? duration;
    const greenTick = d.greenTick   ?? 0;

    const goalsCleared = d.goalsCleared ?? 0;
    const goalsTotal   = d.goalsTotal   ?? 0;
    const miniCleared  = d.questsCleared ?? 0;
    const miniTotal    = d.questsTotal   ?? 0;

    const waterStart   = d.waterStart ?? null;
    const waterEnd     = d.waterEnd   ?? null;
    const waterZoneEnd = d.waterZoneEnd || '-';

    endScore.textContent  = score;
    endCombo.textContent  = comboMax;
    endMiss.textContent   = misses;
    endDuration.textContent = dur;
    endGreen.textContent  = greenTick;

    endGoals.textContent  = `${goalsCleared} / ${goalsTotal}`;
    endMinis.textContent  = `${miniCleared} / ${miniTotal}`;

    if (waterEnd != null && waterStart != null) {
      endWater.textContent = `${waterEnd}% (${waterZoneEnd})`;
    } else if (waterZoneEnd) {
      endWater.textContent = waterZoneEnd;
    } else {
      endWater.textContent = '‚Äì';
    }

    const modeLabel = (d.modeLabel || d.mode || 'hydration') + ' / ' + (d.difficulty || diffParam);
    endModeLabel.textContent = modeLabel;

    endPanel.classList.add('active');
  });

  // ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà = reload ‡∏´‡∏ô‡πâ‡∏≤ (‡∏£‡∏±‡∏Å‡∏©‡∏≤ query param ‡πÄ‡∏î‡∏¥‡∏°)
  btnRestart.addEventListener('click', () => {
    window.location.reload();
  });

  // ===== Boot ‡πÇ‡∏´‡∏°‡∏î Hydration =====
  (async () => {
    try {
      await hydrationMode.boot({
        difficulty: diffParam,
        duration
      });
      if (elLoading) elLoading.style.display = 'none';
    } catch (err) {
      console.error('Hydration boot error:', err);
      if (elLoading) {
        elLoading.innerHTML = '<span class="emoji">‚ö†Ô∏è</span><span>‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏´‡∏°‡∏î Hydration</span>';
      }
    }
  })();
</script>
</body>
</html>
