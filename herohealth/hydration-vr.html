<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>HeroHealth ‚Äî Hydration VR</title>
  <meta name="color-scheme" content="dark" />
  <link rel="icon" href="./favicon.ico" type="image/x-icon" />

  <!-- CSS -->
  <link rel="stylesheet" href="./hydration-vr/hydration-vr.css" />

  <!-- A-Frame (Enter VR reliability for vr-ui) -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

  <!-- Global FX + Cloud Logger + Universal VR UI -->
  <script src="./vr/particles.js" defer></script>
  <script src="./vr/hha-cloud-logger.js" defer></script>
  <script src="./vr/vr-ui.js" defer></script>

  <!-- Boot (auto detect) -->
  <script type="module" src="./hydration-vr/hydration-vr.boot.js"></script>

  <!-- Game SAFE -->
  <script type="module" src="./hydration-vr/hydration.safe.js"></script>
</head>

<body class="view-auto">
  <!-- Minimal A-Frame scene (hidden) to keep WebXR entry stable -->
  <a-scene
    embedded
    renderer="antialias: true; alpha: true;"
    xr-mode-ui="enabled: false"
    style="position:fixed; inset:0; width:1px; height:1px; opacity:0; pointer-events:none;">
    <a-entity camera position="0 1.6 0"></a-entity>
  </a-scene>

  <!-- Crosshair for cVR -->
  <div class="crosshair" aria-hidden="true"></div>

  <!-- Playfield single -->
  <div id="playfield">
    <div id="hydration-layer" aria-label="hydration-layer"></div>
  </div>

  <!-- Cardboard split -->
  <div id="cbPlayfield">
    <div class="cbHalf left">
      <div id="hydration-layerL" class="cbLayer"></div>
    </div>
    <div class="cbHalf right">
      <div id="hydration-layerR" class="cbLayer"></div>
    </div>
  </div>

  <!-- HUD -->
  <div class="hud">
    <!-- Stats panel -->
    <div class="panel" style="grid-column:1; grid-row:1;">
      <div class="statGrid">
        <div class="statBox"><div class="k">SCORE</div><div class="v" id="stat-score">0</div></div>
        <div class="statBox"><div class="k">TIME</div><div class="v"><span id="stat-time">0</span>s</div></div>
        <div class="statBox"><div class="k">COMBO</div><div class="v" id="stat-combo">0</div></div>
        <div class="statBox"><div class="k">MISS</div><div class="v" id="stat-miss">0</div></div>
        <div class="statBox"><div class="k">GRADE</div><div class="v" id="stat-grade">C</div></div>
        <div class="statBox"><div class="k">SHIELD</div><div class="v"><span id="shield-count">0</span></div></div>
      </div>

      <div class="miniRow">
        <div class="pill">üåÄ Storm <b id="storm-left">0</b>s</div>
      </div>
    </div>

    <!-- Quest panel -->
    <div class="panel" style="grid-column:2; grid-row:1;">
      <div class="questTitle">üéØ ‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à</div>
      <div class="questLine" id="quest-line1">‚Äî</div>
      <div class="questLine muted" id="quest-line2">‚Äî</div>
      <div class="questLine" id="quest-line3">‚Äî</div>
      <div class="questLine muted" id="quest-line4">‚Äî</div>
    </div>

    <!-- Water panel (extra detail; main gauge also appears bottom-right) -->
    <div class="panel waterPanel" style="grid-column:2; grid-row:2;">
      <div class="top">
        <div>
          <h3>üíß Water Balance</h3>
          <div class="zone">ZONE: <b id="water-zone">GREEN</b> ‚Ä¢ <span id="water-pct">50</span>%</div>
        </div>
        <div class="pill">Tip: ‡∏Ñ‡∏∏‡∏° GREEN ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° Storm</div>
      </div>
      <div class="barWrap"><div id="water-bar"></div></div>
      <div class="waterTip">Storm Mini: ‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å GREEN ‚Üí LOW/HIGH ‡πÅ‡∏•‡πâ‡∏ß BLOCK ‡∏ä‡πà‡∏ß‡∏á‡∏ó‡πâ‡∏≤‡∏¢</div>
    </div>

    <!-- empty spacer -->
    <div style="grid-column:1; grid-row:2;"></div>
  </div>

  <!-- Start overlay -->
  <div id="startOverlay">
    <div class="card">
      <div class="header">
        <div class="logo">üíß</div>
        <div>
          <h1 class="title">Hydration VR</h1>
          <p class="sub">
‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥: PC / Mobile / cVR strict / Cardboard Split
‚Ä¢ cVR strict: ‡∏¢‡∏¥‡∏á‡∏à‡∏≤‡∏Å crosshair (‡πÅ‡∏ï‡∏∞‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏¥‡∏á)
‚Ä¢ Cardboard: ‡∏Å‡∏î ‚õ∂ Fullscreen "‡∏™‡∏≠‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏£‡πá‡∏ß ‡πÜ" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏•‡∏±‡∏ö split
          </p>
        </div>
      </div>

      <div class="btnRow">
        <button class="btn primary" id="btnStart">‚ñ∂ Start</button>
        <button class="btn warn" id="btnEnterFull">‚õ∂ Fullscreen (VR Feel)</button>
        <button class="btn btnBackHub">‚Ü© ‡∏Å‡∏•‡∏±‡∏ö HUB</button>
      </div>

      <div class="note">
‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à 3 Stage:
1) ‡∏Ñ‡∏∏‡∏° GREEN ‡πÉ‡∏´‡πâ‡∏™‡∏∞‡∏™‡∏°‡∏Ñ‡∏£‡∏ö
2) ‡∏ú‡πà‡∏≤‡∏ô Storm Mini ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏û‡∏≤‡∏¢‡∏∏ (LOW/HIGH + BLOCK ‡∏ó‡πâ‡∏≤‡∏¢‡∏û‡∏≤‡∏¢‡∏∏)
3) ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå BOSS (BLOCK üå©Ô∏è ‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡πÉ‡∏ô Boss Window)
      </div>
    </div>
  </div>

  <!-- Result Summary -->
  <div id="resultBackdrop" hidden>
    <div class="resultCard">
      <div class="resultTop">
        <h2>‚úÖ ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô</h2>
        <div class="btnRow" style="margin:0; gap:8px;">
          <button class="btn" id="btnCopyJSON">Copy JSON</button>
          <button class="btn" id="btnDownloadCSV">Download CSV</button>
          <button class="btn" id="btnRetry">Retry</button>
          <button class="btn btnBackHub">Back HUB</button>
          <button class="btn" id="btnCloseSummary">Close</button>
        </div>
      </div>

      <div class="resultGrid">
        <div class="panel">
          <div class="kv"><div class="k2">Score</div><div class="v2" id="rScore">0</div></div>
          <div class="kv"><div class="k2">Grade</div><div class="v2" id="rGrade">C</div></div>
          <div class="kv"><div class="k2">Accuracy</div><div class="v2" id="rAcc">0%</div></div>
          <div class="kv"><div class="k2">Combo Max</div><div class="v2" id="rComboMax">0</div></div>
          <div class="kv"><div class="k2">Miss</div><div class="v2" id="rMiss">0</div></div>
          <div class="kv"><div class="k2">Tier</div><div class="v2" id="rTier">‚Äî</div></div>
        </div>

        <div class="panel">
          <div class="kv"><div class="k2">Goals</div><div class="v2" id="rGoals">0/0</div></div>
          <div class="kv"><div class="k2">Mini (Storm)</div><div class="v2" id="rMinis">0/0</div></div>
          <div class="kv"><div class="k2">GREEN Hold</div><div class="v2" id="rGreen">0.0s</div></div>
          <div class="kv"><div class="k2">Streak Max</div><div class="v2" id="rStreak">0</div></div>
          <div class="kv"><div class="k2">Storm Cycles</div><div class="v2" id="rStormCycles">0</div></div>
          <div class="kv"><div class="k2">Storm Pass</div><div class="v2" id="rStormOk">0</div></div>
          <div class="kv"><div class="k2">Storm Rate</div><div class="v2" id="rStormRate">0%</div></div>
        </div>
      </div>

      <div class="panel" style="margin-top:12px;">
        <div class="questTitle">üß† AI Coach Tips</div>
        <pre id="rTips">‚Äî</pre>
        <div class="questLine muted">Next focus: <b id="rNext">‚Äî</b></div>
      </div>
    </div>
  </div>
</body>
</html>