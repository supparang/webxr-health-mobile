<!-- === /herohealth/hydration-vr.html ===
Hydration VR â€” ROOT ENTRY (PRODUCTION) vNext
âœ… à¸¡à¸µà¸•à¸±à¸§à¹€à¸¥à¸·à¸­à¸à¹‚à¸«à¸¡à¸”à¸Šà¸±à¸”à¹€à¸ˆà¸™ PC / Mobile / VR Cardboard
âœ… à¸à¸±à¸™à¹€à¸”à¹‰à¸‡à¹„à¸› Summary à¹€à¸­à¸‡ (force-hide resultBackdrop on load)
âœ… à¹ƒà¸Šà¹‰à¹„à¸Ÿà¸¥à¹Œà¹à¸¢à¸à¹ƒà¸™ /hydration-vr/ + loader à¹€à¸›à¹‡à¸™à¸•à¸±à¸§à¸„à¸¸à¸¡ view
âœ… à¹‚à¸«à¸¥à¸” global FX + logger + coach-manager
-->

<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>HeroHealth â€” Hydration VR</title>
  <meta name="color-scheme" content="dark" />
  <link rel="icon" href="./favicon.ico" />

  <!-- Global FX + logger (optional) -->
  <script src="./vr/particles.js" defer></script>
  <script src="./vr/hha-cloud-logger.js" defer></script>

  <!-- Coach auto image (hydration-*) -->
  <script src="./vr/coach-manager.js" defer></script>

  <!-- Hydration CSS -->
  <link rel="stylesheet" href="./hydration-vr/hydration-vr.css" />

  <!-- HARDEN: ensure Summary not auto-visible -->
  <script>
    (function(){
      try{
        // force-hide summary on initial load (prevents "open from hub -> summary 0")
        const hide = ()=> {
          const bd = document.getElementById('resultBackdrop');
          if (bd) bd.hidden = true;
        };
        document.addEventListener('DOMContentLoaded', hide);
        window.addEventListener('pageshow', hide);
      }catch(_){}
    })();
  </script>
</head>

<body class="view-pc">
  <!-- Start Overlay (MODE SELECT) -->
  <div id="startOverlay" class="hha-overlay">
    <div class="hha-overlay-card">
      <div class="hha-title">Hydration VR ğŸ’§</div>
      <div class="hha-sub">
        à¹€à¸›à¹‰à¸²à¸«à¸¡à¸²à¸¢: à¸„à¸¸à¸¡ WATER à¹ƒà¸«à¹‰à¹€à¸‚à¹‰à¸²à¹‚à¸‹à¸™ <b>GREEN</b> (à¸ªà¸°à¸ªà¸¡) à¹à¸¥à¸°à¹€à¸à¹‡à¸š ğŸ›¡ï¸ à¹€à¸à¸·à¹ˆà¸­ <b>BLOCK</b> à¸Šà¹ˆà¸§à¸‡à¸—à¹‰à¸²à¸¢à¸à¸²à¸¢à¸¸
      </div>

      <div class="hha-overlay-actions">
        <!-- PC / Mobile start (same start, loader picks view automatically) -->
        <button id="btnStart" class="hha-btn primary">ğŸ–¥ï¸/ğŸ“± à¹€à¸£à¸´à¹ˆà¸¡à¹€à¸¥à¹ˆà¸™ (PC/Mobile)</button>

        <!-- Cardboard -->
        <button id="btnEnterVR" class="hha-btn">ğŸ•¶ï¸ à¹€à¸¥à¹ˆà¸™à¹‚à¸«à¸¡à¸” VR (Cardboard)</button>
      </div>

      <div class="hha-hint">
        â€¢ à¸–à¹‰à¸²à¹€à¸¥à¹ˆà¸™ VR: à¹à¸™à¸°à¸™à¸³à¸«à¸¡à¸¸à¸™à¸ˆà¸­à¹à¸™à¸§à¸™à¸­à¸™à¸à¹ˆà¸­à¸™ à¹à¸¥à¹‰à¸§à¸à¸” â€œVR (Cardboard)â€<br/>
        â€¢ à¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡à¹€à¸¥à¹ˆà¸™: à¸à¸” â€œğŸ“¦ CARDBOARDâ€ à¸ªà¸¥à¸±à¸šà¹‚à¸«à¸¡à¸”à¹„à¸”à¹‰
      </div>
    </div>
  </div>

  <!-- HUD TOP -->
  <div id="hudTop" class="hha-top">
    <div class="hha-pill"><span>â± TIME</span><b id="stat-time">0</b></div>
    <div class="hha-pill"><span>ğŸ† SCORE</span><b id="stat-score">0</b></div>
    <div class="hha-pill"><span>âš¡ COMBO</span><b id="stat-combo">0</b></div>
    <div class="hha-pill"><span>ğŸ’¥ MISS</span><b id="stat-miss">0</b></div>
    <div class="hha-pill"><span>ğŸ– GRADE</span><b id="stat-grade">C</b></div>
    <div class="hha-pill"><span>ğŸŒ€ STORM</span><b id="storm-left">0</b></div>
    <div class="hha-pill"><span>ğŸ›¡ SHIELD</span><b id="shield-count">0</b></div>
  </div>

  <!-- MAIN -->
  <main class="hha-main">
    <!-- NORMAL PLAYFIELD -->
    <section id="playfield" class="hha-playfield" aria-label="playfield-normal">
      <div id="hydration-layer" class="hha-layer"></div>
      <div class="hha-crosshair" aria-hidden="true"></div>
    </section>

    <!-- CARDBOARD PLAYFIELD -->
    <section id="cbPlayfield" class="hha-playfield cb" aria-label="playfield-cardboard">
      <div class="cb-eyes">
        <div class="eye">
          <div id="hydration-layerL" class="hha-layer"></div>
          <div class="reticle" aria-hidden="true"></div>
        </div>
        <div class="eye">
          <div id="hydration-layerR" class="hha-layer"></div>
          <div class="reticle" aria-hidden="true"></div>
        </div>
      </div>
    </section>

    <!-- SIDE PANEL -->
    <aside class="hha-side">
      <div class="hha-card" id="water-panel">
        <h3>ğŸ’§ Water Gauge <small>(0â€“100)</small></h3>
        <div class="water-gauge"><div id="water-bar"></div></div>
        <div class="water-meta">
          <div>Zone <b id="water-zone">GREEN</b></div>
          <div><b id="water-pct">50</b>%</div>
        </div>
        <div class="muted">Goal: GREEN (à¸ªà¸°à¸ªà¸¡) â€¢ Mini: LOW/HIGH + BLOCK (End Window)</div>
      </div>

      <div class="hha-card">
        <h3>ğŸ§© Quest</h3>
        <div id="quest-line1">...</div>
        <div id="quest-line2" class="muted">...</div>
        <div id="quest-line3">...</div>
        <div id="quest-line4" class="muted">...</div>
      </div>

      <div class="hha-card">
        <h3>ğŸ§  Coach</h3>
        <div class="coachRow">
          <img id="coach-img" alt="coach" />
          <div class="coachText">
            <div id="coach-text">à¹€à¸¥à¹‡à¸‡à¸à¸¥à¸²à¸‡à¸ˆà¸­ à¹à¸¥à¹‰à¸§à¸„à¹ˆà¸­à¸¢à¸¢à¸´à¸‡ ğŸ’§</div>
            <div id="coach-sub">Tip: à¹€à¸à¹‡à¸š ğŸ›¡ï¸ à¸à¹ˆà¸­à¸™à¸à¸²à¸¢à¸¸</div>
          </div>
        </div>
      </div>
    </aside>
  </main>

  <!-- BOTTOM CONTROLS -->
  <div id="hudBtns" class="hha-bottom">
    <button class="hha-btn" id="btnCardboard">ğŸ“¦ CARDBOARD</button>
    <button class="hha-btn primary" id="btnShoot">ğŸ¯ SHOOT</button>
    <button class="hha-btn danger" id="btnStop">â›” STOP</button>
  </div>

  <!-- SUMMARY -->
  <div id="resultBackdrop" class="hha-result" hidden>
    <div class="hha-result-panel">
      <div class="hha-result-top">
        <h2>ğŸ Summary</h2>
        <div class="hha-result-actions">
          <button class="hha-btn" id="btnRetry">ğŸ” Retry</button>
          <button class="hha-btn" id="btnBackHub">ğŸ  Back HUB</button>
          <button class="hha-btn" id="btnCopyJSON">ğŸ“‹ Copy JSON</button>
          <button class="hha-btn" id="btnDownloadCSV">â¬‡ï¸ Download CSV</button>
        </div>
      </div>

      <div class="hha-grid">
        <div class="tile"><div class="lab">Score</div><div class="val" id="rScore">0</div></div>
        <div class="tile"><div class="lab">Grade</div><div class="val" id="rGrade">C</div></div>
        <div class="tile"><div class="lab">Accuracy</div><div class="val" id="rAcc">0%</div></div>

        <div class="tile"><div class="lab">Combo Max</div><div class="val" id="rComboMax">0</div></div>
        <div class="tile"><div class="lab">Miss</div><div class="val" id="rMiss">0</div></div>
        <div class="tile"><div class="lab">Goals</div><div class="val" id="rGoals">0/0</div></div>

        <div class="tile"><div class="lab">Minis</div><div class="val" id="rMinis">0/0</div></div>
        <div class="tile"><div class="lab">Time in GREEN</div><div class="val" id="rGreen">0.0s</div></div>
        <div class="tile"><div class="lab">Streak Max</div><div class="val" id="rStreak">0</div></div>

        <div class="tile"><div class="lab">Storm Cycles</div><div class="val" id="rStormCycles">0</div></div>
        <div class="tile"><div class="lab">Storm Success</div><div class="val" id="rStormOk">0</div></div>
        <div class="tile"><div class="lab">Storm Rate</div><div class="val" id="rStormRate">0%</div></div>
      </div>

      <div class="hha-tipsRow">
        <div class="tile">
          <div class="lab">AI Tips</div>
          <div class="tips" id="rTips">â€¢ ...</div>
        </div>
        <div class="tile">
          <div class="lab">Next Focus</div>
          <div class="val" id="rNext">...</div>
          <div class="muted" id="rTier">Tier: ...</div>
        </div>
      </div>

      <div class="hha-closeRow">
        <button class="hha-btn" id="btnCloseSummary">à¸›à¸´à¸”</button>
      </div>
    </div>
  </div>

  <!-- LOADER (imports hydration.safe.js inside) -->
  <script type="module" src="./hydration-vr/hydration-vr.loader.js"></script>
</body>
</html>