<!-- === /herohealth/hydration-vr.html ===
HydrationVR LAUNCHER — ROOT
✅ Redirects to ./hydration-vr/hydration-vr.html
✅ Auto-detect view if NOT provided (pc/mobile)
✅ DO NOT override if ?view= exists
✅ Pass-through: hub/run/diff/time/seed/sessionId/log/...
-->
<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>HeroHealth — Hydration VR (Launcher)</title>
  <meta name="color-scheme" content="dark" />
  <link rel="icon" href="./favicon.ico" />
  <style>
    :root{ color-scheme:dark; --bg:#020617; --text:#e5e7eb; --muted:#94a3b8; }
    html,body{ margin:0; height:100%; background:var(--bg); color:var(--text); font-family:system-ui; }
    .wrap{ height:100%; display:grid; place-items:center; padding:18px; }
    .card{ width:min(860px,100%); border:1px solid rgba(148,163,184,.18); border-radius:22px;
      background:rgba(2,6,23,.72); box-shadow:0 24px 90px rgba(0,0,0,.55); padding:16px; }
    .t{ font-weight:900; font-size:16px; margin:0 0 6px 0; }
    .p{ margin:0; color:var(--muted); line-height:1.45; font-size:13px; white-space:pre-line; }
    .small{ margin-top:10px; font-size:12px; color:rgba(229,231,235,.85); }
    code{ color:#e5e7eb; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <p class="t">Hydration VR — กำลังพาเข้าเกม…</p>
      <p class="p" id="msg">กำลังตรวจอุปกรณ์และตั้งค่า view…</p>
      <div class="small">ถ้าค้าง ให้ลองเปิดลิงก์เดิมใหม่ หรือใส่ <code>?view=pc</code> / <code>?view=mobile</code> / <code>?view=cardboard</code> / <code>?view=cvr</code></div>
    </div>
  </div>

  <script>
  (function(){
    const qs = (k,d=null)=>{ try{ return new URL(location.href).searchParams.get(k) ?? d; }catch(_){ return d; } };

    function detectView(){
      // เคารพ ?view= ที่มากับลิงก์
      const forced = String(qs('view','')).toLowerCase();
      if (forced) return forced;

      // auto: pc vs mobile
      const ua = navigator.userAgent || '';
      const isTouch = ('ontouchstart' in window) || (navigator.maxTouchPoints>0);
      const isSmall = Math.min(screen.width, screen.height) <= 860;
      const isMobileUA = /Android|iPhone|iPad|iPod/i.test(ua);
      if (isMobileUA || (isTouch && isSmall)) return 'mobile';
      return 'pc';
    }

    const view = detectView();
    const u = new URL(location.href);

    // ปลายทางคือ folder hydration-vr/
    const dest = new URL('./hydration-vr/hydration-vr.html', u);

    // pass-through ทุกพารามิเตอร์เดิม
    u.searchParams.forEach((v,k)=> dest.searchParams.set(k, v));

    // ตั้ง view ถ้ายังไม่มี
    if (!dest.searchParams.get('view')) dest.searchParams.set('view', view);

    // cache bust
    if (!dest.searchParams.get('ts')) dest.searchParams.set('ts', String(Date.now()));

    const msg = document.getElementById('msg');
    if (msg) msg.textContent = `view=${view} → ${dest.pathname}${dest.search}`;

    location.replace(dest.toString());
  })();
  </script>
</body>
</html>