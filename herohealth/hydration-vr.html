<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>HeroHealth ‚Äî Hydration VR</title>
  <meta name="color-scheme" content="dark" />
  <link rel="icon" href="./favicon.ico" type="image/x-icon" />

  <!-- A-Frame (‡πÉ‡∏ä‡πâ‡∏õ‡∏∏‡πà‡∏° VR) -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

  <!-- Global FX / Logger / HUD binder (optional ‡πÅ‡∏ï‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥) -->
  <script src="./vr/particles.js" defer></script>
  <script src="./vr/hha-cloud-logger.js" defer></script>
  <script src="./vr/hha-hud.js" defer></script>

  <!-- CSS -->
  <link rel="stylesheet" href="./hydration-vr.css" />

  <!-- GAME (‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß) -->
  <script src="./hydration.safe.js" defer></script>
</head>

<body class="hvr">
  <!-- (minimal) WebXR scene for enterVR -->
  <a-scene
    embedded
    renderer="colorManagement:true; physicallyCorrectLights:true"
    vr-mode-ui="enabled:true"
    style="position:fixed; inset:0; z-index:0; pointer-events:none; opacity:0.001;">
    <a-entity position="0 1.6 -1"></a-entity>
  </a-scene>

  <!-- FX layer (particles.js ‡∏à‡∏∞ ensure ‡πÄ‡∏≠‡∏á‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏°‡∏µ‡πÑ‡∏ß‡πâ‡∏Å‡πá‡∏î‡∏µ) -->
  <div class="hha-fx-layer" aria-hidden="true"></div>

  <!-- Stamp -->
  <div id="hha-stamp" class="stamp" aria-live="polite">
    <div id="stamp-big" class="stampBig">OK</div>
    <div id="stamp-small" class="stampSmall">‚Äî</div>
  </div>

  <!-- Start overlay -->
  <div id="start-overlay" class="overlay">
    <div class="card startCard">
      <div class="title">üíß Hydration VR</div>
      <div class="sub">
        Goal = ‡∏î‡πà‡∏≤‡∏ô 1/3 ‚Üí 2/3 ‚Üí 3/3 (‡∏≠‡∏¢‡∏π‡πà GREEN ‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤)<br/>
        Mini = üå™Ô∏è Storm: ‚Äú‡∏ó‡πâ‡∏≤‡∏¢‡∏û‡∏≤‡∏¢‡∏∏ + Pressure ‡∏ñ‡∏∂‡∏á‚Äù ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡∏ö‡∏•‡πá‡∏≠‡∏Å BAD
      </div>
      <div class="row">
        <button id="btn-start" class="btn primary" type="button">‚ñ∂ START</button>
        <button id="btn-vr" class="btn secondary" type="button">üï∂Ô∏è VR</button>
      </div>
      <div class="hint">
        ‡πÅ‡∏ï‡∏∞‡∏à‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏¥‡∏á ‚Äú‡∏Å‡∏≤‡∏Å‡∏ö‡∏≤‡∏ó‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠‚Äù (‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏•‡∏≤‡∏Å) ‚Ä¢ ‡∏•‡∏≤‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏°‡∏≠‡∏á/‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô VR
      </div>
    </div>
  </div>

  <!-- Top HUD -->
  <header class="hud">
    <div class="hudLeft">
      <div class="stat">
        <div class="k">SCORE</div>
        <div class="v" id="stat-score">0</div>
      </div>
      <div class="stat">
        <div class="k">COMBO</div>
        <div class="v"><span id="stat-combo">0</span> <span class="muted">/</span> <span id="stat-combo-max">0</span></div>
      </div>
      <div class="stat">
        <div class="k">MISS</div>
        <div class="v" id="stat-miss">0</div>
      </div>
    </div>

    <div class="hudMid">
      <div class="waterCard">
        <div class="waterTop">
          <div class="chip"><span class="dot"></span>ZONE: <b id="water-zone">GREEN</b></div>
          <div class="chip">üíß <b id="water-pct">50%</b></div>
          <div class="chip">üõ°Ô∏è <b id="shield-count">0</b></div>
          <div class="chip">üå™Ô∏è <b id="storm-left">0</b></div>
        </div>
        <div class="bar">
          <div id="water-bar" class="barFill" style="width:50%"></div>
        </div>
      </div>
    </div>

    <div class="hudRight">
      <div class="stat">
        <div class="k">TIME</div>
        <div class="v" id="stat-time">70</div>
      </div>
      <div class="stat">
        <div class="k">GRADE</div>
        <div class="v grade" id="stat-grade">C</div>
      </div>
      <button id="btn-stop" class="btn danger" type="button">‚èπ STOP</button>
    </div>
  </header>

  <!-- Coach + Quest -->
  <section class="lower">
    <div class="coach">
      <div class="coachBubble">
        <div id="coach-text" class="coachMain">‡πÅ‡∏ï‡∏∞ START ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°</div>
        <div id="coach-sub" class="coachSub">‚Äî</div>
      </div>
    </div>

    <div class="quest">
      <div class="questTitle">üéØ Quest</div>
      <div id="quest-line1" class="qLine">‚Äî</div>
      <div id="quest-line2" class="qLine muted">‚Äî</div>
      <div id="quest-line3" class="qLine">‚Äî</div>
      <div id="quest-line4" class="qLine muted">‚Äî</div>
    </div>

    <div class="mini">
      <div class="miniTitle">‚úÖ Storm Checklist</div>

      <div class="miniRow">
        <div id="mini-c-storm" class="chk"></div>
        <div class="lbl">Storm Active</div>
        <div id="mini-v-storm" class="val">‚Äî</div>
      </div>

      <div class="miniRow">
        <div id="mini-c-zone" class="chk"></div>
        <div class="lbl">Zone ‚â† GREEN</div>
        <div id="mini-v-zone" class="val">‚Äî</div>
      </div>

      <div class="miniRow">
        <div id="mini-c-pressure" class="chk"></div>
        <div class="lbl">Pressure</div>
        <div id="mini-v-pressure" class="val">‚Äî</div>
      </div>

      <div class="miniRow">
        <div id="mini-c-end" class="chk"></div>
        <div class="lbl">End-window</div>
        <div id="mini-v-end" class="val">‚Äî</div>
      </div>

      <div class="miniRow">
        <div id="mini-c-block" class="chk"></div>
        <div class="lbl">Blocks</div>
        <div id="mini-v-block" class="val">0/0</div>
      </div>

      <div class="miniSmall">
        <div class="chipSmall">‚è≥ Next Storm: <b id="mini-storm-in">‚Äî</b>s</div>
        <div class="chipSmall">üìà Pressure: <b id="mini-pressure-pct">0</b>%</div>
      </div>

      <div class="bar miniBar">
        <div id="mini-pressure-bar" class="barFill" style="width:0%"></div>
      </div>
    </div>
  </section>

  <!-- Playfield -->
  <main id="playfield" class="playfield" role="application" aria-label="Hydration playfield">
    <div id="hvr-layer" class="layer"></div>
  </main>

  <!-- End summary -->
  <div id="hvr-end" class="endWrap" style="display:none;">
    <div class="endCard">
      <div class="endTop">
        <div class="endTitle">üèÅ Summary</div>
        <div class="endPill">Grade: <b id="end-grade">C</b></div>
      </div>

      <div class="endGrid">
        <div class="endItem"><div class="k">Score</div><div class="v" id="end-score">0</div></div>
        <div class="endItem"><div class="k">ComboMax</div><div class="v" id="end-combo">0</div></div>
        <div class="endItem"><div class="k">Miss</div><div class="v" id="end-miss">0</div></div>
        <div class="endItem"><div class="k">Goals</div><div class="v" id="end-goals">0/0</div></div>
        <div class="endItem"><div class="k">Minis</div><div class="v" id="end-minis">0/0</div></div>
      </div>

      <div class="row">
        <button id="btn-retry" class="btn primary" type="button">üîÅ Retry</button>
        <!-- Back to HUB ‡∏ñ‡∏π‡∏Å inject ‡πÉ‡∏ô hydration.safe.js -->
      </div>

      <div class="hint">‡∏ú‡∏•‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏ñ‡∏π‡∏Å‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô localStorage: <b>HHA_LAST_SUMMARY</b></div>
    </div>
  </div>
</body>
</html>