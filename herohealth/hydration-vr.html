<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Hero Health ‚Äî Hydration VR</title>
  <meta name="color-scheme" content="dark" />
  <link rel="icon" href="./favicon.ico" type="image/x-icon">

  <style>
    :root{
      --bg-main:#020617;
      --panel:#020617;
      --panel-soft:#020617;
      --accent:#22c55e;
      --accent-soft:rgba(34,197,94,0.18);
      --text-main:#e5e7eb;
      --text-soft:#9ca3af;
      --danger:#f97316;
      --radius-lg:18px;
      --radius-pill:999px;
    }

    *{box-sizing:border-box;}
    html, body{
      margin:0; padding:0;
      background:var(--bg-main);
      color:var(--text-main);
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",system-ui,sans-serif;
      height:100%;
      overflow:hidden;
    }
    body{ -webkit-font-smoothing:antialiased; }

    #hvr-wrap{
      position:relative;
      height:100vh;
      padding:12px 10px 72px;
      display:flex;
      flex-direction:column;
      gap:10px;
      overflow:hidden;
    }

    .hha-water-bar{
      background:linear-gradient(135deg,#020617,#020617);
      border-radius:999px;
      padding:10px 16px;
      border:1px solid rgba(148,163,184,0.35);
      display:flex;
      align-items:center;
      gap:10px;
      position:relative;
      z-index:40;
      backdrop-filter:blur(18px);
      box-shadow:0 14px 36px rgba(0,0,0,0.45);
    }
    .hha-water-bar-label{
      font-size:14px;
      color:var(--text-soft);
      display:flex;
      align-items:center;
      gap:6px;
      white-space:nowrap;
    }
    .hha-water-bar-label span.emoji{ font-size:17px; }
    .hha-water-bar-status{ margin-left:auto; font-size:14px; }
    .hha-water-bar-fill{
      flex:1 1 auto;
      height:8px;
      border-radius:999px;
      background:rgba(15,23,42,0.9);
      overflow:hidden;
    }
    .hha-water-bar-fill-inner{
      height:100%;
      width:50%;
      border-radius:999px;
      background:linear-gradient(90deg,#22c55e,#4ade80);
      transition:width .25s ease;
    }

    .hha-main-row{
      display:flex;
      gap:10px;
      margin-top:2px;
      z-index:40;
    }
    .hha-card{
      background:radial-gradient(circle at top left,#0b1120,#020617 60%);
      border-radius:var(--radius-lg);
      border:1px solid rgba(148,163,184,0.25);
      padding:12px 14px;
      box-shadow:0 18px 40px rgba(15,23,42,0.85);
      min-width:0;
    }
    .hha-card-left{ flex:1.15 1 0; }
    .hha-card-right{ flex:1 1 0; }

    .hha-title{
      font-size:15px;
      letter-spacing:.08em;
      text-transform:uppercase;
      color:var(--text-soft);
      margin-bottom:2px;
    }
    .hha-mode{
      font-size:20px;
      font-weight:600;
      margin-bottom:6px;
    }

    .hha-pill-row{
      display:flex;
      gap:8px;
      margin:6px 0 10px;
      flex-wrap:wrap;
    }
    .hha-pill{
      border-radius:999px;
      padding:4px 10px;
      font-size:12px;
      letter-spacing:.06em;
      text-transform:uppercase;
      border:1px solid rgba(148,163,184,0.4);
      color:var(--text-soft);
    }
    .hha-pill-primary{
      border-color:rgba(56,189,248,0.8);
      color:#e0f2fe;
    }
    .hha-pill-diff{
      border-color:rgba(34,197,94,0.8);
      color:#bbf7d0;
    }

    .hha-score-row{
      display:flex;
      justify-content:space-between;
      align-items:flex-end;
      margin-top:6px;
      gap:10px;
    }
    .hha-score-block{ font-size:13px; }
    .hha-score-block strong{
      display:block;
      font-size:26px;
      line-height:1.1;
    }
    .hha-score-label{
      font-size:12px;
      color:var(--text-soft);
      margin-top:2px;
    }

    .hha-grade{
      text-align:right;
      font-size:12px;
      color:var(--text-soft);
      min-width:156px;
    }
    .hha-grade span.badge{
      display:inline-block;
      min-width:44px;
      text-align:center;
      padding:4px 10px;
      border-radius:999px;
      font-weight:700;
      font-size:13px;
      background:rgba(15,23,42,0.95);
      border:1px solid rgba(148,163,184,0.4);
      margin-left:6px;
    }
    .hha-grade-progress{
      margin-top:6px;
      display:flex;
      align-items:center;
      justify-content:flex-end;
      gap:8px;
      font-size:11px;
      color:var(--text-soft);
    }
    .hha-grade-progress .bar{
      width:140px;
      height:6px;
      border-radius:999px;
      background:rgba(15,23,42,0.95);
      overflow:hidden;
      border:1px solid rgba(148,163,184,0.25);
      box-shadow:inset 0 2px 10px rgba(0,0,0,0.55);
    }
    .hha-grade-progress .bar > div{
      height:100%;
      width:0%;
      border-radius:999px;
      background:linear-gradient(90deg,#22c55e,#4ade80);
      transition:width .25s ease;
    }

    .hha-quest-title{
      font-size:14px;
      letter-spacing:.08em;
      text-transform:uppercase;
      color:var(--text-soft);
      margin-bottom:4px;
    }
    .hha-quest-main{
      font-size:16px;
      font-weight:600;
      margin-bottom:4px;
      line-height:1.35;
    }
    .hha-quest-mini{
      font-size:14px;
      color:var(--text-soft);
      margin-bottom:6px;
      line-height:1.35;
    }
    .hha-quest-progress{
      font-size:13px;
      color:var(--text-soft);
      margin-top:4px;
    }
    .hha-quest-progress strong{ color:var(--accent); }

    /* ===== PLAYFIELD ===== */
    #hvr-playfield{
      position:absolute;
      left:0; right:0; top:0; bottom:0;
      z-index:30;
      overflow:hidden;

      /* ‚úÖ ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏ö pointer ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ drag look ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô */
      pointer-events:auto;
      touch-action:pan-x pan-y;
    }

    /* world ‡∏ó‡∏µ‡πà‡∏Ç‡∏¢‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏â‡∏≤‡∏Å */
    #hvr-world{
      position:absolute;
      left:0; top:0;
      width:100%; height:100%;
      transform:translate3d(0px,0px,0);
      will-change:transform;
    }

    .hvr-target{
      pointer-events:auto;
      position:absolute;
      transform:translate(-50%,-50%);
      border-radius:999px;
      border:2px solid rgba(15,23,42,0.85);
      box-shadow:
        0 0 0 2px rgba(15,23,42,0.9),
        0 16px 35px rgba(0,0,0,0.75),
        0 0 28px rgba(34,197,94,0.55);
      display:flex;
      align-items:center;
      justify-content:center;
      background:radial-gradient(circle at 30% 30%,#4ade80,#16a34a);
      color:#f9fafb;
      user-select:none;
      cursor:pointer;
      transition:transform .08s ease-out, box-shadow .12s ease-out;
      z-index:35;
      touch-action:manipulation;
    }
    .hvr-target.bad{
      background:radial-gradient(circle at 30% 30%,#fb923c,#ea580c);
      box-shadow:
        0 0 0 2px rgba(15,23,42,0.9),
        0 16px 35px rgba(0,0,0,0.85),
        0 0 26px rgba(248,113,113,0.66);
    }
    .hvr-target:active{
      transform:translate(-50%,-50%) scale(.93);
      box-shadow:
        0 0 0 2px rgba(15,23,42,0.9),
        0 10px 24px rgba(0,0,0,0.85);
    }

    .hvr-crosshair{
      position:absolute;
      left:50%;
      top:56%;
      transform:translate(-50%,-50%);
      width:52px;
      height:52px;
      border-radius:999px;
      border:2px solid rgba(148,163,184,0.9);
      box-shadow:0 0 0 1px rgba(15,23,42,0.85);
      display:flex;
      align-items:center;
      justify-content:center;
      color:rgba(148,163,184,0.92);
      font-size:18px;
      pointer-events:none;
      z-index:60;
      backdrop-filter:blur(8px);
      background:radial-gradient(circle at 30% 30%,rgba(15,23,42,0.9),rgba(15,23,42,0.4));
    }
    .hvr-crosshair.ping{ animation:hvrPing 90ms ease-out 1; }
    @keyframes hvrPing{
      0%{ transform:translate(-50%,-50%) scale(1); }
      40%{ transform:translate(-50%,-50%) scale(0.90); }
      100%{ transform:translate(-50%,-50%) scale(1); }
    }

    .hha-coach-wrap{
      margin-top:auto;
      z-index:40;
      pointer-events:none;
    }
    .hha-coach-bubble{
      pointer-events:auto;
      display:flex;
      gap:10px;
      padding:10px 12px;
      border-radius:var(--radius-lg);
      background:radial-gradient(circle at top left,#064e3b,#022c22);
      border:1px solid rgba(34,197,94,0.5);
      color:#dcfce7;
      box-shadow:0 14px 32px rgba(6,95,70,0.7);
    }
    .hha-coach-avatar{
      width:40px; height:40px;
      border-radius:999px;
      background:#064e3b;
      flex-shrink:0;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:22px;
    }
    .hha-coach-text{ font-size:14px; line-height:1.45; }
    .hha-coach-name{ font-weight:700; margin-bottom:2px; }

    .hha-bottom-row{
      position:absolute;
      left:0; right:0; bottom:0;
      padding:8px 12px 10px;
      display:flex;
      gap:10px;
      align-items:center;
      z-index:45;
      pointer-events:none;
    }
    .hha-bottom-row > *{ pointer-events:auto; }

    .hha-fever-card{
      flex:1 1 auto;
      border-radius:var(--radius-lg);
      background:radial-gradient(circle at top left,#020617,#020617 65%);
      border:1px solid rgba(148,163,184,0.4);
      padding:8px 10px 9px;
      font-size:12px;
      color:var(--text-soft);
      box-shadow:0 14px 32px rgba(15,23,42,0.95);
    }
    .hha-fever-label{
      display:flex;
      align-items:center;
      gap:6px;
      margin-bottom:6px;
    }
    .hha-fever-label span.emoji{ font-size:16px; }
    .hha-fever-bar{
      height:8px;
      border-radius:999px;
      background:rgba(15,23,42,0.95);
      overflow:hidden;
      position:relative;
    }
    .hha-fever-bar-inner{
      height:100%;
      width:0%;
      border-radius:999px;
      background:linear-gradient(90deg,#f97316,#fb923c,#facc15);
      transition:width .2s ease-out;
    }
    .hha-fever-extra{
      font-size:11px;
      margin-top:5px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      color:var(--text-soft);
    }

    .hha-btn{
      flex:0 0 auto;
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.55);
      padding:10px 14px;
      background:radial-gradient(circle at top left,#020617,#020617 70%);
      color:#e5e7eb;
      font-size:14px;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:6px;
      text-decoration:none;
      box-shadow:0 14px 32px rgba(15,23,42,0.95);
      white-space:nowrap;
    }
    .hha-btn span.emoji{ font-size:18px; }

    .hvr-screen-blink{
      position:absolute;
      inset:0;
      z-index:9999;
      pointer-events:none;
      opacity:0;
      transition: opacity .06s ease;
      mix-blend-mode: screen;
    }
    .hvr-screen-blink.on{ opacity:1; }
    .hvr-screen-blink.good{
      background: radial-gradient(circle at 50% 56%, rgba(34,197,94,.35), rgba(34,197,94,0) 60%);
    }
    .hvr-screen-blink.bad{
      background: radial-gradient(circle at 50% 56%, rgba(249,115,22,.38), rgba(249,115,22,0) 60%);
    }
    .hvr-screen-blink.block{
      background: radial-gradient(circle at 50% 56%, rgba(96,165,250,.35), rgba(96,165,250,0) 60%);
    }

    @media (min-width:900px){
      #hvr-wrap{ max-width:1100px; margin:0 auto; }
    }
    @media (max-width:720px){
      .hha-main-row{ flex-direction:column; }
      .hha-grade{ min-width:0; }
      .hha-grade-progress .bar{ width:120px; }
    }
  </style>
</head>

<body>
  <div id="hvr-wrap">

    <header class="hha-water-bar" id="hha-water-header">
      <div class="hha-water-bar-label">
        <span class="emoji">üíß</span>
        <span>Water balance</span>
      </div>

      <div class="hha-water-bar-fill">
        <div class="hha-water-bar-fill-inner" id="hha-water-fill"></div>
      </div>

      <div class="hha-water-bar-status" id="hha-water-status">GREEN 50%</div>
    </header>

    <section class="hha-main-row">
      <article class="hha-card hha-card-left" id="hha-card-left">
        <div class="hha-title">HERO HEALTH ‚Ä¢ HYDRATION VR</div>
        <div class="hha-mode" id="hha-mode-label">Hydration Quest</div>

        <div class="hha-pill-row">
          <div class="hha-pill hha-pill-primary" id="hha-mode-pill">PLAY MODE</div>
          <div class="hha-pill hha-pill-diff" id="hha-diff-pill">EASY ‚Ä¢ 90s</div>
        </div>

        <div class="hha-score-row">
          <div class="hha-score-block">
            ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
            <strong id="hha-score-main">0</strong>
            <div class="hha-score-label">
              ‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î:
              <span id="hha-combo-max">0</span>
            </div>
          </div>

          <div class="hha-score-block">
            ‡∏û‡∏•‡∏≤‡∏î
            <strong id="hha-miss">0</strong>
            <div class="hha-score-label">
              ‡∏ô‡πâ‡∏≥‡πÇ‡∏ã‡∏ô:
              <span id="hha-water-zone-text">GREEN</span>
            </div>
          </div>

          <div class="hha-grade">
            ‡πÄ‡∏Å‡∏£‡∏î (REAL-TIME)
            <span class="badge" id="hha-grade-badge">C</span>

            <div class="hha-grade-progress">
              <span id="hha-grade-progress-text">Progress to S: 0%</span>
              <span class="bar"><div id="hha-grade-progress-fill"></div></span>
            </div>
          </div>
        </div>
      </article>

      <article class="hha-card hha-card-right" id="hha-card-right">
        <div class="hha-quest-title">QUEST</div>
        <div class="hha-quest-main" id="hha-quest-goal">Goal: ‡πÇ‡∏ã‡∏ô‡∏ô‡πâ‡∏≥‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß ‚Ä¢ 0/18 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (‡πÇ‡∏ã‡∏ô GREEN)</div>
        <div class="hha-quest-mini" id="hha-quest-mini">Mini: ‡∏™‡∏≤‡∏¢‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö ‚Ä¢ 0/5 ‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î</div>

        <div class="hha-quest-progress">
          Goal:
          <strong><span id="hha-goal-done">0</span>/<span id="hha-goal-total">2</span></strong>
        </div>
        <div class="hha-quest-progress">
          Mini quest:
          <strong><span id="hha-mini-done">0</span>/<span id="hha-mini-total">3</span></strong>
        </div>
      </article>
    </section>

    <main id="hvr-playfield" aria-hidden="false"></main>

    <div id="hvr-crosshair" class="hvr-crosshair">‚óã</div>

    <section class="hha-coach-wrap">
      <div class="hha-coach-bubble" id="hha-coach-bubble">
        <div class="hha-coach-avatar">üß≠</div>
        <div class="hha-coach-text">
          <div class="hha-coach-name">‡πÇ‡∏Ñ‡πâ‡∏ä</div>
          <div id="hha-coach-text">
            ‡∏•‡∏≤‡∏Å‡∏à‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏°‡∏≠‡∏á‡∏´‡∏≤‡πÄ‡∏õ‡πâ‡∏≤ üëÄ ‡πÅ‡∏ï‡∏∞‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏¥‡∏á ‚óã ‡∏ñ‡πâ‡∏≤‡∏à‡∏∞‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô VR ‡πÉ‡∏´‡πâ‡∏Å‡∏î ‚ÄúEnable Gyro‚Äù 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏∞!
          </div>
        </div>
      </div>
    </section>

    <div class="hha-bottom-row">
      <div class="hha-fever-card">
        <div class="hha-fever-label">
          <span class="emoji">üî•</span>
          <span>FEVER GAUGE</span>
        </div>
        <div class="hha-fever-bar">
          <div class="hha-fever-bar-inner" id="hha-fever-fill"></div>
        </div>
        <div class="hha-fever-extra">
          <span>‡πÄ‡∏Å‡∏£‡∏≤‡∏∞: <span id="hha-shield-count">0</span></span>
          <span id="hha-fever-percent">0%</span>
        </div>
      </div>

      <a href="#" id="hha-btn-gyro" class="hha-btn">
        <span class="emoji">üß≠</span>
        <span>Enable Gyro</span>
      </a>

      <a href="#" id="hha-btn-vr" class="hha-btn">
        <span class="emoji">üï∂Ô∏è</span>
        <span>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡πÇ‡∏´‡∏°‡∏î VR</span>
      </a>
    </div>

    <div id="hvr-screen-blink" class="hvr-screen-blink" aria-hidden="true"></div>
  </div>

  <!-- global HUD/FX ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô -->
  <script src="./vr/ui-fever.js"></script>
  <script src="./vr/particles.js"></script>
  <script src="./vr/hha-hud.js"></script>

  <!-- feedback blink/vibrate -->
  <script>
  (function(){
    'use strict';
    const $ = (id)=>document.getElementById(id);
    function vibrate(p){ try{ if (navigator && navigator.vibrate) navigator.vibrate(p); }catch{} }
    function blink(kind){
      const el = $('hvr-screen-blink');
      if (!el) return;
      el.classList.remove('good','bad','block','on');
      el.classList.add(kind || 'good');
      void el.offsetWidth;
      el.classList.add('on');
      setTimeout(()=> el.classList.remove('on'), 90);
    }
    window.addEventListener('hha:judge', (e)=>{
      const lb = String(e && e.detail && e.detail.label || '').toUpperCase();
      if (!lb) return;
      if (lb === 'GOOD' || lb === 'POWER' || lb === 'SHIELD+' || lb === 'TIME+') { blink('good'); vibrate(12); }
      else if (lb === 'BLOCK') { blink('block'); vibrate([12,20,12]); }
      else if (lb === 'JUNK' || lb === 'MISS') { blink('bad'); vibrate([18,28,18]); }
    }, { passive:true });
  })();
  </script>

  <script type="module">
    import { boot as hydrationBoot } from './hydration-vr/hydration.safe.js';

    function $(id){ return document.getElementById(id); }

    function parseQuery() {
      const url = new URL(window.location.href);
      const diff = (url.searchParams.get('diff') || 'easy').toLowerCase();
      let time = parseInt(url.searchParams.get('time') || '90', 10);
      if (!Number.isFinite(time) || time <= 0) time = 90;
      if (time < 20) time = 20;
      if (time > 180) time = 180;
      return { diff, time };
    }

    function setDiffPill(diff, time){
      const diffPill = $('hha-diff-pill');
      if (diffPill) diffPill.textContent = `${diff.toUpperCase()} ‚Ä¢ ${time}s`;
    }

    let audioCtx = null;
    function beep(freq, dur){
      try{
        audioCtx = audioCtx || new (window.AudioContext || window.webkitAudioContext)();
        const o = audioCtx.createOscillator();
        const g = audioCtx.createGain();
        o.type = 'sine';
        o.frequency.value = freq || 880;
        g.gain.value = 0.04;
        o.connect(g); g.connect(audioCtx.destination);
        o.start();
        o.stop(audioCtx.currentTime + (dur || 0.06));
      }catch{}
    }
    function vibrate(pattern){ try{ if (navigator && navigator.vibrate) navigator.vibrate(pattern); }catch{} }

    function ping(){
      const c = $('hvr-crosshair');
      if (!c) return;
      c.classList.remove('ping');
      void c.offsetWidth;
      c.classList.add('ping');
    }

    function elementAtCrosshair(){
      const c = $('hvr-crosshair');
      if(!c) return null;
      const r = c.getBoundingClientRect();
      const x = r.left + r.width/2;
      const y = r.top  + r.height/2;
      const el = document.elementFromPoint(x, y);
      if (!el) return null;
      return el.closest ? el.closest('.hvr-target') : null;
    }

    const FIRE_COOLDOWN = 160;
    let lastFireAt = 0;

    function fire(){
      const now = Date.now();
      if (now - lastFireAt < FIRE_COOLDOWN) return;
      lastFireAt = now;

      const tgt = elementAtCrosshair();
      ping();

      if (!tgt){
        beep(220, 0.05);
        vibrate(10);
        return;
      }

      try{
        tgt.dispatchEvent(new PointerEvent('pointerdown', {
          bubbles:true,
          cancelable:true,
          clientX: (window.innerWidth/2)|0,
          clientY: (window.innerHeight/2)|0
        }));
      }catch{
        try{ tgt.click(); }catch{}
      }
    }

    // tap ‡∏¢‡∏¥‡∏á / drag = look
    function bindCrosshairControls(){
      let downX=0, downY=0, downT=0, moved=false;

      document.addEventListener('pointerdown', (e)=>{
        const t = e.target && e.target.closest ? e.target.closest('.hvr-target') : null;
        if (t) return;
        if (e.target && e.target.closest && e.target.closest('a,button,.hha-btn')) return;

        moved=false;
        downX = e.clientX || 0;
        downY = e.clientY || 0;
        downT = performance.now();
      }, { passive:true });

      document.addEventListener('pointermove', (e)=>{
        if (!downT) return;
        const dx = (e.clientX||0) - downX;
        const dy = (e.clientY||0) - downY;
        if ((dx*dx + dy*dy) > 64) moved = true;
      }, { passive:true });

      document.addEventListener('pointerup', (e)=>{
        if (!downT) return;
        const dt = performance.now() - downT;
        const wasTap = (!moved && dt < 260);
        downT = 0;

        if (!wasTap) return;
        if (e.target && e.target.closest && e.target.closest('a,button,.hha-btn')) return;

        fire();
      }, { passive:true });

      window.addEventListener('keydown', (e)=>{
        if (e.code === 'Space') { e.preventDefault(); fire(); }
      });
    }

    window.addEventListener('DOMContentLoaded', async () => {
      const { diff, time } = parseQuery();
      setDiffPill(diff, time);

      try{
        const inst = await hydrationBoot({ difficulty: diff, duration: time });
        bindCrosshairControls();

        // ‚úÖ ‡∏õ‡∏∏‡πà‡∏°‡∏Ç‡∏≠ permission gyro
        const btnGyro = $('hha-btn-gyro');
        if (btnGyro){
          btnGyro.addEventListener('click', async (e)=>{
            e.preventDefault();
            try{
              if (inst && typeof inst.enableGyro === 'function'){
                const ok = await inst.enableGyro();
                if (ok) btnGyro.querySelector('span:last-child').textContent = 'Gyro ON';
              }
            }catch(err){
              console.warn('[HydrationVR] enableGyro failed', err);
            }
          });
        }
      }catch(err){
        console.error('[HydrationVR] boot error', err);
        alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÇ‡∏´‡∏°‡∏î Hydration Quest ‡πÑ‡∏î‡πâ');
      }
    });
  </script>
</body>
</html>