<!-- === /herohealth/clean-objects.html ===
Clean Objects — ROOT Auto-Redirect Launcher
Redirects to: /herohealth/vr-clean/home-clean.html
Keeps querystring + sets defaults + auto view when missing
-->
<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>Redirecting…</title>
  <meta name="color-scheme" content="dark light"/>
  <style>
    :root{ --bg:#050814; --fg:rgba(229,231,235,.92); --mut:rgba(148,163,184,.9); }
    html,body{height:100%;margin:0;background:var(--bg);color:var(--fg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}
    .wrap{max-width:720px;margin:0 auto;padding:20px}
    .card{border:1px solid rgba(148,163,184,.18);background:rgba(2,6,23,.60);border-radius:18px;padding:14px}
    .mut{color:var(--mut);font-size:12px;line-height:1.45}
    code{color:#cfe2ff}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div style="font-weight:900">Launching Clean Objects…</div>
      <div class="mut" style="margin-top:6px">
        Redirecting to <code>/herohealth/vr-clean/home-clean.html</code><br/>
        (If not redirected, tap the link below.)
      </div>
      <div class="mut" style="margin-top:10px">
        <a id="fallback" href="./vr-clean/home-clean.html" style="color:#93c5fd">Open run game</a>
      </div>
    </div>
  </div>

<script>
(function(){
  'use strict';

  const RUN_URL = './vr-clean/home-clean.html';

  function isMobileUA(){
    const ua = navigator.userAgent || '';
    return /Android|iPhone|iPad|iPod/i.test(ua);
  }

  function build(){
    const u = new URL(location.href);
    const sp = new URLSearchParams(u.search);

    // defaults (keep if already present)
    if(!sp.get('run'))  sp.set('run','play');
    if(!sp.get('diff')) sp.set('diff','normal');
    if(!sp.get('time')) sp.set('time','80');
    if(!sp.get('seed')) sp.set('seed', String(Date.now()));
    if(!sp.get('pid'))  sp.set('pid','anon');

    // view: keep if provided; else auto
    if(!sp.get('view')){
      sp.set('view', isMobileUA() ? 'mobile' : 'pc');
    }

    // (optional) if view=cvr, hint vr=1
    if(sp.get('view') === 'cvr' && !sp.get('vr')){
      sp.set('vr','1');
    }

    const target = RUN_URL + '?' + sp.toString() + (u.hash || '');
    return target;
  }

  const target = build();

  // fallback link
  document.getElementById('fallback').href = target;

  // redirect now (replace keeps history clean)
  location.replace(target);
})();
</script>
</body>
</html>