<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>HeroHealth ‚Äî Germ Detective (Launcher)</title>
  <meta name="color-scheme" content="dark light"/>
  <style>
    :root{
      --bg:#070A14; --panel: rgba(2,6,23,.72); --panel2: rgba(255,255,255,.03);
      --border: rgba(148,163,184,.18); --txt: rgba(229,231,235,.96); --muted: rgba(229,231,235,.70);
      --acc: rgba(99,102,241,.95);
    }
    *{ box-sizing:border-box; }
    body{
      margin:0; min-height:100vh;
      background: radial-gradient(1200px 800px at 20% 0%, rgba(99,102,241,.18), transparent 55%),
                  radial-gradient(1000px 700px at 90% 10%, rgba(34,197,94,.14), transparent 60%),
                  var(--bg);
      color: var(--txt);
      font-family: system-ui,-apple-system,"Noto Sans Thai",Segoe UI,Roboto,sans-serif;
    }
    .wrap{ max-width: 980px; margin: 0 auto; padding: max(16px, env(safe-area-inset-top)) 16px 90px; }
    .hero{
      margin-top: 12px;
      border:1px solid var(--border);
      background: var(--panel);
      border-radius: 24px;
      padding: 18px;
      box-shadow: 0 26px 90px rgba(0,0,0,.45);
      backdrop-filter: blur(10px);
    }
    h1{ margin:0 0 6px; font-size: 22px; letter-spacing:.2px; }
    .sub{ color: var(--muted); font-weight: 850; line-height: 1.35; }
    .grid{
      margin-top: 14px;
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 12px;
    }
    @media (max-width: 860px){ .grid{ grid-template-columns:1fr; } }
    .card{
      border:1px solid rgba(148,163,184,.16);
      background: rgba(255,255,255,.03);
      border-radius: 20px;
      padding: 14px;
    }
    .card h3{ margin:0 0 8px; font-size: 14px; }
    label{ display:block; margin-top: 10px; color: var(--muted); font-weight: 900; font-size: 12px; }
    select, input{
      width:100%;
      margin-top: 6px;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid rgba(148,163,184,.18);
      background: rgba(2,6,23,.55);
      color: var(--txt);
      font-weight: 900;
      outline:none;
    }
    .row{ display:flex; gap:10px; flex-wrap:wrap; margin-top: 12px; }
    .btn{
      appearance:none; border:none;
      border-radius: 16px;
      padding: 12px 14px;
      background: rgba(2,6,23,.75);
      border: 1px solid rgba(148,163,184,.22);
      color: var(--txt);
      font-weight: 1000;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .btn.primary{
      background: rgba(99,102,241,.22);
      border-color: rgba(99,102,241,.45);
      box-shadow: 0 0 0 2px rgba(99,102,241,.10) inset;
    }
    .btn:active{ transform: translateY(1px); }
    .pill{
      display:inline-flex;
      gap:8px;
      align-items:center;
      padding: 6px 10px;
      border-radius: 999px;
      border:1px solid rgba(148,163,184,.16);
      background: rgba(255,255,255,.03);
      color: rgba(229,231,235,.86);
      font-weight: 900;
      font-size: 12px;
      margin-top: 10px;
    }
    .tips{ margin-top:10px; color: var(--muted); font-weight: 850; line-height: 1.35; }
    .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
    .foot{
      position: fixed; left:0; right:0; bottom:0;
      padding: 10px 16px;
      background: rgba(2,6,23,.70);
      border-top: 1px solid rgba(148,163,184,.14);
      backdrop-filter: blur(10px);
      color: var(--muted);
      font-weight: 850;
      z-index: 9;
    }
    .foot .wrap2{ max-width:980px; margin:0 auto; display:flex; gap:10px; flex-wrap:wrap; justify-content:space-between; }
    a{ color: rgba(199,210,254,.95); text-decoration: none; font-weight: 1000; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="hero">
      <h1>üïµÔ∏è‚Äç‚ôÄÔ∏è Germ Detective</h1>
      <div class="sub">
        ‡∏™‡∏≥‡∏£‡∏ß‡∏à ‚Üí ‡πÄ‡∏Å‡πá‡∏ö‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô (UV/Swab/Camera) ‚Üí ‡∏ï‡πà‡∏≠ Chain (A‚ÜíB‚ÜíC) ‚Üí Triage ‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î (‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏à‡∏≥‡∏Å‡∏±‡∏î) ‚Üí ‡∏Å‡∏î R‚ÇÄ &lt; 1
      </div>
      <div class="pill">‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö: PC ‚Ä¢ Mobile ‚Ä¢ Cardboard (cVR)</div>

      <div class="grid">
        <div class="card">
          <h3>‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô</h3>

          <label>Case</label>
          <select id="caseId">
            <option value="classroom">‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (‡πÄ‡∏î‡πá‡∏Å‡∏õ‡πà‡∏ß‡∏¢‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô)</option>
            <option value="home">‡∏ö‡πâ‡∏≤‡∏ô (‡∏ö‡πâ‡∏≤‡∏ô‡∏°‡∏µ‡∏Ñ‡∏ô‡πÑ‡∏≠)</option>
          </select>

          <label>Difficulty</label>
          <select id="diff">
            <option value="easy">Easy</option>
            <option value="normal" selected>Normal</option>
            <option value="hard">Hard</option>
          </select>

          <label>Time (sec)</label>
          <input id="time" type="number" min="90" max="480" value="240"/>

          <label>AI Prediction (Level 1: heuristic coach)</label>
          <select id="ai">
            <option value="1" selected>ON</option>
            <option value="0">OFF</option>
          </select>

          <label>PID</label>
          <input id="pid" value="anon"/>

          <label>Seed (deterministic)</label>
          <input id="seed" class="mono" placeholder="leave blank = now()"/>
          <div class="row">
            <button class="btn" id="btnSeedNow">Seed = now()</button>
            <button class="btn" id="btnSeedKeep">Keep current</button>
          </div>

          <div class="tips">
            <b>Research-safe:</b> AI ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô heuristic + explainable (‡πÑ‡∏°‡πà‡∏õ‡∏£‡∏±‡∏ö‡∏¢‡∏≤‡∏Å‡∏ï‡∏≤‡∏°‡∏ï‡∏±‡∏ß‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÅ‡∏ö‡∏ö‡πÅ‡∏≠‡∏ö ‡πÜ) ‡πÅ‡∏•‡∏∞ log ‡∏•‡∏á local ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
          </div>
        </div>

        <div class="card">
          <h3>üï∂Ô∏è ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</h3>
          <div class="tips">‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: Cardboard ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ Triage ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å (‡πÄ‡∏û‡∏£‡∏≤‡∏∞ chain ‡∏•‡∏≤‡∏Å‡∏¢‡∏≤‡∏Å)</div>
          <div class="row">
            <button class="btn primary" id="playPC">‚ñ∂ ‡πÄ‡∏•‡πà‡∏ô‡∏ö‡∏ô PC</button>
            <button class="btn primary" id="playMobile">üì± ‡πÄ‡∏•‡πà‡∏ô‡∏ö‡∏ô Mobile</button>
            <button class="btn primary" id="playCVR">üï∂ ‡πÄ‡∏•‡πà‡∏ô Cardboard (cVR)</button>
          </div>

          <div class="tips" style="margin-top:14px;">
            <div><b>Run path:</b> <span class="mono">/herohealth/germ-detective/germ-detective.html</span></div>
            <div><b>Hub:</b> <span class="mono">/herohealth/hub.html</span></div>
            <div style="margin-top:10px;">
              <button class="btn" id="openHub">‚Ü© ‡πÄ‡∏õ‡∏¥‡∏î HUB</button>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <div class="foot">
    <div class="wrap2">
      <div>HeroHealth ‚Ä¢ Germ Detective Launcher</div>
      <div>Offline logs (no App Script)</div>
    </div>
  </div>

<script>
(function(){
  'use strict';

  const RUN_URL = './germ-detective/germ-detective.html';
  const HUB_URL = './hub.html';

  const $ = (id)=> document.getElementById(id);
  const KEY = 'HHA_GD_LAUNCH_PREFS_V1';

  function clamp(v,a,b){ v=Number(v); if(!Number.isFinite(v)) v=a; return Math.max(a, Math.min(b,v)); }
  function nowSeed(){ return String(Date.now()); }

  function loadPrefs(){
    try{
      const raw = localStorage.getItem(KEY);
      return raw ? JSON.parse(raw) : {};
    }catch(_){ return {}; }
  }
  function savePrefs(p){
    try{ localStorage.setItem(KEY, JSON.stringify(p)); }catch(_){}
  }

  function initForm(){
    const p = loadPrefs();
    if(p.caseId) $('caseId').value = p.caseId;
    if(p.diff) $('diff').value = p.diff;
    if(p.time) $('time').value = p.time;
    if(p.ai !== undefined) $('ai').value = String(p.ai);
    if(p.pid) $('pid').value = p.pid;
    if(p.seed) $('seed').value = p.seed;

    $('btnSeedNow').onclick = ()=> $('seed').value = nowSeed();
    $('btnSeedKeep').onclick = ()=> { /* noop */ };

    $('openHub').onclick = ()=> location.href = HUB_URL;
  }

  function collect(){
    const prefs = {
      caseId: $('caseId').value || 'classroom',
      diff: $('diff').value || 'normal',
      time: clamp($('time').value || 240, 90, 480),
      ai: Number($('ai').value || 1),
      pid: String($('pid').value || 'anon').trim() || 'anon',
      seed: String($('seed').value || '').trim() || nowSeed()
    };
    savePrefs(prefs);
    return prefs;
  }

  function go(view){
    const p = collect();
    const url = new URL(RUN_URL, location.href);
    url.searchParams.set('view', view);
    url.searchParams.set('case', p.caseId);
    url.searchParams.set('diff', p.diff);
    url.searchParams.set('time', String(p.time));
    url.searchParams.set('ai', String(p.ai));
    url.searchParams.set('pid', p.pid);
    url.searchParams.set('seed', p.seed);
    url.searchParams.set('run', 'play');
    url.searchParams.set('gate', '1');
    url.searchParams.set('hub', HUB_URL);
    // no api/spreadsheet/appscript
    location.href = url.toString();
  }

  function detectMobile(){
    return /Android|iPhone|iPad|iPod/i.test(navigator.userAgent || '');
  }

  initForm();

  $('playPC').onclick = ()=> go('pc');
  $('playMobile').onclick = ()=> go('mobile');
  $('playCVR').onclick = ()=> go('cvr');

  // gentle default seed
  if(!$('seed').value) $('seed').value = nowSeed();

  // optional: auto-suggest mobile
  if(detectMobile()){
    // keep user choice; no auto redirect
  }

})();
</script>
</body>
</html>