<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>HeroHealth ‚Äî Germ Detective (Launcher)</title>
  <meta name="color-scheme" content="dark light"/>
  <link rel="icon" href="./favicon.ico"/>
  <style>
    :root{
      --bg:#070A14;
      --panel: rgba(2,6,23,.72);
      --border: rgba(148,163,184,.18);
      --txt: rgba(229,231,235,.96);
      --muted: rgba(229,231,235,.70);
    }
    body{ margin:0; background:var(--bg); color:var(--txt); font-family:system-ui,-apple-system,"Noto Sans Thai",Segoe UI,Roboto,sans-serif; }
    .wrap{ min-height:100vh; display:grid; place-items:center; padding:18px; }
    .card{
      width:min(980px, 100%);
      border:1px solid var(--border);
      background:var(--panel);
      border-radius:20px;
      padding:16px;
      backdrop-filter: blur(10px);
      box-shadow: 0 20px 60px rgba(0,0,0,.35);
    }
    h1{ margin:0 0 8px; font-size:18px; }
    .sub{ color:var(--muted); font-weight:700; font-size:12px; margin-bottom:14px; }
    .grid{ display:grid; grid-template-columns: 1.2fr .8fr; gap:12px; }
    @media (max-width:900px){ .grid{ grid-template-columns:1fr; } }
    .pane{
      border:1px solid var(--border);
      background: rgba(255,255,255,.03);
      border-radius:16px;
      padding:12px;
    }
    label{ display:block; font-size:11px; color:var(--muted); font-weight:900; margin:8px 0 6px; }
    select,input{
      width:100%;
      height:40px;
      border-radius:12px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.05);
      color: var(--txt);
      padding: 0 10px;
      outline:none;
      font-weight:850;
      font-size:12px;
    }
    .row{ display:grid; grid-template-columns: 1fr 1fr; gap:10px; }
    @media (max-width:520px){ .row{ grid-template-columns:1fr; } }
    .btnrow{ display:flex; gap:10px; flex-wrap:wrap; margin-top:12px; }
    .btn{
      appearance:none;
      border:none;
      border-radius:999px;
      padding:12px 14px;
      background: rgba(2,6,23,.75);
      border: 1px solid rgba(148,163,184,.22);
      color: var(--txt);
      font-weight:1000;
      font-size:12px;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .btn:active{ transform: translateY(1px); }
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 10px; border-radius:999px;
      border:1px solid rgba(148,163,184,.18);
      background: rgba(255,255,255,.03);
      color: var(--muted);
      font-weight:900; font-size:11px;
      margin-top:10px;
    }
    .mini{ color:var(--muted); font-weight:800; font-size:12px; line-height:1.35; }
    .casebox{ display:grid; gap:10px; }
    .casecard{
      border:1px solid rgba(148,163,184,.16);
      background: rgba(255,255,255,.03);
      border-radius:16px;
      padding:12px;
    }
    .casecard h3{ margin:0 0 6px; font-size:13px; }
    .casecard p{ margin:0; color:var(--muted); font-weight:800; font-size:12px; line-height:1.35; }
    .tag{ display:inline-flex; padding:6px 10px; border-radius:999px; border:1px solid rgba(148,163,184,.18); color:var(--muted); font-weight:900; font-size:11px; margin-top:10px; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>üïµÔ∏è Germ Detective</h1>
      <div class="sub">‡∏™‡∏≥‡∏£‡∏ß‡∏à ‚Ä¢ ‡πÄ‡∏Å‡πá‡∏ö‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô ‚Ä¢ ‡∏ï‡πà‡∏≠ chain ‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡∏£‡πà ‚Ä¢ ‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏†‡∏≤‡∏¢‡πÉ‡∏ï‡πâ‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏à‡∏≥‡∏Å‡∏±‡∏î ‚Ä¢ ‡∏•‡∏î R‚ÇÄ & Exposure ‡πÉ‡∏´‡πâ‡∏ï‡πà‡∏≥‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</div>

      <div class="grid">
        <div class="pane">
          <div class="row">
            <div>
              <label>Case</label>
              <select id="caseSel">
                <option value="classroom">‡πÄ‡∏î‡πá‡∏Å‡∏õ‡πà‡∏ß‡∏¢‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 3 ‡∏Ñ‡∏ô</option>
                <option value="home">‡∏ö‡πâ‡∏≤‡∏ô‡∏°‡∏µ‡∏Ñ‡∏ô‡πÑ‡∏≠</option>
              </select>
            </div>
            <div>
              <label>View</label>
              <select id="viewSel">
                <option value="pc">PC (mouse/keyboard)</option>
                <option value="mobile">Mobile (touch)</option>
                <option value="cvr">Cardboard VR (crosshair)</option>
              </select>
            </div>
          </div>

          <div class="row">
            <div>
              <label>Difficulty</label>
              <select id="diffSel">
                <option value="easy">Easy</option>
                <option value="normal" selected>Normal</option>
                <option value="hard">Hard</option>
              </select>
            </div>
            <div>
              <label>Time (sec)</label>
              <input id="timeInp" type="number" min="90" max="480" value="240"/>
            </div>
          </div>

          <div class="row">
            <div>
              <label>pid</label>
              <input id="pidInp" placeholder="‡πÄ‡∏ä‡πà‡∏ô p001" value="anon"/>
            </div>
            <div>
              <label>seed</label>
              <input id="seedInp" placeholder="‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏ß‡πà‡∏≤‡∏á = auto" value=""/>
            </div>
          </div>

          <div class="row">
            <div>
              <label>AI (research-safe)</label>
              <select id="aiSel">
                <option value="0">AI OFF (baseline)</option>
                <option value="1" selected>AI ON (coach + pacing ‡πÅ‡∏ö‡∏ö explainable)</option>
              </select>
            </div>
            <div>
              <label>Gate (‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°)</label>
              <select id="gateSel">
                <option value="1" selected>Cold Open ‚Üí Explore</option>
                <option value="2">‡∏Ç‡πâ‡∏≤‡∏° Cold Open</option>
              </select>
            </div>
          </div>

          <div class="btnrow">
            <button class="btn" id="btnPlay">‚ñ∂ ‡πÄ‡∏•‡πà‡∏ô</button>
            <button class="btn" id="btnPlayRun">üß™ Run (debug)</button>
            <button class="btn" id="btnResetToday">üßπ ‡∏•‡πâ‡∏≤‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏ö‡∏ö‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</button>
          </div>

          <div class="pill" id="hint">Tip: Cardboard ‡πÉ‡∏ä‡πâ crosshair ‡∏¢‡∏¥‡∏á (‡πÅ‡∏ï‡∏∞‡∏à‡∏≠‡∏´‡∏£‡∏∑‡∏≠ Space)</div>
        </div>

        <div class="pane">
          <div class="casebox">
            <div class="casecard">
              <h3>üé¨ Core Loop</h3>
              <p>Cold Open ‚Üí Explore ‚Üí Evidence combo (UV‚ÜíSwab‚ÜíCam) ‚Üí Chain (A‚ÜíB‚ÜíC) ‚Üí Triage cleaning (resources limited) ‚Üí End (‡∏•‡∏î R‚ÇÄ/Exposure + badge)</p>
              <div class="tag">AI ‡πÑ‡∏°‡πà‡∏´‡∏•‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á: no-leakage + baseline + explainable tips</div>
            </div>
            <div class="casecard">
              <h3>üèÜ ‡∏ä‡∏ô‡∏∞‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç (Super Sleuth)</h3>
              <p>‡∏ó‡∏≥‡πÉ‡∏´‡πâ <b>R‚ÇÄ &lt; 1</b> + ‡∏ï‡πà‡∏≠ chain ‡∏ñ‡∏π‡∏Å ‚â• 3 ‡πÄ‡∏™‡πâ‡∏ô + ‡πÉ‡∏ä‡πâ‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏Ñ‡∏∏‡πâ‡∏° (waste ‡∏ï‡πà‡∏≥)</p>
            </div>
          </div>
          <div class="mini" style="margin-top:10px;">
            Root: <b>/herohealth/germ-detective.html</b><br/>
            Run: <b>/herohealth/germ-detective/germ-detective.html</b>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
(function(){
  'use strict';
  function qs(id){ return document.getElementById(id); }
  function clamp(n,a,b){ n=Number(n); if(!Number.isFinite(n)) n=a; return Math.max(a, Math.min(b,n)); }
  function nowSeed(){ return String(Date.now()); }

  const HUB = './hub.html';
  const RUN = './germ-detective/germ-detective.html';

  function play(isDebug){
    const c = qs('caseSel').value;
    const view = qs('viewSel').value;
    const diff = qs('diffSel').value;
    const time = clamp(qs('timeInp').value, 90, 480);
    const pid  = (qs('pidInp').value || 'anon').trim();
    const seed = (qs('seedInp').value || nowSeed()).trim();
    const ai   = qs('aiSel').value;
    const gate = qs('gateSel').value;

    const p = new URLSearchParams();
    p.set('hub', HUB);
    p.set('case', c);
    p.set('view', view);
    p.set('diff', diff);
    p.set('time', String(time));
    p.set('pid', pid);
    p.set('seed', seed);
    p.set('ai', ai);
    p.set('gate', gate);
    p.set('run', isDebug ? 'debug' : 'play');

    location.href = RUN + '?' + p.toString();
  }

  qs('btnPlay').onclick = ()=> play(false);
  qs('btnPlayRun').onclick = ()=> play(true);
  qs('btnResetToday').onclick = ()=>{
    try{
      localStorage.removeItem('HHA_LAST_SUMMARY');
      // ‡πÑ‡∏°‡πà‡∏•‡πâ‡∏≤‡∏á offline logs ‡∏ó‡∏¥‡πâ‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏ô HUB ‡∏•‡πâ‡∏≤‡∏á‡πÑ‡∏î‡πâ
      alert('‡∏•‡πâ‡∏≤‡∏á HHA_LAST_SUMMARY ‡πÅ‡∏•‡πâ‡∏ß');
    }catch(e){}
  };
})();
</script>
</body>
</html>