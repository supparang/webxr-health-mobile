<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>HeroHealth ‚Äî GroupsVR (Launcher)</title>
  <meta name="color-scheme" content="dark light"/>
  <link rel="icon" href="./favicon.ico"/>
  <style>
    html,body{height:100%;margin:0;background:#020617;color:#e5e7eb;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans Thai",sans-serif;}
    .c{min-height:100%;display:flex;align-items:center;justify-content:center;padding:16px;}
    .p{max-width:820px;width:100%;border:1px solid rgba(148,163,184,.18);background:rgba(2,6,23,.72);border-radius:22px;padding:14px;box-shadow:0 20px 70px rgba(0,0,0,.45);}
    .t{font-weight:1000;font-size:16px;}
    .s{color:rgba(148,163,184,.95);margin-top:6px;font-size:12.5px;line-height:1.4;}
    .mono{font-family:ui-monospace,Menlo,Consolas,monospace;font-size:12px;color:rgba(229,231,235,.9);margin-top:10px;white-space:pre-wrap;}
  </style>
</head>
<body>
<div class="c">
  <div class="p">
    <div class="t">ü•¶ GroupsVR ‚Äî ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏ú‡πà‡∏≤‡∏ô Warmup Gate‚Ä¶</div>
    <div class="s">‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö: Warmup (20s) ‚Üí ‡πÄ‡∏Å‡∏° ‚Üí Cooldown (20s) ‚Üí ‡∏Å‡∏•‡∏±‡∏ö HUB</div>
    <div class="mono" id="dbg"></div>
  </div>
</div>

<script>
(() => {
  'use strict';
  const QS = new URL(location.href).searchParams;

  const hub  = QS.get('hub')  || './hub.html';
  const dur  = Number(QS.get('dur')  || 20) || 20;  // warmup seconds
  const cdur = Number(QS.get('cdur') || 20) || 20;  // cooldown seconds

  // passthrough (‡πÑ‡∏°‡πà‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô internal ‡∏Ç‡∏≠‡∏á gate)
  const deny = new Set(['next','phase','dur','cdur','autonext','gate']);
  const pass = new URLSearchParams();
  QS.forEach((v,k)=>{ if(!deny.has(k)) pass.set(k,v); });

  // RUN url (‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô folder /vr-groups/)
  const gameRun = new URL('./vr-groups/groups-vr.html', location.href);
  pass.forEach((v,k)=> gameRun.searchParams.set(k,v));
  gameRun.searchParams.set('hub', hub);
  gameRun.searchParams.set('gate','1');          // ‚úÖ ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö flow
  gameRun.searchParams.set('cdur', String(cdur)); // ‚úÖ ‡∏™‡πà‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡∏π‡∏•‡∏î‡∏≤‡∏ß‡∏ô‡πå

  // WARMUP gate (‡∏≠‡∏¢‡∏π‡πà root /herohealth/)
  const gate = new URL('./warmup-gate.html', location.href);
  gate.searchParams.set('phase','warmup');
  gate.searchParams.set('dur', String(dur));
  gate.searchParams.set('hub', hub);
  gate.searchParams.set('next', gameRun.toString());
  gate.searchParams.set('autonext','1');

  document.getElementById('dbg').textContent =
    'gate => ' + gate.toString() + '\n\nnext(game) => ' + gameRun.toString();

  location.replace(gate.toString());
})();
</script>
</body>
</html>