<!-- === /herohealth/groups.html ===
HeroHealth ‚Äî Food Groups VR (Launcher)
- Launches: ./vr-groups/groups-vr.html
- Params: runMode, diff, style, time, seed, hub, autostart, vr
-->

<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>HeroHealth ‚Äî Food Groups VR (Launcher)</title>
  <meta name="color-scheme" content="dark" />
  <link rel="icon" href="./favicon.ico" />

  <style>
    :root{
      color-scheme:dark;
      --bg:#020617;
      --panel:rgba(2,6,23,.78);
      --stroke:rgba(148,163,184,.18);
      --text:#e5e7eb;
      --muted:#94a3b8;
      --accent:#22c55e;
      --cyan:#22d3ee;
      --radius:18px;

      --sat: env(safe-area-inset-top, 0px);
      --sab: env(safe-area-inset-bottom, 0px);
      --sal: env(safe-area-inset-left, 0px);
      --sar: env(safe-area-inset-right, 0px);
    }
    html,body{
      margin:0; height:100%;
      background:
        radial-gradient(circle at top left, rgba(34,211,238,.14), transparent 55%),
        radial-gradient(circle at bottom right, rgba(34,197,94,.14), transparent 60%),
        var(--bg);
      color:var(--text);
      font-family:system-ui,-apple-system,"Segoe UI",sans-serif;
    }
    .wrap{
      min-height:100%;
      display:grid;
      place-items:center;
      padding:calc(14px + var(--sat)) calc(14px + var(--sar)) calc(16px + var(--sab)) calc(14px + var(--sal));
    }
    .card{
      width:min(820px, 94vw);
      background:rgba(2,6,23,.72);
      border:1px solid var(--stroke);
      border-radius:22px;
      box-shadow:0 20px 70px rgba(0,0,0,.55);
      padding:16px;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    h1{ margin:0 0 6px; font-size:20px; font-weight:1100; }
    p{ margin:0 0 14px; color:var(--muted); font-weight:800; line-height:1.45; }

    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    @media (max-width: 760px){
      .grid{ grid-template-columns: 1fr; }
    }

    .box{
      background:var(--panel);
      border:1px solid var(--stroke);
      border-radius:var(--radius);
      padding:12px;
    }
    .label{ font-size:12px; color:var(--muted); font-weight:1000; margin-bottom:8px; }
    .row{ display:flex; flex-wrap:wrap; gap:8px; align-items:center; }

    .seg{
      display:inline-flex;
      gap:8px;
      flex-wrap:wrap;
    }
    .btn{
      border:0;
      border-radius:999px;
      padding:10px 12px;
      font-weight:1000;
      cursor:pointer;
      background:rgba(15,23,42,.72);
      border:1px solid rgba(148,163,184,.18);
      color:var(--text);
    }
    .btn.on{
      background:linear-gradient(90deg, rgba(34,197,94,.95), rgba(34,211,238,.90));
      color:#061018;
      border-color: rgba(34,211,238,.18);
    }

    input[type="number"], input[type="text"]{
      width:100%;
      border-radius:14px;
      border:1px solid rgba(148,163,184,.18);
      background:rgba(15,23,42,.55);
      color:var(--text);
      padding:10px 12px;
      font-weight:900;
      outline:none;
    }
    .hint{ margin-top:6px; font-size:12px; color:var(--muted); font-weight:800; }

    .actions{
      margin-top:14px;
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap:10px;
    }
    @media (max-width: 760px){
      .actions{ grid-template-columns: 1fr; }
    }
    .go{
      border:0;
      border-radius:18px;
      padding:12px 14px;
      font-weight:1100;
      cursor:pointer;
    }
    .go.primary{
      background:linear-gradient(135deg, rgba(34,197,94,.95), rgba(34,211,238,.80));
      color:#04110a;
    }
    .go.secondary{
      background:rgba(15,23,42,.78);
      border:1px solid rgba(148,163,184,.18);
      color:var(--text);
    }
    .go.vr{
      background:linear-gradient(135deg, rgba(167,139,250,.85), rgba(34,211,238,.70));
      color:#07101a;
    }

    .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; }
    .preview{
      margin-top:12px;
      padding:10px 12px;
      border-radius:16px;
      border:1px solid rgba(148,163,184,.16);
      background:rgba(2,6,23,.55);
      color:rgba(226,232,240,.92);
      font-weight:900;
      font-size:12px;
      line-height:1.45;
      word-break: break-all;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="card">
      <h1>üçΩÔ∏è Food Groups VR ‚Äî Launcher</h1>
      <p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î/‡∏£‡∏∞‡∏î‡∏±‡∏ö/‡∏™‡πÑ‡∏ï‡∏•‡πå/‡πÄ‡∏ß‡∏•‡∏≤/seed ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î ‚Äú‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô‚Äù (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö PC, Mobile ‡πÅ‡∏•‡∏∞ VR-cardboard)</p>

      <div class="grid">
        <div class="box">
          <div class="label">Run Mode</div>
          <div class="seg" id="segRun">
            <button class="btn on" data-v="play">play</button>
            <button class="btn" data-v="research">research</button>
          </div>
          <div class="hint">play = adaptive ON / research = adaptive OFF (‡πÉ‡∏ä‡πâ diff ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å)</div>
        </div>

        <div class="box">
          <div class="label">Difficulty</div>
          <div class="seg" id="segDiff">
            <button class="btn" data-v="easy">easy</button>
            <button class="btn on" data-v="normal">normal</button>
            <button class="btn" data-v="hard">hard</button>
          </div>
          <div class="hint">easy/normal/hard ‚Üí ‡πÉ‡∏ä‡πâ power threshold + spawn/ttl ‡∏ï‡∏≤‡∏°‡πÄ‡∏Å‡∏°</div>
        </div>

        <div class="box">
          <div class="label">Style</div>
          <div class="seg" id="segStyle">
            <button class="btn on" data-v="mix">mix</button>
            <button class="btn" data-v="feel">feel</button>
            <button class="btn" data-v="hard">hard</button>
          </div>
          <div class="hint">mix = ‡∏™‡∏∏‡πà‡∏° pattern / feel = wave / hard = spiral</div>
        </div>

        <div class="box">
          <div class="label">Time (seconds)</div>
          <input id="inpTime" type="number" min="30" max="180" value="90" />
          <div class="hint">‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ 70‚Äì120 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</div>
        </div>

        <div class="box">
          <div class="label">Seed (deterministic)</div>
          <input id="inpSeed" type="text" value="" placeholder="‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏ß‡πà‡∏≤‡∏á = ‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô" />
          <div class="hint">research ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏™‡πà seed ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏≥‡∏ã‡πâ‡∏≥‡πÑ‡∏î‡πâ</div>
        </div>

        <div class="box">
          <div class="label">Hub (‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤ HUB)</div>
          <input id="inpHub" type="text" value="./index.html" />
          <div class="hint">‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô: ./index.html</div>
        </div>

        <div class="box">
          <div class="label">Options</div>
          <div class="row">
            <button class="btn" id="btnSeedNow">‡∏™‡∏∏‡πà‡∏° seed ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</button>
            <button class="btn" id="btnAuto">autostart: OFF</button>
          </div>
          <div class="hint">autostart ‡∏à‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏Å‡∏°‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤ run</div>
        </div>

        <div class="box">
          <div class="label">Version cache buster</div>
          <div class="row">
            <button class="btn" id="btnVNow">‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï v (‡∏Å‡∏±‡∏ô cache)</button>
          </div>
          <div class="hint">‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤ timestamp ‡πÉ‡∏™‡πà‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå v=...</div>
        </div>
      </div>

      <div class="actions">
        <button class="go primary" id="btnGo">‚ñ∂ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô</button>
        <button class="go vr" id="btnGoVR">üï∂Ô∏è ‡πÄ‡∏Ç‡πâ‡∏≤ VR Cardboard</button>
        <button class="go secondary" id="btnBack">‡∏Å‡∏•‡∏±‡∏ö HUB</button>
      </div>

      <div class="preview mono" id="previewUrl">‚Äî</div>
    </div>
  </div>

  <script>
    const $ = (id)=>document.getElementById(id);
    const state = {
      runMode:'play',
      diff:'normal',
      style:'mix',
      autostart:false,
      v: String(Date.now()),
    };

    function pick(segId, key){
      const seg = $(segId);
      seg.addEventListener('click', (e)=>{
        const b = e.target.closest('button[data-v]');
        if(!b) return;
        const v = b.getAttribute('data-v');
        state[key] = v;
        [...seg.querySelectorAll('button')].forEach(x=>x.classList.toggle('on', x===b));
        render();
      });
    }

    pick('segRun','runMode');
    pick('segDiff','diff');
    pick('segStyle','style');

    $('btnSeedNow').addEventListener('click', ()=>{
      $('inpSeed').value = String(Date.now());
      render();
    });

    $('btnAuto').addEventListener('click', ()=>{
      state.autostart = !state.autostart;
      $('btnAuto').textContent = 'autostart: ' + (state.autostart ? 'ON' : 'OFF');
      $('btnAuto').classList.toggle('on', state.autostart);
      render();
    });

    $('btnVNow').addEventListener('click', ()=>{
      state.v = String(Date.now());
      render();
    });

    $('btnBack').addEventListener('click', ()=>{
      location.href = $('inpHub').value.trim() || './index.html';
    });

    function buildUrl(isVR){
      const time = Math.max(30, Math.min(180, Number($('inpTime').value||90)));
      const seed = ($('inpSeed').value||'').trim() || String(Date.now());
      const hub  = ($('inpHub').value||'').trim() || './index.html';

      const base = './vr-groups/groups-vr.html';
      const params = new URLSearchParams();
      params.set('runMode', state.runMode);
      params.set('diff', state.diff);
      params.set('style', state.style);
      params.set('time', String(time));
      params.set('seed', seed);
      params.set('hub', hub);
      params.set('v', state.v);
      if (state.autostart) params.set('autostart','1');
      if (isVR){
        params.set('vr','1');
        params.set('cardboard','1');
      }
      return base + '?' + params.toString();
    }

    function render(){
      $('previewUrl').textContent = buildUrl(false);
    }

    $('inpTime').addEventListener('input', render);
    $('inpSeed').addEventListener('input', render);
    $('inpHub').addEventListener('input', render);

    $('btnGo').addEventListener('click', ()=> location.href = buildUrl(false));
    $('btnGoVR').addEventListener('click', ()=> location.href = buildUrl(true));

    render();
  </script>
</body>
</html>