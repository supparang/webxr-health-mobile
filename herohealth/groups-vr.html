<!-- === /herohealth/vr-groups.html ===
Launcher -> /herohealth/vr-groups/vr-groups.html
- pass-through params
- auto seed if missing
- auto ts (cache-bust)
-->
<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>HeroHealth ‚Äî Food Groups VR (Launcher)</title>
  <meta name="color-scheme" content="dark" />
  <link rel="icon" href="./favicon.ico" type="image/x-icon" />
  <style>
    :root{
      color-scheme: dark;
      --bg:#020617; --panel:rgba(2,6,23,.78); --stroke:rgba(148,163,184,.18);
      --text:#e5e7eb; --muted:#94a3b8; --accent:#22c55e;
      --radius:18px;
    }
    *{ box-sizing:border-box; }
    html,body{ margin:0; height:100%; background:radial-gradient(circle at 20% 10%, rgba(34,197,94,.14), transparent 55%), var(--bg); color:var(--text); font-family:system-ui,-apple-system,Segoe UI,sans-serif; }
    .wrap{ min-height:100%; display:grid; place-items:center; padding:18px; }
    .card{
      width:min(760px, 100%);
      border:1px solid var(--stroke);
      background:var(--panel);
      border-radius:var(--radius);
      padding:18px;
      box-shadow:0 18px 55px rgba(0,0,0,.45);
    }
    .title{ font-weight:900; letter-spacing:.2px; font-size:18px; }
    .sub{ color:var(--muted); margin-top:8px; line-height:1.45; }
    .row{ display:flex; gap:10px; flex-wrap:wrap; margin-top:14px; }
    .pill{ border:1px solid rgba(148,163,184,.22); padding:7px 10px; border-radius:999px; background:rgba(15,23,42,.6); font-weight:800; font-size:12px; }
    .btns{ display:flex; gap:10px; margin-top:16px; flex-wrap:wrap; }
    .btn{
      appearance:none; border:0; border-radius:999px; padding:10px 14px;
      font-weight:900; cursor:pointer;
    }
    .btn.primary{ background:rgba(34,197,94,.92); color:#04130a; }
    .btn.ghost{ background:rgba(15,23,42,.75); color:var(--text); border:1px solid rgba(148,163,184,.22); }
    a{ color:rgba(34,197,94,.95); font-weight:800; }
    code{ background:rgba(15,23,42,.75); padding:2px 6px; border-radius:10px; border:1px solid rgba(148,163,184,.14); }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="card">
      <div class="title">Food Groups VR üçΩÔ∏è ‚Äî ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏Å‡∏°‚Ä¶</div>
      <div class="sub">
        Launcher ‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏û‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÑ‡∏ü‡∏•‡πå‡∏£‡∏±‡∏ô‡∏à‡∏£‡∏¥‡∏á: <code>/herohealth/vr-groups/vr-groups.html</code><br/>
        ‡∏ñ‡πâ‡∏≤‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏î‡πâ‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡πÉ‡∏´‡πâ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° ‚Äú‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏Å‡∏°‚Äù ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á
      </div>

      <div class="row">
        <div class="pill" id="p-diff">DIFF: ‚Äî</div>
        <div class="pill" id="p-time">TIME: ‚Äî</div>
        <div class="pill" id="p-mode">MODE: ‚Äî</div>
      </div>

      <div class="btns">
        <button class="btn primary" id="btnGo">‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏Å‡∏°</button>
        <button class="btn ghost" id="btnReload">‡∏£‡∏µ‡πÇ‡∏´‡∏•‡∏î</button>
      </div>

      <div class="sub" style="margin-top:12px">
        ‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏™‡∏≥‡∏£‡∏≠‡∏á: <a id="fallbackLink" href="#">‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏Å‡∏°</a>
      </div>

      <noscript>
        <div class="sub" style="margin-top:12px">
          ‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏õ‡∏¥‡∏î JavaScript ‡∏≠‡∏¢‡∏π‡πà ‚Äî ‡πÇ‡∏õ‡∏£‡∏î‡πÄ‡∏õ‡∏¥‡∏î‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ô‡∏µ‡πâ:
          <a href="./vr-groups/vr-groups.html">./vr-groups/vr-groups.html</a>
        </div>
      </noscript>
    </div>
  </div>

  <script>
  (function(){
    'use strict';

    function clamp(v,a,b){ v = Number(v)||0; return v<a?a:(v>b?b:v); }

    const src = new URL(location.href);
    const p = src.searchParams;

    // Defaults (‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏™‡πà‡∏á‡∏°‡∏≤)
    const diff = String(p.get('diff') || 'normal').toLowerCase();
    const time = clamp(parseInt(p.get('time') || '90', 10) || 90, 30, 180);
    const run  = String(p.get('run') || p.get('runMode') || 'play').toLowerCase();

    // deterministic seed fallback
    const sid = String(p.get('sessionId') || p.get('studentKey') || '').trim();
    const ts  = String(p.get('ts') || Date.now());
    if (!p.get('seed') || !String(p.get('seed')).trim()){
      p.set('seed', sid ? (sid + '|' + ts) : ts);
    }

    // always set / refresh ts (cache bust) if not present
    if (!p.get('ts')) p.set('ts', ts);

    // keep normalized defaults
    p.set('diff', (diff==='easy'||diff==='hard'||diff==='normal') ? diff : 'normal');
    p.set('time', String(time));
    p.set('run', (run==='research') ? 'research' : 'play');

    // show pills
    const pd = document.getElementById('p-diff'); if (pd) pd.textContent = 'DIFF: ' + p.get('diff');
    const pt = document.getElementById('p-time'); if (pt) pt.textContent = 'TIME: ' + p.get('time') + 's';
    const pm = document.getElementById('p-mode'); if (pm) pm.textContent = 'MODE: ' + p.get('run');

    // target runner
    const target = new URL('./vr-groups/vr-groups.html', src);
    // copy all params
    target.search = p.toString();

    // wire buttons
    const go = () => { location.replace(target.toString()); };
    const btnGo = document.getElementById('btnGo');
    const btnReload = document.getElementById('btnReload');
    const link = document.getElementById('fallbackLink');

    if (btnGo) btnGo.addEventListener('click', go, { passive:true });
    if (btnReload) btnReload.addEventListener('click', ()=>location.reload(), { passive:true });
    if (link){ link.href = target.toString(); }

    // auto redirect immediately
    go();
  })();
  </script>
</body>
</html>