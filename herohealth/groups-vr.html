<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>HeroHealth ‚Äî GroupsVR Launcher</title>
  <meta name="color-scheme" content="light dark" />
  <link rel="icon" href="./favicon.ico" type="image/x-icon" />

  <!-- reuse same CSS -->
  <link rel="stylesheet" href="./vr-groups/groups-vr.css" />
  <style>
    /* launcher-only tweaks */
    body{ overflow:auto; }
    .overlay{ position:relative; inset:auto; min-height:100dvh; }
    .overlay .panel{ max-width: 920px; }
    .launcherGrid{
      display:grid; gap:12px;
      grid-template-columns: 1.2fr .8fr;
      align-items:start;
    }
    @media (max-width:860px){
      .launcherGrid{ grid-template-columns:1fr; }
    }
    .box{
      background: rgba(2,6,23,.62);
      border:1px solid var(--stroke);
      border-radius: 18px;
      padding: 14px;
      backdrop-filter: blur(8px);
    }
    .boxTitle{
      font-weight:1000; letter-spacing:.2px; margin-bottom:10px;
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .boxSub{ color:var(--muted); font-weight:800; font-size:13px; line-height:1.35; }
    .btnWide{ flex:1; display:flex; justify-content:center; min-width: 180px; }
    .linkOut{
      width:100%;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid var(--stroke);
      background: rgba(15,23,42,.55);
      color: var(--text);
      font-weight:900;
      word-break: break-all;
    }
    .miniRow{ display:flex; gap:8px; flex-wrap:wrap; align-items:center; }
    .miniBtn{
      padding:10px 12px;
      border-radius:12px;
      border:1px solid var(--stroke);
      background: rgba(15,23,42,.45);
      color:var(--text);
      font-weight:900;
      cursor:pointer;
    }
    .miniBtn:hover{ border-color: rgba(148,163,184,.35); }
  </style>
</head>

<body class="view-pc">

  <div class="overlay">
    <div class="panel">

      <div class="title">üç± Food Groups VR ‚Äî Launcher</div>
      <div class="sub">
        ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏•‡πà‡∏ô <b>PC / Mobile / VR Cardboard</b> ‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ  
        (Run page ‡∏à‡∏∞‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏° ENTER VR/EXIT/RECENTER ‡∏à‡∏≤‡∏Å <code>vr-ui.js</code> ‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)
      </div>

      <div class="hr"></div>

      <div class="launcherGrid">

        <!-- LEFT: quick launch -->
        <div class="box">
          <div class="boxTitle">
            <div>üöÄ ‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</div>
            <span class="tag" id="tagInfo">‚Äî</span>
          </div>

          <div class="row">
            <button id="btnPC" class="btn btn-strong btnWide" type="button">üñ•Ô∏è ‡πÄ‡∏•‡πà‡∏ô‡∏ö‡∏ô PC</button>
            <button id="btnMobile" class="btn btn-strong btnWide" type="button">üì± ‡πÄ‡∏•‡πà‡∏ô‡∏ö‡∏ô Mobile</button>
            <button id="btnCVR" class="btn btn-strong btnWide" type="button">ü•Ω VR Cardboard</button>
          </div>

          <div class="row row2">
            <button id="btnPC_Copy" class="btn btnWide" type="button">üìã Copy link (PC)</button>
            <button id="btnMobile_Copy" class="btn btnWide" type="button">üìã Copy link (Mobile)</button>
            <button id="btnCVR_Copy" class="btn btnWide" type="button">üìã Copy link (Cardboard)</button>
          </div>

          <div class="hr"></div>

          <div class="boxSub">
            ‚úÖ Cardboard: ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î ENTER VR ‡πÅ‡∏•‡πâ‡∏ß <b>‡πÅ‡∏ï‡∏∞‡∏à‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏¥‡∏á‡∏à‡∏≤‡∏Å crosshair</b> (‡πÇ‡∏´‡∏°‡∏î <code>view=cvr</code>)<br/>
            ‚úÖ PC/Mobile: ‡πÅ‡∏ï‡∏∞/‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πâ‡∏≤‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏õ‡∏Å‡∏ï‡∏¥
          </div>
        </div>

        <!-- RIGHT: settings -->
        <div class="box">
          <div class="boxTitle">
            <div>‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</div>
          </div>

          <div class="grid2">
            <div class="kv">
              <div class="k">Run mode</div>
              <div class="v" id="runModeChips">
                <button class="chip chip-on" data-run="play" type="button">PLAY (Adaptive)</button>
                <button class="chip" data-run="research" type="button">RESEARCH (Deterministic)</button>
              </div>
            </div>

            <div class="kv">
              <div class="k">Difficulty</div>
              <div class="v" id="diffChips">
                <button class="chip" data-diff="easy" type="button">Easy</button>
                <button class="chip chip-on" data-diff="normal" type="button">Normal</button>
                <button class="chip" data-diff="hard" type="button">Hard</button>
              </div>
            </div>

            <div class="kv">
              <div class="k">Style</div>
              <div class="v" id="styleChips">
                <button class="chip chip-on" data-style="mix" type="button">Mix</button>
                <button class="chip" data-style="feel" type="button">Feel</button>
                <button class="chip" data-style="hard" type="button">Hard</button>
              </div>
            </div>

            <div class="kv">
              <div class="k">AI (Hooks)</div>
              <div class="v" id="aiChips">
                <button class="chip chip-on" data-ai="off" type="button">AI OFF</button>
                <button class="chip" data-ai="on" type="button">AI ON</button>
              </div>
              <div class="hint">‡πÄ‡∏õ‡∏¥‡∏î AI ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡∏°‡∏µ Coach tips + Director ‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡∏° (‡πÄ‡∏â‡∏û‡∏≤‡∏∞ PLAY)</div>
            </div>

            <div class="kv">
              <div class="k">Time (sec)</div>
              <div class="v">
                <input id="inpTime" class="input" type="number" min="30" max="180" value="90" />
                <span class="hint">30‚Äì180</span>
              </div>
            </div>

            <div class="kv">
              <div class="k">Seed</div>
              <div class="v">
                <input id="inpSeed" class="input" type="text" value="" placeholder="auto" />
                <button id="btnNewSeed" class="miniBtn" type="button">üé≤ New</button>
              </div>
              <div class="hint">Research ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏•‡πá‡∏≠‡∏Å seed ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ú‡∏•‡∏ã‡πâ‡∏≥‡πÑ‡∏î‡πâ</div>
            </div>
          </div>

          <div class="hr"></div>

          <div class="kv">
            <div class="k">Link preview</div>
            <div class="v">
              <div id="linkPreview" class="linkOut">‚Äî</div>
            </div>
            <div class="miniRow" style="margin-top:10px;">
              <button id="btnCopyPreview" class="miniBtn" type="button">üìã Copy preview link</button>
              <button id="btnOpenPreview" class="miniBtn" type="button">üîó Open preview</button>
            </div>
          </div>

        </div>
      </div>

      <div class="hr"></div>

      <div class="note">
        ‡∏ó‡∏¥‡∏õ: ‡∏ñ‡πâ‡∏≤‡∏à‡∏∞‡∏Å‡∏•‡∏±‡∏ö HUB ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏¥‡∏î‡∏ú‡πà‡∏≤‡∏ô <code>?hub=/herohealth/hub.html</code> ‡πÅ‡∏•‡πâ‡∏ß Run ‡∏à‡∏∞‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏•‡∏±‡∏ö HUB ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏£‡∏∏‡∏õ‡∏à‡∏ö‡πÄ‡∏Å‡∏°
      </div>

    </div>
  </div>

<script>
(function(){
  'use strict';
  const DOC = document;
  const $ = (id)=>DOC.getElementById(id);

  function qs(k, def=null){
    try { return new URL(location.href).searchParams.get(k) ?? def; }
    catch { return def; }
  }
  function clamp(v,a,b){ v = Number(v)||0; return v<a?a:(v>b?b:v); }

  async function copyText(text){
    try { await navigator.clipboard.writeText(String(text||'')); return true; }
    catch {
      try{
        const ta = DOC.createElement('textarea');
        ta.value = String(text||'');
        DOC.body.appendChild(ta);
        ta.select();
        DOC.execCommand('copy');
        ta.remove();
        return true;
      }catch{ return false; }
    }
  }

  const state = {
    run: 'play',
    diff: 'normal',
    style: 'mix',
    ai: 'off',
    time: 90,
    seed: '',
    hub: ''
  };

  function setChipOn(containerId, key, val){
    const box = $(containerId);
    if (!box) return;
    [...box.querySelectorAll('.chip')].forEach(ch=>{
      const v = ch.dataset[key];
      ch.classList.toggle('chip-on', v === val);
    });
  }

  function buildRunUrl(view){
    const u = new URL('./vr-groups/groups.html', location.href);
    u.searchParams.set('view', view);
    u.searchParams.set('run', state.run);
    u.searchParams.set('diff', state.diff);
    u.searchParams.set('style', state.style);
    u.searchParams.set('time', String(state.time));
    if (state.ai === 'on') u.searchParams.set('ai','on');
    if (state.seed) u.searchParams.set('seed', state.seed);
    if (state.hub) u.searchParams.set('hub', state.hub);
    return u.toString();
  }

  function refresh(){
    state.time = clamp($('inpTime').value, 30, 180);
    state.seed = String($('inpSeed').value || '').trim();
    $('tagInfo').textContent = `${state.run.toUpperCase()} ‚Ä¢ ${state.diff.toUpperCase()} ‚Ä¢ ${state.style.toUpperCase()} ‚Ä¢ AI:${state.ai.toUpperCase()}`;
    $('linkPreview').textContent = buildRunUrl('mobile');
  }

  function bindChips(containerId, key){
    const box = $(containerId);
    if (!box) return;
    box.addEventListener('click', (e)=>{
      const btn = e.target.closest('.chip');
      if (!btn) return;
      const v = btn.dataset[key];
      if (!v) return;
      state[key] = v;
      setChipOn(containerId, key, v);
      refresh();
    });
  }

  // init from URL
  state.hub = String(qs('hub','')||'').trim();
  $('inpTime').value = String(clamp(qs('time',90), 30, 180));
  $('inpSeed').value = String(qs('seed','')||'');

  bindChips('runModeChips', 'run');
  bindChips('diffChips', 'diff');
  bindChips('styleChips', 'style');
  bindChips('aiChips', 'ai');

  $('btnNewSeed').addEventListener('click', ()=>{
    $('inpSeed').value = String(Date.now());
    refresh();
  });

  $('btnPC').addEventListener('click', ()=> location.href = buildRunUrl('pc'));
  $('btnMobile').addEventListener('click', ()=> location.href = buildRunUrl('mobile'));
  $('btnCVR').addEventListener('click', ()=> location.href = buildRunUrl('cvr'));

  $('btnPC_Copy').addEventListener('click', async ()=>{
    refresh(); const ok = await copyText(buildRunUrl('pc')); alert(ok?'‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå PC ‡πÅ‡∏•‡πâ‡∏ß ‚úÖ':'Copy ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
  });
  $('btnMobile_Copy').addEventListener('click', async ()=>{
    refresh(); const ok = await copyText(buildRunUrl('mobile')); alert(ok?'‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå Mobile ‡πÅ‡∏•‡πâ‡∏ß ‚úÖ':'Copy ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
  });
  $('btnCVR_Copy').addEventListener('click', async ()=>{
    refresh(); const ok = await copyText(buildRunUrl('cvr')); alert(ok?'‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå Cardboard ‡πÅ‡∏•‡πâ‡∏ß ‚úÖ':'Copy ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
  });

  $('btnCopyPreview').addEventListener('click', async ()=>{
    refresh(); const ok = await copyText($('linkPreview').textContent); alert(ok?'‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÅ‡∏•‡πâ‡∏ß ‚úÖ':'Copy ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
  });
  $('btnOpenPreview').addEventListener('click', ()=>{
    refresh(); location.href = $('linkPreview').textContent;
  });

  $('inpTime').addEventListener('input', refresh);
  $('inpSeed').addEventListener('input', refresh);

  refresh();
})();
</script>
</body>
</html>