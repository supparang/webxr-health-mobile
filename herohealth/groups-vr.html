<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>HeroHealth ‚Äî GroupsVR (Launcher)</title>
  <meta name="color-scheme" content="dark" />
  <link rel="icon" href="./favicon.ico" />
  <style>
    html,body{height:100%;margin:0;background:#020617;color:#e5e7eb;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans Thai",sans-serif}
    .wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:16px}
    .card{width:min(720px,100%);background:rgba(2,6,23,.72);border:1px solid rgba(148,163,184,.18);border-radius:22px;padding:16px}
    .t{font-weight:1000;font-size:18px}
    .s{color:#94a3b8;margin-top:6px;font-size:13px;line-height:1.5}
    .pill{display:inline-flex;gap:8px;align-items:center;margin-top:10px;padding:8px 10px;border:1px solid rgba(148,163,184,.18);border-radius:999px;background:rgba(15,23,42,.55);font-size:12px;color:#cbd5e1}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="t">üçö Food Groups VR</div>
      <div class="s">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏≤‡πÑ‡∏õ Warmup 20 ‡∏ß‡∏¥‚Ä¶</div>
      <div class="pill" id="p">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏•‡∏¥‡∏á‡∏Å‡πå</div>
    </div>
  </div>

<script>
(() => {
  'use strict';
  const QS = (()=>{ try{return new URL(location.href).searchParams;}catch{return new URLSearchParams();} })();
  const q = (k,d='') => (QS.get(k) ?? d);

  function detectView(){
    if (QS.has('view')) return String(q('view','')).toLowerCase();
    const ua = navigator.userAgent || '';
    const isMobile = /Android|iPhone|iPad|iPod/i.test(ua) || (Math.min(screen.width, screen.height) <= 820);
    const isVRCapable = !!(navigator.xr && navigator.xr.isSessionSupported);
    if (isVRCapable && isMobile) return 'cvr';
    if (isMobile) return 'mobile';
    return 'pc';
  }

  function buildUrl(base, add){
    const u = new URL(base, location.href);
    Object.entries(add||{}).forEach(([k,v])=>{
      if (v===undefined || v===null || v==='') return;
      u.searchParams.set(k, String(v));
    });
    return u.toString();
  }

  const hub  = String(q('hub','./hub.html'));
  const run  = String(q('run','play'));
  const diff = String(q('diff','normal'));
  const time = String(q('time','90'));
  const seed = String(q('seed',''));
  const style= String(q('style','mix'));
  const view = detectView();

  const RUN  = './vr-groups/groups-vr.html';
  const gate = './warmup-gate.html';

  const nextGame = buildUrl(RUN, {
    view, run, diff, time, seed, style,
    hub,
    gate: 1,
    cdur: 20
  });

  const warmupUrl = buildUrl(gate, {
    view, run, diff, time, seed,
    phase: 'warmup',
    dur: 20,
    cdur: 20,
    hub,
    next: nextGame,
    autonext: 1
  });

  document.getElementById('p').textContent = `view=${view} ‚Ä¢ run=${run} ‚Ä¢ diff=${diff}`;
  location.replace(warmupUrl);
})();
</script>
</body>
</html>
