<!-- === /herohealth/groups-vr.html ===
GroupsVR Launcher (PC/Mobile/Cardboard)
‚úÖ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏•‡πà‡∏ô‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô + ‡∏à‡∏≥‡∏Ñ‡πà‡∏≤‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î (localStorage)
‚úÖ ‡∏™‡πà‡∏á‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÑ‡∏õ run: /herohealth/vr-groups/groups.html
‚úÖ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö hub=... + log=... passthrough
‚úÖ ‡πÇ‡∏´‡∏°‡∏î research/play + ai=1 (‡πÄ‡∏â‡∏û‡∏≤‡∏∞ play)
‚úÖ practice=1 (15s) ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ cVR
-->
<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>HeroHealth ‚Äî GroupsVR Launcher</title>
  <meta name="color-scheme" content="light dark" />
  <link rel="icon" href="./favicon.ico" type="image/x-icon" />

  <style>
    :root{
      color-scheme: dark;
      --bg:#020617;
      --panel:rgba(2,6,23,.78);
      --panel2:rgba(15,23,42,.70);
      --stroke:rgba(148,163,184,.18);
      --text:#e5e7eb;
      --muted:#94a3b8;
      --accent:#22c55e;
      --warn:#f59e0b;
      --cyan:#22d3ee;
      --violet:#a78bfa;
      --radius:22px;
      --pill:999px;

      --sat: env(safe-area-inset-top, 0px);
      --sab: env(safe-area-inset-bottom, 0px);
      --sal: env(safe-area-inset-left, 0px);
      --sar: env(safe-area-inset-right, 0px);
    }
    *{ box-sizing:border-box; }
    html,body{ height:100%; margin:0; }
    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      color: var(--text);
      background:
        radial-gradient(circle at 10% 0%, rgba(34,211,238,.16), transparent 60%),
        radial-gradient(circle at 90% 100%, rgba(167,139,250,.14), transparent 60%),
        var(--bg);
      display:flex;
      align-items:center;
      justify-content:center;
      padding: calc(16px + var(--sat)) calc(16px + var(--sar)) calc(16px + var(--sab)) calc(16px + var(--sal));
    }
    .wrap{ width:min(920px, 100%); }
    .top{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:12px;
      margin-bottom: 12px;
    }
    .brand{ display:flex; flex-direction:column; gap:4px; }
    .title{
      font-size: 26px;
      font-weight: 1000;
      letter-spacing:.2px;
      margin:0;
    }
    .sub{
      color: var(--muted);
      font-weight: 800;
      line-height: 1.35;
      margin:0;
    }
    .panel{
      background: linear-gradient(180deg, rgba(2,6,23,.90), rgba(2,6,23,.72));
      border: 1px solid var(--stroke);
      border-radius: var(--radius);
      padding: 16px;
      box-shadow: 0 18px 60px rgba(0,0,0,.35);
    }
    .grid{
      display:grid;
      grid-template-columns: 1.25fr .75fr;
      gap: 14px;
      margin-top: 12px;
    }
    @media (max-width:860px){
      .grid{ grid-template-columns:1fr; }
      .top{ flex-direction:column; align-items:flex-start; }
    }

    .cards{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
    }
    @media (max-width:860px){
      .cards{ grid-template-columns:1fr; }
    }

    .card{
      background: rgba(15,23,42,.55);
      border: 1px solid var(--stroke);
      border-radius: 18px;
      padding: 14px;
      display:flex;
      flex-direction:column;
      gap:10px;
      transition: transform .08s ease, border-color .12s ease, background .12s ease;
    }
    .card:hover{ border-color: rgba(148,163,184,.35); transform: translateY(-1px); }
    .card h3{
      margin:0;
      font-size: 16px;
      font-weight: 1000;
      letter-spacing:.2px;
      display:flex;
      gap:8px;
      align-items:center;
    }
    .card p{
      margin:0;
      color: var(--muted);
      font-weight: 800;
      line-height: 1.35;
      font-size: 13px;
    }

    .btn{
      appearance:none;
      border: 1px solid var(--stroke);
      background: rgba(15,23,42,.65);
      color: var(--text);
      border-radius: 14px;
      padding: 11px 12px;
      font-weight: 1000;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      transition: transform .08s ease, border-color .12s ease, background .12s ease;
      text-decoration:none;
      user-select:none;
    }
    .btn:active{ transform: translateY(1px) scale(.99); }
    .btn:hover{ border-color: rgba(148,163,184,.35); }
    .btn-strong{
      background: linear-gradient(180deg, rgba(34,197,94,.25), rgba(34,197,94,.10));
      border-color: rgba(34,197,94,.35);
    }
    .btn-warn{
      background: linear-gradient(180deg, rgba(245,158,11,.26), rgba(245,158,11,.10));
      border-color: rgba(245,158,11,.35);
    }
    .btn-ghost{ background: rgba(15,23,42,.35); }

    .right .kv{
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
    }
    .kvBlock{
      background: rgba(15,23,42,.50);
      border: 1px solid var(--stroke);
      border-radius: 18px;
      padding: 12px;
    }
    .k{
      color: var(--muted);
      font-weight: 1000;
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing:.4px;
      margin-bottom: 8px;
    }
    .v{ display:flex; gap:8px; flex-wrap:wrap; align-items:center; }

    .chip{
      border:1px solid var(--stroke);
      background: rgba(15,23,42,.55);
      color: var(--text);
      border-radius: var(--pill);
      padding: 8px 12px;
      cursor:pointer;
      font-weight: 1000;
      font-size: 13px;
      user-select:none;
    }
    .chip.on{
      border-color: rgba(34,197,94,.42);
      background: rgba(34,197,94,.16);
    }
    .input{
      width: 110px;
      padding: 10px 12px;
      border-radius: 12px;
      border:1px solid var(--stroke);
      background: rgba(15,23,42,.55);
      color:var(--text);
      font-weight: 1000;
    }
    .help{
      margin-top:10px;
      color: var(--muted);
      font-weight: 800;
      font-size: 13px;
      line-height: 1.45;
    }
    .small{
      font-size: 12px;
      opacity:.92;
    }

    .footerRow{
      margin-top: 12px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:space-between;
      align-items:center;
    }
    .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="top">
      <div class="brand">
        <h1 class="title">ü•¶ HeroHealth ‚Äî GroupsVR</h1>
        <p class="sub">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏•‡πà‡∏ô: PC / Mobile / Cardboard (cVR) ‚Ä¢ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏à‡∏≥‡∏Ñ‡πà‡∏≤‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡πÉ‡∏´‡πâ</p>
      </div>
      <div>
        <button id="btnOpenHub" class="btn btn-ghost" type="button">üè† ‡∏Å‡∏•‡∏±‡∏ö HUB</button>
      </div>
    </div>

    <div class="panel">
      <div class="grid">
        <!-- Left: entry cards -->
        <div class="left">
          <div class="cards">
            <div class="card">
              <h3>üñ•Ô∏è PC (Mouse/Touch)</h3>
              <p>‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏î‡πÇ‡∏°‡πà/‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ö‡∏ô‡∏Ñ‡∏≠‡∏° ‚Ä¢ ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏õ‡πâ‡∏≤‡πÑ‡∏î‡πâ‡∏ï‡∏£‡∏á‡πÜ ‚Ä¢ ‡πÄ‡∏´‡πá‡∏ô HUD ‡∏Ñ‡∏£‡∏ö</p>
              <button class="btn btn-strong" data-view="pc" type="button">‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏•‡πà‡∏ô PC</button>
            </div>

            <div class="card">
              <h3>üì± Mobile (Touch + Gyro feel)</h3>
              <p>‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ ‚Ä¢ ‡πÅ‡∏ï‡∏∞‡πÄ‡∏õ‡πâ‡∏≤‡πÑ‡∏î‡πâ ‚Ä¢ ‡∏°‡∏µ VR-feel ‡∏Ç‡∏¢‡∏±‡∏ö‡∏â‡∏≤‡∏Å‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏≠‡∏µ‡∏¢‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</p>
              <button class="btn btn-strong" data-view="mobile" type="button">‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏•‡πà‡∏ô Mobile</button>
            </div>

            <div class="card">
              <h3>üï∂Ô∏è Cardboard (cVR ‡∏¢‡∏¥‡∏á‡∏à‡∏≤‡∏Å crosshair)</h3>
              <p>‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö VR Cardboard ‚Ä¢ ‡πÅ‡∏ï‡∏∞‡∏à‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏¥‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠ ‚Ä¢ ‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏° ENTER VR/RECENTER ‡∏à‡∏≤‡∏Å vr-ui.js</p>
              <button class="btn btn-warn" data-view="cvr" type="button">‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏•‡πà‡∏ô Cardboard</button>
            </div>
          </div>

          <div class="help">
            <div>‚úÖ <b>Cardboard (cVR)</b>: ‡πÄ‡∏Ç‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î <b>ENTER VR</b> ‡∏ó‡∏µ‡πà UI ‡∏Ç‡∏≠‡∏á <span class="mono">vr-ui.js</span> (‡∏°‡∏∏‡∏°‡∏•‡πà‡∏≤‡∏á/‡πÅ‡∏ñ‡∏ö‡∏•‡∏≠‡∏¢) ‚Üí ‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô ‚Äú‡πÅ‡∏ï‡∏∞‡∏à‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏¥‡∏á‚Äù</div>
            <div class="small" style="margin-top:6px;">‡∏ó‡∏¥‡∏õ: ‡∏ñ‡πâ‡∏≤‡∏õ‡∏∏‡πà‡∏° ENTER VR ‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô ‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤ run ‡πÇ‡∏´‡∏•‡∏î <span class="mono">../vr/vr-ui.js</span> ‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á ‡πÅ‡∏•‡∏∞‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô https</div>
          </div>
        </div>

        <!-- Right: settings -->
        <div class="right">
          <div class="kv">

            <div class="kvBlock">
              <div class="k">Run mode</div>
              <div class="v" id="modeBox">
                <span class="chip" data-mode="play">üéÆ play</span>
                <span class="chip" data-mode="research">üß™ research</span>
              </div>
              <div class="help small">‡πÇ‡∏´‡∏°‡∏î research ‡∏à‡∏∞‡∏õ‡∏¥‡∏î adaptive/AI ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (‡∏Ñ‡∏á deterministic seed)</div>
            </div>

            <div class="kvBlock">
              <div class="k">Difficulty</div>
              <div class="v" id="diffBox">
                <span class="chip" data-diff="easy">easy</span>
                <span class="chip" data-diff="normal">normal</span>
                <span class="chip" data-diff="hard">hard</span>
              </div>
            </div>

            <div class="kvBlock">
              <div class="k">Style</div>
              <div class="v" id="styleBox">
                <span class="chip" data-style="mix">mix</span>
                <span class="chip" data-style="feel">feel</span>
                <span class="chip" data-style="hard">hard</span>
              </div>
            </div>

            <div class="kvBlock">
              <div class="k">Time (sec) / Seed</div>
              <div class="v">
                <input id="inpTime" class="input" type="number" min="30" max="180" step="10" value="90" />
                <input id="inpSeed" class="input" type="text" placeholder="auto" />
                <button id="btnNewSeed" class="btn btn-ghost" type="button">üé≤ seed</button>
              </div>
              <div class="help small">‡∏õ‡∏•‡πà‡∏≠‡∏¢ seed ‡∏ß‡πà‡∏≤‡∏á = auto (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö play) ‚Ä¢ research ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Å‡∏≥‡∏´‡∏ô‡∏î seed ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô</div>
            </div>

            <div class="kvBlock">
              <div class="k">Options</div>
              <div class="v">
                <label class="chip" style="display:inline-flex;gap:8px;align-items:center;">
                  <input id="chkAI" type="checkbox" style="accent-color:#22c55e;" />
                  <span>AI (‡πÄ‡∏â‡∏û‡∏≤‡∏∞ play) ‚Üí ai=1</span>
                </label>
                <label class="chip" style="display:inline-flex;gap:8px;align-items:center;">
                  <input id="chkPractice" type="checkbox" style="accent-color:#f59e0b;" />
                  <span>Practice 15s (‡πÄ‡∏â‡∏û‡∏≤‡∏∞ cVR) ‚Üí practice=1</span>
                </label>
              </div>
              <div class="help small">AI ‡πÄ‡∏õ‡πá‡∏ô ‚Äú‡∏à‡∏∏‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏ö‚Äù (hooks) ‚Äî ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏î‡πâ‡πÉ‡∏ô play ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</div>
            </div>

          </div>
        </div>
      </div>

      <div class="footerRow">
        <div class="help small">
          Run path: <span class="mono">/herohealth/vr-groups/groups.html</span>
        </div>
        <div style="display:flex;gap:10px;flex-wrap:wrap;">
          <button id="btnCopyLink" class="btn" type="button">üîó ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå</button>
          <button id="btnOpenRun" class="btn btn-strong" type="button">‚ñ∂Ô∏è ‡πÄ‡∏õ‡∏¥‡∏î Run ‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡πà‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</button>
        </div>
      </div>
    </div>
  </div>

<script>
(function(){
  'use strict';
  const DOC = document;

  const LS_KEY = 'HHA_GROUPS_LAUNCHER';
  const RUN_REL = './vr-groups/groups.html';

  const $ = (id)=>DOC.getElementById(id);
  const clamp = (v,a,b)=>{ v=Number(v)||0; return v<a?a:(v>b?b:v); };

  function qs(k, def=null){
    try { return new URL(location.href).searchParams.get(k) ?? def; }
    catch { return def; }
  }

  function loadState(){
    try{ return JSON.parse(localStorage.getItem(LS_KEY)||'{}'); }catch{ return {}; }
  }
  function saveState(s){
    try{ localStorage.setItem(LS_KEY, JSON.stringify(s||{})); }catch{}
  }

  const state = Object.assign({
    view: 'mobile',
    run: 'play',
    diff:'normal',
    style:'mix',
    time: 90,
    seed: '',
    ai: false,
    practice: true
  }, loadState());

  // passthrough params
  const hub = String(qs('hub','')||'');
  const log = String(qs('log','')||'');

  function setChips(boxId, key, val){
    const box = $(boxId);
    if (!box) return;
    box.querySelectorAll('.chip').forEach(ch=>{
      const v = ch.getAttribute('data-'+key);
      ch.classList.toggle('on', String(v) === String(val));
    });
  }

  function applyUI(){
    setChips('modeBox', 'mode', state.run);
    setChips('diffBox', 'diff', state.diff);
    setChips('styleBox','style', state.style);

    $('inpTime').value = String(clamp(state.time,30,180));
    $('inpSeed').value = String(state.seed||'');
    $('chkAI').checked = !!state.ai;
    $('chkPractice').checked = !!state.practice;

    // hub button
    $('btnOpenHub').style.display = hub ? 'inline-flex' : 'none';

    // research disables AI toggle
    $('chkAI').disabled = (state.run === 'research');
    if (state.run === 'research') $('chkAI').checked = false;
  }

  function updateState(patch){
    Object.assign(state, patch||{});
    // sanitize
    state.run = (state.run==='research') ? 'research' : 'play';
    state.diff = ['easy','normal','hard'].includes(state.diff) ? state.diff : 'normal';
    state.style = ['mix','feel','hard'].includes(state.style) ? state.style : 'mix';
    state.time = clamp(state.time, 30, 180);
    if (state.run === 'research') state.ai = false;
    saveState(state);
    applyUI();
  }

  function buildRunUrl(viewOverride){
    const view = String(viewOverride || state.view || 'mobile');
    const u = new URL(RUN_REL, location.href);

    u.searchParams.set('view', view);
    u.searchParams.set('run', state.run);
    u.searchParams.set('diff', state.diff);
    u.searchParams.set('style', state.style);
    u.searchParams.set('time', String(clamp(state.time,30,180)));

    // seed: if blank => auto (run page will auto)
    if (String(state.seed||'').trim()) u.searchParams.set('seed', String(state.seed).trim());

    // AI only in play
    if (state.run === 'play' && state.ai) u.searchParams.set('ai', '1');

    // practice only for cVR
    if (view === 'cvr' && state.practice) u.searchParams.set('practice', '1');

    if (hub) u.searchParams.set('hub', hub);
    if (log) u.searchParams.set('log', log);

    // passthrough unknown params from launcher to run
    const sp = new URL(location.href).searchParams;
    sp.forEach((v,k)=>{
      if (['hub','log'].includes(k)) return;
      if (['view','run','diff','style','time','seed','ai','practice'].includes(k)) return;
      u.searchParams.set(k, v);
    });

    return u.toString();
  }

  async function copyText(text){
    try{ await navigator.clipboard.writeText(String(text||'')); return true; }
    catch{
      try{
        const ta = DOC.createElement('textarea');
        ta.value = String(text||'');
        DOC.body.appendChild(ta);
        ta.select();
        DOC.execCommand('copy');
        ta.remove();
        return true;
      }catch{ return false; }
    }
  }

  // --- bind chips ---
  DOC.querySelectorAll('#modeBox .chip').forEach(ch=>{
    ch.addEventListener('click', ()=>{
      updateState({ run: ch.getAttribute('data-mode') });
    });
  });
  DOC.querySelectorAll('#diffBox .chip').forEach(ch=>{
    ch.addEventListener('click', ()=>{
      updateState({ diff: ch.getAttribute('data-diff') });
    });
  });
  DOC.querySelectorAll('#styleBox .chip').forEach(ch=>{
    ch.addEventListener('click', ()=>{
      updateState({ style: ch.getAttribute('data-style') });
    });
  });

  $('inpTime').addEventListener('change', ()=>{
    updateState({ time: clamp($('inpTime').value,30,180) });
  });
  $('inpSeed').addEventListener('change', ()=>{
    updateState({ seed: String($('inpSeed').value||'') });
  });
  $('chkAI').addEventListener('change', ()=>{
    updateState({ ai: !!$('chkAI').checked });
  });
  $('chkPractice').addEventListener('change', ()=>{
    updateState({ practice: !!$('chkPractice').checked });
  });
  $('btnNewSeed').addEventListener('click', ()=>{
    const s = String(Date.now());
    updateState({ seed: s });
  });

  // entry buttons
  DOC.querySelectorAll('[data-view]').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const view = btn.getAttribute('data-view');
      updateState({ view });
      location.href = buildRunUrl(view);
    });
  });

  $('btnOpenRun').addEventListener('click', ()=>{
    location.href = buildRunUrl(state.view);
  });

  $('btnCopyLink').addEventListener('click', async ()=>{
    const url = buildRunUrl(state.view);
    const ok = await copyText(url);
    alert(ok ? '‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÅ‡∏•‡πâ‡∏ß ‚úÖ' : 'Copy ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
  });

  $('btnOpenHub').addEventListener('click', ()=>{
    if (!hub) return;
    location.href = hub;
  });

  // init
  applyUI();
})();
</script>
</body>
</html>