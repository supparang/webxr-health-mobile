<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>HeroHealth ‚Äî GroupsVR Launcher</title>
  <meta name="color-scheme" content="light dark" />
  <link rel="icon" href="./favicon.ico" type="image/x-icon" />

  <!-- reuse overlay/panel style from groups-vr.css -->
  <link rel="stylesheet" href="./vr-groups/groups-vr.css" />
  <style>
    body{ overflow:auto; }
    .overlay{ position:relative; inset:auto; min-height:100vh; }
    .panel{ margin: 18px auto; }
    .launchGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
      margin-top: 12px;
    }
    @media (max-width:720px){ .launchGrid{ grid-template-columns:1fr; } }
    .card{
      border:1px solid var(--stroke);
      border-radius: 18px;
      background: rgba(2,6,23,.65);
      padding: 12px;
    }
    .card h3{ margin:0 0 8px 0; font-size:14px; letter-spacing:.2px; }
    .miniRow{ display:flex; gap:8px; flex-wrap:wrap; align-items:center; }
    .aRow{ display:flex; gap:10px; flex-wrap:wrap; margin-top:12px; }
    .small{ font-size:12px; color:var(--muted); font-weight:800; line-height:1.35; }
    .hrefPreview{
      margin-top:10px;
      padding:10px;
      border-radius: 14px;
      border:1px dashed rgba(148,163,184,.28);
      background: rgba(15,23,42,.35);
      font: 800 12px/1.35 ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      color: rgba(229,231,235,.95);
      word-break: break-all;
    }
  </style>
</head>

<body>
  <div class="overlay">
    <div class="panel">
      <div class="title">üç± Food Groups VR ‚Äî Launcher</div>
      <div class="sub">
        ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏•‡πà‡∏ô: <b>PC</b> / <b>Mobile</b> / <b>VR Cardboard (cVR)</b><br/>
        ‚úÖ VR Cardboard: ‡πÅ‡∏ï‡∏∞‡∏à‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏¥‡∏á‡∏à‡∏≤‡∏Å crosshair (vr-ui.js)
      </div>

      <div class="hr"></div>

      <div class="launchGrid">
        <div class="card">
          <h3>1) ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å View</h3>
          <div class="miniRow" id="viewRow">
            <button class="chip chip-on" data-view="pc" type="button">üñ•Ô∏è PC</button>
            <button class="chip" data-view="mobile" type="button">üì± Mobile</button>
            <button class="chip" data-view="vr" type="button">üï∂Ô∏è VR (WebXR)</button>
            <button class="chip" data-view="cvr" type="button">üì¶ Cardboard (cVR)</button>
          </div>
          <div class="small" style="margin-top:8px;">
            * ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ Cardboard ‡πÉ‡∏ä‡πâ <b>view=cvr</b> (‡∏¢‡∏¥‡∏á‡∏à‡∏≤‡∏Å crosshair, targets ‡πÑ‡∏°‡πà‡∏£‡∏±‡∏ö tap)
          </div>
        </div>

        <div class="card">
          <h3>2) ‡πÇ‡∏´‡∏°‡∏î‡∏ß‡∏¥‡∏à‡∏±‡∏¢/‡πÄ‡∏•‡πà‡∏ô</h3>
          <div class="miniRow" id="runRow">
            <button class="chip chip-on" data-run="play" type="button">üéÆ play (adaptive)</button>
            <button class="chip" data-run="research" type="button">üß™ research (deterministic)</button>
          </div>

          <div class="small" style="margin-top:8px;">
            research ‡∏à‡∏∞‡∏õ‡∏¥‡∏î adaptive ‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ seed ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ reproducible
          </div>
        </div>

        <div class="card">
          <h3>3) ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å / ‡∏™‡πÑ‡∏ï‡∏•‡πå</h3>
          <div class="miniRow" id="diffRow">
            <button class="chip" data-diff="easy" type="button">easy</button>
            <button class="chip chip-on" data-diff="normal" type="button">normal</button>
            <button class="chip" data-diff="hard" type="button">hard</button>
          </div>

          <div class="miniRow" id="styleRow" style="margin-top:10px;">
            <button class="chip chip-on" data-style="mix" type="button">mix</button>
            <button class="chip" data-style="feel" type="button">feel</button>
            <button class="chip" data-style="hard" type="button">hard</button>
          </div>

          <div class="small" style="margin-top:8px;">
            feel = wave ‡∏ä‡∏±‡∏î / hard = spiral ‡∏ä‡∏±‡∏î / mix = ‡∏™‡∏∏‡πà‡∏° burst/wave
          </div>
        </div>

        <div class="card">
          <h3>4) ‡πÄ‡∏ß‡∏•‡∏≤ / seed / practice</h3>
          <div class="miniRow">
            <label class="small">‡πÄ‡∏ß‡∏•‡∏≤ (30‚Äì180s)</label>
            <input id="inTime" class="input" type="number" value="90" min="30" max="180"/>
            <button id="btnRandSeed" class="btn btn-ghost" type="button">üé≤ seed</button>
          </div>
          <div class="miniRow" style="margin-top:10px;">
            <label class="small">seed</label>
            <input id="inSeed" class="input" style="width:220px" type="text" value=""/>
          </div>

          <div class="miniRow" style="margin-top:10px;">
            <button class="chip chip-on" id="chipPractice" type="button">‚úÖ practice 15s</button>
            <div class="small">‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡∏ù‡∏∂‡∏Å‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡∏à‡∏£‡∏¥‡∏á</div>
          </div>
        </div>
      </div>

      <div class="hr"></div>

      <div class="aRow">
        <button id="btnPlay" class="btn btn-strong" type="button">‚ñ∂Ô∏è ‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏•‡πà‡∏ô</button>
        <button id="btnCopy" class="btn" type="button">üìã Copy URL</button>
        <button id="btnOpenHub" class="btn btn-ghost" type="button">üè† ‡πÑ‡∏õ HUB</button>
      </div>

      <div id="urlBox" class="hrefPreview">‚Äî</div>

      <div class="note" style="margin-top:10px;">
        üí° Tip: Cardboard ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ <b>view=cvr</b> ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡∏¥‡∏î practice ‡∏ä‡πà‡∏ß‡∏¢‡∏Ñ‡∏≤‡∏•‡∏¥‡πÄ‡∏ö‡∏£‡∏ï‡∏Å‡∏≤‡∏£‡∏¢‡∏¥‡∏á
      </div>
    </div>
  </div>

<script>
(function(){
  'use strict';
  const DOC = document;
  const $ = (id)=>DOC.getElementById(id);

  function qs(k, def=null){
    try { return new URL(location.href).searchParams.get(k) ?? def; }
    catch { return def; }
  }
  function setOn(rowId, attr, value){
    const row = $(rowId);
    row.querySelectorAll('.chip').forEach(b=>{
      const v = b.getAttribute(attr);
      b.classList.toggle('chip-on', v===value);
    });
  }
  function getOn(rowId, attr){
    const row = $(rowId);
    const on = row.querySelector('.chip-on');
    return on ? on.getAttribute(attr) : null;
  }
  function clamp(v,a,b){ v = Number(v)||0; return v<a?a:(v>b?b:v); }

  // defaults
  const hub = qs('hub','') || '';
  if (!$('inSeed').value){
    $('inSeed').value = String(Date.now());
  }

  // click chips
  function bindRow(rowId, attr){
    const row = $(rowId);
    row.addEventListener('click', (e)=>{
      const b = e.target.closest('.chip');
      if (!b) return;
      const v = b.getAttribute(attr);
      setOn(rowId, attr, v);
      renderUrl();
    });
  }
  bindRow('viewRow','data-view');
  bindRow('runRow','data-run');
  bindRow('diffRow','data-diff');
  bindRow('styleRow','data-style');

  // practice toggle
  $('chipPractice').addEventListener('click', ()=>{
    $('chipPractice').classList.toggle('chip-on');
    renderUrl();
  });

  $('btnRandSeed').addEventListener('click', ()=>{
    $('inSeed').value = String(Date.now());
    renderUrl();
  });

  $('inTime').addEventListener('input', renderUrl);
  $('inSeed').addEventListener('input', renderUrl);

  function makeUrl(){
    const view = getOn('viewRow','data-view') || 'pc';
    const run  = getOn('runRow','data-run') || 'play';
    const diff = getOn('diffRow','data-diff') || 'normal';
    const style= getOn('styleRow','data-style') || 'mix';
    const time = clamp($('inTime').value, 30, 180);
    const seed = String($('inSeed').value || Date.now());
    const practice = $('chipPractice').classList.contains('chip-on') ? '1' : '0';

    const u = new URL('./vr-groups/groups.html', location.href);
    u.searchParams.set('view', view);
    u.searchParams.set('run', run);
    u.searchParams.set('diff', diff);
    u.searchParams.set('style', style);
    u.searchParams.set('time', String(time));
    u.searchParams.set('seed', seed);
    u.searchParams.set('practice', practice);
    if (hub) u.searchParams.set('hub', hub);
    return u.toString();
  }

  function renderUrl(){
    $('urlBox').textContent = makeUrl();
  }

  async function copyText(text){
    try { await navigator.clipboard.writeText(String(text||'')); return true; }
    catch {
      try{
        const ta = DOC.createElement('textarea');
        ta.value = String(text||'');
        DOC.body.appendChild(ta);
        ta.select();
        DOC.execCommand('copy');
        ta.remove();
        return true;
      }catch{ return false; }
    }
  }

  $('btnPlay').addEventListener('click', ()=>{
    location.href = makeUrl();
  });

  $('btnCopy').addEventListener('click', async ()=>{
    const ok = await copyText(makeUrl());
    alert(ok ? '‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å URL ‡πÅ‡∏•‡πâ‡∏ß ‚úÖ' : 'Copy ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
  });

  $('btnOpenHub').addEventListener('click', ()=>{
    if (!hub){ alert('Launcher ‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå hub=...'); return; }
    location.href = hub;
  });

  renderUrl();
})();
</script>
</body>
</html>