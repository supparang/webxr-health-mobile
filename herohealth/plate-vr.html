<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>HeroHealth — Plate (Launcher)</title>
  <meta name="color-scheme" content="dark light" />
  <link rel="icon" href="./favicon.ico" />
</head>
<body>
<script>
(() => {
  'use strict';
  function getQS(){
    try { return new URL(location.href).searchParams; }
    catch { return new URLSearchParams(); }
  }
  const QS = getQS();

  const HUB = QS.get('hub') || new URL('./hub.html', location.href).toString();

  // ✅ NEXT = actual RUN page for Plate
  // (คุณมี plate/plate.safe.js เป็น engine — run page มักอยู่ /herohealth/plate/plate-vr.html หรือ /herohealth/plate/plate.html)
  // ถ้าของคุณชื่อไม่ตรง เปลี่ยนบรรทัดนี้บรรทัดเดียว
  const NEXT = new URL('./plate/plate-vr.html', location.href).toString();

  const deny = new Set(['next','phase','dur','cdur']);
  const pass = new URLSearchParams();
  QS.forEach((v,k)=>{ if(!deny.has(k)) pass.set(k,v); });

  const gate = new URL('./quest-gate.html', location.href);
  gate.searchParams.set('phase','warmup');
  gate.searchParams.set('next', NEXT);
  gate.searchParams.set('hub', HUB);
  pass.forEach((v,k)=> gate.searchParams.set(k,v));

  location.replace(gate.toString());
})();
</script>
</body>
</html>
