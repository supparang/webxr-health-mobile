<!-- === /herohealth/plate-vr.html ===
HeroHealth ‚Äî Balanced Plate VR (Layout v2: Compact HUD + Bottom Ticker)
‚úÖ IDs ‡∏Ñ‡∏£‡∏ö‡πÉ‡∏´‡πâ plate.safe.js ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÑ‡∏î‡πâ
‚úÖ ‡∏Ñ‡∏∑‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà gameplay ‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ (portrait friendly)
-->

<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>HeroHealth ‚Äî Balanced Plate VR</title>
  <meta name="color-scheme" content="dark" />
  <link rel="icon" href="./favicon.ico" type="image/x-icon" />

  <!-- A-Frame core -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

  <!-- Global FX / Logger (IIFE) -->
  <script src="./vr/particles.js" defer></script>
  <script src="./vr/hha-cloud-logger.js" defer></script>
  <script src="./vr/hha-compat-input.js" defer></script>

  <style>
    :root{
      --bg:#020617;
      --panel:rgba(2,6,23,.70);
      --panel2:rgba(15,23,42,.66);
      --stroke:rgba(148,163,184,.22);
      --text:#e5e7eb;
      --muted:rgba(229,231,235,.72);

      --r:20px;
      --shadow:0 18px 46px rgba(0,0,0,.38);

      --safe-top: 82px;    /* ‡∏Å‡∏±‡∏ô HUD ‡∏ö‡∏ô */
      --safe-btm: 96px;    /* ‡∏Å‡∏±‡∏ô ticker ‡∏•‡πà‡∏≤‡∏á */
      --safe-right: 74px;  /* ‡∏Å‡∏±‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏Ç‡∏ß‡∏≤ */
    }

    html,body{ height:100%; }
    body{
      margin:0;
      background: radial-gradient(1200px 700px at 50% -10%, rgba(59,130,246,.14), transparent 55%),
                  radial-gradient(900px 600px at 20% 120%, rgba(34,197,94,.10), transparent 55%),
                  var(--bg);
      color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans Thai", "Noto Sans", Arial;
      overflow:hidden;
      touch-action:none;
    }

    /* ---------- HUD base ---------- */
    .hud{
      position:fixed;
      z-index:900;
      pointer-events:none;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .card{
      background: linear-gradient(180deg, rgba(2,6,23,.72), rgba(2,6,23,.58));
      border:1px solid var(--stroke);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      border-radius: var(--r);
      padding: 10px 12px;
    }
    .row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 12px;
      border-radius:999px;
      border:1px solid var(--stroke);
      background: rgba(15,23,42,.36);
      font-weight: 900;
      letter-spacing:.01em;
      line-height:1;
      pointer-events:none;
    }
    .pill .k{ opacity:.82; font-weight:1000; }
    .pill .v{ font-variant-numeric: tabular-nums; font-weight:1000; }

    /* ---------- TOP BAR (tiny) ---------- */
    #hudTop{
      left: 12px;
      top: 12px;
      right: 12px;
      pointer-events:none;
    }
    #hudTop .card{
      padding: 10px 10px;
      border-radius: 22px;
    }
    #hudTop .row{
      justify-content:flex-start;
      gap:10px;
    }
    .pill.small{
      padding: 8px 12px;
      font-size: 15px;
    }

    /* row2 = ‡πÄ‡∏≠‡∏≤‡πÑ‡∏ß‡πâ‡πÉ‡∏´‡πâ plate.safe.js append shield/lives/power ‡πÑ‡∏î‡πâ */
    #hudTop .row2{
      margin-top: 8px;
      opacity:.95;
    }

    /* ---------- RIGHT FLOAT BUTTONS ---------- */
    #hudRight{
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      pointer-events:none;
    }
    #hudRight .stack{
      display:flex;
      flex-direction:column;
      gap:10px;
      align-items:flex-end;
    }
    .btn{
      pointer-events:auto;
      cursor:pointer;
      border:none;
      border-radius: 999px;
      padding: 10px 14px;
      font-weight: 1000;
      color: var(--text);
      background: rgba(2,6,23,.70);
      border:1px solid var(--stroke);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      min-width: 132px;
      text-align:center;
    }
    .btn:active{ transform: translateY(1px); }
    .btn.vr{ min-width: 132px; }
    .btn.pause{ min-width: 132px; }
    .btn.restart{ min-width: 132px; }

    /* ‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠: ‡∏õ‡∏∏‡πà‡∏°‡∏Ç‡∏ß‡∏≤‡∏•‡∏≠‡∏¢‡∏ä‡∏¥‡∏î‡∏•‡πà‡∏≤‡∏á ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏à‡∏≠ */
    @media (max-width: 520px){
      #hudRight{
        top:auto;
        bottom: 108px;
        transform:none;
      }
      .btn{
        min-width: 118px;
        padding: 10px 12px;
        font-size: 14px;
      }
    }

    /* ---------- BOTTOM TICKER (QUEST+MINI) ---------- */
    #hudBottom{
      left: 12px;
      right: 12px;
      bottom: 12px;
      pointer-events:auto;
    }
    #hudBottom .card{
      padding: 10px 12px;
      border-radius: 22px;
    }
    .ticker{
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .tickline{
      display:flex;
      align-items:flex-start;
      gap:10px;
      font-weight: 1000;
      line-height:1.25;
    }
    .tickline .ic{
      width: 34px;
      height: 34px;
      border-radius: 12px;
      display:grid;
      place-items:center;
      border:1px solid var(--stroke);
      background: rgba(15,23,42,.36);
      flex: 0 0 auto;
    }
    .tickline .main{
      flex:1 1 auto;
      min-width: 0;
    }
    .tickline .title{
      font-size: 15px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .tickline .sub{
      margin-top:4px;
      font-size: 13px;
      color: var(--muted);
      display:none; /* ‡∏õ‡∏Å‡∏ï‡∏¥‡∏ã‡πà‡∏≠‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏∑‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà */
    }

    /* ‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠ ‚Äú‡∏Ç‡∏¢‡∏≤‡∏¢‚Äù hint (‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î) */
    #hudBottom details{
      border:1px solid rgba(148,163,184,.14);
      border-radius: 18px;
      padding: 8px 10px;
      background: rgba(15,23,42,.18);
    }
    #hudBottom summary{
      list-style:none;
      cursor:pointer;
      font-weight:1000;
      color: rgba(229,231,235,.92);
      outline:none;
    }
    #hudBottom summary::-webkit-details-marker{ display:none; }
    #hudBottom details[open] .tickline .sub{ display:block; }

    /* ---------- STATUS BAR (minimal extra) ---------- */
    #hudMiniStatus{
      display:flex;
      gap:10px;
      align-items:center;
      margin-top: 8px;
      opacity:.9;
      flex-wrap:wrap;
    }
    #hudMiniStatus .pill{
      padding: 7px 11px;
      font-size: 13px;
    }

    /* ---------- FEVER bar tiny (inside top) ---------- */
    .feverWrap{
      flex: 1 1 auto;
      min-width: 160px;
      max-width: 360px;
      padding: 8px 10px;
      border-radius: 999px;
      border:1px solid var(--stroke);
      background: rgba(15,23,42,.26);
      display:flex;
      align-items:center;
      gap:10px;
      overflow:hidden;
    }
    .feverTrack{
      flex:1 1 auto;
      height: 10px;
      border-radius:999px;
      background: rgba(148,163,184,.14);
      overflow:hidden;
      position:relative;
    }
    .feverFill{
      height:100%;
      width:0%;
      border-radius:999px;
      background: rgba(250,204,21,.75);
      box-shadow: 0 0 24px rgba(250,204,21,.18);
    }
    .feverPct{
      font-variant-numeric: tabular-nums;
      font-weight:1000;
      min-width: 48px;
      text-align:right;
      color: rgba(229,231,235,.90);
    }

    /* ---------- PAUSED tag ---------- */
    #hudPaused{
      position:fixed;
      left:50%;
      top: 96px;
      transform:translateX(-50%);
      z-index:950;
      pointer-events:none;
      display:none;
    }
    #hudPaused .card{
      padding: 10px 14px;
      border-radius: 999px;
      font-weight: 1000;
    }

    /* ---------- RESULT OVERLAY ---------- */
    #resultBackdrop{
      position:fixed;
      inset:0;
      z-index:1200;
      display:none;
      align-items:center;
      justify-content:center;
      background: rgba(0,0,0,.66);
      backdrop-filter: blur(6px);
      padding: 16px;
    }
    #resultCard{
      width: min(760px, 92vw);
      max-height: 86vh;
      overflow:auto;
      border-radius: 26px;
      padding: 14px;
      border:1px solid rgba(148,163,184,.22);
      background: rgba(2,6,23,.78);
      box-shadow: var(--shadow);
    }
    #resultCard h2{
      margin: 6px 0 10px;
      font-size: 22px;
    }
    #resultGrid{
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap:10px;
    }
    @media (max-width:520px){
      #resultGrid{ grid-template-columns: 1fr; }
    }
    .kv{
      border:1px solid rgba(148,163,184,.18);
      background: rgba(15,23,42,.30);
      border-radius:18px;
      padding:10px 12px;
    }
    .kv .k{ color: rgba(229,231,235,.72); font-weight:900; }
    .kv .v{ font-weight:1000; margin-top:4px; font-variant-numeric: tabular-nums; }

    .resultBtns{ display:flex; gap:10px; margin-top:12px; flex-wrap:wrap; }
    .btn2{
      pointer-events:auto;
      cursor:pointer;
      border:none;
      border-radius: 999px;
      padding: 12px 14px;
      font-weight: 1000;
      color: var(--text);
      background: rgba(15,23,42,.60);
      border:1px solid rgba(148,163,184,.22);
    }

    /* ---------- Tip (tiny) ---------- */
    #tip{
      position:fixed;
      left:12px;
      bottom: 120px;
      z-index:880;
      pointer-events:none;
      opacity:.85;
      max-width: min(520px, 74vw);
    }
    #tip .card{ padding:10px 12px; border-radius: 18px; }
    #tip .t{ font-weight:1000; }
    #tip .s{ margin-top:4px; color:rgba(229,231,235,.72); font-weight:900; }

  </style>
</head>

<body>

  <!-- A-Frame (camera only for look/VR mode) -->
  <a-scene
    embedded
    vr-mode-ui="enabled: false"
    renderer="antialias: true; colorManagement: true; physicallyCorrectLights: true"
    background="color: #020617"
  >
    <a-entity id="rig">
      <a-camera id="cam" position="0 1.6 0" wasd-controls-enabled="false"></a-camera>
    </a-entity>
  </a-scene>

  <!-- ===== HUD TOP (tiny bar) ===== -->
  <div id="hudTop" class="hud">
    <div class="card">
      <div class="row row1">
        <span class="pill small">‚è±Ô∏è <span class="k">TIME</span> <span id="hudTime" class="v">0</span></span>
        <span class="pill small">‚≠ê <span class="k">SCORE</span> <span id="hudScore" class="v">0</span></span>
        <span class="pill small">üî• <span class="k">COMBO</span> <span id="hudCombo" class="v">0</span></span>
        <span class="pill small">üí• <span class="k">MISS</span> <span id="hudMiss" class="v">0</span></span>

        <div class="feverWrap" style="margin-left:auto;">
          <div style="font-weight:1000; opacity:.86;">FEVER</div>
          <div class="feverTrack">
            <div id="hudFever" class="feverFill"></div>
          </div>
          <div id="hudFeverPct" class="feverPct">0%</div>
        </div>
      </div>

      <!-- row2: ‡πÉ‡∏´‡πâ plate.safe.js ‡πÉ‡∏ä‡πâ append SHIELD/LIVES/POWER ‡πÑ‡∏î‡πâ -->
      <div class="row row2">
        <span class="pill" style="opacity:.92;">üèÖ <span class="k">GRADE</span> <span id="hudGrade" class="v">C</span></span>
        <span class="pill" style="opacity:.92;">üéØ <span class="k">PERF</span> <span id="hudPerfectCount" class="v">0</span></span>
        <span class="pill" style="opacity:.92;">üçΩÔ∏è <span class="k">HAVE</span> <span id="hudGroupsHave" class="v">0/5</span></span>

        <span class="pill" style="margin-left:auto; opacity:.86;">üß™ <span class="k">MODE</span> <span id="hudMode" class="v">Play</span></span>
        <span class="pill" style="opacity:.86;">‚öôÔ∏è <span class="k">DIFF</span> <span id="hudDiff" class="v">Normal</span></span>
        <!-- plate.safe.js ‡∏à‡∏∞ inject: hudShield/hudLives/hudPower ‡∏ï‡πà‡∏≠‡∏ó‡πâ‡∏≤‡∏¢‡πÅ‡∏ñ‡∏ß‡∏ô‡∏µ‡πâ‡πÄ‡∏≠‡∏á -->
      </div>
    </div>
  </div>

  <!-- ===== RIGHT FLOAT BUTTONS ===== -->
  <div id="hudRight" class="hud">
    <div class="stack">
      <button id="btnEnterVR" class="btn vr">üï∂Ô∏è ENTER VR</button>
      <button id="btnPause" class="btn pause">‚è∏Ô∏è PAUSE</button>
      <button id="btnRestart" class="btn restart">üîÅ RESTART</button>
    </div>
  </div>

  <!-- ===== PAUSED ===== -->
  <div id="hudPaused" class="hud">
    <div class="card">‚è∏Ô∏è PAUSED</div>
  </div>

  <!-- ===== BOTTOM TICKER (Quest+Mini) ===== -->
  <div id="hudBottom" class="hud">
    <div class="card">
      <div class="ticker">

        <details id="questPanel">
          <summary>
            <div class="tickline">
              <div class="ic">üéØ</div>
              <div class="main">
                <div id="hudGoalLine" class="title">Goal 1/2: ‚Ä¶</div>
                <div class="sub">‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î Goal</div>
              </div>
            </div>
          </summary>
          <div style="margin-top:8px; color:rgba(229,231,235,.76); font-weight:900;">
            ‡∏ó‡∏≥‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏Å‡∏° ‚Äî ‡πÄ‡∏ô‡πâ‡∏ô ‚Äú‡∏à‡∏≤‡∏ô‡∏™‡∏°‡∏î‡∏∏‡∏• + PERFECT‚Äù
          </div>
        </details>

        <details id="miniPanel">
          <summary>
            <div class="tickline">
              <div class="ic">üß©</div>
              <div class="main">
                <div id="hudMiniLine" class="title">MINI: ‚Ä¶</div>
                <div id="hudMiniHint" class="sub">‚Ä¶</div>
              </div>
            </div>
          </summary>
          <div style="margin-top:8px; color:rgba(229,231,235,.76); font-weight:900;">
            ‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç Mini ‡πÅ‡∏ö‡∏ö‡πÄ‡∏ï‡πá‡∏° (‡∏ä‡πà‡∏ß‡∏á‡∏ó‡πâ‡∏≤‡∏¢ 3 ‡∏ß‡∏¥‡∏à‡∏∞‡∏Å‡∏£‡∏∞‡∏û‡∏£‡∏¥‡∏ö/‡∏ï‡∏¥‡πä‡∏Å)
          </div>
        </details>

      </div>
    </div>
  </div>

  <!-- ===== TIP (small) ===== -->
  <div id="tip">
    <div class="card">
      <div class="t">Tip</div>
      <div class="s">‡πÅ‡∏ï‡∏∞‡∏ï‡∏£‡∏á‡πÑ‡∏´‡∏ô‡∏Å‡πá‡πÑ‡∏î‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏¥‡∏á (Tap-anywhere) ‚Ä¢ ‡∏´‡∏°‡∏∏‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô VR ‚Ä¢ ‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏Ç‡∏¢‡∏∞!</div>
    </div>
  </div>

  <!-- ===== RESULT ===== -->
  <div id="resultBackdrop">
    <div id="resultCard">
      <h2>üèÅ ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô</h2>

      <div id="resultGrid">
        <div class="kv"><div class="k">MODE</div><div id="rMode" class="v">Play</div></div>
        <div class="kv"><div class="k">GRADE</div><div id="rGrade" class="v">C</div></div>
        <div class="kv"><div class="k">SCORE</div><div id="rScore" class="v">0</div></div>
        <div class="kv"><div class="k">MAX COMBO</div><div id="rMaxCombo" class="v">0</div></div>
        <div class="kv"><div class="k">MISS</div><div id="rMiss" class="v">0</div></div>
        <div class="kv"><div class="k">PERFECT</div><div id="rPerfect" class="v">0</div></div>
        <div class="kv"><div class="k">GOALS</div><div id="rGoals" class="v">0/2</div></div>
        <div class="kv"><div class="k">MINIS</div><div id="rMinis" class="v">0/7</div></div>

        <div class="kv"><div class="k">GROUP 1</div><div id="rG1" class="v">0</div></div>
        <div class="kv"><div class="k">GROUP 2</div><div id="rG2" class="v">0</div></div>
        <div class="kv"><div class="k">GROUP 3</div><div id="rG3" class="v">0</div></div>
        <div class="kv"><div class="k">GROUP 4</div><div id="rG4" class="v">0</div></div>
        <div class="kv"><div class="k">GROUP 5</div><div id="rG5" class="v">0</div></div>
        <div class="kv"><div class="k">TOTAL GOOD</div><div id="rGTotal" class="v">0</div></div>
      </div>

      <div class="resultBtns">
        <button id="btnPlayAgain" class="btn2">‚ñ∂Ô∏è PLAY AGAIN</button>
        <button class="btn2" onclick="document.getElementById('resultBackdrop').style.display='none'">‚úñÔ∏è CLOSE</button>
      </div>
    </div>
  </div>

  <!-- ===== Game module ===== -->
  <script type="module" src="./plate/plate.safe.js"></script>

</body>
</html>