<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>HeroHealth ‚Äî Balanced Plate VR</title>
  <meta name="color-scheme" content="dark" />
  <link rel="icon" href="./favicon.ico" type="image/x-icon" />

  <!-- CSS -->
  <link rel="stylesheet" href="./plate-vr.css" />

  <!-- A-Frame (minimal scene to enable enterVR/exitVR/recenter buttons from vr-ui.js) -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

  <!-- Global FX + optional cloud logger + universal VR UI -->
  <script src="./vr/particles.js" defer></script>
  <script src="./vr/hha-cloud-logger.js" defer></script>
  <script src="./vr/vr-ui.js" defer></script>

  <!-- Plate engine -->
  <script src="./plate/plate.safe.js" defer></script>
</head>

<body class="view-mobile">
  <!-- Minimal A-Frame scene (kept tiny & non-blocking) -->
  <a-scene
    embedded
    vr-mode-ui="enabled: false"
    renderer="antialias: true; colorManagement: true"
    style="position:fixed; left:-9999px; top:-9999px; width:1px; height:1px; opacity:0; pointer-events:none;"
  >
    <a-entity id="rig" position="0 0 0">
      <a-entity camera look-controls position="0 1.6 0"></a-entity>
    </a-entity>
  </a-scene>

  <!-- FX overlays -->
  <div id="hitFx" class="hitFx" aria-hidden="true"></div>
  <div id="bossFx" class="bossFx" style="display:none" aria-hidden="true"></div>

  <!-- GAME LAYER -->
  <div id="plate-layer" class="plateLayer" aria-label="Plate play layer"></div>

  <!-- START OVERLAY -->
  <div id="startOverlay" class="overlay startOverlay" role="dialog" aria-modal="true">
    <div class="card">
      <div class="title">üçΩÔ∏è Balanced Plate VR</div>
      <div class="sub">‡πÄ‡∏ï‡∏¥‡∏°‡∏à‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö 5 ‡∏´‡∏°‡∏π‡πà + ‡∏Ñ‡∏∏‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥ + ‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠ Mini & Boss</div>

      <div class="meta">
        <div class="pill">Diff: <span id="uiDiffPreview">normal</span></div>
        <div class="pill">Time: <span id="uiTimePreview">90</span>s</div>
        <div class="pill">Mode: <span id="uiRunPreview">play</span></div>
      </div>

      <div class="how">
        <div class="howRow">
          <div class="k">‡πÅ‡∏ï‡∏∞/‡∏Ñ‡∏•‡∏¥‡∏Å</div>
          <div class="v">‡πÄ‡∏Å‡πá‡∏ö‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏î‡∏µ ü•¶üçéüêüüçöü•ë</div>
        </div>
        <div class="howRow">
          <div class="k">‡∏´‡∏•‡∏ö</div>
          <div class="v">‡∏Ç‡∏¢‡∏∞ üçüüçîü•§ (‡∏ñ‡πâ‡∏≤‡πÇ‡∏î‡∏ô = fever ‡∏Ç‡∏∂‡πâ‡∏ô)</div>
        </div>
        <div class="howRow">
          <div class="k">VR / cVR</div>
          <div class="v">‡πÄ‡∏•‡πá‡∏á crosshair ‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠ + ‡πÅ‡∏ï‡∏∞‡∏¢‡∏¥‡∏á (‡∏ú‡πà‡∏≤‡∏ô <code>hha:shoot</code>)</div>
        </div>
      </div>

      <div class="actions">
        <button id="btnStart" class="btn primary" type="button">‚ñ∂ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô</button>
        <button id="btnEnterVR" class="btn" type="button">üï∂ ENTER VR</button>
      </div>

      <div class="note">
        * ‡∏ñ‡πâ‡∏≤ iOS ‡∏Ç‡∏≠ permission ‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå ‡πÉ‡∏´‡πâ‡∏Å‡∏î ‚ÄúAllow‚Äù ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏£‡∏¥‡πà‡∏°
      </div>
    </div>
  </div>

  <!-- HUD TOP -->
  <div id="hudTop" class="hudTop" aria-live="polite">
    <div class="hudRow">
      <div class="hudBox">
        <div class="lab">SCORE</div>
        <div class="val" id="uiScore">0</div>
      </div>

      <div class="hudBox">
        <div class="lab">TIME</div>
        <div class="val" id="uiTime">0</div>
      </div>

      <div class="hudBox">
        <div class="lab">COMBO</div>
        <div class="val"><span id="uiCombo">0</span> <span class="muted">/</span> <span id="uiComboMax">0</span></div>
      </div>

      <div class="hudBox">
        <div class="lab">MISS</div>
        <div class="val" id="uiMiss">0</div>
      </div>

      <div class="hudBox">
        <div class="lab">ACC</div>
        <div class="val"><span id="uiAcc">0%</span> <span class="muted">‚Ä¢</span> <span id="uiGrade">C</span></div>
      </div>

      <div class="hudBox">
        <div class="lab">PLATE</div>
        <div class="val"><span id="uiPlateHave">0</span><span class="muted">/5</span></div>
      </div>

      <div class="hudBox">
        <div class="lab">üõ°Ô∏è</div>
        <div class="val" id="uiShieldN">0</div>
      </div>
    </div>

    <!-- FEVER -->
    <div class="fever">
      <div class="feverLab">FEVER</div>
      <div class="feverBar"><div id="uiFeverFill" class="feverFill" style="width:0%"></div></div>
    </div>

    <!-- GOAL -->
    <div class="quest">
      <div class="questHead">
        <div class="qtag">üéØ GOAL</div>
        <div class="qtext"><span id="uiGoalTitle">‚Äî</span> <span class="muted">‚Ä¢</span> <span id="uiGoalCount">0/0</span></div>
      </div>
      <div class="qbar"><div id="uiGoalFill" class="qfill" style="width:0%"></div></div>
    </div>

    <!-- MINI -->
    <div id="miniPanel" class="quest miniQuest">
      <div class="questHead">
        <div class="qtag">‚ö° MINI</div>
        <div class="qtext">
          <span id="uiMiniTitle">‚Äî</span>
          <span class="muted">‚Ä¢</span>
          <span id="uiMiniTime">--</span>
          <span class="muted">‚Ä¢</span>
          <span id="uiMiniCount">0/0</span>
        </div>
      </div>
      <div class="qbar"><div id="uiMiniFill" class="qfill" style="width:0%"></div></div>
      <div id="uiHint" class="hint">‡∏ó‡∏£‡∏¥‡∏Ñ: ‡πÄ‡∏Å‡πá‡∏ö GOOD ‡πÉ‡∏´‡πâ‡πÅ‡∏°‡πà‡∏ô ‡πÜ</div>
    </div>

    <!-- BOSS -->
    <div id="bossHud" class="bossHud" style="display:none">
      <div class="bossRow">
        <div class="bossTag">üëæ BOSS</div>
        <div id="bossText" class="bossText">10s ‚Ä¢ GOOD 0/8</div>
      </div>
      <div class="bossBar">
        <div id="bossFill" class="bossFill" style="width:0%"></div>
      </div>
    </div>
  </div>

  <!-- COACH PANEL (bottom-right, above VR-UI panel) -->
  <div id="coachPanel" class="coachPanel" aria-live="polite">
    <img id="coachImg" class="coachImg" src="./img/coach-neutral.png" alt="Coach" />
    <div class="coachMsg" id="coachMsg">‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏•‡∏∏‡∏¢! ‡πÄ‡∏ï‡∏¥‡∏°‡∏à‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö 5 ‡∏´‡∏°‡∏π‡πà üí™</div>
  </div>

  <!-- HUD BUTTONS (bottom-left, keep bottom-right for vr-ui.js) -->
  <div id="hudBtns" class="hudBtns">
    <button id="btnPause" class="btnHud" type="button">‚è∏</button>
    <button id="btnRestart" class="btnHud" type="button">‚Üª</button>
    <button id="btnBackHub" class="btnHud" type="button">üè†</button>
  </div>

  <!-- PAUSED OVERLAY -->
  <div id="hudPaused" class="overlay pausedOverlay" style="display:none" role="dialog" aria-modal="true">
    <div class="card small">
      <div class="title">‚è∏ Paused</div>
      <div class="sub">‡πÅ‡∏ï‡∏∞‡∏õ‡∏∏‡πà‡∏° ‚è∏ ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡∏ï‡πà‡∏≠</div>
      <div class="actions">
        <button class="btn primary" type="button" onclick="document.getElementById('btnPause').click()">‚ñ∂ ‡πÄ‡∏•‡πà‡∏ô‡∏ï‡πà‡∏≠</button>
      </div>
    </div>
  </div>

  <!-- RESULT MODAL -->
  <div id="resultBackdrop" class="overlay resultOverlay" style="display:none" role="dialog" aria-modal="true">
    <div class="card resultCard">
      <div class="title">üèÅ ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•</div>
      <div class="grid">
        <div class="item"><div class="k">MODE</div><div class="v" id="rMode">play</div></div>
        <div class="item"><div class="k">GRADE</div><div class="v" id="rGrade">C</div></div>
        <div class="item"><div class="k">SCORE</div><div class="v" id="rScore">0</div></div>
        <div class="item"><div class="k">MAX COMBO</div><div class="v" id="rMaxCombo">0</div></div>
        <div class="item"><div class="k">MISS</div><div class="v" id="rMiss">0</div></div>
        <div class="item"><div class="k">PERFECT</div><div class="v" id="rPerfect">0%</div></div>
        <div class="item"><div class="k">GOALS</div><div class="v" id="rGoals">0/0</div></div>
        <div class="item"><div class="k">MINIS</div><div class="v" id="rMinis">0/0</div></div>
      </div>

      <div class="plateGrid">
        <div class="pitem">ü•¶ <span id="rG1">0</span></div>
        <div class="pitem">üçé <span id="rG2">0</span></div>
        <div class="pitem">üêü <span id="rG3">0</span></div>
        <div class="pitem">üçö <span id="rG4">0</span></div>
        <div class="pitem">ü•ë <span id="rG5">0</span></div>
        <div class="pitem total">‡∏£‡∏ß‡∏° <span id="rGTotal">0</span></div>
      </div>

      <div class="actions">
        <button id="btnPlayAgain" class="btn primary" type="button">‚ñ∂ ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
        <button id="btnBackHub2" class="btn" type="button" onclick="document.getElementById('btnBackHub').click()">üè† ‡∏Å‡∏•‡∏±‡∏ö HUB</button>
      </div>

      <div class="note">
        * ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡πÑ‡∏ß‡πâ‡πÉ‡∏ô <code>localStorage</code> (HHA_LAST_SUMMARY / HHA_SUMMARY_HISTORY)
      </div>
    </div>
  </div>

</body>
</html>