<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>HeroHealth ‚Äî Plate VR (Launcher)</title>
  <meta name="color-scheme" content="dark"/>
  <link rel="icon" href="./favicon.ico" type="image/x-icon"/>

  <style>
    :root{
      --bg:#020617;
      --panel:rgba(2,6,23,.78);
      --panel2:rgba(15,23,42,.70);
      --stroke:rgba(148,163,184,.18);
      --text:#e5e7eb;
      --muted:#94a3b8;
      --accent:#22c55e;
      --warn:#f59e0b;
      --bad:#ef4444;
      --radius:18px;
      --pill:999px;

      --sat: env(safe-area-inset-top, 0px);
      --sar: env(safe-area-inset-right, 0px);
      --sab: env(safe-area-inset-bottom, 0px);
      --sal: env(safe-area-inset-left, 0px);
    }
    *{box-sizing:border-box}
    html,body{
      margin:0;height:100%;
      background:var(--bg);
      color:var(--text);
      font-family:system-ui,-apple-system,"Noto Sans Thai",Segoe UI,Roboto,sans-serif;
    }
    .bg{
      position:fixed; inset:0;
      background:
        radial-gradient(circle at 12% 10%, rgba(34,211,238,.12), transparent 40%),
        radial-gradient(circle at 88% 20%, rgba(167,139,250,.10), transparent 42%),
        radial-gradient(circle at 50% 92%, rgba(34,197,94,.10), transparent 48%),
        linear-gradient(180deg, rgba(2,6,23,.98), rgba(2,6,23,1));
      pointer-events:none;
    }
    .wrap{
      position:relative;
      min-height:100%;
      padding: calc(14px + var(--sat)) calc(14px + var(--sar)) calc(14px + var(--sab)) calc(14px + var(--sal));
      display:grid;
      place-items:center;
    }
    .card{
      width:min(980px,100%);
      background:var(--panel);
      border:1px solid var(--stroke);
      border-radius:22px;
      padding:16px;
      box-shadow:0 26px 90px rgba(0,0,0,.42);
      backdrop-filter:blur(10px);
    }
    .row{display:flex;gap:12px;flex-wrap:wrap;align-items:center;justify-content:space-between}
    .h{font-weight:1200;font-size:18px}
    .sub{margin-top:6px;color:var(--muted);font-weight:900;line-height:1.35;font-size:13px}
    .grid{
      margin-top:14px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    @media (max-width: 860px){ .grid{grid-template-columns:1fr} }

    .opt{
      background:var(--panel2);
      border:1px solid var(--stroke);
      border-radius:18px;
      padding:12px;
    }
    .k{font-weight:1100;font-size:12px;color:rgba(229,231,235,.92)}
    .pill{
      display:inline-flex;gap:8px;align-items:center;
      padding:8px 10px;border-radius:var(--pill);
      border:1px solid var(--stroke);
      background:rgba(15,23,42,.56);
      font-weight:1000;font-size:12px;white-space:nowrap;
    }
    .btn{
      appearance:none;border:none;border-radius:999px;
      padding:10px 12px;
      background:rgba(2,6,23,.70);
      border:1px solid rgba(148,163,184,.20);
      color:rgba(229,231,235,.95);
      font:1000 12px/1 system-ui,-apple-system,"Noto Sans Thai",Segoe UI,Roboto,sans-serif;
      box-shadow:0 16px 40px rgba(0,0,0,.32);
      backdrop-filter:blur(10px);
      cursor:pointer;
      -webkit-tap-highlight-color:transparent;
      user-select:none;
    }
    .btn:active{transform:translateY(1px)}
    .btn.primary{ background:rgba(34,197,94,.14); border-color:rgba(34,197,94,.30); }
    .btn.warn{ background:rgba(245,158,11,.14); border-color:rgba(245,158,11,.30); }

    select, input{
      width:100%;
      margin-top:8px;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid rgba(148,163,184,.22);
      background:rgba(2,6,23,.55);
      color:var(--text);
      outline:none;
      font-weight:900;
    }
    .hint{margin-top:8px;color:var(--muted);font-weight:900;font-size:12px;line-height:1.3}
    .miniRow{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-top:10px}
    .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;}
  </style>
</head>

<body>
  <div class="bg"></div>

  <div class="wrap">
    <div class="card">
      <div class="row">
        <div>
          <div class="h">üçΩÔ∏è Balanced Plate VR ‚Äî Launcher</div>
          <div class="sub">
            ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î/‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å/‡πÄ‡∏ß‡∏•‡∏≤/‡∏°‡∏∏‡∏°‡∏°‡∏≠‡∏á ‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ RUN<br/>
            <span class="pill">Play = Adaptive + AI tips</span>
            <span class="pill">Study/Research = Seeded + Adaptive OFF</span>
          </div>
        </div>
        <div class="sub" style="text-align:right">
          RUN path: <span class="mono">/herohealth/plate/plate-vr.html</span><br/>
          Tip: Cardboard ‡πÉ‡∏ä‡πâ <b>view=cvr</b> ‡∏¢‡∏¥‡∏á‡∏à‡∏≤‡∏Å crosshair
        </div>
      </div>

      <div class="grid">
        <div class="opt">
          <div class="k">1) View</div>
          <select id="viewSel">
            <option value="mobile">mobile (‡πÅ‡∏ï‡∏∞/‡∏Ñ‡∏•‡∏¥‡∏Å)</option>
            <option value="pc">pc (‡πÄ‡∏°‡∏≤‡∏™‡πå)</option>
            <option value="vr">vr (‡πÅ‡∏ß‡πà‡∏ô)</option>
            <option value="cvr">cvr (Cardboard ‡∏¢‡∏¥‡∏á‡∏à‡∏≤‡∏Å crosshair)</option>
          </select>
          <div class="hint">cVR ‡∏à‡∏∞‡∏¢‡∏¥‡∏á‡∏ú‡πà‡∏≤‡∏ô <span class="mono">vr-ui.js</span> ‚Üí event <span class="mono">hha:shoot</span></div>
        </div>

        <div class="opt">
          <div class="k">2) Run mode</div>
          <select id="runSel">
            <option value="play">play</option>
            <option value="study">study</option>
            <option value="research">research</option>
          </select>
          <div class="hint">study/research ‡∏à‡∏∞‡πÉ‡∏ä‡πâ seed ‡πÅ‡∏ö‡∏ö deterministic ‡πÅ‡∏•‡∏∞‡∏õ‡∏¥‡∏î adaptive</div>
        </div>

        <div class="opt">
          <div class="k">3) Difficulty</div>
          <select id="diffSel">
            <option value="easy">easy</option>
            <option value="normal" selected>normal</option>
            <option value="hard">hard</option>
          </select>
          <div class="hint">hard = spawn ‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô + target ‡πÄ‡∏•‡πá‡∏Å‡∏•‡∏á</div>
        </div>

        <div class="opt">
          <div class="k">4) Time (sec)</div>
          <input id="timeInp" type="number" min="20" max="9999" value="90"/>
          <div class="hint">‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ 90‚Äì120s ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏•‡πà‡∏ô‡∏à‡∏£‡∏¥‡∏á ‡∏õ.5</div>
        </div>

        <div class="opt" style="grid-column:1/-1">
          <div class="k">5) Hub URL (optional)</div>
          <input id="hubInp" type="text" placeholder="‡πÉ‡∏™‡πà hub=... ‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏ß‡πà‡∏≤‡∏á"/>
          <div class="hint">‡∏ñ‡πâ‡∏≤‡∏°‡∏µ hub ‡∏à‡∏∞‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏•‡∏±‡∏ö HUB ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ RUN</div>

          <div class="miniRow">
            <button class="btn primary" id="btnGo">‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ RUN ‚ñ∂</button>
            <button class="btn" id="btnCopy">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå üîó</button>
            <button class="btn warn" id="btnReset">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡πà‡∏≤ ‚ôª</button>
            <span class="pill">Seed: <b id="seedTxt" class="mono">13579</b></span>
          </div>

          <div class="hint mono" id="dbgUrl"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const viewSel = document.getElementById('viewSel');
      const runSel  = document.getElementById('runSel');
      const diffSel = document.getElementById('diffSel');
      const timeInp = document.getElementById('timeInp');
      const hubInp  = document.getElementById('hubInp');
      const seedTxt = document.getElementById('seedTxt');
      const dbgUrl  = document.getElementById('dbgUrl');

      const btnGo   = document.getElementById('btnGo');
      const btnCopy = document.getElementById('btnCopy');
      const btnReset= document.getElementById('btnReset');

      function clamp(v,a,b){ v=Number(v)||0; return v<a?a:(v>b?b:v); }

      // pull initial from URL if any
      const U = new URL(location.href);
      const view0 = (U.searchParams.get('view')||'mobile').toLowerCase();
      const run0  = (U.searchParams.get('run')||U.searchParams.get('runMode')||'play').toLowerCase();
      const diff0 = (U.searchParams.get('diff')||'normal').toLowerCase();
      const time0 = clamp(U.searchParams.get('time')||90, 20, 9999);
      const hub0  = U.searchParams.get('hub')||'';
      const seed0 = Number(U.searchParams.get('seed')||13579)||13579;

      viewSel.value = ['pc','mobile','vr','cvr'].includes(view0)?view0:'mobile';
      runSel.value  = ['play','study','research'].includes(run0)?run0:'play';
      diffSel.value = ['easy','normal','hard'].includes(diff0)?diff0:'normal';
      timeInp.value = String(time0);
      hubInp.value  = hub0;
      seedTxt.textContent = String(seed0);

      function buildUrl(){
        const seed = (runSel.value === 'play')
          ? (Date.now() ^ (Math.random()*1e9))|0
          : seed0;

        seedTxt.textContent = String(seed);

        const runUrl = new URL('./plate/plate-vr.html', location.href);
        runUrl.searchParams.set('view', viewSel.value);
        runUrl.searchParams.set('run', runSel.value);
        runUrl.searchParams.set('diff', diffSel.value);
        runUrl.searchParams.set('time', String(clamp(timeInp.value,20,9999)));
        runUrl.searchParams.set('seed', String(seed));
        if(hubInp.value.trim()) runUrl.searchParams.set('hub', hubInp.value.trim());
        return runUrl.toString();
      }

      function refreshDbg(){
        dbgUrl.textContent = 'RUN URL: ' + buildUrl();
      }

      ['change','input'].forEach(ev=>{
        viewSel.addEventListener(ev, refreshDbg);
        runSel.addEventListener(ev, refreshDbg);
        diffSel.addEventListener(ev, refreshDbg);
        timeInp.addEventListener(ev, refreshDbg);
        hubInp.addEventListener(ev, refreshDbg);
      });

      btnGo.addEventListener('click', ()=> location.href = buildUrl(), {passive:true});

      btnCopy.addEventListener('click', async ()=>{
        try{
          const u = buildUrl();
          await navigator.clipboard.writeText(u);
          dbgUrl.textContent = '‚úÖ ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß: ' + u;
        }catch(e){
          dbgUrl.textContent = '‚ö†Ô∏è ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‚Äî ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ: ' + buildUrl();
        }
      }, {passive:true});

      btnReset.addEventListener('click', ()=>{
        viewSel.value='mobile';
        runSel.value='play';
        diffSel.value='normal';
        timeInp.value='90';
        hubInp.value='';
        refreshDbg();
      }, {passive:true});

      refreshDbg();
    })();
  </script>
</body>
</html>