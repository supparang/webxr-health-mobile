<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>HeroHealth ‚Äî Balanced Plate VR</title>
  <meta name="color-scheme" content="dark" />
  <link rel="icon" href="./favicon.ico" type="image/x-icon" />

  <!-- A-Frame (for ENTER VR button support; safe even if you mostly use DOM targets) -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

  <!-- Shared CSS -->
  <link rel="stylesheet" href="./plate/plate-vr.css" />

  <!-- FX + Universal VR UI + Logger -->
  <script src="./vr/particles.js" defer></script>
  <script src="./vr/vr-ui.js" defer></script>
  <script src="./vr/hha-cloud-logger.js" defer></script>

  <!-- Game -->
  <script type="module" src="./plate/plate.safe.js"></script>
</head>

<body class="view-mobile">
  <!-- Minimal A-Frame scene for reliable EnterVR() -->
  <a-scene
    embedded
    vr-mode-ui="enabled:false"
    renderer="colorManagement:true; physicallyCorrectLights:false"
    style="position:fixed; inset:0; z-index:0; pointer-events:none; opacity:0;"
  >
    <a-entity id="rig" position="0 1.6 0">
      <a-camera camera look-controls></a-camera>
    </a-entity>
  </a-scene>

  <!-- FX layer (hit pulse overlay) -->
  <div id="hitFx" aria-hidden="true"></div>

  <!-- PLAYFIELD (DOM targets live here) -->
  <div id="plate-layer" aria-label="playfield"></div>

  <!-- START OVERLAY -->
  <div id="startOverlay" class="overlay">
    <div class="card">
      <div class="title">üçΩÔ∏è Balanced Plate VR</div>
      <div class="sub">
        ‡πÄ‡∏ï‡∏¥‡∏°‡∏à‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö 5 ‡∏´‡∏°‡∏π‡πà + ‡∏Ñ‡∏∏‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡πÉ‡∏´‡πâ‡πÇ‡∏´‡∏î!<br>
        ‡πÇ‡∏´‡∏°‡∏î: <b id="uiRunPreview">play</b> ‚Ä¢ ‡∏£‡∏∞‡∏î‡∏±‡∏ö: <b id="uiDiffPreview">normal</b> ‚Ä¢ ‡πÄ‡∏ß‡∏•‡∏≤: <b id="uiTimePreview">90</b>s
      </div>

      <div class="hint">
        üéØ ‡πÇ‡∏´‡∏°‡∏î VR/Cardboard: ‡∏Å‡∏î ENTER VR (‡∏°‡∏∏‡∏°‡∏Ç‡∏ß‡∏≤‡∏•‡πà‡∏≤‡∏á) ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ crosshair ‡∏¢‡∏¥‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠‡πÑ‡∏î‡πâ<br>
        üìå ‡πÇ‡∏´‡∏°‡∏î‡∏ß‡∏¥‡∏à‡∏±‡∏¢: run=study ‡∏à‡∏∞‡∏•‡πá‡∏≠‡∏Å seed ‡πÅ‡∏•‡∏∞‡∏õ‡∏¥‡∏î adaptive
      </div>

      <div class="btnRow">
        <button id="btnStart" class="btn primary" type="button">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏° ‚ñ∂</button>
      </div>
    </div>
  </div>

  <!-- HUD TOP (Goal/Mini) -->
  <div id="hudTop" class="hudTop">
    <div class="hudBlock">
      <div class="label">GOAL</div>
      <div class="row">
        <div id="uiGoalTitle" class="ttl">‚Äî</div>
        <div id="uiGoalCount" class="count">0/0</div>
      </div>
      <div class="bar"><div id="uiGoalFill" class="fill"></div></div>
    </div>

    <div id="miniPanel" class="hudBlock">
      <div class="label">MINI</div>
      <div class="row">
        <div id="uiMiniTitle" class="ttl">‚Äî</div>
        <div class="count">
          <span id="uiMiniCount">0/0</span> ‚Ä¢ <span id="uiMiniTime">--</span>
        </div>
      </div>
      <div class="bar"><div id="uiMiniFill" class="fill warn"></div></div>
      <div id="uiHint" class="hint2">‚Äî</div>
    </div>
  </div>

  <!-- COACH -->
  <div id="coachPanel" class="coach">
    <img id="coachImg" alt="coach" src="./img/coach-neutral.png" />
    <div class="bubble">
      <div class="name">Coach</div>
      <div id="coachMsg" class="msg">‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢!</div>
    </div>
  </div>

  <!-- HUD BUTTONS -->
  <div id="hudBtns" class="hudBtns">
    <button id="btnPause" class="hbtn" type="button">‚è∏</button>
    <button id="btnEnterVR" class="hbtn" type="button">üï∂</button>
  </div>

  <!-- HUD STATS -->
  <div class="hudStats">
    <div class="chip"><span class="k">TIME</span> <span id="uiTime" class="v">0</span></div>
    <div class="chip"><span class="k">SCORE</span> <span id="uiScore" class="v">0</span></div>
    <div class="chip"><span class="k">COMBO</span> <span id="uiCombo" class="v">0</span></div>
    <div class="chip"><span class="k">MAX</span> <span id="uiComboMax" class="v">0</span></div>
    <div class="chip danger"><span class="k">MISS</span> <span id="uiMiss" class="v">0</span></div>
    <div class="chip"><span class="k">ACC</span> <span id="uiAcc" class="v">0%</span></div>
    <div class="chip grade"><span class="k">GRADE</span> <span id="uiGrade" class="v">C</span></div>
  </div>

  <!-- Plate progress -->
  <div class="platePanel">
    <div class="plateHead">
      <div class="plateT">üçΩÔ∏è Plate</div>
      <div class="plateN"><span id="uiPlateHave">0</span>/5</div>
    </div>
    <div class="plateRow">
      <div class="pchip">ü•¶ <b id="uiG1">0</b></div>
      <div class="pchip">üçé <b id="uiG2">0</b></div>
      <div class="pchip">üêü <b id="uiG3">0</b></div>
      <div class="pchip">üçö <b id="uiG4">0</b></div>
      <div class="pchip">ü•ë <b id="uiG5">0</b></div>
    </div>
  </div>

  <!-- Fever/Shield -->
  <div class="gauges">
    <div class="gauge">
      <div class="gt">üî• FEVER</div>
      <div class="gbar"><div id="uiFeverFill" class="gfill"></div></div>
    </div>
    <div class="gauge">
      <div class="gt">üõ° SHIELD</div>
      <div class="gbar"><div class="gfill shield" style="width:100%"></div></div>
      <div class="gsmall">x <b id="uiShieldN">0</b></div>
    </div>
  </div>

  <!-- PAUSED -->
  <div id="hudPaused" class="pauseOverlay" style="display:none">
    <div class="card">
      <div class="title">‚è∏ Paused</div>
      <div class="sub">‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° Pause ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡∏ï‡πà‡∏≠</div>
      <div class="btnRow">
        <button id="btnRestart" class="btn" type="button">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà ‚Üª</button>
      </div>
    </div>
  </div>

  <!-- BOSS HUD (optional) -->
  <div id="bossHud" class="bossHud" style="display:none">
    <div class="bossTitle">üëæ BOSS</div>
    <div class="bossBar"><div id="bossFill" class="bossFill"></div></div>
    <div id="bossText" class="bossText">--</div>
  </div>
  <div id="bossFx" class="bossFx" style="display:none"></div>

  <!-- RESULT -->
  <div id="resultBackdrop" class="resultBackdrop" style="display:none">
    <div class="resultCard">
      <div class="rTop">
        <div class="rTitle">üèÅ Summary</div>
        <div class="rSub">Mode: <b id="rMode">play</b></div>
      </div>

      <div class="rGrid">
        <div class="rBig">
          <div class="k">GRADE</div>
          <div id="rGrade" class="v">A</div>
        </div>
        <div class="rBig">
          <div class="k">SCORE</div>
          <div id="rScore" class="v">0</div>
        </div>
        <div class="rBox"><div class="k">MAX COMBO</div><div id="rMaxCombo" class="v2">0</div></div>
        <div class="rBox"><div class="k">MISS</div><div id="rMiss" class="v2">0</div></div>
        <div class="rBox"><div class="k">FAST HIT</div><div id="rPerfect" class="v2">0%</div></div>
        <div class="rBox"><div class="k">GOALS</div><div id="rGoals" class="v2">0/0</div></div>
        <div class="rBox"><div class="k">MINIS</div><div id="rMinis" class="v2">0/0</div></div>
      </div>

      <div class="rPlate">
        <div class="k">Plate Counts</div>
        <div class="plateRow">
          <div class="pchip">ü•¶ <b id="rG1">0</b></div>
          <div class="pchip">üçé <b id="rG2">0</b></div>
          <div class="pchip">üêü <b id="rG3">0</b></div>
          <div class="pchip">üçö <b id="rG4">0</b></div>
          <div class="pchip">ü•ë <b id="rG5">0</b></div>
          <div class="pchip total">Œ£ <b id="rGTotal">0</b></div>
        </div>
      </div>

      <div class="btnRow">
        <button id="btnPlayAgain" class="btn primary" type="button">‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‚ñ∂</button>
        <button id="btnBackHub" class="btn" type="button">‡∏Å‡∏•‡∏±‡∏ö HUB ‚Ü©</button>
      </div>
    </div>
  </div>

  <!-- ids used by JS but not visible (safe placeholders) -->
  <span id="uiShieldN2" hidden></span>
</body>
</html>