<!-- === /herohealth/hydration-vr/hydration-vr.html ===
Hydration VR RUN ‚Äî PRODUCTION
FULL v20260228-HYDRATION-RUN-SHIELD-AI-CVRSTRICT

Requires:
- ./hydration.safe.js (ES module)
- ./hydration-vr.css
- ../vr/hha-shield.js (ES module)
- ../vr/vr-ui.js (ES module)
- ../vr/ai-hooks.js (ES module)
-->
<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <meta name="color-scheme" content="dark light"/>
  <meta name="google" content="notranslate"/>
  <title>HeroHealth ‚Ä¢ Hydration VR</title>

  <link rel="stylesheet" href="./hydration-vr.css?v=20260228"/>

  <!-- ‚úÖ Shared modules -->
  <script type="module" src="../vr/hha-shield.js?v=20260228"></script>
  <script type="module" src="../vr/vr-ui.js?v=20260228"></script>
</head>

<body>
  <div class="hud">
    <div class="card">
      <div class="stat">
        <span class="k">SCORE</span> <span id="uiScore" class="v">0</span>
        <span class="k">TIME</span> <span id="uiTime" class="v">0</span>
        <span class="k">MISS</span> <span id="uiMiss" class="v">0</span>
        <span class="k">GRADE</span> <span id="uiGrade" class="v">‚Äî</span>
      </div>

      <div class="chips">
        <span class="chip">üíß WATER <span id="uiWater">0%</span></span>
        <span class="chip">üî• COMBO <span id="uiCombo">0</span></span>
        <span class="chip">üõ°Ô∏è SHIELD <span id="uiShield">0</span></span>
      </div>

      <!-- ‚úÖ AI HUD -->
      <div class="chips">
        <span class="chip">ü§ñ RISK <span id="aiRisk">‚Äî</span></span>
        <span class="chip"><span id="aiHint">‚Äî</span></span>
      </div>
    </div>

    <div class="card small">
      <div style="font-weight:1000">HYDRATION</div>
      <div class="smalltext">
        view=<span id="uiView">‚Äî</span><br/>
        run=<span id="uiRun">‚Äî</span><br/>
        diff=<span id="uiDiff">‚Äî</span>
      </div>
    </div>
  </div>

  <div class="stage">
    <div id="layer" aria-label="hydration layer"></div>
  </div>

  <div id="end" aria-hidden="true">
    <div class="end-card">
      <div class="end-title" id="endTitle">Completed</div>
      <div class="end-sub" id="endSub">‚Äî</div>

      <div class="grid">
        <div class="item"><div class="kk">GRADE</div><div class="vv" id="endGrade">‚Äî</div></div>
        <div class="item"><div class="kk">SCORE</div><div class="vv" id="endScore">0</div></div>
        <div class="item"><div class="kk">MISS</div><div class="vv" id="endMiss">0</div></div>
        <div class="item"><div class="kk">WATER</div><div class="vv" id="endWater">0%</div></div>
      </div>

      <div class="actions">
        <button class="btn" id="btnCopy">Copy Summary</button>
        <button class="btn danger" id="btnReplay">Replay</button>
        <button class="btn primary is-hidden" id="btnNextCooldown">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ: Cooldown</button>
        <button class="btn primary" id="btnBackHub">Back HUB</button>
      </div>
    </div>
  </div>

  <script type="module">
    // ‚úÖ Shield install (quiet 403 + lock scroll + banner)
    try{
      window.HHA_Shield?.install({
        lockScroll: true,
        quietApollo403: true,
        quietNetworkNoise: true,
        showBanner: true
      });
    }catch(e){}

    import { createAIHooks } from '../vr/ai-hooks.js';
    import { boot as bootHydration } from './hydration.safe.js';

    const U = new URL(location.href);
    const runMode = String(U.searchParams.get('run') || 'play').toLowerCase();
    const diff = String(U.searchParams.get('diff') || 'normal').toLowerCase();
    const view = String(U.searchParams.get('view') || 'mobile').toLowerCase();
    const seed = U.searchParams.get('seed') ?? String((Date.now() ^ (Math.random()*1e9))|0);

    // ‚úÖ cVR strict: ‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÅ‡∏ï‡∏∞‡πÄ‡∏õ‡πâ‡∏≤‡∏ï‡∏£‡∏á ‡πÜ (‡∏ï‡πâ‡∏≠‡∏á‡∏¢‡∏¥‡∏á crosshair ‡∏ú‡πà‡∏≤‡∏ô hha:shoot)
    if(view === 'cvr'){
      try{ document.getElementById('layer').style.pointerEvents = 'none'; }catch(e){}
    }

    const s=(id,v)=>{ const el=document.getElementById(id); if(el) el.textContent=String(v); };
    s('uiView',view); s('uiRun',runMode); s('uiDiff',diff);

    const ai = createAIHooks({ seed:String(seed), runMode, game:'hydration', diff, device:view });
    window.HHA_AI = ai;

    bootHydration({
      ai,
      view,
      run: runMode,
      diff,
      seed,
      pid: U.searchParams.get('pid') || 'anon',
      hub: U.searchParams.get('hub') || '../hub.html',
      time: Number(U.searchParams.get('time') || 80),
      cooldown: (U.searchParams.get('cooldown') === '1') || (U.searchParams.get('cd') === '1')
    });
  </script>
</body>
</html>