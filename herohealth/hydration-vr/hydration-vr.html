<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>HeroHealth ‚Äî HydrationVR</title>
  <meta name="color-scheme" content="light dark" />
  <link rel="icon" href="../favicon.ico" />

  <!-- ‚úÖ CSS ‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏° -->
  <link rel="stylesheet" href="./hydration-vr.css" />

  <!-- ‚úÖ Global (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏Å‡∏°‡∏≠‡∏∑‡πà‡∏ô) -->
  <script defer src="../vr/particles.js"></script>
  <script defer src="../vr/hha-cloud-logger.js"></script>
  <script defer src="../vr/vr-ui.js"></script>

  <!-- ‚úÖ Loader: ‡∏à‡∏±‡∏î view + layers + import hydration.safe.js -->
  <script type="module" src="./hydration-vr.loader.js"></script>
</head>

<body class="view-mobile">

  <!-- =========================================================
       IMPORT ERROR PANEL (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏†‡∏≤‡∏û)
       ========================================================= -->
  <section id="importError" hidden
    style="position:fixed; inset:0; z-index:9999; padding:18px 16px; color:#e5e7eb;
           background: radial-gradient(1200px 700px at 30% 20%, rgba(239,68,68,.20), transparent 60%),
                       radial-gradient(900px 650px at 70% 80%, rgba(34,211,238,.16), transparent 55%),
                       #020617;">
    <div style="max-width:980px; margin:0 auto; padding:14px 12px;">
      <div style="display:flex; gap:10px; align-items:center; font:900 20px/1.2 system-ui;">
        <span style="color:#ef4444">‚úñ</span>
        <span>HydrationVR: import failed (loader)</span>
      </div>

      <div style="margin-top:10px; opacity:.9; font:600 13px/1.45 system-ui;">
        <div><b>URL:</b> <span data-k="url"></span></div>
        <div style="margin-top:6px;"><b>baseURL:</b> <span data-k="base"></span></div>
      </div>

      <div style="margin-top:14px; font:800 14px/1.4 system-ui;">Tried paths:</div>
      <pre data-k="tried"
           style="margin:8px 0 0; padding:12px; border-radius:14px; white-space:pre-wrap;
                  background:rgba(15,23,42,.55); border:1px solid rgba(148,163,184,.18);
                  font:600 13px/1.45 ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas;"></pre>

      <div style="margin-top:14px; font:800 14px/1.4 system-ui;">Error:</div>
      <pre data-k="err"
           style="margin:8px 0 0; padding:12px; border-radius:14px; white-space:pre-wrap;
                  background:rgba(15,23,42,.55); border:1px solid rgba(148,163,184,.18);
                  font:600 13px/1.45 ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas;"></pre>

      <div style="margin-top:12px; opacity:.85; font:600 13px/1.55 system-ui;">
        Tip: ‡πÄ‡∏ä‡πá‡∏Ñ path ‡πÑ‡∏ü‡∏•‡πå + case-sensitive (GitHub Pages) ‡πÅ‡∏•‡∏∞‡∏î‡∏π Network tab ‡∏ß‡πà‡∏≤ 404 ‡∏´‡∏£‡∏∑‡∏≠ CORS
      </div>
    </div>
  </section>

  <!-- =========================================================
       START OVERLAY
       ========================================================= -->
  <div id="startOverlay" class="startOverlay">
    <div class="startCard">
      <div class="title">Hydration Quest VR</div>
      <div class="sub">‡∏Ñ‡∏∏‡∏°‡πÇ‡∏ã‡∏ô‡∏ô‡πâ‡∏≥‡πÉ‡∏´‡πâ ‚ÄúGREEN‚Äù ‡πÅ‡∏•‡πâ‡∏ß‡∏ú‡πà‡∏≤‡∏ô Storm Mini + Boss</div>

      <div class="chips">
        <span class="chip">PC / Mobile / Cardboard</span>
        <span class="chip">Aim Assist (cVR)</span>
        <span class="chip">3-Stage Mission</span>
      </div>

      <button id="btnStart" class="btnPrimary">‚ñ∂ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô</button>

      <div class="hint">
        ‡∏ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡πÇ‡∏´‡∏°‡∏î Cardboard: ‡πÉ‡∏™‡πà <b>?view=cvr</b> ‡∏´‡∏£‡∏∑‡∏≠ <b>?cardboard=1</b>
      </div>
    </div>
  </div>

  <!-- =========================================================
       HUD / PANELS
       (IDs ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö hydration.safe.js)
       ========================================================= -->
  <div class="hud">
    <div class="hudLeft">
      <div class="stat"><span>Score</span><b id="stat-score">0</b></div>
      <div class="stat"><span>Combo</span><b id="stat-combo">0</b></div>
      <div class="stat"><span>Miss</span><b id="stat-miss">0</b></div>
    </div>

    <div class="hudCenter">
      <div class="stat big"><span>Time</span><b id="stat-time">0</b></div>
      <div class="stat big"><span>Grade</span><b id="stat-grade">C</b></div>
    </div>

    <div class="hudRight">
      <div class="stat"><span>Storm</span><b id="storm-left">0</b></div>
      <div class="stat"><span>Shield</span><b id="shield-count">0</b></div>
    </div>
  </div>

  <!-- Quest lines -->
  <section class="questPanel">
    <div class="qLine" id="quest-line1">Stage 1/3: ...</div>
    <div class="qLine" id="quest-line2"></div>
    <div class="qLine" id="quest-line3"></div>
    <div class="qLine" id="quest-line4"></div>
  </section>

  <!-- Water panel (hydration.safe.js syncWaterPanelDOM uses these IDs) -->
  <section class="waterPanel">
    <div class="wTop">
      <div class="wTitle">Water</div>
      <div class="wPct"><span id="water-pct">50</span>%</div>
    </div>
    <div class="wBar"><div id="water-bar" class="wFill"></div></div>
    <div class="wZone">Zone: <b id="water-zone">GREEN</b></div>
  </section>

  <!-- =========================================================
       PLAYFIELD + LAYERS (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å)
       - non-cardboard ‡πÉ‡∏ä‡πâ playfield + hydration-layer
       - cardboard ‡πÉ‡∏ä‡πâ cbPlayfield + hydration-layerL/R
       ========================================================= -->
  <main id="playfield" class="playfield">
    <div id="hydration-layer" class="layer"></div>
  </main>

  <!-- Cardboard playfield (‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô loader ‡∏à‡∏∞‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏≠‡∏á) -->
  <main id="cbPlayfield" class="cbPlayfield" style="display:none;">
    <div class="cbEye">
      <div id="hydration-layerL" class="layer"></div>
    </div>
    <div class="cbEye">
      <div id="hydration-layerR" class="layer"></div>
    </div>
  </main>

  <!-- =========================================================
       RESULT SUMMARY (IDs ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏á hydration.safe.js: fillSummary/bindSummaryButtons)
       ========================================================= -->
  <div id="resultBackdrop" class="resultBackdrop" hidden>
    <div class="resultCard">
      <div class="resultHead">
        <div class="resultTitle">‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•</div>
        <button id="btnCloseSummary" class="btnGhost">‚úï Close</button>
      </div>

      <div class="resultGrid">
        <div class="box">
          <div class="row"><span>Score</span><b id="rScore">0</b></div>
          <div class="row"><span>Grade</span><b id="rGrade">C</b></div>
          <div class="row"><span>Accuracy</span><b id="rAcc">0%</b></div>
          <div class="row"><span>Combo Max</span><b id="rComboMax">0</b></div>
          <div class="row"><span>Miss</span><b id="rMiss">0</b></div>
          <div class="row"><span>Goals</span><b id="rGoals">0/1</b></div>
          <div class="row"><span>Minis</span><b id="rMinis">0/0</b></div>
        </div>

        <div class="box">
          <div class="row"><span>GREEN Hold</span><b id="rGreen">0s</b></div>
          <div class="row"><span>Streak Max</span><b id="rStreak">0</b></div>
          <div class="row"><span>Storm Cycles</span><b id="rStormCycles">0</b></div>
          <div class="row"><span>Storm Success</span><b id="rStormOk">0</b></div>
          <div class="row"><span>Storm Rate</span><b id="rStormRate">0%</b></div>
          <div class="row"><span>Tier</span><b id="rTier">Tier: -</b></div>
        </div>
      </div>

      <pre id="rTips" class="tips"></pre>
      <div class="nextLine"><span>Next:</span> <b id="rNext"></b></div>

      <div class="resultBtns">
        <button id="btnRetry" class="btnPrimary">‚Üª Retry</button>

        <button id="btnCopyJSON" class="btnGhost">üìã Copy JSON</button>
        <button id="btnDownloadCSV" class="btnGhost">‚¨á Download CSV</button>

        <!-- ‚úÖ ‡∏ï‡∏≤‡∏°‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô: ‡∏Å‡∏•‡∏±‡∏ö HUB -->
        <button class="btnGhost btnBackHub">‚Ü© ‡∏Å‡∏•‡∏±‡∏ö HUB</button>
      </div>
    </div>
  </div>

</body>
</html>