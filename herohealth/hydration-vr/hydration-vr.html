<!-- === /herohealth/hydration-vr/hydration-vr.html ===
Hydration Quest VR ‚Äî RUN (Folder-run)
‚úÖ CSS: ./hydration-vr.css
‚úÖ A-Frame minimal scene for Enter VR reliability
‚úÖ Modules:
   - ../vr/vr-ui.js (ENTER VR/EXIT/RECENTER + crosshair + hha:shoot)
   - ../vr/hha-cloud-logger.js (flush-hardened; optional via ?log=)
   - ../vr/ui-water.js (water gauge helper)
   - ./hydration-vr.loader.js (auto detect + overlay start + layers)
‚úÖ Engine: ./hydration.safe.js (module)
‚úÖ Pass-through hub/run/diff/time/seed/sessionId/studyId/conditionGroup/log/etc.
-->
<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>HeroHealth ‚Äî Hydration Quest VR</title>
  <meta name="color-scheme" content="dark" />
  <link rel="icon" href="../favicon.ico" type="image/x-icon" />

  <link rel="stylesheet" href="./hydration-vr.css" />

  <!-- A-Frame: minimal scene for Enter VR reliability -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

  <!-- Universal VR UI: ENTER VR/EXIT/RECENTER + crosshair + hha:shoot -->
  <script src="../vr/vr-ui.js" defer></script>

  <!-- Cloud Logger (flush-hardened) - shared across games (optional by ?log=...) -->
  <script src="../vr/hha-cloud-logger.js" defer></script>

  <!-- Water gauge helper -->
  <script src="../vr/ui-water.js" defer></script>

  <!-- Loader: sets view/cardboard/layers + start overlay -> emits hha:start -->
  <script src="./hydration-vr.loader.js" defer></script>
</head>

<body>
  <!-- Minimal A-Frame scene for WebXR Enter VR reliability -->
  <a-scene embedded vr-mode-ui="enabled:false" renderer="colorManagement:true; physicallyCorrectLights:false">
    <a-entity camera look-controls="enabled:true" position="0 1.6 0"></a-entity>
  </a-scene>

  <!-- HUD -->
  <div id="hud">
    <div class="hud-top">
      <div class="chip big">üíß <span id="stat-score">0</span></div>
      <div class="chip">Combo <b id="stat-combo">0</b></div>
      <div class="chip warn">Miss <b id="stat-miss">0</b></div>
      <div class="chip">Time <b id="stat-time">0</b>s</div>
      <div class="chip ok">Grade <b id="stat-grade">C</b></div>
      <div class="chip cyan">üõ°Ô∏è <b id="shield-count">0</b></div>
      <div class="chip storm">Storm <b id="storm-left">0</b>s</div>
    </div>

    <div class="hud-mid">
      <div class="quest">
        <div class="quest-title">Mission</div>
        <div class="quest-lines">
          <div id="quest-line1">Stage 1/3: ‚Ä¶</div>
          <div id="quest-line2"></div>
          <div id="quest-line3"></div>
          <div id="quest-line4"></div>
        </div>
      </div>

      <!-- Water panel (Hydration UI) -->
      <div class="waterpanel" id="water-panel">
        <div class="water-head">
          <div class="wtitle">Water</div>
          <div class="wzone">Zone: <b id="water-zone">GREEN</b></div>
        </div>
        <div class="wbar"><div class="wfill" id="water-bar"></div></div>
        <div class="wpct"><span id="water-pct">50</span>%</div>
      </div>
    </div>
  </div>

  <!-- Playfield -->
  <div id="playfieldWrap">
    <div id="playfield">
      <div id="hydration-layer" class="layer"></div>

      <!-- Cardboard split -->
      <div id="cbWrap" hidden>
        <div id="cbPlayfield">
          <div id="hydration-layerL" class="layer"></div>
          <div id="hydration-layerR" class="layer"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Start overlay -->
  <div id="startOverlay" class="overlay">
    <div class="overlay-card">
      <div class="ov-title">Hydration Quest</div>
      <div class="ov-sub" id="ovSub">‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°</div>

      <div class="ov-row">
        <button id="btnStart" class="btn primary">‡πÄ‡∏£‡∏¥‡πà‡∏°!</button>
        <button class="btn ghost btnBackHub">‡∏Å‡∏•‡∏±‡∏ö HUB</button>
      </div>

      <div class="ov-hint">
        ‚Ä¢ cVR: ‡∏¢‡∏¥‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠ (crosshair)<br/>
        ‚Ä¢ Kids mode: ‡πÉ‡∏™‡πà <b>?kids=1</b>
      </div>
    </div>
  </div>

  <!-- Result summary -->
  <div id="resultBackdrop" class="overlay" hidden>
    <div class="overlay-card wide">
      <div class="ov-title">‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•</div>

      <div class="res-grid">
        <div class="res-item">Score <b id="rScore">0</b></div>
        <div class="res-item">Grade <b id="rGrade">C</b></div>
        <div class="res-item">Accuracy <b id="rAcc">0%</b></div>
        <div class="res-item">ComboMax <b id="rComboMax">0</b></div>
        <div class="res-item">Miss <b id="rMiss">0</b></div>
        <div class="res-item">Goals <b id="rGoals">0/0</b></div>
        <div class="res-item">Minis <b id="rMinis">0/0</b></div>
        <div class="res-item">GREEN hold <b id="rGreen">0s</b></div>
        <div class="res-item">StreakMax <b id="rStreak">0</b></div>
        <div class="res-item">Storm Cycles <b id="rStormCycles">0</b></div>
        <div class="res-item">Storm OK <b id="rStormOk">0</b></div>
        <div class="res-item">Storm Rate <b id="rStormRate">0%</b></div>
      </div>

      <div class="res-note">
        <div id="rTier" class="tier">Tier: ‚Ä¶</div>
        <pre id="rTips" class="tips"></pre>
        <div class="next">Next: <b id="rNext"></b></div>
      </div>

      <div class="ov-row">
        <button id="btnRetry" class="btn primary">‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
        <button id="btnCopyJSON" class="btn">Copy JSON</button>
        <button id="btnDownloadCSV" class="btn">Download CSV</button>
        <button id="btnCloseSummary" class="btn ghost">‡∏õ‡∏¥‡∏î</button>
        <button class="btn ghost btnBackHub">‡∏Å‡∏•‡∏±‡∏ö HUB</button>
      </div>
    </div>
  </div>

  <!-- Engine -->
  <script type="module" src="./hydration.safe.js"></script>
</body>
</html>