/* === /herohealth/hydration-vr/hydration-vr.css ===
Hydration VR — PRODUCTION CSS
✅ PC/Mobile/Cardboard/cVR
✅ Safe-area insets
✅ HUD safe zone (targets won't be covered)
✅ Playfield + layers + target click ok
*/

:root{
  color-scheme: dark;
  --bg:#020617;
  --panel:rgba(2,6,23,.72);
  --panel2:rgba(15,23,42,.62);
  --stroke:rgba(148,163,184,.18);
  --text:#e5e7eb;
  --muted:#94a3b8;

  --accent:#22c55e;
  --cyan:#22d3ee;
  --bad:#ef4444;
  --warn:#f59e0b;
  --violet:#a78bfa;

  --radius:18px;
  --pill:999px;

  /* safe-area */
  --sat: env(safe-area-inset-top, 0px);
  --sar: env(safe-area-inset-right, 0px);
  --sab: env(safe-area-inset-bottom, 0px);
  --sal: env(safe-area-inset-left, 0px);

  /* HUD geometry (tweakable) */
  --hud-top: 170px;   /* top HUD+quest total height */
  --hud-bottom: 68px; /* bottom bar height */
  --pad: 12px;

  /* play safe padding so targets don't spawn under HUD */
  --safe-top: calc(var(--hud-top) + var(--sat) + 8px);
  --safe-bottom: calc(var(--hud-bottom) + var(--sab) + 10px);
  --safe-left: calc(var(--sal) + 12px);
  --safe-right: calc(var(--sar) + 12px);
}

/* ---------- base ---------- */
*{ box-sizing:border-box; }
html, body{
  width:100%;
  height:100%;
  margin:0;
  padding:0;
  overflow:hidden;
  background:
    radial-gradient(circle at top left, rgba(34,211,238,.12), transparent 60%),
    radial-gradient(circle at bottom right, rgba(168,85,247,.10), transparent 60%),
    var(--bg);
  color: var(--text);
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
}

/* allow pointerdown on targets; but UI overlay blocks by default */
.safeTap{
  pointer-events:none;
}

/* ---------- view classes ---------- */
body.view-pc {}
body.view-mobile {}
body.cardboard {}
body.view-cvr {}

/* ---------- play area ---------- */
.playwrap{
  position:fixed;
  inset:0;
  z-index:10;
}

#playfield,
#cbPlayfield{
  position:absolute;
  inset:0;
  overflow:hidden;
}

/* Cardboard (split eye) */
body.cardboard #cbPlayfield{ display:block !important; }
body.cardboard #playfield{ display:none !important; }

/* Non-cardboard */
body:not(.cardboard) #cbPlayfield{ display:none !important; }
body:not(.cardboard) #playfield{ display:block !important; }

.layer{
  position:absolute;
  inset:0;
  pointer-events:none; /* layer itself not clickable */
}

/* Targets inside layer clickable */
.layer .hvr-target{
  pointer-events:auto;
}

/* ---------- HUD / UI ---------- */
.hud{
  position:fixed;
  inset:0;
  z-index:30;
  pointer-events:none; /* default: don't block targets */
}

/* individual panels clickable */
.hud .panel{
  pointer-events:auto;
}

/* make quest box compact on small screens */
@media (max-width: 520px){
  :root{
    --hud-top: 190px; /* slightly taller due to wrap */
  }
}

/* ---------- spawn safe-zone support ---------- */
/* We expose a visual debug outline when needed */
body.debug-safezone::before{
  content:"";
  position:fixed;
  left:var(--safe-left);
  top:var(--safe-top);
  right:var(--safe-right);
  bottom:var(--safe-bottom);
  border:1px dashed rgba(34,211,238,.28);
  border-radius: 18px;
  pointer-events:none;
  z-index:9;
}

/* ---------- Start overlay ---------- */
#startOverlay{
  animation: fadeIn .18s ease-out both;
}
@keyframes fadeIn{
  from{ opacity:0; transform: translateY(6px); }
  to{ opacity:1; transform: translateY(0); }
}

/* ---------- Result overlay ---------- */
#resultBackdrop[hidden]{ display:none !important; }

/* ---------- VR UI friendliness ---------- */
/* Ensure VR UI buttons never hide behind HUD */
.hha-vrui,
#hha-vrui,
.hha-vr-ui{
  z-index: 80 !important;
}

/* On mobile, enlarge tap targets a bit */
body.view-mobile .btn{
  padding: 12px 16px;
  font-size: 14px;
}

/* ---------- target style fallback (safe.js injects main style) ---------- */
/* Keep this light; safe.js injects its own .hvr-target CSS. */
.hvr-target{
  touch-action: none;
}

/* ---------- End FX classes used by safe.js ---------- */
body.hha-endfx .hvr-target{
  filter: saturate(1.08);
}
body.hha-bossfx .hvr-target.bad,
body.hha-bossfx .hvr-target.bossbad{
  outline-color: rgba(239,68,68,.42);
}

/* ---------- Accessibility ---------- */
button:focus-visible{
  outline: 2px solid rgba(34,211,238,.45);
  outline-offset: 2px;
  border-radius: var(--pill);
}