/* === /herohealth/vr-groups/groups-vr.css ===
   GroupsVR UI + Safe Zones (PATCH A)
   ✅ HUD-safe zones: top/bottom/left (prevents target under HUD)
   ✅ Works with engine occlusion-skip + spawn within playLayer
   ✅ Mobile/VR friendly target sizing + hit affordance
*/

:root{
  --bg:#020617;
  --panel:rgba(2,6,23,.78);
  --stroke:rgba(148,163,184,.18);
  --text:#e5e7eb;
  --muted:#94a3b8;
  --accent:#22c55e;

  --radius:22px;
  --pill:999px;

  --sat: env(safe-area-inset-top, 0px);
  --sab: env(safe-area-inset-bottom, 0px);
  --sal: env(safe-area-inset-left, 0px);
  --sar: env(safe-area-inset-right, 0px);

  /* ✅ Safe zone defaults (tuned to your HUD layout) */
  --hudTop: 148px;
  --hudBot: 132px;
  --hudLeft: 210px;
  --hudRight: 18px;

  /* Targets */
  --tSize: 76px;
  --tFont: 34px;
  --tRad: 18px;
  --tShadow: 0 12px 30px rgba(0,0,0,.22);
}

html,body{
  height:100%;
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans Thai", sans-serif;
  overscroll-behavior:none;
}

/* ===== Views (optional classes) ===== */
body.view-pc{
  --hudLeft: 260px;
  --tSize: 80px;
  --tFont: 36px;
}
body.view-vr, body.view-cvr{
  --hudTop: 138px;
  --hudBot: 120px;
  --hudLeft: 200px;
  --tSize: 82px;
  --tFont: 36px;
}

/* ===== Main layout wrappers (adapt to your HTML ids) ===== */
#groups-wrap{
  position:relative;
  width:100%;
  height:100%;
  overflow:hidden;
}

/* Playfield layer (where engine spawns) */
#playLayer, #groups-playlayer, .groups-playlayer{
  position:absolute;
  inset:0;
  overflow:hidden;
  /* ✅ Ensure layer is the coordinate space */
  pointer-events:none;
}

/* ✅ REAL playable region: we carve out HUD with padding */
#playLayer{
  padding-top: calc(var(--hudTop) + var(--sat));
  padding-bottom: calc(var(--hudBot) + var(--sab));
  padding-left: calc(var(--hudLeft) + var(--sal));
  padding-right: calc(var(--hudRight) + var(--sar));
  box-sizing:border-box;
}

/* Optional: show safe-zone debug if body has .debug-safe */
body.debug-safe #playLayer{
  outline:2px dashed rgba(34,197,94,.5);
  outline-offset:-6px;
}

/* ===== HUD containers (keep them above playLayer) ===== */
.groups-hud, #groups-hud{
  position:absolute;
  inset:0;
  pointer-events:none;
  z-index:50;
}

.groups-topbar{
  position:absolute;
  left: calc(10px + var(--sal));
  right: calc(10px + var(--sar));
  top: calc(10px + var(--sat));
  display:flex;
  gap:10px;
  align-items:center;
  pointer-events:none;
  z-index:60;
}

.groups-coach{
  position:absolute;
  left: calc(10px + var(--sal));
  top: calc(var(--hudTop) - 118px + var(--sat)); /* stays inside top safe area */
  width: min(240px, calc(var(--hudLeft) - 18px));
  pointer-events:none;
  z-index:60;
}

.groups-quest{
  position:absolute;
  top: calc(62px + var(--sat));
  left: calc(10px + var(--sal));
  width: min(320px, calc(var(--hudLeft) - 18px));
  pointer-events:none;
  z-index:60;
}

.groups-bottombar{
  position:absolute;
  left: calc(10px + var(--sal));
  right: calc(10px + var(--sar));
  bottom: calc(10px + var(--sab));
  pointer-events:none;
  z-index:60;
}

/* ===== Targets ===== */
#groupsPlayWrap{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  pointer-events:none; /* engine turns each target pointer-events:auto */
}

.tgt{
  width: var(--tSize);
  height: var(--tSize);
  border-radius: var(--tRad);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size: var(--tFont);
  font-weight:900;
  background: rgba(15,23,42,.72);
  border: 1px solid rgba(148,163,184,.22);
  box-shadow: var(--tShadow);
  user-select:none;
  -webkit-tap-highlight-color: transparent;
  pointer-events:auto;

  /* Make taps easier */
  touch-action: manipulation;
}

.tgt:active{
  transform: scale(.96);
}

/* ✅ Visual pressure (optional; matches your engine classes if used) */
body.fx-miss{ animation: fxmiss .22s ease; }
@keyframes fxmiss{ 0%{ filter:none } 45%{ filter:brightness(1.18) saturate(1.08) } 100%{ filter:none } }

body.fx-bad{ animation: fxbad .24s ease; }
@keyframes fxbad{ 0%{ filter:none } 45%{ filter:brightness(1.08) saturate(1.18) } 100%{ filter:none } }

/* ===== Tiny responsive tweaks ===== */
@media (max-width: 420px){
  :root{
    --hudLeft: 190px;
    --tSize: 74px;
    --tFont: 34px;
  }
}
@media (max-width: 360px){
  :root{
    --hudLeft: 170px;
    --tSize: 70px;
    --tFont: 32px;
  }
}