/* === /herohealth/vr-groups/groups-vr.css ===
ADD: Boss phases + No-Junk Mini FX
*/

.fg-boss.fg-boss-weak{
  box-shadow:
    0 0 0 4px rgba(34,211,238,.22),
    0 18px 36px rgba(0,0,0,.45),
    0 0 28px rgba(34,211,238,.26);
}
.fg-boss.fg-boss-rage{
  border-color: rgba(239,68,68,.85);
  box-shadow:
    0 0 0 5px rgba(239,68,68,.22),
    0 18px 36px rgba(0,0,0,.45),
    0 0 34px rgba(239,68,68,.28);
  animation: fgBossRage .72s ease-in-out infinite;
}
@keyframes fgBossRage{
  0%,100%{ transform: translate(-50%,-50%) scale(var(--s,1)) rotate(-3deg) translateY(0px); }
  50%    { transform: translate(-50%,-50%) scale(var(--s,1)) rotate( 3deg) translateY(-10px); }
}

/* teleport flash */
.fg-target.fg-tele{
  filter: brightness(1.16) saturate(1.12);
  box-shadow:
    0 0 0 6px rgba(250,204,21,.18),
    0 18px 36px rgba(0,0,0,.45),
    0 0 34px rgba(250,204,21,.22);
}

/* === Mini Quest FX === */
body.groups-mini-active .questTop .qbar:last-child{
  border-color: rgba(34,197,94,.25);
  box-shadow: 0 18px 60px rgba(34,197,94,.08);
}

body.groups-mini-urgent .questTop .qbar:last-child{
  animation: miniPulse .24s ease-in-out infinite;
}
@keyframes miniPulse{
  0%,100%{ transform: translateZ(0) scale(1.00); }
  50%{ transform: translateZ(0) scale(1.01); }
}

/* ring pulse when urgent */
body.groups-mini-urgent .fg-layer::before{
  opacity: calc(var(--nojunk-on,0) * 0.34);
  animation: ringPulse .22s ease-in-out infinite;
}
@keyframes ringPulse{
  0%,100%{ transform: translate(-50%,-50%) scale(1.00); }
  50%{ transform: translate(-50%,-50%) scale(1.02); }
}

/* subtle screen tremble (เบา ๆ) */
body.groups-mini-tremble{
  animation: tremble .18s ease-in-out 1;
}
@keyframes tremble{
  0%{ transform: translate(0,0); }
  25%{ transform: translate(-1px,0.5px); }
  50%{ transform: translate(1px,-0.5px); }
  75%{ transform: translate(-0.6px,-1px); }
  100%{ transform: translate(0,0); }
}

body.groups-mini-fail{
  animation: miniFail .42s ease-out 1;
}
@keyframes miniFail{
  0%{ filter: brightness(1); }
  60%{ filter: brightness(1.06) saturate(1.06); }
  100%{ filter: brightness(1); }
}

/* boss phase body vibe */
body.groups-boss-weak{
  animation: bossWeakPulse .22s ease-in-out 1;
}
@keyframes bossWeakPulse{
  0%{ filter: brightness(1.00); }
  100%{ filter: brightness(1.04); }
}
body.groups-boss-rage{
  animation: bossRageFlash .26s ease-in-out 1;
}
@keyframes bossRageFlash{
  0%{ filter: brightness(1.00); }
  60%{ filter: brightness(1.06) saturate(1.10); }
  100%{ filter: brightness(1.00); }
}

/* reduce motion */
@media (prefers-reduced-motion: reduce){
  body.groups-mini-urgent .questTop .qbar:last-child,
  body.groups-mini-urgent .fg-layer::before,
  .fg-boss.fg-boss-rage{
    animation:none !important;
  }
}