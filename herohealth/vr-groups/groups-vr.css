/* === /herohealth/vr-groups/groups-vr.css ===
Food Groups VR — FULL CSS (Responsive PC/Mobile + Cardboard cVR)
✅ Targets rendered by ::before attr(data-emoji)
✅ Type styles: good/wrong/junk/decoy/boss + powerups
✅ Storm / Overdrive / Freeze / Clutch / Mini-urgent effects
✅ cVR mode: disable direct tapping targets (use vr-ui -> hha:shoot)
*/

:root{
  color-scheme: dark;

  --bg:#020617;
  --panel:rgba(2,6,23,.78);
  --panel2:rgba(15,23,42,.72);
  --stroke:rgba(148,163,184,.18);
  --text:#e5e7eb;
  --muted:#94a3b8;

  --good: rgba(34,197,94,.95);
  --bad: rgba(239,68,68,.92);
  --warn: rgba(245,158,11,.95);
  --cyan: rgba(34,211,238,.92);
  --violet: rgba(167,139,250,.92);

  --sat: env(safe-area-inset-top, 0px);
  --sab: env(safe-area-inset-bottom, 0px);
  --sal: env(safe-area-inset-left, 0px);
  --sar: env(safe-area-inset-right, 0px);
}

html,body{
  margin:0;
  height:100%;
  overflow:hidden;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,-apple-system,Segoe UI,sans-serif;
}

/* game layer */
.fg-layer{
  position:fixed;
  inset:0;
  transform: translate(var(--vx,0px), var(--vy,0px));
  touch-action:none;
  user-select:none;
  pointer-events:auto;
  z-index:10;
}

/* Targets */
.fg-target{
  position:absolute;
  left:var(--x, 50%);
  top:var(--y, 50%);
  transform: translate(-50%,-50%) scale(var(--s,1));
  width:64px;
  height:64px;
  border-radius:20px;
  display:grid;
  place-items:center;
  pointer-events:auto;
  -webkit-tap-highlight-color: transparent;

  background: rgba(15,23,42,.62);
  border: 1px solid rgba(148,163,184,.16);
  box-shadow:
    0 16px 40px rgba(0,0,0,.40),
    0 0 0 0 rgba(34,211,238,0);

  transition:
    transform .16s ease,
    opacity .16s ease,
    filter .16s ease;
}

.fg-target::before{
  content: attr(data-emoji);
  font-size: 34px;
  line-height: 1;
  filter: drop-shadow(0 10px 16px rgba(0,0,0,.35));
}

.fg-target.spawn{
  animation: fgPop .16s ease-out both;
}
@keyframes fgPop{
  from{ transform:translate(-50%,-50%) scale(calc(var(--s,1)*.75)); opacity:.0; }
  to  { transform:translate(-50%,-50%) scale(var(--s,1)); opacity:1; }
}

.fg-target.hit{
  animation: fgHit .20s ease-out both;
}
@keyframes fgHit{
  from{ transform:translate(-50%,-50%) scale(var(--s,1)); opacity:1; }
  to  { transform:translate(-50%,-50%) scale(calc(var(--s,1)*1.18)); opacity:0; }
}

.fg-target.out{
  opacity:0;
  transform:translate(-50%,-50%) scale(calc(var(--s,1)*.92));
  filter: blur(1px);
}

/* Type coloring */
.fg-good{
  border-color: rgba(34,197,94,.28);
  box-shadow: 0 16px 40px rgba(0,0,0,.40), 0 0 0 7px rgba(34,197,94,.10);
}
.fg-wrong{
  border-color: rgba(245,158,11,.30);
  box-shadow: 0 16px 40px rgba(0,0,0,.40), 0 0 0 7px rgba(245,158,11,.10);
}
.fg-junk{
  border-color: rgba(239,68,68,.30);
  box-shadow: 0 16px 40px rgba(0,0,0,.40), 0 0 0 7px rgba(239,68,68,.10);
}
.fg-decoy{
  border-color: rgba(167,139,250,.32);
  box-shadow: 0 16px 40px rgba(0,0,0,.40), 0 0 0 7px rgba(167,139,250,.10);
}

/* Boss */
.fg-boss{
  width:78px;
  height:78px;
  border-radius:26px;
  background: rgba(2,6,23,.62);
  border-color: rgba(34,211,238,.30);
  box-shadow:
    0 18px 55px rgba(0,0,0,.55),
    0 0 0 10px rgba(34,211,238,.12);
}
.fg-boss::before{ font-size:38px; }
.fg-boss-hurt{
  animation: bossHurt .22s ease-out both;
}
@keyframes bossHurt{
  from{ transform:translate(-50%,-50%) scale(var(--s,1)); }
  to  { transform:translate(-50%,-50%) scale(calc(var(--s,1)*1.10)); filter: brightness(1.2); }
}
.fg-boss-weak{
  outline: 2px dashed rgba(245,158,11,.60);
  outline-offset: 4px;
}

/* Global states */
body.groups-storm{
  background:
    radial-gradient(circle at 20% 10%, rgba(34,211,238,.18), transparent 58%),
    radial-gradient(circle at 85% 80%, rgba(167,139,250,.14), transparent 60%),
    var(--bg);
}
body.groups-storm .fg-target{
  box-shadow:
    0 18px 55px rgba(0,0,0,.55),
    0 0 0 10px rgba(34,211,238,.10);
}

body.groups-storm-urgent{
  animation: stormPulse .55s ease-in-out infinite;
}
@keyframes stormPulse{
  0%{ filter: none; }
  50%{ filter: brightness(1.08) saturate(1.1); }
  100%{ filter: none; }
}

body.groups-overdrive .fg-target{
  box-shadow:
    0 18px 55px rgba(0,0,0,.55),
    0 0 0 10px rgba(34,197,94,.12);
}
body.groups-freeze .fg-target{
  filter: saturate(.85) brightness(0.98);
}
body.clutch .fg-target{
  animation: clutchWobble .65s ease-in-out infinite;
}
@keyframes clutchWobble{
  0%{ transform:translate(-50%,-50%) scale(var(--s,1)); }
  50%{ transform:translate(-50%,-50%) scale(calc(var(--s,1)*1.05)); }
  100%{ transform:translate(-50%,-50%) scale(var(--s,1)); }
}

body.mini-urgent{
  animation: miniUrgent .50s ease-in-out infinite;
}
@keyframes miniUrgent{
  0%{ box-shadow: none; }
  50%{ box-shadow: inset 0 0 0 999px rgba(239,68,68,.04); }
  100%{ box-shadow: none; }
}

/* Responsive tuning */
@media (max-width: 520px){
  .fg-target{
    width:58px; height:58px; border-radius:18px;
  }
  .fg-target::before{ font-size:32px; }
  .fg-boss{ width:74px; height:74px; border-radius:24px; }
  .fg-boss::before{ font-size:36px; }
}

@media (max-height: 620px){
  .fg-target{ width:56px; height:56px; }
  .fg-target::before{ font-size:30px; }
}

/* Cardboard VR: reduce motion sickness a bit */
body.view-cvr .fg-layer{
  transform: translate(var(--vx,0px), var(--vy,0px)) scale(1.02);
}