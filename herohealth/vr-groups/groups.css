:root{
  --bg:#020617;
  --panel:rgba(2,6,23,.74);
  --stroke:rgba(148,163,184,.18);
  --text:#e5e7eb;
  --muted:#94a3b8;
  --accent:#22c55e;
  --warn:#f59e0b;
  --danger:#ef4444;
  --shadow:0 12px 35px rgba(0,0,0,.38);
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  background: radial-gradient(1200px 900px at 50% 65%, rgba(34,197,94,.10), rgba(2,6,23,0) 55%),
              radial-gradient(1100px 850px at 80% 30%, rgba(59,130,246,.10), rgba(2,6,23,0) 52%),
              linear-gradient(180deg, #020617, #020617);
  color:var(--text);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans Thai", sans-serif;
  overflow:hidden;
}

/* hide A-Frame canvas but keep scene running */
a-scene{ position:fixed; inset:0; opacity:0; pointer-events:none; }

.fg-root{ position:fixed; inset:0; }
.fg-layer{
  position:fixed;
  inset:0;
  overflow:hidden;
  touch-action: manipulation;
}

/* Reticle */
.fg-reticle{
  position:fixed;
  left:50%;
  top:50%;
  width:22px;
  height:22px;
  transform:translate(-50%,-50%);
  border-radius:999px;
  border:2px solid rgba(148,163,184,.35);
  box-shadow: 0 0 0 6px rgba(2,6,23,.35);
  opacity:.9;
  pointer-events:none;
}
.fg-reticle.ok{ border-color:rgba(34,197,94,.55); }
.fg-reticle.miss{ border-color:rgba(239,68,68,.65); transform:translate(-50%,-50%) scale(1.08); }
.fg-reticle.perfect{ border-color:rgba(250,204,21,.75); transform:translate(-50%,-50%) scale(1.10); }

/* Targets (emoji bubble) */
.fg-target{
  position:absolute;
  left:0; top:0;
  width:132px; height:132px;
  border-radius:999px;
  display:flex;
  align-items:center;
  justify-content:center;

  font-size:56px;
  line-height:1;
  user-select:none;

  transform: translate3d(var(--x, 50vw), var(--y, 50vh), 0) translate(-50%,-50%) scale(var(--s,1));
  transition: transform 90ms ease-out, opacity 160ms ease-out, filter 140ms ease-out;

  background:
    radial-gradient(60px 60px at 35% 28%, rgba(255,255,255,.20), rgba(255,255,255,0) 62%),
    radial-gradient(140px 140px at 50% 55%, rgba(2,6,23,.48), rgba(2,6,23,.72) 70%);
  box-shadow: var(--shadow);
  border:1px solid rgba(148,163,184,.18);
  backdrop-filter: blur(8px);
}

.fg-target::before{
  content:'';
  position:absolute; inset:-10px;
  border-radius:999px;
  border:2px solid rgba(34,197,94,.20);
  filter: blur(.2px);
  opacity:.9;
}

.fg-target.fg-junk::before{ border-color: rgba(239,68,68,.22); }
.fg-target.fg-boss::before{ border-color: rgba(245,158,11,.34); }
.fg-target.fg-decoy{ filter: hue-rotate(180deg) saturate(1.1); }
.fg-target.rage{ box-shadow: 0 18px 45px rgba(0,0,0,.46), 0 0 0 3px rgba(245,158,11,.18) inset; }

.fg-target.spawn{ opacity:0; transform: translate3d(var(--x,50vw), var(--y,50vh), 0) translate(-50%,-50%) scale(.86); }
.fg-target.show{ opacity:1; transform: translate3d(var(--x,50vw), var(--y,50vh), 0) translate(-50%,-50%) scale(var(--s,1)); }
.fg-target.hit{ opacity:0; transform: translate3d(var(--x,50vw), var(--y,50vh), 0) translate(-50%,-50%) scale(.70); }
.fg-target.out{ opacity:0; transform: translate3d(var(--x,50vw), var(--y,50vh), 0) translate(-50%,-50%) scale(.82); }

.fg-target.lock{
  box-shadow: var(--shadow), 0 0 0 3px rgba(34,197,94,.22) inset;
}

/* boss hp bar */
.bossbar{
  position:absolute;
  left:12px; right:12px; bottom:10px;
  height:8px;
  border-radius:999px;
  background: rgba(148,163,184,.14);
  overflow:hidden;
}
.bossbar-fill{
  height:100%;
  width:100%;
  border-radius:999px;
  background: linear-gradient(90deg, rgba(245,158,11,.9), rgba(239,68,68,.85));
}

/* HUD */
.hud{
  position:fixed;
  top:18px;
  display:flex;
  gap:10px;
  z-index:20;
  pointer-events:none;
}
.hud-left{ left:18px; }
.hud-right{ right:18px; flex-direction:column; align-items:flex-end; gap:10px; }

.hud-chip{
  min-width:86px;
  padding:10px 12px;
  border-radius:14px;
  background: var(--panel);
  border:1px solid var(--stroke);
  box-shadow: 0 10px 28px rgba(0,0,0,.25);
}
.hud-chip .k{ font-size:12px; color:var(--muted); }
.hud-chip .v{ font-size:22px; font-weight:800; letter-spacing:.2px; }

.hud-card{
  padding:10px 12px;
  border-radius:14px;
  background: var(--panel);
  border:1px solid var(--stroke);
  width: 190px;
  box-shadow: 0 10px 28px rgba(0,0,0,.25);
}
.hud-card .k{ font-size:12px; color:var(--muted); }
.hud-card .v{ font-size:16px; font-weight:800; }
.grade{ letter-spacing:.8px; }

/* Quest panel */
.quest-panel{
  position:fixed;
  left:18px;
  bottom:92px;
  width:min(520px, calc(100vw - 36px));
  padding:14px 14px;
  border-radius:18px;
  background: rgba(2,6,23,.58);
  border:1px solid rgba(148,163,184,.16);
  backdrop-filter: blur(10px);
  box-shadow: 0 18px 50px rgba(0,0,0,.32);
  z-index:20;
  pointer-events:none;
}
.quest-title{
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin-bottom:8px;
  font-weight:800;
}
.quest-title.mt{ margin-top:12px; }
.q-head{ font-size:13px; color:#e2e8f0; opacity:.95; }
.q-meta{ font-size:12px; color:var(--muted); }

.q-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  margin:6px 0;
}
.q-label{
  font-size:13px;
  color:#e2e8f0;
  opacity:.95;
  max-width: 78%;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.q-right{ font-size:12px; color:var(--muted); }

.q-bar{
  height:10px;
  border-radius:999px;
  background: rgba(148,163,184,.12);
  overflow:hidden;
}
.q-bar-fill{
  height:100%;
  width:0%;
  border-radius:999px;
  background: linear-gradient(90deg, rgba(34,197,94,.9), rgba(59,130,246,.75));
}

.q-warn{
  margin-top:10px;
  font-size:12px;
  color: rgba(245,158,11,.95);
}

/* Coach */
.coach{
  position:fixed;
  right:18px;
  bottom:92px;
  width:min(420px, calc(100vw - 36px));
  padding:12px 14px;
  border-radius:18px;
  background: rgba(2,6,23,.58);
  border:1px solid rgba(148,163,184,.16);
  backdrop-filter: blur(10px);
  box-shadow: 0 18px 50px rgba(0,0,0,.32);
  z-index:20;
  pointer-events:none;
}
.coach-title{ font-size:12px; color:var(--muted); font-weight:800; }
.coach-text{ margin-top:6px; font-size:14px; font-weight:700; color:#e2e8f0; }

/* Controls */
.controls{
  position:fixed;
  left:50%;
  bottom:18px;
  transform:translateX(-50%);
  display:flex;
  gap:10px;
  z-index:30;
}
.btn{
  appearance:none;
  border:1px solid rgba(148,163,184,.18);
  background: rgba(2,6,23,.70);
  color: var(--text);
  padding:12px 16px;
  border-radius:999px;
  font-weight:900;
  letter-spacing:.3px;
  box-shadow: 0 14px 40px rgba(0,0,0,.28);
}
.btn.big{ padding:14px 18px; }
.btn.ghost{ background: rgba(2,6,23,.40); }
.btn.danger{ border-color: rgba(239,68,68,.25); background: rgba(127,29,29,.40); }
.btn:active{ transform: translateY(1px); }

/* Overlay */
.overlay{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:18px;
  z-index:50;
  background: radial-gradient(1000px 800px at 50% 55%, rgba(2,6,23,.65), rgba(2,6,23,.92));
}
.overlay-card{
  width:min(720px, 100%);
  border-radius:22px;
  padding:18px 18px;
  border:1px solid rgba(148,163,184,.18);
  background: rgba(2,6,23,.70);
  backdrop-filter: blur(12px);
  box-shadow: 0 24px 70px rgba(0,0,0,.45);
}
.overlay-card.end{ width:min(760px,100%); }

.overlay-title{
  font-size:22px;
  font-weight:1000;
}
.overlay-sub{
  margin-top:6px;
  font-size:13px;
  color: var(--muted);
}

.overlay-grid{ margin-top:14px; }
.row{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
.btnrow{ margin-top:12px; }

.pill{
  padding:8px 10px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.18);
  background: rgba(15,23,42,.50);
  font-size:12px;
  color:#e2e8f0;
  font-weight:900;
}

.overlay-note{
  margin-top:12px;
  font-size:12px;
  color: rgba(148,163,184,.95);
}

/* End grid */
.end-grid{
  margin-top:14px;
  display:grid;
  grid-template-columns: repeat(3, minmax(0,1fr));
  gap:10px;
}
.end-card{
  padding:12px 12px;
  border-radius:16px;
  background: rgba(15,23,42,.45);
  border:1px solid rgba(148,163,184,.14);
}
.end-card .k{ font-size:12px; color: var(--muted); font-weight:900; }
.end-card .v{ font-size:20px; font-weight:1000; margin-top:2px; }

/* Responsive */
@media (max-width: 860px){
  .hud-right .hud-card{ width: 165px; }
  .end-grid{ grid-template-columns: repeat(2, minmax(0,1fr)); }
}
