/* === /herohealth/vr-groups/groups.css ===
Food Groups VR â€” TARGETS + HUD FX (SAFE, NOT BREAK EMOJI)
Works with:
- groups-vr.html (fg-layer)
- vr-groups/GameEngine.js (sets --x/--y/--s)
- groups-ui.js (HUD binder: reticle, lock ring, edge pulse, end card etc.)
*/

:root{
  --bg:#020617;
  --panel:rgba(2,6,23,.78);
  --panel2:rgba(15,23,42,.72);
  --stroke:rgba(148,163,184,.22);

  --text:#e5e7eb;
  --muted:#94a3b8;

  --good:#22c55e;
  --bad:#ef4444;
  --warn:#f59e0b;
  --violet:#a855f7;
  --blue:#3b82f6;

  --radius:18px;
  --shadow:0 18px 50px rgba(0,0,0,.42);

  /* Safe HUD zones (keep aligned w/ GameEngine CFG.safeTopPx etc.) */
  --safeTop: 118px;
  --safeBottom: 150px;
  --safeLeft: 28px;
  --safeRight: 28px;
}

html, body{
  background:var(--bg);
  color:var(--text);
  font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial;
}

/* ---------- Target layer ---------- */
#fg-layer{
  position:fixed;
  inset:0;
  z-index:10;
  pointer-events:auto;
  touch-action:manipulation;
  transform:translateZ(0);
}

/* ---------- Emoji Target (core) ---------- */
/* Engine sets:
   left/top via CSS vars --x/--y (px)
   scale via --s (string)
*/
.fg-target{
  position:absolute;
  left: var(--x, 50%);
  top:  var(--y, 52%);
  transform: translate3d(-50%,-50%,0) scale(var(--s,1));
  transform-origin:center;

  width:132px;
  height:132px;
  border-radius:999px;

  display:flex;
  align-items:center;
  justify-content:center;

  /* Emoji rendering: DON'T break */
  font-size:58px;
  line-height:1;
  font-family: "Apple Color Emoji","Segoe UI Emoji","Noto Color Emoji",system-ui;

  /* glass bubble */
  background:
    radial-gradient(90px 80px at 35% 25%, rgba(255,255,255,.56), rgba(255,255,255,0) 60%),
    radial-gradient(120px 120px at 50% 55%, rgba(255,255,255,.18), rgba(255,255,255,.06) 58%, rgba(255,255,255,.02) 100%),
    linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.03));

  border:1px solid rgba(255,255,255,.18);

  box-shadow:
    0 18px 48px rgba(0,0,0,.35),
    inset 0 1px 0 rgba(255,255,255,.22);

  filter: drop-shadow(0 10px 22px rgba(0,0,0,.34));
  text-shadow:
    0 6px 16px rgba(0,0,0,.30),
    0 0 10px rgba(255,255,255,.10);

  user-select:none;
  -webkit-user-select:none;
  cursor:pointer;

  /* perf */
  will-change: transform, left, top, opacity;
  backface-visibility:hidden;
  -webkit-font-smoothing:antialiased;
}

/* Ring outline per type */
.fg-target.fg-good{ outline:2px solid rgba(34,197,94,.18); }
.fg-target.fg-junk{ outline:2px solid rgba(239,68,68,.18); }
.fg-target.fg-decoy{ outline:2px solid rgba(245,158,11,.22); }
.fg-target.fg-boss{ outline:2px solid rgba(168,85,247,.22); }

/* Slight motion feel even if engine doesn't sway much */
.fg-target::after{
  content:'';
  position:absolute;
  inset:8px;
  border-radius:999px;
  background: radial-gradient(60px 50px at 35% 25%, rgba(255,255,255,.10), rgba(255,255,255,0) 70%);
  pointer-events:none;
  opacity:.9;
}

/* ---------- Spawn / Show / Out / Hit ---------- */
.fg-target.spawn{
  opacity:0;
  transform: translate3d(-50%,-50%,0) scale(.72);
}
.fg-target.show{
  opacity:1;
  animation: fgPop .22s ease-out both;
}
@keyframes fgPop{
  0%{ transform:translate3d(-50%,-50%,0) scale(.78); filter:blur(.2px) drop-shadow(0 6px 14px rgba(0,0,0,.22)); }
  70%{ transform:translate3d(-50%,-50%,0) scale(1.10); }
  100%{ transform:translate3d(-50%,-50%,0) scale(var(--s,1)); filter:drop-shadow(0 10px 22px rgba(0,0,0,.34)); }
}

.fg-target.out{
  animation: fgOut .18s ease-in both;
}
@keyframes fgOut{
  to{
    opacity:0;
    transform:translate3d(-50%,-50%,0) scale(.86);
    filter: blur(1px) drop-shadow(0 0 0 rgba(0,0,0,0));
  }
}

.fg-target.hit{
  animation: fgHit .16s ease-out both;
}
@keyframes fgHit{
  40%{ transform:translate3d(-50%,-50%,0) scale(1.18); }
  100%{ opacity:0; transform:translate3d(-50%,-50%,0) scale(.86); }
}

/* ---------- Lock highlight ---------- */
.fg-target.lock{
  border-color: rgba(34,197,94,.30);
  box-shadow:
    0 18px 60px rgba(34,197,94,.10),
    0 18px 48px rgba(0,0,0,.35),
    inset 0 1px 0 rgba(255,255,255,.22);
}
.fg-target.fg-boss.lock{
  border-color: rgba(168,85,247,.36);
  box-shadow:
    0 18px 70px rgba(168,85,247,.12),
    0 18px 48px rgba(0,0,0,.35),
    inset 0 1px 0 rgba(255,255,255,.22);
}

/* ---------- RAGE pulsing (boss) ---------- */
.fg-target.rage{
  animation: ragePulse .85s ease-in-out infinite;
}
@keyframes ragePulse{
  0%,100%{
    box-shadow:0 18px 48px rgba(0,0,0,.35), 0 0 0 rgba(168,85,247,0);
  }
  50%{
    box-shadow:0 18px 48px rgba(0,0,0,.35), 0 0 28px rgba(168,85,247,.26);
  }
}

/* ---------- Afterimage (from engine) ---------- */
.fg-afterimage{
  position:absolute;
  z-index:9;
  pointer-events:none;
  opacity:.22;
  filter: blur(.2px);
  animation: aiFade .42s ease-out forwards;
  transform: translate3d(0,0,0) translate(-50%,-50%);
}
.fg-afterimage-inner{
  width:110px; height:110px;
  border-radius:999px;
  display:flex; align-items:center; justify-content:center;
  font-size:54px; line-height:1;
  font-family: "Apple Color Emoji","Segoe UI Emoji","Noto Color Emoji",system-ui;
  background: rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.10);
  transform: scale(1.04);
}
.fg-afterimage.a2{ opacity:.16; }
@keyframes aiFade{
  to{
    opacity:0;
    transform: translate3d(0,0,0) translate(-50%,-50%) scale(1.18);
  }
}

/* ---------- Boss bar (engine injects .bossbar) ---------- */
.bossbar{
  position:absolute;
  left:12px; right:12px;
  bottom:10px;
  height:8px;
  border-radius:999px;
  background: rgba(255,255,255,.10);
  overflow:hidden;
  border:1px solid rgba(255,255,255,.14);
}
.bossbar-fill{
  height:100%;
  width:100%;
  border-radius:999px;
  background: linear-gradient(90deg, rgba(168,85,247,.95), rgba(59,130,246,.85));
}

/* =========================================================
   HUD HELPERS (groups-ui.js can create these IDs/classes)
   If your groups-ui.js already defines them, this just skins.
   ========================================================= */

/* Reticle */
#reticle, .fg-reticle{
  position:fixed;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  width:14px;
  height:14px;
  border-radius:999px;
  background: rgba(255,255,255,.55);
  box-shadow: 0 0 18px rgba(255,255,255,.12);
  z-index:25;
  pointer-events:none;
  opacity:.85;
}
#reticle.ok, .fg-reticle.ok{
  background: rgba(34,197,94,.65);
  box-shadow: 0 0 22px rgba(34,197,94,.18);
}
#reticle.miss, .fg-reticle.miss{
  background: rgba(239,68,68,.65);
  box-shadow: 0 0 22px rgba(239,68,68,.18);
}
#reticle.perfect, .fg-reticle.perfect{
  background: rgba(245,158,11,.72);
  box-shadow: 0 0 24px rgba(245,158,11,.22);
}

/* Lock UI ring */
#lockUI, .fg-lockUI{
  position:fixed;
  left:0; top:0;
  width:10px; height:10px;
  transform: translate(-9999px,-9999px);
  z-index:26;
  pointer-events:none;
  opacity:0;
  transition: opacity .08s linear;
}
#lockUI.on, .fg-lockUI.on{ opacity:1; }
#lockSvg{ overflow:visible; }
.ringBack{ stroke:rgba(255,255,255,.20); stroke-width:5; fill:none; }
.ringProg{ stroke:rgba(34,197,94,.90); stroke-width:6; fill:none; stroke-linecap:round; }
.ringCharge{ stroke:rgba(59,130,246,.95); stroke-width:6; fill:none; stroke-linecap:round; opacity:.92; }

/* Edge pulse (panic/clutch etc.) */
#edgePulse, .fg-edgePulse{
  position:fixed;
  inset:0;
  pointer-events:none;
  opacity:0;
  transition: opacity .12s ease;
  border-radius: 24px;
  z-index: 24;
  box-shadow:
    inset 0 0 0 2px rgba(245,158,11,.00),
    inset 0 0 38px rgba(245,158,11,.00);
}
#edgePulse.on, .fg-edgePulse.on{
  opacity:1;
  box-shadow:
    inset 0 0 0 2px rgba(245,158,11,.16),
    inset 0 0 38px rgba(245,158,11,.10);
}
#edgePulse.beat, .fg-edgePulse.beat{
  animation: edgeBeat .24s ease-out both;
}
@keyframes edgeBeat{
  0%{
    box-shadow:
      inset 0 0 0 2px rgba(245,158,11,.18),
      inset 0 0 42px rgba(245,158,11,.12);
    filter: saturate(1.05);
    transform: scale(1);
  }
  55%{
    box-shadow:
      inset 0 0 0 3px rgba(245,158,11,.34),
      inset 0 0 72px rgba(245,158,11,.22);
    filter: saturate(1.22);
    transform: scale(1.006);
  }
  100%{
    box-shadow:
      inset 0 0 0 2px rgba(245,158,11,.16),
      inset 0 0 38px rgba(245,158,11,.10);
    filter: saturate(1.05);
    transform: scale(1);
  }
}

/* Optional: small screen tweaks */
@media (max-width:420px){
  .fg-target{ width:120px; height:120px; font-size:54px; }
  .fg-afterimage-inner{ width:100px; height:100px; font-size:50px; }
}

/* Accessibility: reduce motion */
@media (prefers-reduced-motion: reduce){
  .fg-target.show, .fg-target.hit, .fg-target.out, .fg-afterimage{ animation:none !important; }
  .fg-target.rage{ animation:none !important; }
}