/* === /herohealth/plate/plate-vr.css ===
HeroHealth — Balanced Plate VR (RUN) — PRODUCTION v20260215c
✅ Target skins (good/junk) + spawn pop + wobble
✅ Hit FX + panic pulses (storm/boss)
✅ cVR safe: bigger targets + reduce blur + stabilize
*/

:root{
  --plate-good: rgba(34,197,94,.92);
  --plate-junk: rgba(239,68,68,.92);
  --plate-stroke: rgba(148,163,184,.22);
  --plate-glow: rgba(34,197,94,.35);

  --plate-shadow: 0 18px 40px rgba(0,0,0,.42);
  --plate-shadow2: 0 26px 80px rgba(0,0,0,.52);

  --plate-font: system-ui, -apple-system, "Noto Sans Thai", Segoe UI, Roboto, sans-serif;
}

/* ---------- Targets layer baseline ---------- */
#plate-layer{
  position:fixed;
  inset:0;
  z-index:10;
  pointer-events:auto;
  touch-action:none;
  user-select:none;
}

/* target base */
.plateTarget{
  position:absolute !important;
  display:grid;
  place-items:center;
  border-radius: 999px;
  border: 1px solid var(--plate-stroke);
  box-shadow: var(--plate-shadow);
  transform: translate(-50%,-50%);
  font-family: var(--plate-font);
  font-weight: 1100;
  line-height: 1;
  font-size: 26px;

  /* feel */
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);

  /* animations */
  animation:
    platePop .16s ease-out both,
    plateWobble 1.25s ease-in-out infinite;
  will-change: transform, filter, opacity;
}

/* good vs junk skins */
.plateTarget[data-kind="good"]{
  background:
    radial-gradient(circle at 30% 25%, rgba(255,255,255,.18), transparent 45%),
    radial-gradient(circle at 60% 75%, rgba(34,197,94,.25), transparent 52%),
    rgba(15,23,42,.62);
  border-color: rgba(34,197,94,.30);
  box-shadow: 0 18px 46px rgba(0,0,0,.45), 0 0 0 1px rgba(34,197,94,.18);
  text-shadow: 0 8px 22px rgba(0,0,0,.35);
}
.plateTarget[data-kind="junk"]{
  background:
    radial-gradient(circle at 30% 25%, rgba(255,255,255,.14), transparent 45%),
    radial-gradient(circle at 70% 80%, rgba(239,68,68,.22), transparent 56%),
    rgba(15,23,42,.62);
  border-color: rgba(239,68,68,.30);
  box-shadow: 0 18px 46px rgba(0,0,0,.45), 0 0 0 1px rgba(239,68,68,.16);
  filter: saturate(1.05);
}

/* subtle ring */
.plateTarget::before{
  content:"";
  position:absolute;
  inset:-6px;
  border-radius:999px;
  background:
    radial-gradient(circle at 50% 50%, rgba(34,197,94,.10), transparent 55%);
  opacity:.55;
  pointer-events:none;
}
.plateTarget[data-kind="junk"]::before{
  background:
    radial-gradient(circle at 50% 50%, rgba(239,68,68,.10), transparent 55%);
}

/* junk glitch shimmer */
.plateTarget[data-kind="junk"]::after{
  content:"";
  position:absolute;
  inset:0;
  border-radius:999px;
  background:
    linear-gradient(115deg, transparent 0%, rgba(239,68,68,.22) 35%, transparent 65%);
  opacity:.0;
  mix-blend-mode: screen;
  animation: junkGlitch 1.1s ease-in-out infinite;
  pointer-events:none;
}

/* press feedback */
.plateTarget:active{
  transform: translate(-50%,-50%) scale(.96);
  filter: brightness(1.08);
}

/* ---------- Spawn / motion animations ---------- */
@keyframes platePop{
  from{ transform: translate(-50%,-50%) scale(.62); opacity:0; filter: blur(10px); }
  to{ transform: translate(-50%,-50%) scale(1); opacity:1; filter: blur(0); }
}
@keyframes plateWobble{
  0%,100%{ transform: translate(-50%,-50%) scale(1) rotate(-1deg); }
  50%{ transform: translate(-50%,-50%) scale(1.02) rotate(1deg); }
}
@keyframes junkGlitch{
  0%,100%{ opacity:0; transform: translateX(-8px); }
  30%{ opacity:.22; transform: translateX(8px); }
  60%{ opacity:.10; transform: translateX(-6px); }
}

/* ---------- Hit FX layer ---------- */
#hitFx{
  position:fixed;
  inset:0;
  z-index:12;
  pointer-events:none;
}

/* FX particle dot (plate.safe.js / particles.js can append if desired) */
.plateFxDot{
  position:absolute;
  width:10px; height:10px;
  border-radius:999px;
  background: rgba(255,255,255,.85);
  box-shadow: 0 0 28px rgba(255,255,255,.35), 0 0 70px rgba(34,197,94,.22);
  transform: translate(-50%,-50%);
  animation: fxDot .36s ease-out both;
}
.plateFxDot.bad{
  background: rgba(255,255,255,.75);
  box-shadow: 0 0 28px rgba(255,255,255,.22), 0 0 70px rgba(239,68,68,.20);
}
@keyframes fxDot{
  from{ opacity:0; transform: translate(-50%,-50%) scale(.6); filter: blur(8px); }
  to{ opacity:1; transform: translate(-50%,-50%) scale(1.25); filter: blur(0); }
}

/* screen punch (optional) */
body.platePunch #hitFx{
  opacity: 1 !important;
}

/* ---------- Storm/Boss overlays (if you add elements later) ---------- */
#stormFx, #bossFx{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:25;
  display:none;
}

#stormFx.storm-on{
  display:block;
  background:
    radial-gradient(circle at 20% 20%, rgba(34,211,238,.12), transparent 45%),
    radial-gradient(circle at 80% 75%, rgba(167,139,250,.10), transparent 50%),
    linear-gradient(180deg, rgba(2,6,23,.00), rgba(2,6,23,.12));
  animation: stormPulse 1.2s ease-in-out infinite;
}
#stormFx.storm-on.storm-panic{
  animation: stormPulse .65s ease-in-out infinite;
}

@keyframes stormPulse{
  0%,100%{ opacity:.55; filter: blur(0px); }
  50%{ opacity:.80; filter: blur(1px); }
}

#bossFx.boss-on{
  display:block;
  background:
    radial-gradient(circle at 50% 30%, rgba(239,68,68,.10), transparent 55%),
    radial-gradient(circle at 50% 90%, rgba(245,158,11,.08), transparent 60%);
  animation: bossPulse 1.0s ease-in-out infinite;
}
#bossFx.boss-on.boss-panic{
  animation: bossPulse .55s ease-in-out infinite;
}

@keyframes bossPulse{
  0%,100%{ opacity:.52; }
  50%{ opacity:.86; }
}

/* ---------- cVR tweaks ---------- */
:root[data-view="cvr"] .plateTarget{
  /* bigger + less blur helps cardboard */
  font-size: 30px;
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  animation:
    platePop .14s ease-out both,
    plateWobble 1.05s ease-in-out infinite;
}

:root[data-view="cvr"] .hudTop .card,
:root[data-view="cvr"] #miniPanel .questCard,
:root[data-view="cvr"] #coachPanel .questCard{
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
}

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce){
  .plateTarget{ animation: none; }
  #stormFx, #bossFx{ animation: none; }
}
