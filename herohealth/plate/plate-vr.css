/* === /herohealth/plate/plate-vr.css ===
Balanced Plate VR — PRODUCTION+ (HHA Standard UI)
✅ PC/Mobile/VR/cVR
✅ HUD-safe spawn friendly (JS uses bounding rects)
✅ Plays nice with vr-ui.js overlay buttons
✅ Boss/Storm FX classes used by plate.safe.js
*/

:root{
  color-scheme: dark;

  --bg:#020617;
  --panel:rgba(2,6,23,.78);
  --panel2:rgba(15,23,42,.70);
  --stroke:rgba(148,163,184,.18);
  --text:#e5e7eb;
  --muted:#94a3b8;
  --accent:#22c55e;
  --warn:#f59e0b;
  --bad:#ef4444;
  --violet:#a78bfa;
  --cyan:#22d3ee;

  --radius:18px;
  --radius-lg:22px;
  --pill:999px;

  /* safe-area */
  --sat: env(safe-area-inset-top, 0px);
  --sar: env(safe-area-inset-right, 0px);
  --sab: env(safe-area-inset-bottom, 0px);
  --sal: env(safe-area-inset-left, 0px);

  /* baseline tap */
  -webkit-tap-highlight-color: transparent;
}

*,
*::before,
*::after{
  box-sizing:border-box;
}

html, body{
  width:100%;
  height:100%;
  margin:0;
  overflow:hidden;
  background:var(--bg);
  color:var(--text);
  font-family: system-ui, -apple-system, "Noto Sans Thai", Segoe UI, Roboto, sans-serif;
}

body{
  /* Make sure overlays/vr-ui clickable: */
  position:relative;
}

/* prevent text selection / callout in game feel */
body, button, .pill{
  -webkit-user-select:none;
  user-select:none;
  -webkit-touch-callout:none;
}

/* ---------------------------------------
   View flags (set by plate.safe.js)
---------------------------------------- */
body.view-mobile{}
body.view-pc{}
body.view-vr{}
body.view-cvr{}

/* cVR strict: do not allow tapping targets if you want pure crosshair-only.
   NOTE: plate.safe.js already supports hha:shoot; keeping taps enabled is OK.
   If you want strict no-tap in cVR, uncomment below.
*/
/*
body.view-cvr #plate-layer .plateTarget{
  pointer-events:none !important;
}
*/

/* ---------------------------------------
   Targets
---------------------------------------- */
.plateTarget{
  /* JS assigns geometry inline; keep only behavior & transitions here */
  cursor:pointer;
  touch-action:none;
  transition: transform .08s ease, filter .08s ease, opacity .12s ease;
  will-change: transform, opacity;
}

.plateTarget:active{
  transform: translateZ(0) scale(0.96);
}

/* Kind hints (optional) */
.plateTarget[data-kind="good"]{
  box-shadow: 0 18px 44px rgba(0,0,0,.28), 0 0 0 1px rgba(34,197,94,.06) inset;
}
.plateTarget[data-kind="junk"]{
  box-shadow: 0 18px 44px rgba(0,0,0,.28), 0 0 0 1px rgba(239,68,68,.06) inset;
}
.plateTarget[data-kind="shield"]{
  box-shadow: 0 18px 44px rgba(0,0,0,.28), 0 0 0 1px rgba(34,211,238,.08) inset;
}

/* ---------------------------------------
   HUD readability helpers
---------------------------------------- */
.hudTop .card,
#miniPanel .questCard,
#coachPanel .questCard,
#bossHud .bossCard,
#stormHud .stormCard{
  backface-visibility:hidden;
  transform: translateZ(0);
}

/* keep important overlays above play layer */
#hudBtns{ z-index: 40; }
#bossHud{ z-index: 42; }
#stormHud{ z-index: 43; }

/* vr-ui.js usually uses its own z-index; ensure our HUD doesn't block it */
.hha-vrui,
#hha-vrui,
.hha-vr-ui,
.hha-vrui-root{
  z-index: 60 !important;
}

/* In case vr-ui uses fixed buttons corner, allow click-through where needed */
.hudTop, #miniPanel, #coachPanel, #bossHud, #stormHud{
  pointer-events:none;
}
.hudTop .card,
#miniPanel .questCard,
#coachPanel .questCard,
#bossHud .bossCard,
#stormHud .stormCard{
  pointer-events:auto;
}

/* ---------------------------------------
   FX: boss/storm layers (classes toggled by JS)
---------------------------------------- */
#bossFx{
  background:
    radial-gradient(circle at 22% 18%, rgba(167,139,250,.16), transparent 48%),
    radial-gradient(circle at 82% 78%, rgba(239,68,68,.10), transparent 54%),
    linear-gradient(180deg, rgba(2,6,23,.10), rgba(2,6,23,.24));
  opacity:0;
  transition: opacity .16s ease, filter .16s ease;
}

#stormFx{
  background:
    radial-gradient(circle at 18% 22%, rgba(34,211,238,.18), transparent 52%),
    radial-gradient(circle at 78% 82%, rgba(34,197,94,.10), transparent 56%),
    linear-gradient(180deg, rgba(2,6,23,.10), rgba(2,6,23,.24));
  opacity:0;
  transition: opacity .16s ease, filter .16s ease;
}

/* boss on */
#bossFx.boss-on{
  opacity:1;
}
#bossFx.boss-panic{
  filter: brightness(1.18) saturate(1.08);
}

/* storm panic */
#stormFx.storm-panic{
  opacity:1;
  filter: brightness(1.18) saturate(1.06);
}

/* ---------------------------------------
   Micro FX classes (fallbacks; JS may also inject)
---------------------------------------- */
.pfx-shake{ animation:pfxShake .18s ease-in-out 0s 2; }
@keyframes pfxShake{
  0%{transform:translate(0,0)}
  25%{transform:translate(2px,0)}
  50%{transform:translate(-2px,1px)}
  75%{transform:translate(1px,-1px)}
  100%{transform:translate(0,0)}
}

.pfx-blink{ animation:pfxBlink .26s ease-in-out 0s 6; }
@keyframes pfxBlink{
  0%,100%{filter:none}
  50%{filter:brightness(1.35)}
}

.pfx-tick{ animation:pfxTick .12s linear 0s 1; }
@keyframes pfxTick{
  0%{transform:scale(1)}
  50%{transform:scale(1.03)}
  100%{transform:scale(1)}
}

/* ---------------------------------------
   Responsive tweaks
---------------------------------------- */
@media (max-width: 520px){
  /* tighten HUD a bit */
  .hudTop{
    gap:8px;
  }
  .hudTop .card{
    min-width: 160px !important;
    padding:9px 10px !important;
  }
  #miniPanel .questCard,
  #coachPanel .questCard{
    padding:9px 10px !important;
  }
}

/* Landscape phone */
@media (max-height: 520px){
  #coachPanel{
    bottom: calc(56px + var(--sab)) !important;
  }
}

/* ---------------------------------------
   Accessibility / reduced motion
---------------------------------------- */
@media (prefers-reduced-motion: reduce){
  *{ animation:none !important; transition:none !important; }
}