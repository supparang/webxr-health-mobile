/* === /herohealth/plate/plate-vr.css ===
Balanced Plate VR — PRODUCTION CSS
✅ HUD-safe + mobile safe-area
✅ Target look: glass + pop + hit FX
✅ Goal/Mini bars
✅ Boss/Storm FX layers (toggled by JS)
✅ Result/Overlay polish
✅ Works: PC / Mobile / VR / cVR
*/

:root{
  color-scheme: dark;
  --bg:#020617;

  --panel:rgba(2,6,23,.78);
  --panel2:rgba(15,23,42,.70);
  --stroke:rgba(148,163,184,.18);

  --text:#e5e7eb;
  --muted:#94a3b8;

  --accent:#22c55e;
  --warn:#f59e0b;
  --bad:#ef4444;
  --cyan:#22d3ee;
  --violet:#a78bfa;

  --radius:18px;
  --radius2:22px;
  --pill:999px;

  --sat: env(safe-area-inset-top, 0px);
  --sar: env(safe-area-inset-right, 0px);
  --sab: env(safe-area-inset-bottom, 0px);
  --sal: env(safe-area-inset-left, 0px);

  /* target defaults (JS sets inline but keep fallback) */
  --t-size:56px;
}

*,
*::before,
*::after{ box-sizing:border-box; }

html,body{
  margin:0;
  width:100%;
  height:100%;
  overflow:hidden;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,-apple-system,"Noto Sans Thai",Segoe UI,Roboto,sans-serif;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

button{
  font-family:inherit;
}

/* -------------------------------------------------------
   Stage + layers
------------------------------------------------------- */

#plate-layer{
  position:fixed;
  inset:0;
  z-index:10;
  pointer-events:auto;
  touch-action:none;
  user-select:none;
}

#hitFx{
  position:fixed;
  inset:0;
  z-index:12;
  pointer-events:none;
  opacity:0;
  transition:opacity .12s ease;
}

/* Reduce accidental scroll/bounce in mobile */
body{
  overscroll-behavior:none;
  -webkit-tap-highlight-color:transparent;
}

/* -------------------------------------------------------
   Targets
------------------------------------------------------- */

.plateTarget{
  appearance:none;
  border:none;
  cursor:pointer;
  -webkit-tap-highlight-color:transparent;

  width:var(--t-size);
  height:var(--t-size);
  border-radius:999px;

  display:grid;
  place-items:center;

  background:rgba(2,6,23,.55);
  border:1px solid rgba(148,163,184,.18);
  box-shadow:0 18px 44px rgba(0,0,0,.28);
  backdrop-filter: blur(10px);

  font: 900 28px/1 system-ui,-apple-system,"Noto Sans Thai",Segoe UI,Roboto,sans-serif;
  color:rgba(229,231,235,.98);

  transform:translateZ(0);
  will-change: transform, opacity;
  user-select:none;

  animation: ptPop .14s ease-out 0s 1;
}

@keyframes ptPop{
  0%{ transform:scale(.78); opacity:.0; }
  100%{ transform:scale(1); opacity:1; }
}

.plateTarget:active{
  transform: translateY(1px) scale(.98);
}

/* Kind-specific glow */
.plateTarget[data-kind="good"]{
  box-shadow:
    0 18px 44px rgba(0,0,0,.28),
    0 0 0 1px rgba(34,197,94,.16) inset;
}

.plateTarget[data-kind="junk"]{
  box-shadow:
    0 18px 44px rgba(0,0,0,.28),
    0 0 0 1px rgba(239,68,68,.18) inset;
}

.plateTarget[data-kind="shield"]{
  box-shadow:
    0 18px 44px rgba(0,0,0,.28),
    0 0 0 1px rgba(34,211,238,.18) inset;
}

/* Slight wobble on junk to increase salience (kid-friendly) */
.plateTarget[data-kind="junk"]{
  animation: ptPop .14s ease-out 0s 1, ptWobble 1.2s ease-in-out .2s infinite;
}
@keyframes ptWobble{
  0%,100%{ transform: translateZ(0) rotate(0deg); }
  50%{ transform: translateZ(0) rotate(2.2deg); }
}

/* Shield pulse */
.plateTarget[data-kind="shield"]{
  animation: ptPop .14s ease-out 0s 1, ptPulse 1.1s ease-in-out .2s infinite;
}
@keyframes ptPulse{
  0%,100%{ transform: translateZ(0) scale(1); }
  50%{ transform: translateZ(0) scale(1.06); }
}

/* -------------------------------------------------------
   Overlays safety (prevent HUD from blocking)
------------------------------------------------------- */

.hudTop,
#miniPanel,
#coachPanel,
#hudBtns,
#bossHud,
#stormHud{
  pointer-events:none;
}

.hudTop .card,
#miniPanel .questCard,
#coachPanel .questCard,
#hudBtns .btn,
#bossHud .bossCard,
#stormHud .stormCard{
  pointer-events:auto;
}

/* -------------------------------------------------------
   Buttons (if defined in HTML inline too, this is fallback)
------------------------------------------------------- */

.btn{
  appearance:none;
  border:none;
  border-radius:999px;
  padding:10px 12px;
  background:rgba(2,6,23,.70);
  border:1px solid rgba(148,163,184,.20);
  color:rgba(229,231,235,.95);
  font: 1000 12px/1 system-ui,-apple-system,"Noto Sans Thai",Segoe UI,Roboto,sans-serif;
  box-shadow: 0 16px 40px rgba(0,0,0,.32);
  backdrop-filter: blur(10px);
  cursor:pointer;
  user-select:none;
}

.btn:active{ transform:translateY(1px); }

.btn.primary{
  background:rgba(34,197,94,.14);
  border-color:rgba(34,197,94,.30);
}

.btn.warn{
  background:rgba(245,158,11,.14);
  border-color:rgba(245,158,11,.30);
}

/* -------------------------------------------------------
   Bars
------------------------------------------------------- */

.bar{
  height:10px;
  border-radius:999px;
  background:rgba(148,163,184,.10);
  border:1px solid rgba(148,163,184,.14);
  overflow:hidden;
}
.bar > i{
  display:block;
  height:100%;
  width:0%;
  border-radius:999px;
}

/* -------------------------------------------------------
   FX layers (Boss / Storm)
------------------------------------------------------- */

#bossFx{
  background:
    radial-gradient(circle at 25% 20%, rgba(167,139,250,.10), transparent 48%),
    radial-gradient(circle at 75% 80%, rgba(167,139,250,.08), transparent 52%),
    linear-gradient(180deg, rgba(2,6,23,0), rgba(2,6,23,.20));
  opacity:0;
  transition: opacity .18s ease;
}
#bossFx.boss-on{ opacity:1; }
#bossFx.boss-panic{
  animation: bossPanic .18s ease-in-out 0s infinite alternate;
}
@keyframes bossPanic{
  from{ filter: brightness(1.0); }
  to{ filter: brightness(1.25); }
}

#stormFx{
  background:
    radial-gradient(circle at 20% 30%, rgba(34,211,238,.10), transparent 50%),
    radial-gradient(circle at 80% 70%, rgba(34,211,238,.08), transparent 52%),
    linear-gradient(180deg, rgba(2,6,23,0), rgba(2,6,23,.18));
  opacity:0;
  transition: opacity .18s ease;
}
#stormFx.storm-panic{
  animation: stormPanic .16s ease-in-out 0s infinite alternate;
}
@keyframes stormPanic{
  from{ filter: brightness(1.0); }
  to{ filter: brightness(1.22); }
}

/* -------------------------------------------------------
   Overlays
------------------------------------------------------- */

#startOverlay,
#hudPaused,
#resultBackdrop{
  isolation:isolate;
}

/* Prevent selection inside overlays */
#startOverlay * ,
#hudPaused * ,
#resultBackdrop *{
  user-select:none;
}

/* -------------------------------------------------------
   View tweaks
------------------------------------------------------- */

/* cVR strict: targets should NOT steal pointer events (shoot from crosshair)
   We keep "plate-layer" pointer events ON for mobile/tap; for cVR we prefer shooting.
   If you want strict: disable pointer events on targets only.
*/
body.view-cvr .plateTarget{
  pointer-events:none;
}

/* VR view: slightly larger targets for comfort */
body.view-vr .plateTarget{
  font-size:30px;
}

/* PC view: keep crisp */
body.view-pc .plateTarget{
  font-size:28px;
}

/* -------------------------------------------------------
   Responsive
------------------------------------------------------- */

@media (max-width: 920px){
  :root{ --t-size:56px; }
  .plateTarget{ font-size:28px; }
}

@media (max-width: 420px){
  :root{ --t-size:54px; }
}

/* -------------------------------------------------------
   Accessibility
------------------------------------------------------- */

@media (prefers-reduced-motion: reduce){
  .plateTarget,
  #bossFx.boss-panic,
  #stormFx.storm-panic{
    animation:none !important;
  }
}