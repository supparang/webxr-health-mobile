/* === /herohealth/plate/plate-vr.css ===
Balanced Plate VR — PRODUCTION CSS (HHA Standard)
✅ Target look (good/junk/shield)
✅ Safe-area + responsive
✅ view modes: pc / mobile / vr / cvr
✅ Boss/Storm FX classes (boss-on/boss-panic, storm-panic)
✅ Overlays (start/pause/result) cosmetics
*/

:root{
  color-scheme: dark;

  --bg:#020617;
  --panel:rgba(2,6,23,.78);
  --panel2:rgba(15,23,42,.70);

  --stroke:rgba(148,163,184,.18);
  --stroke2:rgba(148,163,184,.22);

  --text:#e5e7eb;
  --muted:#94a3b8;

  --accent:#22c55e;   /* good */
  --warn:#f59e0b;     /* mini / warn */
  --bad:#ef4444;      /* junk */
  --cyan:#22d3ee;     /* storm */
  --violet:#a78bfa;   /* boss */

  --radius:18px;
  --radius-lg:22px;
  --pill:999px;

  --sat: env(safe-area-inset-top, 0px);
  --sar: env(safe-area-inset-right, 0px);
  --sab: env(safe-area-inset-bottom, 0px);
  --sal: env(safe-area-inset-left, 0px);

  /* Target */
  --t-font: 28px;
  --t-shadow: 0 18px 44px rgba(0,0,0,.28);
  --t-bg: rgba(2,6,23,.55);

  /* Focus ring */
  --ring: rgba(34,197,94,.55);
  --ringBad: rgba(239,68,68,.55);

  /* Motion safety */
  --fx-strength: 1;
}

/* ---------- Global ---------- */
*,
*::before,
*::after{ box-sizing:border-box; }

html, body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  overflow:hidden;
  background:var(--bg);
  color:var(--text);
  font-family: system-ui, -apple-system, "Noto Sans Thai", Segoe UI, Roboto, sans-serif;
}

button{ font-family: inherit; }

/* Prefer reduced motion */
@media (prefers-reduced-motion: reduce){
  :root{ --fx-strength: .4; }
  *{ animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; scroll-behavior:auto !important; }
}

/* ---------- View modes flags (set by JS) ---------- */
body.view-pc #uiCvrHint{ display:none !important; }
body.view-mobile #uiCvrHint{ display:none !important; }
body.view-vr #uiCvrHint{ display:none !important; }
body.view-cvr #uiCvrHint{ display:block !important; }

body.view-vr #plate-layer,
body.view-cvr #plate-layer{
  /* prevent accidental scrolling/selection */
  touch-action:none;
  user-select:none;
}

/* Cardboard strict: prefer shooting by crosshair => do not intercept pointer on targets */
body.view-cvr .plateTarget{
  pointer-events:none !important;
}
body.view-cvr #plate-layer{
  pointer-events:none !important; /* crosshair shoot only */
}

/* VR mode: allow tap still (some headsets emulate click) */
body.view-vr .plateTarget{
  pointer-events:auto;
}

/* ---------- Target base ---------- */
.plateTarget{
  -webkit-tap-highlight-color: transparent;
  cursor:pointer;

  /* fallback; JS also injects styles inline */
  border-radius:999px;
  border:1px solid var(--stroke);
  background:var(--t-bg);
  backdrop-filter: blur(8px);
  box-shadow: var(--t-shadow);
  font: 900 var(--t-font)/1 system-ui, -apple-system, "Noto Sans Thai", Segoe UI, Roboto, sans-serif;

  display:grid;
  place-items:center;

  transform: translateZ(0);
  will-change: transform, filter, opacity;

  transition: transform .10s ease, filter .10s ease, opacity .10s ease;
}

.plateTarget:active{
  transform: translateZ(0) scale(0.98);
}

.plateTarget:focus-visible{
  outline: none;
  box-shadow:
    0 0 0 2px rgba(34,197,94,.28),
    var(--t-shadow);
}

/* Kinds */
.plateTarget[data-kind="good"]{
  border-color: rgba(34,197,94,.26);
}
.plateTarget[data-kind="junk"]{
  border-color: rgba(239,68,68,.26);
  filter: saturate(1.02);
}
.plateTarget[data-kind="shield"]{
  border-color: rgba(34,211,238,.26);
}

/* subtle glow when fever high (JS doesn't set class; we rely on body fx sometimes) */
body.pfx-blink .plateTarget{
  filter: brightness(1.06);
}

/* ---------- Hit feedback (optional micro) ---------- */
@keyframes platePop{
  0%{ transform: translateZ(0) scale(1); }
  50%{ transform: translateZ(0) scale(1.05); }
  100%{ transform: translateZ(0) scale(1); }
}
.plateTarget.pop{
  animation: platePop calc(.14s * var(--fx-strength)) ease-in-out 1;
}

/* ---------- Boss / Storm FX layers (JS toggles ids/classes) ---------- */
#bossFx, #stormFx{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:55;
  display:none;
}

/* Boss base aura */
#bossFx.boss-on{
  display:block;
  background:
    radial-gradient(circle at 20% 20%, rgba(167,139,250,.12), transparent 40%),
    radial-gradient(circle at 80% 30%, rgba(167,139,250,.10), transparent 45%),
    radial-gradient(circle at 50% 90%, rgba(167,139,250,.08), transparent 55%);
  animation: bossBreath calc(2.2s / var(--fx-strength)) ease-in-out infinite;
}
@keyframes bossBreath{
  0%,100%{ filter: brightness(1); transform: translateZ(0) scale(1); }
  50%{ filter: brightness(1.08); transform: translateZ(0) scale(1.01); }
}

/* Boss panic when time low */
#bossFx.boss-panic{
  animation: bossPanic calc(.5s / var(--fx-strength)) ease-in-out infinite;
  background:
    radial-gradient(circle at 30% 25%, rgba(239,68,68,.14), transparent 42%),
    radial-gradient(circle at 80% 20%, rgba(167,139,250,.12), transparent 44%),
    radial-gradient(circle at 50% 90%, rgba(239,68,68,.10), transparent 58%);
}
@keyframes bossPanic{
  0%,100%{ filter: brightness(1.05); }
  50%{ filter: brightness(1.18); }
}

/* Storm base */
#stormFx{
  display:block;
  background:
    radial-gradient(circle at 18% 16%, rgba(34,211,238,.10), transparent 42%),
    radial-gradient(circle at 84% 22%, rgba(34,211,238,.08), transparent 46%),
    radial-gradient(circle at 50% 92%, rgba(34,211,238,.08), transparent 58%);
  opacity: .85;
  animation: stormDrift calc(2.6s / var(--fx-strength)) ease-in-out infinite;
}
@keyframes stormDrift{
  0%,100%{ transform: translate3d(0,0,0); filter: brightness(1); }
  50%{ transform: translate3d(0,-6px,0); filter: brightness(1.08); }
}

/* Storm panic near end */
#stormFx.storm-panic{
  background:
    radial-gradient(circle at 28% 20%, rgba(245,158,11,.10), transparent 44%),
    radial-gradient(circle at 82% 24%, rgba(34,211,238,.12), transparent 46%),
    radial-gradient(circle at 50% 92%, rgba(245,158,11,.08), transparent 58%);
  animation: stormPanic calc(.55s / var(--fx-strength)) ease-in-out infinite;
}
@keyframes stormPanic{
  0%,100%{ filter: brightness(1.08); }
  50%{ filter: brightness(1.22); }
}

/* ---------- Overlays cosmetics (the HTML already defines layout; this is only polish) ---------- */
#startOverlay .panelCard,
#hudPaused .panelCard,
#resultBackdrop .panelCard{
  border-radius: 22px;
}

#startOverlay .btn.primary,
#hudPaused .btn.primary,
#resultBackdrop .btn.primary{
  box-shadow: 0 18px 50px rgba(0,0,0,.36);
}

/* ---------- Small screen tuning ---------- */
@media (max-width: 920px){
  :root{ --t-font: 26px; }
  .plateTarget{ box-shadow: 0 14px 36px rgba(0,0,0,.26); }
}

@media (max-width: 520px){
  :root{ --t-font: 25px; }
}

/* ---------- Very small viewport safety (targets stay tappable) ---------- */
@media (max-width: 360px){
  :root{ --t-font: 24px; }
}