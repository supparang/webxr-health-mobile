/* === /herohealth/plate/plate-vr.css ===
Balanced Plate VR — PRODUCTION+ (HHA Standard)
✅ Safe-area + mobile HUD
✅ Target styling (good/junk/shield) + gentle motion
✅ view=cvr strict: no pointer on layer, shoot from crosshair (vr-ui.js)
✅ FX classes hooks for plate.safe.js (#bossFx/#stormFx + body FX)
*/

:root{
  color-scheme: dark;
  --bg:#020617;
  --panel:rgba(2,6,23,.78);
  --panel2:rgba(15,23,42,.70);
  --stroke:rgba(148,163,184,.18);
  --text:#e5e7eb;
  --muted:#94a3b8;

  --accent:#22c55e;
  --warn:#f59e0b;
  --bad:#ef4444;
  --cyan:#22d3ee;
  --violet:#a78bfa;

  --radius:18px;
  --pill:999px;

  /* safe-area */
  --sat: env(safe-area-inset-top, 0px);
  --sar: env(safe-area-inset-right, 0px);
  --sab: env(safe-area-inset-bottom, 0px);
  --sal: env(safe-area-inset-left, 0px);
}

/* ---------- helpers ---------- */
*,
*::before,
*::after{ box-sizing:border-box; }

html, body{
  margin:0; padding:0;
  width:100%; height:100%;
  overflow:hidden;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,-apple-system,"Noto Sans Thai",Segoe UI,Roboto,sans-serif;
}

a{ color:inherit; }

/* ---------- targets ---------- */
.plateTarget{
  appearance:none;
  border:none;
  cursor:pointer;
  -webkit-tap-highlight-color:transparent;
  user-select:none;

  /* base look (JS also sets inline, but keep fallback) */
  display:grid;
  place-items:center;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.18);
  background:rgba(2,6,23,.55);
  box-shadow: 0 18px 44px rgba(0,0,0,.28);
  backdrop-filter: blur(8px);
  transform: translateZ(0);

  /* gentle motion */
  animation: plateFloat 2.6s ease-in-out infinite;
}

@keyframes plateFloat{
  0%,100%{ transform: translateZ(0) translateY(0); }
  50%{ transform: translateZ(0) translateY(-2px); }
}

/* feedback */
.plateTarget:active{
  transform: translateZ(0) scale(0.98);
}

/* kind tint */
.plateTarget[data-kind="good"]{
  border-color: rgba(34,197,94,.28);
  box-shadow:
    0 18px 44px rgba(0,0,0,.28),
    0 0 0 1px rgba(34,197,94,.10) inset;
}

.plateTarget[data-kind="junk"]{
  border-color: rgba(239,68,68,.28);
  box-shadow:
    0 18px 44px rgba(0,0,0,.28),
    0 0 0 1px rgba(239,68,68,.10) inset;
}

.plateTarget[data-kind="shield"]{
  border-color: rgba(34,211,238,.28);
  box-shadow:
    0 18px 44px rgba(0,0,0,.28),
    0 0 0 1px rgba(34,211,238,.10) inset;
}

/* reduce motion in VR/cVR */
body.view-vr .plateTarget,
body.view-cvr .plateTarget{
  animation: none;
}

/* ---------- overlays / panels (light reinforcements) ---------- */
#startOverlay, #hudPaused, #resultBackdrop{
  backdrop-filter: blur(10px);
}

.panelCard{
  border-radius: 22px;
}

/* ---------- boss/storm FX layers ---------- */
#bossFx, #stormFx{
  pointer-events:none;
}

/* Boss FX classes toggled by JS */
#bossFx.boss-on{
  display:block;
  background:
    radial-gradient(circle at 20% 40%, rgba(167,139,250,.12), transparent 55%),
    radial-gradient(circle at 80% 60%, rgba(167,139,250,.10), transparent 60%);
}
#bossFx.boss-panic{
  filter:brightness(1.22);
  animation: bossPulse .28s ease-in-out infinite alternate;
}
@keyframes bossPulse{
  from{ opacity:.75; }
  to{ opacity:1; }
}

/* Storm FX classes toggled by JS */
#stormFx{
  display:none;
}
#stormFx.storm-on{
  display:block;
  background:
    radial-gradient(circle at 30% 20%, rgba(34,211,238,.12), transparent 55%),
    radial-gradient(circle at 70% 80%, rgba(34,211,238,.10), transparent 60%);
}
#stormFx.storm-panic{
  filter:brightness(1.22);
  animation: stormPulse .22s ease-in-out infinite alternate;
}
@keyframes stormPulse{
  from{ opacity:.70; }
  to{ opacity:1; }
}

/* ---------- view=cvr strict ---------- */
body.view-cvr #plate-layer{
  pointer-events:none !important;
}

/* In cVR: hint stronger */
body.view-cvr #uiCvrHint{
  color: rgba(229,231,235,.95) !important;
}

/* ---------- responsive ---------- */
@media (max-width: 520px){
  .card{ min-width: 160px; }
  .bar{ width: 132px; }
}

@media (max-height: 680px){
  #coachPanel{ bottom: calc(58px + var(--sab)); }
}

/* Accessibility: reduce flashing */
@media (prefers-reduced-motion: reduce){
  .plateTarget{ animation:none !important; }
  #bossFx.boss-panic, #stormFx.storm-panic{ animation:none !important; }
}