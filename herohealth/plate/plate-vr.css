/* === /herohealth/plate/plate-vr.css ===
Balanced Plate VR — PRODUCTION CSS (PATH-FIX)
✅ HUD + Quest + Coach + Overlays
✅ Safe-area friendly + mobile
✅ Layering: scene(z1) < plate-layer(z5) < hitFx(z6) < hud/overlay(z20+)
*/

:root{
  color-scheme: dark;
  --bg:#020617;
  --panel:rgba(2,6,23,.74);
  --panel2:rgba(15,23,42,.66);
  --stroke:rgba(148,163,184,.18);
  --text:#e5e7eb;
  --muted:#94a3b8;

  --good:#22c55e;
  --warn:#f59e0b;
  --bad:#ef4444;
  --cyan:#22d3ee;
  --gold:#facc15;

  --radius:18px;
  --radius2:22px;
  --pill:999px;

  --sat: env(safe-area-inset-top, 0px);
  --sab: env(safe-area-inset-bottom, 0px);
  --sal: env(safe-area-inset-left, 0px);
  --sar: env(safe-area-inset-right, 0px);
}

*{box-sizing:border-box}
html,body{width:100%;height:100%;margin:0;overflow:hidden;background:var(--bg);color:var(--text);}
body{
  font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans Thai",sans-serif;
}

/* ===== Play layer ===== */
#plate-layer{
  position:fixed;
  inset:0;
  z-index:5;
  pointer-events:auto;
  touch-action:manipulation;
  transform:translate(0,0);
  will-change:transform;
}

.plateTarget{
  -webkit-tap-highlight-color:transparent;
  cursor:pointer;
}
.plateTarget:active{ transform:scale(.98) translateZ(0); }

/* Optional “nice” vibe even though JS sets inline style */
.plateTarget{
  animation:plateBob 1.6s ease-in-out infinite;
}
@keyframes plateBob{
  0%{ transform:translateY(0) translateZ(0); }
  50%{ transform:translateY(-2px) translateZ(0); }
  100%{ transform:translateY(0) translateZ(0); }
}

/* ===== Hit FX overlay ===== */
#hitFx{
  position:fixed;
  inset:0;
  z-index:6;
  pointer-events:none;
  opacity:0;
  transition:opacity .12s ease;
}

/* ===== HUD Top ===== */
#hudTop{
  position:fixed;
  top:calc(10px + var(--sat));
  left:calc(10px + var(--sal));
  right:calc(10px + var(--sar));
  z-index:20;

  border:1px solid var(--stroke);
  background:linear-gradient(180deg, rgba(15,23,42,.62), rgba(2,6,23,.62));
  border-radius:var(--radius2);
  padding:10px 10px 10px;
  box-shadow:0 20px 60px rgba(0,0,0,.35);
  backdrop-filter: blur(10px);
}

.hudRow{
  display:flex;
  gap:8px;
  align-items:stretch;
  justify-content:space-between;
  flex-wrap:wrap;
}
.hudStat{
  flex:1 1 110px;
  min-width:96px;
  background:rgba(2,6,23,.52);
  border:1px solid rgba(148,163,184,.14);
  border-radius:16px;
  padding:8px 10px;
}
.hudStat .k{
  color:var(--muted);
  font-weight:900;
  font-size:11px;
  letter-spacing:.2px;
}
.hudStat .v{
  font-weight:1100;
  font-size:16px;
  margin-top:2px;
}

.muted{color:rgba(148,163,184,.95); font-weight:900;}

.plateChip{ border-color:rgba(34,197,94,.22); background:rgba(34,197,94,.08); }
.gradeChip{ border-color:rgba(250,204,21,.22); background:rgba(250,204,21,.07); }
.timeChip{ border-color:rgba(34,211,238,.20); background:rgba(34,211,238,.06); }

.hudRow2{
  margin-top:8px;
  display:flex;
  gap:10px;
  align-items:center;
  justify-content:space-between;
  flex-wrap:wrap;
}

.feverWrap{
  display:flex;
  gap:10px;
  align-items:center;
  background:rgba(2,6,23,.52);
  border:1px solid rgba(148,163,184,.14);
  border-radius:16px;
  padding:8px 10px;
  flex:1 1 260px;
  min-width:240px;
}
.feverLabel{
  font-weight:1100;
  font-size:11px;
  color:rgba(148,163,184,.95);
  letter-spacing:.2px;
}
.feverBar{
  height:10px;
  flex:1;
  border-radius:999px;
  background:rgba(148,163,184,.14);
  overflow:hidden;
  border:1px solid rgba(148,163,184,.12);
}
.feverFill{
  height:100%;
  width:0%;
  border-radius:999px;
  background:linear-gradient(90deg, rgba(34,197,94,.95), rgba(250,204,21,.95), rgba(239,68,68,.95));
  transition:width .12s linear;
}

.shieldPill{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:6px 10px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.16);
  background:rgba(15,23,42,.52);
  font-weight:1100;
  white-space:nowrap;
}

.plateCounts{
  display:flex;
  gap:8px;
  align-items:center;
  flex-wrap:wrap;
  justify-content:flex-end;
}
.pill{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:6px 10px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.16);
  background:rgba(2,6,23,.52);
  font-weight:1100;
  white-space:nowrap;
}

/* ===== Coach ===== */
#coachPanel{
  position:fixed;
  left:calc(10px + var(--sal));
  bottom:calc(96px + var(--sab));
  z-index:20;

  display:flex;
  gap:10px;
  align-items:center;

  background:rgba(2,6,23,.70);
  border:1px solid rgba(148,163,184,.16);
  border-radius:22px;
  padding:10px 12px;
  box-shadow:0 18px 50px rgba(0,0,0,.32);
  backdrop-filter: blur(10px);
  max-width:min(420px, calc(100vw - 20px));
}
#coachImg{
  width:52px; height:52px;
  object-fit:contain;
  border-radius:16px;
  border:1px solid rgba(148,163,184,.14);
  background:rgba(15,23,42,.52);
  padding:6px;
}
.coachName{font-weight:1100; font-size:12px;}
.coachMsg{font-weight:1000; color:rgba(229,231,235,.92); font-size:12px; margin-top:2px; line-height:1.25;}
.coachText{min-width:0}

/* ===== Quest Panel ===== */
#miniPanel{
  position:fixed;
  top:calc(108px + var(--sat));
  left:calc(10px + var(--sal));
  right:calc(10px + var(--sar));
  z-index:20;

  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:10px;
}
@media (max-width:820px){
  #miniPanel{ grid-template-columns:1fr; }
}
.questBlock{
  border:1px solid rgba(148,163,184,.16);
  background:rgba(2,6,23,.60);
  border-radius:18px;
  padding:10px 12px;
  box-shadow:0 18px 50px rgba(0,0,0,.28);
  backdrop-filter: blur(10px);
}
.questHdr{
  display:flex;
  gap:10px;
  align-items:center;
  justify-content:space-between;
}
.badge{
  display:inline-flex;
  align-items:center;
  padding:6px 10px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.18);
  background:rgba(15,23,42,.52);
  font-weight:1100;
  font-size:11px;
  white-space:nowrap;
}
.badgeGoal{ border-color:rgba(34,197,94,.28); background:rgba(34,197,94,.10); }
.badgeMini{ border-color:rgba(250,204,21,.28); background:rgba(250,204,21,.10); }

.qTitle{
  flex:1;
  min-width:0;
  font-weight:1100;
  font-size:12px;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}
.qCount{
  font-weight:1100;
  font-size:12px;
  color:rgba(148,163,184,.95);
  white-space:nowrap;
}

.bar{
  margin-top:8px;
  height:10px;
  border-radius:999px;
  background:rgba(148,163,184,.14);
  overflow:hidden;
  border:1px solid rgba(148,163,184,.12);
}
.barFill{
  height:100%;
  width:0%;
  border-radius:999px;
  background:linear-gradient(90deg, rgba(34,197,94,.95), rgba(34,211,238,.95));
  transition:width .12s linear;
}
.barFill.mini{
  background:linear-gradient(90deg, rgba(250,204,21,.95), rgba(239,68,68,.95));
}
.hint{
  margin-top:6px;
  color:rgba(148,163,184,.95);
  font-weight:900;
  font-size:11px;
  line-height:1.3;
}

/* ===== Bottom buttons ===== */
#hudBtns{
  position:fixed;
  left:calc(10px + var(--sal));
  right:calc(10px + var(--sar));
  bottom:calc(10px + var(--sab));
  z-index:20;

  display:flex;
  gap:10px;
  justify-content:center;
  align-items:center;
  flex-wrap:wrap;
}

.btn{
  background:rgba(2,6,23,.70);
  border:1px solid rgba(148,163,184,.20);
  color:var(--text);
  border-radius:16px;
  padding:10px 12px;
  font-weight:1100;
  user-select:none;
  -webkit-tap-highlight-color:transparent;
  box-shadow:0 16px 40px rgba(0,0,0,.32);
  backdrop-filter: blur(10px);
  cursor:pointer;
}
.btn:active{ transform:translateY(1px); }
.btn.ghost{ background:rgba(15,23,42,.60); }
.btn.big{ padding:12px 14px; font-size:14px; border-radius:18px; }

/* ===== Overlays ===== */
#hudPaused,
#startOverlay,
#resultBackdrop{
  position:fixed;
  inset:0;
  z-index:40;
  display:none;
  place-items:center;
  background:rgba(0,0,0,.52);
  backdrop-filter: blur(10px);
}
#hudPaused{ z-index:45; }
#startOverlay{ z-index:50; display:grid; } /* visible by default; JS may hide */

.pausedCard, .startCard, .resultCard{
  width:min(720px, calc(100vw - 20px));
  border:1px solid rgba(148,163,184,.18);
  background:rgba(2,6,23,.76);
  border-radius:22px;
  padding:14px 14px;
  box-shadow:0 28px 90px rgba(0,0,0,.45);
}
.pausedTitle{ font-weight:1100; font-size:18px; }
.pausedText{ margin-top:6px; color:rgba(148,163,184,.95); font-weight:900; }

.startTitle{ font-weight:1100; font-size:18px; }
.startSub{ margin-top:6px; color:rgba(229,231,235,.92); font-weight:900; line-height:1.3; }
.startMeta{ margin-top:10px; display:flex; gap:10px; flex-wrap:wrap; }
.metaPill{
  padding:8px 10px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.16);
  background:rgba(15,23,42,.52);
  font-weight:1100;
}
.startBtns{ margin-top:12px; display:flex; gap:10px; flex-wrap:wrap; }
.startFoot{ margin-top:10px; color:rgba(148,163,184,.95); font-weight:900; font-size:12px; }

.resultTitle{ font-weight:1100; font-size:18px; }
.resultGrid{
  margin-top:10px;
  display:grid;
  grid-template-columns: repeat(2, minmax(0,1fr));
  gap:10px;
}
@media (max-width:720px){
  .resultGrid{ grid-template-columns:1fr; }
}
.resultItem{
  border:1px solid rgba(148,163,184,.14);
  background:rgba(15,23,42,.52);
  border-radius:16px;
  padding:10px 12px;
}
.resultItem .k{ color:rgba(148,163,184,.95); font-weight:900; font-size:11px; }
.resultItem .v{ font-weight:1100; font-size:16px; margin-top:2px; }

.resultPlate{
  margin-top:10px;
  border:1px solid rgba(148,163,184,.14);
  background:rgba(15,23,42,.52);
  border-radius:16px;
  padding:10px 12px;
}
.plateRow{ display:flex; gap:8px; flex-wrap:wrap; }
.totalRow{ margin-top:8px; color:rgba(148,163,184,.95); font-weight:1000; }

.resultBtns{
  margin-top:12px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  justify-content:flex-end;
}