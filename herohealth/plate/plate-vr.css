/* === /herohealth/plate/plate-vr.css ===
Balanced Plate VR â€” PRODUCTION CSS (ROOT PATH + Safe Spawn + HUD/Overlays/Targets)
Works with:
- /herohealth/plate-vr.html
- /herohealth/plate/plate.safe.js
- /herohealth/plate/plate-hud.js
*/

:root{
  color-scheme: dark;

  --bg:#020617;
  --panel:rgba(2,6,23,.78);
  --panel2:rgba(15,23,42,.72);
  --stroke:rgba(148,163,184,.18);

  --text:#e5e7eb;
  --muted:#94a3b8;

  --good:#22c55e;
  --warn:#f59e0b;
  --bad:#ef4444;
  --cyan:#22d3ee;
  --violet:#a78bfa;
  --gold:#facc15;

  --radius-lg:18px;
  --radius-pill:999px;

  --sat: env(safe-area-inset-top, 0px);
  --sab: env(safe-area-inset-bottom, 0px);
  --sal: env(safe-area-inset-left, 0px);
  --sar: env(safe-area-inset-right, 0px);

  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans Thai",sans-serif;
}

*{ box-sizing:border-box; }
html,body{
  width:100%;
  height:100%;
  margin:0;
  padding:0;
  overflow:hidden;
  background:var(--bg);
  color:var(--text);
  -webkit-tap-highlight-color:transparent;
}

button, input, select{
  font-family:inherit;
}

.muted{ color:rgba(148,163,184,.95); font-weight:900; }

/* ========= Base layers ========= */
a-scene{ z-index:1 !important; }

#plate-layer{
  position:fixed;
  inset:0;
  z-index:5;
  pointer-events:none;     /* targets re-enable */
  transform: translate(0,0);
  will-change: transform;
}

#hitFx{
  position:fixed;
  inset:0;
  z-index:12;
  pointer-events:none;
  opacity:0;
  transition: opacity .12s ease;
}

/* plate.safe.js toggles these */
#hitFx.pfx-hit-good,
#hitFx.pfx-hit-bad{ opacity:1; }

/* ========= Top HUD ========= */
#hudTop{
  position:fixed;
  left:calc(10px + var(--sal));
  right:calc(10px + var(--sar));
  top:calc(10px + var(--sat));
  z-index:20;
  background:linear-gradient(180deg, rgba(15,23,42,.70), rgba(2,6,23,.62));
  border:1px solid var(--stroke);
  border-radius:22px;
  padding:10px 10px 10px;
  box-shadow:0 22px 70px rgba(0,0,0,.42);
  backdrop-filter: blur(10px);
}

#hudTop .hudRow{
  display:grid;
  grid-template-columns: repeat(6, minmax(0,1fr));
  gap:8px;
}

#hudTop .hudStat{
  background:rgba(2,6,23,.55);
  border:1px solid rgba(148,163,184,.14);
  border-radius:16px;
  padding:8px 10px;
  min-width:0;
}

#hudTop .hudStat .k{
  font-size:10px;
  font-weight:1100;
  letter-spacing:.2px;
  color:rgba(148,163,184,.95);
}
#hudTop .hudStat .v{
  margin-top:2px;
  font-size:14px;
  font-weight:1200;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

#hudTop .plateChip{ border-color:rgba(34,197,94,.22); background:rgba(34,197,94,.08); }
#hudTop .gradeChip{ border-color:rgba(250,204,21,.22); background:rgba(250,204,21,.08); }
#hudTop .timeChip{  border-color:rgba(34,211,238,.20); background:rgba(34,211,238,.07); }

#hudTop .hudRow2{
  margin-top:8px;
  display:flex;
  gap:10px;
  align-items:center;
  justify-content:space-between;
  flex-wrap:wrap;
}

.feverWrap{
  display:flex;
  gap:8px;
  align-items:center;
  flex:1 1 320px;
  min-width:260px;
}
.feverLabel{
  font-weight:1100;
  font-size:11px;
  color:rgba(148,163,184,.95);
  letter-spacing:.2px;
}
.feverBar{
  position:relative;
  flex:1;
  height:12px;
  border-radius:999px;
  background:rgba(15,23,42,.70);
  border:1px solid rgba(148,163,184,.16);
  overflow:hidden;
}
.feverFill{
  height:100%;
  width:0%;
  border-radius:999px;
  background:linear-gradient(90deg, rgba(34,197,94,.95), rgba(250,204,21,.95), rgba(239,68,68,.95));
  transition: width .12s ease;
}

.shieldPill{
  display:inline-flex;
  gap:8px;
  align-items:center;
  padding:7px 10px;
  border-radius:999px;
  background:rgba(34,211,238,.10);
  border:1px solid rgba(34,211,238,.22);
  font-weight:1200;
  white-space:nowrap;
  user-select:none;
}

.plateCounts{
  display:flex;
  gap:8px;
  align-items:center;
  flex-wrap:wrap;
  justify-content:flex-end;
}
.plateCounts .pill{
  display:inline-flex;
  gap:8px;
  align-items:center;
  padding:7px 10px;
  border-radius:999px;
  background:rgba(15,23,42,.55);
  border:1px solid rgba(148,163,184,.14);
  font-weight:1100;
  white-space:nowrap;
}

/* ========= Coach panel ========= */
#coachPanel{
  position:fixed;
  left:calc(10px + var(--sal));
  bottom:calc(78px + var(--sab));
  z-index:19;
  display:flex;
  gap:10px;
  align-items:center;
  background:rgba(2,6,23,.70);
  border:1px solid rgba(148,163,184,.16);
  border-radius:22px;
  padding:10px 12px;
  box-shadow:0 22px 70px rgba(0,0,0,.40);
  backdrop-filter: blur(10px);
  max-width:min(420px, calc(100vw - 20px));
}

#coachImg{
  width:52px;
  height:52px;
  border-radius:16px;
  border:1px solid rgba(148,163,184,.16);
  background:rgba(15,23,42,.60);
  box-shadow:0 16px 40px rgba(0,0,0,.35);
  object-fit:cover;
}

.coachText{ min-width:0; }
.coachName{
  font-weight:1200;
  font-size:12px;
  letter-spacing:.2px;
  color:rgba(148,163,184,.95);
}
.coachMsg{
  margin-top:2px;
  font-weight:1100;
  font-size:13px;
  line-height:1.25;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

/* ========= Quest panel ========= */
#miniPanel{
  position:fixed;
  right:calc(10px + var(--sar));
  bottom:calc(78px + var(--sab));
  z-index:19;
  width:min(460px, calc(100vw - 20px));
  display:flex;
  flex-direction:column;
  gap:10px;
}

.questBlock{
  background:rgba(2,6,23,.70);
  border:1px solid rgba(148,163,184,.16);
  border-radius:22px;
  padding:10px 12px;
  box-shadow:0 22px 70px rgba(0,0,0,.40);
  backdrop-filter: blur(10px);
}

.questHdr{
  display:flex;
  gap:8px;
  align-items:center;
  justify-content:space-between;
  flex-wrap:wrap;
}

.badge{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:6px 10px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.18);
  background:rgba(15,23,42,.52);
  font-weight:1200;
  font-size:11px;
  white-space:nowrap;
}
.badgeGoal{ border-color:rgba(34,197,94,.28); background:rgba(34,197,94,.10); }
.badgeMini{ border-color:rgba(250,204,21,.30); background:rgba(250,204,21,.10); }

.qTitle{
  flex:1;
  min-width:140px;
  font-weight:1200;
  font-size:12px;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.qCount{
  font-weight:1100;
  font-size:12px;
  color:rgba(148,163,184,.95);
  white-space:nowrap;
}

.bar{
  margin-top:8px;
  height:12px;
  border-radius:999px;
  background:rgba(15,23,42,.70);
  border:1px solid rgba(148,163,184,.16);
  overflow:hidden;
}
.barFill{
  height:100%;
  width:0%;
  border-radius:999px;
  background:linear-gradient(90deg, rgba(34,197,94,.95), rgba(34,211,238,.95));
  transition: width .12s ease;
}
.barFill.mini{
  background:linear-gradient(90deg, rgba(250,204,21,.95), rgba(248,113,113,.95));
}
.hint{
  margin-top:8px;
  font-weight:1000;
  font-size:12px;
  color:rgba(148,163,184,.95);
  line-height:1.25;
}

/* ========= Bottom buttons ========= */
#hudBtns{
  position:fixed;
  left:calc(10px + var(--sal));
  right:calc(10px + var(--sar));
  bottom:calc(10px + var(--sab));
  z-index:20;
  display:flex;
  gap:10px;
  justify-content:flex-end;
  flex-wrap:wrap;
}

.btn{
  appearance:none;
  border:none;
  background:rgba(2,6,23,.70);
  color:var(--text);
  border:1px solid rgba(148,163,184,.20);
  border-radius:16px;
  padding:10px 12px;
  font-weight:1200;
  cursor:pointer;
  user-select:none;
  box-shadow:0 16px 40px rgba(0,0,0,.34);
  backdrop-filter: blur(10px);
}
.btn:active{ transform: translateY(1px); }
.btn.ghost{
  background:rgba(15,23,42,.50);
}
.btn.big{
  padding:12px 14px;
  border-radius:18px;
  font-size:14px;
}

/* ========= Paused overlay ========= */
#hudPaused{
  position:fixed;
  inset:0;
  z-index:50;
  display:none;
  place-items:center;
  background:rgba(2,6,23,.55);
  backdrop-filter: blur(8px);
}

.pausedCard{
  width:min(520px, calc(100vw - 24px));
  background:rgba(2,6,23,.78);
  border:1px solid rgba(148,163,184,.18);
  border-radius:22px;
  padding:16px;
  box-shadow:0 22px 70px rgba(0,0,0,.48);
  text-align:center;
}
.pausedTitle{
  font-weight:1300;
  font-size:18px;
}
.pausedText{
  margin-top:8px;
  font-weight:1100;
  color:rgba(148,163,184,.95);
}

/* ========= Start overlay ========= */
#startOverlay{
  position:fixed;
  inset:0;
  z-index:60;
  display:none; /* plate.safe.js shows it */
  place-items:center;
  background:radial-gradient(circle at 50% 30%, rgba(34,211,238,.10), transparent 55%),
             radial-gradient(circle at 50% 80%, rgba(34,197,94,.10), transparent 55%),
             rgba(2,6,23,.70);
  backdrop-filter: blur(10px);
}

.startCard{
  width:min(640px, calc(100vw - 24px));
  background:rgba(2,6,23,.82);
  border:1px solid rgba(148,163,184,.18);
  border-radius:24px;
  padding:16px 16px 14px;
  box-shadow:0 22px 80px rgba(0,0,0,.55);
}

.startTitle{
  font-weight:1400;
  font-size:20px;
}
.startSub{
  margin-top:6px;
  font-weight:1100;
  line-height:1.3;
  color:rgba(229,231,235,.95);
}
.startMeta{
  margin-top:12px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}
.metaPill{
  display:inline-flex;
  gap:8px;
  align-items:center;
  padding:8px 12px;
  border-radius:999px;
  background:rgba(15,23,42,.55);
  border:1px solid rgba(148,163,184,.16);
  font-weight:1100;
}

.startBtns{
  margin-top:14px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}
.startFoot{
  margin-top:10px;
  font-size:12px;
  color:rgba(148,163,184,.95);
  font-weight:1000;
}

/* ========= Result overlay ========= */
#resultBackdrop{
  position:fixed;
  inset:0;
  z-index:70;
  display:none; /* JS shows grid */
  place-items:center;
  background:rgba(2,6,23,.62);
  backdrop-filter: blur(10px);
}

.resultCard{
  width:min(760px, calc(100vw - 24px));
  background:rgba(2,6,23,.82);
  border:1px solid rgba(148,163,184,.18);
  border-radius:24px;
  padding:16px;
  box-shadow:0 22px 80px rgba(0,0,0,.55);
}

.resultTitle{
  font-weight:1400;
  font-size:18px;
}

.resultGrid{
  margin-top:12px;
  display:grid;
  grid-template-columns: repeat(4, minmax(0,1fr));
  gap:10px;
}
.resultItem{
  background:rgba(15,23,42,.55);
  border:1px solid rgba(148,163,184,.14);
  border-radius:18px;
  padding:10px 12px;
  min-width:0;
}
.resultItem .k{
  font-size:10px;
  font-weight:1100;
  color:rgba(148,163,184,.95);
}
.resultItem .v{
  margin-top:2px;
  font-size:14px;
  font-weight:1300;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.resultPlate{
  margin-top:12px;
  background:rgba(15,23,42,.48);
  border:1px solid rgba(148,163,184,.14);
  border-radius:18px;
  padding:10px 12px;
}
.plateRow{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
}
.resultPlate .pill{
  display:inline-flex;
  gap:8px;
  align-items:center;
  padding:7px 10px;
  border-radius:999px;
  background:rgba(2,6,23,.55);
  border:1px solid rgba(148,163,184,.14);
  font-weight:1100;
}
.totalRow{
  margin-top:8px;
  font-weight:1200;
  color:rgba(229,231,235,.95);
}

.resultBtns{
  margin-top:12px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  justify-content:flex-end;
}

/* ========= Targets ========= */
.plateTarget{
  pointer-events:auto;
  cursor:pointer;

  outline:none;

  /* JS sets fixed pos/size/font already, but keep fallback here */
  position:fixed;
  display:grid;
  place-items:center;

  border-radius:999px;
  border:1px solid rgba(148,163,184,.18);
  background:rgba(2,6,23,.55);
  box-shadow:0 18px 44px rgba(0,0,0,.28);
  backdrop-filter: blur(8px);

  user-select:none;
  -webkit-tap-highlight-color:transparent;

  transform: translateZ(0);
  will-change: transform, filter;

  animation: targetFloat 1.8s ease-in-out infinite;
}
@keyframes targetFloat{
  0%,100%{ transform: translateZ(0) translateY(0px) scale(1); }
  50%{ transform: translateZ(0) translateY(-2px) scale(1.01); }
}
.plateTarget:active{
  transform: translateZ(0) scale(.97);
}

.plateTarget[data-kind="good"]{
  border-color:rgba(34,197,94,.26);
  background:rgba(34,197,94,.07);
}
.plateTarget[data-kind="junk"]{
  border-color:rgba(239,68,68,.28);
  background:rgba(239,68,68,.08);
  box-shadow:
    0 18px 44px rgba(0,0,0,.28),
    0 0 22px rgba(239,68,68,.12);
}
.plateTarget[data-kind="shield"]{
  border-color:rgba(34,211,238,.28);
  background:rgba(34,211,238,.08);
  box-shadow:
    0 18px 44px rgba(0,0,0,.28),
    0 0 22px rgba(34,211,238,.12);
}

/* If you have Decoy in JS: add class or data-decoy */
.plateTarget.decoy,
.plateTarget[data-decoy="1"]{
  border-color:rgba(167,139,250,.28);
  background:rgba(167,139,250,.08);
  filter:saturate(1.08);
}

/* GOLD (true) */
.plateTarget.gold{
  border-color: rgba(250,204,21,.40);
  background: rgba(250,204,21,.10);
  box-shadow:
    0 18px 44px rgba(0,0,0,.28),
    0 0 26px rgba(250,204,21,.18);
  animation: goldGlow .85s ease-in-out infinite;
}
@keyframes goldGlow{
  0%,100%{ transform: translateZ(0) scale(1); filter:brightness(1.0); }
  50%{ transform: translateZ(0) scale(1.06); filter:brightness(1.12); }
}

/* =========================
   GOLD FAKE (ADD)
========================= */
.plateTarget.goldfake{
  border-color: rgba(248,113,113,.36);
  background: rgba(2,6,23,.58);
  box-shadow:
    0 18px 44px rgba(0,0,0,.28),
    0 0 22px rgba(248,113,113,.14),
    0 0 10px rgba(248,113,113,.10);
  filter: saturate(1.1);
  animation: goldFakeFlicker .9s ease-in-out infinite;
}
@keyframes goldFakeFlicker{
  0%,100%{ transform: translateZ(0) scale(1); filter:saturate(1.1); }
  50%{ transform: translateZ(0) scale(1.05); filter:saturate(1.25) brightness(1.08); }
}

/* ========= Responsiveness ========= */
@media (max-width: 920px){
  #hudTop .hudRow{
    grid-template-columns: repeat(3, minmax(0,1fr));
  }
  #miniPanel{ width:min(520px, calc(100vw - 20px)); }
  .resultGrid{ grid-template-columns: repeat(2, minmax(0,1fr)); }
  #coachPanel{ max-width:min(520px, calc(100vw - 20px)); }
}

@media (max-width: 520px){
  #hudTop{
    left:calc(8px + var(--sal));
    right:calc(8px + var(--sar));
    top:calc(8px + var(--sat));
    padding:10px;
  }
  #hudBtns{
    left:calc(8px + var(--sal));
    right:calc(8px + var(--sar));
    bottom:calc(8px + var(--sab));
    justify-content:space-between;
  }
  #coachPanel{
    left:calc(8px + var(--sal));
    bottom:calc(74px + var(--sab));
  }
  #miniPanel{
    right:calc(8px + var(--sar));
    bottom:calc(74px + var(--sab));
  }
  #coachImg{ width:48px; height:48px; }
  .coachMsg{ white-space:normal; }
}

/* ========= Plate safe.js FX body classes ========= */
.pfx-shake { animation:pfxShake .18s ease-in-out 0s 2; }
@keyframes pfxShake { 0%{transform:translate(0,0)} 25%{transform:translate(2px,0)} 50%{transform:translate(-2px,1px)} 75%{transform:translate(1px,-1px)} 100%{transform:translate(0,0)} }

.pfx-blink { animation:pfxBlink .26s ease-in-out 0s 6; }
@keyframes pfxBlink { 0%,100%{filter:none} 50%{filter:brightness(1.35)} }

.pfx-tick { animation:pfxTick .12s linear 0s 1; }
@keyframes pfxTick { 0%{transform:scale(1)} 50%{transform:scale(1.03)} 100%{transform:scale(1)} }