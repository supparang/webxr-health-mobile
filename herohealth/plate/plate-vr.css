/* === /herohealth/plate/plate-vr.css ===
Balanced Plate VR — PRODUCTION CSS (B/cVR)
✅ HUD/Quest/Coach/Buttons
✅ Safe-area
✅ cVR crosshair + disable direct tap on targets
✅ Plate targets style
*/

:root{
  color-scheme: dark;
  --bg:#020617;
  --panel:rgba(2,6,23,.78);
  --panel2:rgba(15,23,42,.72);
  --stroke:rgba(148,163,184,.18);
  --text:#e5e7eb;
  --muted:#94a3b8;
  --accent:#22c55e;
  --warn:#f59e0b;
  --bad:#ef4444;
  --cyan:#22d3ee;
  --violet:#a78bfa;

  --radius-lg:22px;
  --radius-md:18px;
  --radius-pill:999px;

  --sat: env(safe-area-inset-top, 0px);
  --sab: env(safe-area-inset-bottom, 0px);
  --sal: env(safe-area-inset-left, 0px);
  --sar: env(safe-area-inset-right, 0px);
}

*{ box-sizing:border-box; }
html,body{
  margin:0; padding:0;
  width:100%; height:100%;
  overflow:hidden;
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans Thai",sans-serif;
  background:
    radial-gradient(1100px 700px at 15% 10%, rgba(34,211,238,.18), transparent 60%),
    radial-gradient(900px 600px at 85% 95%, rgba(167,139,250,.18), transparent 62%),
    radial-gradient(800px 500px at 45% 60%, rgba(34,197,94,.10), transparent 62%),
    var(--bg);
  color:var(--text);
}

a-scene{ pointer-events:none; }

/* -------- Layers -------- */
#plate-layer{
  position:fixed;
  inset:0;
  z-index:20;
  pointer-events:auto;
  transform:translate(0,0);
  will-change:transform;
}

#hitFx{
  position:fixed; inset:0;
  z-index:70;
  pointer-events:none;
  opacity:0;
  transition:opacity .14s ease;
}

/* cVR crosshair */
#cvrCrosshair{
  position:fixed;
  left:50%;
  top:50%;
  width:22px; height:22px;
  transform:translate(-50%,-50%);
  border:2px solid rgba(255,255,255,.55);
  border-radius:999px;
  box-shadow:0 0 0 6px rgba(0,0,0,.25);
  z-index:999;
  display:none;
  pointer-events:none;
}
body.view-cvr #cvrCrosshair{ display:block; }
body.view-cvr #plate-layer{ pointer-events:none; } /* ยิงจากกลางจอแทน */

/* -------- Target -------- */
.plateTarget{
  appearance:none;
  border:1px solid rgba(148,163,184,.18);
  background:rgba(2,6,23,.55);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border-radius:999px;
  box-shadow:0 18px 44px rgba(0,0,0,.28);
  display:grid;
  place-items:center;
  font: 900 28px/1 system-ui;
  color:var(--text);
  user-select:none;
  -webkit-tap-highlight-color: transparent;
  transform: translateZ(0);
}

.plateTarget[data-kind="good"]{ box-shadow:0 18px 44px rgba(34,197,94,.12), 0 18px 44px rgba(0,0,0,.26); }
.plateTarget[data-kind="junk"]{ box-shadow:0 18px 44px rgba(239,68,68,.12), 0 18px 44px rgba(0,0,0,.26); }
.plateTarget[data-kind="shield"]{ box-shadow:0 18px 44px rgba(34,211,238,.12), 0 18px 44px rgba(0,0,0,.26); }

@keyframes popIn{
  from{ transform:scale(.88); filter:brightness(.9); opacity:.0; }
  to{ transform:scale(1); filter:none; opacity:1; }
}
.plateTarget{ animation:popIn .12s ease-out; }

/* -------- HUD TOP -------- */
#hudTop{
  position:fixed;
  left:calc(12px + var(--sal));
  right:calc(12px + var(--sar));
  top:calc(10px + var(--sat));
  z-index:80;

  border:1px solid rgba(148,163,184,.18);
  background:rgba(2,6,23,.62);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-radius:22px;
  padding:10px 10px 10px;
  box-shadow:0 22px 70px rgba(0,0,0,.42);
}

.hudRow{
  display:grid;
  grid-template-columns: repeat(6, minmax(0,1fr));
  gap:8px;
}
.hudStat{
  border:1px solid rgba(148,163,184,.14);
  border-radius:16px;
  padding:8px 10px;
  background:rgba(15,23,42,.35);
}
.hudStat .k{
  font-weight:900;
  font-size:11px;
  letter-spacing:.06em;
  color:rgba(148,163,184,.95);
}
.hudStat .v{
  margin-top:2px;
  font-weight:1000;
  font-size:18px;
}
.muted{ color:rgba(148,163,184,.95); font-weight:900; }

.hudRow2{
  margin-top:8px;
  display:grid;
  grid-template-columns: 1.15fr 1fr;
  gap:10px;
  align-items:center;
}

.feverWrap{
  display:flex;
  align-items:center;
  gap:10px;
  padding:8px 10px;
  border:1px solid rgba(148,163,184,.14);
  border-radius:16px;
  background:rgba(15,23,42,.35);
}
.feverLabel{ font-weight:1000; letter-spacing:.06em; font-size:12px; color:rgba(148,163,184,.95); }
.feverBar{
  flex:1;
  height:10px;
  border-radius:999px;
  background:rgba(148,163,184,.18);
  overflow:hidden;
}
.feverFill{
  height:100%;
  width:0%;
  border-radius:999px;
  background: linear-gradient(90deg, rgba(34,197,94,.9), rgba(245,158,11,.9), rgba(239,68,68,.9));
}
.shieldPill{
  display:flex;
  align-items:center;
  gap:6px;
  padding:6px 10px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.14);
  background:rgba(2,6,23,.55);
  font-weight:1000;
}

.plateCounts{
  display:flex;
  gap:8px;
  justify-content:flex-end;
  flex-wrap:wrap;
}
.pill{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:6px 10px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.14);
  background:rgba(15,23,42,.35);
  font-weight:1000;
}

/* -------- Coach -------- */
#coachPanel{
  position:fixed;
  left:calc(12px + var(--sal));
  right:calc(12px + var(--sar));
  bottom:calc(92px + var(--sab)); /* เผื่อปุ่ม */
  z-index:80;

  display:flex;
  gap:12px;
  align-items:center;

  border:1px solid rgba(148,163,184,.18);
  background:rgba(2,6,23,.62);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-radius:22px;
  padding:10px;
  box-shadow:0 22px 70px rgba(0,0,0,.42);
}

#coachImg{
  width:56px; height:56px;
  border-radius:16px;
  border:1px solid rgba(148,163,184,.18);
  background:rgba(15,23,42,.35);
  object-fit:cover;
}
.coachName{ font-weight:1000; font-size:14px; }
.coachMsg{ margin-top:2px; color:rgba(148,163,184,.95); font-weight:900; }

/* -------- Quest panel -------- */
#miniPanel{
  position:fixed;
  left:calc(12px + var(--sal));
  right:calc(12px + var(--sar));
  bottom:calc(170px + var(--sab)); /* เหนือ coach */
  z-index:80;

  border:1px solid rgba(148,163,184,.18);
  background:rgba(2,6,23,.62);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-radius:22px;
  padding:10px;
  box-shadow:0 22px 70px rgba(0,0,0,.42);

  display:grid;
  gap:10px;
}

.questBlock{
  border:1px solid rgba(148,163,184,.14);
  background:rgba(15,23,42,.35);
  border-radius:18px;
  padding:10px;
}
.questHdr{
  display:flex;
  align-items:center;
  gap:10px;
  font-weight:1000;
}
.badge{
  display:inline-flex;
  align-items:center;
  padding:6px 10px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.18);
  font-size:12px;
  letter-spacing:.06em;
}
.badgeGoal{ background:rgba(34,211,238,.12); }
.badgeMini{ background:rgba(167,139,250,.12); }
.qTitle{ flex:1; }
.qCount{ color:rgba(148,163,184,.95); font-weight:1000; }
.bar{
  margin-top:8px;
  height:10px;
  border-radius:999px;
  background:rgba(148,163,184,.18);
  overflow:hidden;
}
.barFill{
  height:100%;
  width:0%;
  border-radius:999px;
  background:linear-gradient(90deg, rgba(34,211,238,.95), rgba(167,139,250,.95));
}
.barFill.mini{
  background:linear-gradient(90deg, rgba(167,139,250,.95), rgba(34,197,94,.95));
}
.hint{
  margin-top:8px;
  color:rgba(148,163,184,.95);
  font-weight:900;
  font-size:12px;
}

/* -------- Buttons -------- */
#hudBtns{
  position:fixed;
  left:calc(12px + var(--sal));
  right:calc(12px + var(--sar));
  bottom:calc(10px + var(--sab));
  z-index:85;

  display:grid;
  grid-template-columns: repeat(4, minmax(0,1fr));
  gap:10px;
}

.btn{
  border:1px solid rgba(148,163,184,.18);
  background:rgba(15,23,42,.52);
  color:var(--text);
  border-radius:18px;
  padding:14px 12px;
  font-weight:1000;
  letter-spacing:.01em;
  box-shadow:0 18px 60px rgba(0,0,0,.35);
}
.btn:active{ transform:translateY(1px); }
.btn.ghost{
  background:rgba(2,6,23,.55);
}
.btn.big{
  padding:14px 14px;
  border-radius:20px;
}

/* -------- Paused overlay -------- */
#hudPaused{
  position:fixed; inset:0;
  z-index:95;
  display:none;
  place-items:center;
  background:rgba(0,0,0,.35);
  backdrop-filter: blur(3px);
}
.pausedCard{
  width:min(520px, calc(100% - 24px));
  border:1px solid rgba(148,163,184,.18);
  background:rgba(2,6,23,.75);
  border-radius:22px;
  padding:16px;
  box-shadow:0 24px 80px rgba(0,0,0,.5);
}
.pausedTitle{ font-weight:1100; font-size:18px; }
.pausedText{ margin-top:6px; color:rgba(148,163,184,.95); font-weight:900; }

/* -------- Start overlay -------- */
#startOverlay{
  position:fixed; inset:0;
  z-index:96;
  display:grid;
  place-items:center;
  background:rgba(0,0,0,.35);
  backdrop-filter: blur(4px);
}
.startCard{
  width:min(560px, calc(100% - 24px));
  border:1px solid rgba(148,163,184,.18);
  background:rgba(2,6,23,.78);
  border-radius:22px;
  padding:16px;
  box-shadow:0 24px 90px rgba(0,0,0,.55);
}
.startTitle{ font-weight:1200; font-size:18px; }
.startSub{ margin-top:6px; color:rgba(148,163,184,.95); font-weight:900; line-height:1.35; }
.startMeta{ margin-top:10px; display:flex; gap:8px; flex-wrap:wrap; }
.metaPill{
  padding:6px 10px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.14);
  background:rgba(15,23,42,.35);
  font-weight:1000;
}
.startBtns{ margin-top:12px; display:grid; grid-template-columns:1fr 1fr; gap:10px; }
.startFoot{ margin-top:10px; color:rgba(148,163,184,.92); font-weight:900; font-size:12px; }

/* -------- Result overlay -------- */
#resultBackdrop{
  position:fixed; inset:0;
  z-index:97;
  display:none;
  place-items:center;
  background:rgba(0,0,0,.40);
  backdrop-filter: blur(4px);
}
.resultCard{
  width:min(720px, calc(100% - 24px));
  border:1px solid rgba(148,163,184,.18);
  background:rgba(2,6,23,.82);
  border-radius:22px;
  padding:16px;
  box-shadow:0 28px 100px rgba(0,0,0,.6);
}
.resultTitle{ font-weight:1200; font-size:18px; }
.resultGrid{
  margin-top:12px;
  display:grid;
  grid-template-columns: repeat(4, minmax(0,1fr));
  gap:10px;
}
.resultItem{
  border:1px solid rgba(148,163,184,.14);
  border-radius:18px;
  background:rgba(15,23,42,.35);
  padding:10px;
}
.resultItem .k{
  font-weight:1000;
  font-size:11px;
  letter-spacing:.06em;
  color:rgba(148,163,184,.95);
}
.resultItem .v{
  margin-top:2px;
  font-weight:1200;
  font-size:16px;
}
.resultPlate{
  margin-top:12px;
  border:1px solid rgba(148,163,184,.14);
  border-radius:18px;
  background:rgba(15,23,42,.35);
  padding:10px;
}
.plateRow{ display:flex; gap:8px; flex-wrap:wrap; }
.totalRow{ margin-top:8px; color:rgba(148,163,184,.95); font-weight:1000; }
.resultBtns{ margin-top:12px; display:grid; grid-template-columns:1fr 1fr; gap:10px; }

/* -------- Responsive -------- */
@media (max-width: 560px){
  .hudRow{ grid-template-columns: repeat(3, minmax(0,1fr)); }
  .hudRow2{ grid-template-columns:1fr; }
  #hudBtns{ grid-template-columns: repeat(2, minmax(0,1fr)); }
  .resultGrid{ grid-template-columns: repeat(2, minmax(0,1fr)); }
  #miniPanel{ bottom:calc(190px + var(--sab)); }
  #coachPanel{ bottom:calc(98px + var(--sab)); }
}