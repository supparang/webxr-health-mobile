<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>HeroHealth ‚Äî Balanced Plate VR</title>
  <meta name="color-scheme" content="dark" />
  <link rel="icon" href="../favicon.ico" type="image/x-icon" />

  <!-- A-Frame: helps WebXR Enter VR reliability -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

  <!-- CSS -->
  <link rel="stylesheet" href="./plate-vr.css" />

  <!-- Global FX + Logger + Universal VR UI -->
  <script src="../vr/particles.js" defer></script>
  <script src="../vr/hha-cloud-logger.js" defer></script>
  <script src="../vr/vr-ui.js" defer></script>

  <!-- ‚úÖ IMPORTANT: ensure ModeFactory module is loaded -->
  <script type="module" src="../vr/mode-factory.js"></script>

  <!-- Boot -->
  <script type="module" src="./plate.boot.js"></script>
</head>

<body class="view-pc">
  <div id="app">
    <!-- Minimal A-Frame scene (hidden) for Enter VR -->
    <a-scene
      embedded
      renderer="antialias:true; colorManagement:true"
      xr-mode-ui="enabled:false"
      style="position:fixed; inset:0; z-index:0; opacity:0; pointer-events:none;"
    >
      <a-entity camera position="0 1.6 0"></a-entity>
    </a-scene>

    <!-- Playfield (targets spawn inside this rect) -->
    <div id="plate-layer" aria-label="playfield"></div>

    <!-- HUD -->
    <div id="hud" aria-label="hud">
      <div class="hudRow">
        <div class="chip score">
          <span class="lbl">SCORE</span>
          <span class="val" id="hudScore">0</span>
        </div>
        <div class="chip time">
          <span class="lbl">TIME</span>
          <span class="val" id="hudTime">0</span>
        </div>
        <div class="chip combo">
          <span class="lbl">COMBO</span>
          <span class="val" id="hudCombo">0</span>
        </div>
      </div>

      <div class="card" id="questCard">
        <div class="cardTitle">
          <div class="t">üéØ ‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à</div>
          <div class="hint" id="hudHint">‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö 5 ‡∏´‡∏°‡∏π‡πà ‚Ä¢ ‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏Ç‡∏≠‡∏á‡∏´‡∏ß‡∏≤‡∏ô/‡∏ó‡∏≠‡∏î</div>
        </div>

        <!-- GOAL -->
        <div class="qItem" id="goalItem">
          <div class="qText">
            <div class="name" id="goalName">Goal</div>
            <div class="sub" id="goalSub">‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ú‡πà‡∏≤‡∏ô‡∏î‡πà‡∏≤‡∏ô</div>
          </div>
          <div class="qProg">
            <div class="qNums" id="goalNums">0/1</div>
            <div class="bar"><i id="goalBar"></i></div>
          </div>
        </div>

        <!-- MINI -->
        <div class="qItem" id="miniItem">
          <div class="qText">
            <div class="name" id="miniName">Mini Quest</div>
            <div class="sub" id="miniSub">‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡πÄ‡∏ß‡∏•‡∏≤/‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>
          </div>
          <div class="qProg">
            <div class="qNums" id="miniNums">0/1</div>
            <div class="bar"><i id="miniBar"></i></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Coach bubble (optional) -->
    <div id="coachCard" aria-hidden="true">
      <div class="inner">
        <div id="coachMsg">‚Ä¶</div>
        <div class="meta" id="coachMeta">Coach</div>
      </div>
    </div>

    <!-- End Overlay -->
    <div id="endOverlay" aria-hidden="true">
      <div class="endPanel">
        <div class="endTitle">
          <h2 id="endTitle">‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•</h2>
          <div class="tag" id="endTag">PlateVR</div>
        </div>

        <div class="endGrid">
          <div class="kpi"><div class="k">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div><div class="v" id="kScore">0</div></div>
          <div class="kpi"><div class="k">‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô</div><div class="v" id="kAcc">0%</div></div>
          <div class="kpi"><div class="k">‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î</div><div class="v" id="kCombo">0</div></div>
          <div class="kpi"><div class="k">‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à</div><div class="v" id="kGoals">0/0</div></div>
          <div class="kpi"><div class="k">‡∏°‡∏¥‡∏ô‡∏¥‡πÄ‡∏Ñ‡∏ß‡∏™</div><div class="v" id="kMini">0/0</div></div>
          <div class="kpi"><div class="k">Miss</div><div class="v" id="kMiss">0</div></div>
        </div>

        <div class="endBtns">
          <button class="btn" id="btnRestart">‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
          <button class="btn primary" id="btnBackHub">‡∏Å‡∏•‡∏±‡∏ö HUB</button>
        </div>
      </div>
    </div>
  </div>
</body>
</html>