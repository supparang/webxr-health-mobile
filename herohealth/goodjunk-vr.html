<!-- === /herohealth/groups.html ===
Food Groups VR ‚Äî Launcher (PRODUCTION)
‚úÖ Launch -> /herohealth/vr-groups/groups-vr.html
‚úÖ Params: runMode diff style time seed hub autostart v
‚úÖ Remember last settings (localStorage)
‚úÖ Quick presets + Random seed
-->

<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>HeroHealth ‚Äî Food Groups VR (Launcher)</title>
  <meta name="color-scheme" content="dark" />
  <link rel="icon" href="./favicon.ico" type="image/x-icon" />
  <style>
    :root{
      color-scheme: dark;
      --bg:#020617;
      --panel:rgba(2,6,23,.78);
      --panel2:rgba(15,23,42,.72);
      --stroke:rgba(148,163,184,.18);
      --text:#e5e7eb;
      --muted:#94a3b8;
      --accent:#22c55e;
      --cyan:#22d3ee;
      --warn:#f59e0b;

      --sat: env(safe-area-inset-top, 0px);
      --sab: env(safe-area-inset-bottom, 0px);
      --sal: env(safe-area-inset-left, 0px);
      --sar: env(safe-area-inset-right, 0px);
      --r:18px;
    }
    *{ box-sizing:border-box; }
    html,body{ margin:0; height:100%; overflow:hidden; font-family:system-ui,-apple-system,"Segoe UI",sans-serif; color:var(--text); background:var(--bg); }
    body{
      background:
        radial-gradient(circle at top left, rgba(34,211,238,.14), transparent 55%),
        radial-gradient(circle at bottom right, rgba(34,197,94,.14), transparent 60%),
        var(--bg);
    }
    .wrap{
      height:100%;
      padding: calc(14px + var(--sat)) calc(14px + var(--sar)) calc(14px + var(--sab)) calc(14px + var(--sal));
      overflow:auto;
      -webkit-overflow-scrolling: touch;
    }
    .hero{
      max-width: 980px;
      margin: 0 auto;
      padding: 10px 0 18px;
    }
    .title{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      flex-wrap:wrap;
      margin-bottom:12px;
    }
    h1{ margin:0; font-size:20px; letter-spacing:.2px; }
    .sub{ color:var(--muted); font-size:13px; line-height:1.55; margin-top:4px; }
    .pillrow{ display:flex; gap:8px; flex-wrap:wrap; margin-top:10px; }
    .pill{
      background: rgba(15,23,42,.70);
      border:1px solid rgba(148,163,184,.16);
      border-radius:999px;
      padding:7px 10px;
      font-size:12px;
      color:var(--text);
      box-shadow:0 14px 30px rgba(0,0,0,.25);
    }
    .card{
      background: var(--panel);
      border: 1px solid var(--stroke);
      border-radius: 22px;
      box-shadow: 0 18px 55px rgba(0,0,0,.35);
      padding: 14px;
      margin-top: 12px;
    }
    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 10px;
    }
    @media (max-width: 860px){
      .grid{ grid-template-columns: 1fr; }
    }
    .sec{
      background: rgba(2,6,23,.45);
      border:1px solid rgba(148,163,184,.14);
      border-radius: 18px;
      padding: 12px;
    }
    .sec h3{
      margin:0 0 8px;
      font-size:13px;
      color: rgba(226,232,240,.92);
      letter-spacing:.2px;
    }
    .row{
      display:flex; gap:10px; flex-wrap:wrap;
      align-items:center;
      margin-top:8px;
    }
    label{
      font-size:12px;
      color: var(--muted);
      display:flex;
      flex-direction:column;
      gap:6px;
      min-width: 150px;
    }
    select,input{
      width:100%;
      border-radius: 14px;
      border:1px solid rgba(148,163,184,.18);
      background: rgba(15,23,42,.62);
      color: var(--text);
      padding: 10px 10px;
      outline:none;
      box-shadow: 0 14px 30px rgba(0,0,0,.22);
    }
    input[type="checkbox"]{ width:auto; box-shadow:none; }
    .actions{
      display:flex; gap:10px; flex-wrap:wrap;
      margin-top: 12px;
    }
    button{
      border:0;
      border-radius:999px;
      padding: 12px 14px;
      font-weight: 900;
      cursor: pointer;
      color:#061018;
      background: linear-gradient(90deg, rgba(34,197,94,.95), rgba(34,211,238,.90));
      box-shadow: 0 18px 55px rgba(0,0,0,.35);
    }
    button.secondary{
      background: rgba(15,23,42,.72);
      border:1px solid rgba(148,163,184,.18);
      color: var(--text);
    }
    button.warn{
      background: linear-gradient(90deg, rgba(245,158,11,.95), rgba(34,211,238,.90));
      color:#08121a;
    }
    .kv{
      display:grid; grid-template-columns: 1fr;
      gap:8px;
      margin-top: 10px;
      font-size:12px;
      color: rgba(226,232,240,.92);
    }
    .kv .k{
      background: rgba(15,23,42,.55);
      border:1px solid rgba(148,163,184,.14);
      border-radius: 16px;
      padding: 10px 12px;
      overflow:auto;
      white-space:nowrap;
    }
    .hint{
      margin-top:10px;
      font-size:12px;
      color: var(--muted);
      line-height:1.55;
    }
    .badge{
      display:inline-flex; align-items:center; gap:6px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.16);
      background: rgba(15,23,42,.62);
      font-size:12px;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="hero">
      <div class="title">
        <div>
          <h1>ü•ó Food Groups VR ‚Äî Launcher</h1>
          <div class="sub">
            ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏Å‡∏°‡∏à‡∏£‡∏¥‡∏á‡∏ó‡∏µ‡πà <span class="badge">/herohealth/vr-groups/groups-vr.html</span><br/>
            ‡∏õ‡∏£‡∏±‡∏ö‡πÇ‡∏´‡∏°‡∏î / ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å / style / ‡πÄ‡∏ß‡∏•‡∏≤ / seed ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î ‚ÄúStart‚Äù
          </div>
          <div class="pillrow">
            <div class="pill">Goal ‚ûú ‡∏Ç‡∏ß‡∏≤</div>
            <div class="pill">Coach ‚ûú ‡∏•‡πà‡∏≤‡∏á‡∏Ç‡∏ß‡∏≤</div>
            <div class="pill">‚≠ê Overdrive+Shield</div>
            <div class="pill">‚ùÑÔ∏è Freeze</div>
            <div class="pill">üå™Ô∏è Storm + üëë Boss</div>
          </div>
        </div>
        <div class="row">
          <button id="btnHub" class="secondary">‡∏Å‡∏•‡∏±‡∏ö HUB</button>
        </div>
      </div>

      <div class="card">
        <div class="grid">
          <div class="sec">
            <h3>üéÆ Mode & Difficulty</h3>
            <div class="row">
              <label>runMode
                <select id="runMode">
                  <option value="play">play (Adaptive ON)</option>
                  <option value="research">research (Adaptive OFF)</option>
                </select>
              </label>

              <label>diff
                <select id="diff">
                  <option value="easy">easy</option>
                  <option value="normal" selected>normal</option>
                  <option value="hard">hard</option>
                </select>
              </label>

              <label>style
                <select id="style">
                  <option value="mix" selected>mix (balanced)</option>
                  <option value="feel">feel (wave focus)</option>
                  <option value="hard">hard (spiral focus)</option>
                </select>
              </label>
            </div>

            <div class="row">
              <label>time (sec)
                <select id="time">
                  <option value="70">70</option>
                  <option value="90" selected>90</option>
                  <option value="120">120</option>
                </select>
              </label>

              <label>seed
                <input id="seed" placeholder="‡πÄ‡∏ä‡πà‡∏ô 1766994914755" />
              </label>

              <label>hub (return)
                <input id="hub" placeholder="./index.html" />
              </label>
            </div>

            <div class="row">
              <label style="min-width:auto; flex-direction:row; align-items:center; gap:10px; color:rgba(226,232,240,.92);">
                <input type="checkbox" id="autostart" />
                autostart (‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏Å‡∏°‡∏ó‡∏±‡∏ô‡∏ó‡∏µ)
              </label>

              <button id="btnRandom" class="secondary">‡∏™‡∏∏‡πà‡∏° seed</button>
              <button id="btnNormal" class="secondary">Preset: Normal</button>
              <button id="btnResearch" class="secondary">Preset: Research</button>
            </div>

            <div class="hint">
              ‚Ä¢ play = ‡∏°‡∏µ adaptive ‡∏õ‡∏£‡∏±‡∏ö spawn/ttl ‡∏ï‡∏≤‡∏°‡∏ù‡∏µ‡∏°‡∏∑‡∏≠<br/>
              ‚Ä¢ research = deterministic (seed) + ‡∏Ñ‡πà‡∏≤‡∏ï‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡∏ï‡∏≤‡∏° diff ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
            </div>
          </div>

          <div class="sec">
            <h3>üöÄ Launch</h3>
            <div class="actions">
              <button id="btnStart">Start (Run)</button>
              <button id="btnStartVR" class="warn">Start + autostart=1</button>
              <button id="btnCopy" class="secondary">Copy URL</button>
            </div>

            <div class="kv">
              <div class="k" id="outUrl">URL: ‚Äî</div>
            </div>

            <div class="hint">
              ‚ÄúStart + autostart=1‚Äù ‡∏à‡∏∞‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ run ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡πâ‡πÄ‡∏≠‡∏á<br/>
              ‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ HUB ‡∏´‡∏•‡∏±‡∏Å‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‚Üí ‡∏ï‡∏±‡πâ‡∏á hub ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á
            </div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="sec">
          <h3>üìå Notes</h3>
          <div class="hint">
            ‚Ä¢ run ‡πÄ‡∏Å‡∏°: <b>/herohealth/vr-groups/groups-vr.html</b><br/>
            ‚Ä¢ cache-bust: <b>v=timestamp</b> (Launcher ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÅ‡∏•‡πâ‡∏ß)<br/>
          </div>
        </div>
      </div>

    </div>
  </div>

  <script>
    const $ = (id)=>document.getElementById(id);
    const STORAGE_KEY = 'HHA_LAUNCH_GROUPS_V1';
    function nowSeed(){ return String(Date.now()); }

    function loadDefaults(){
      const dflt = {
        runMode: 'play',
        diff: 'normal',
        style: 'mix',
        time: '90',
        seed: nowSeed(),
        hub: './index.html',
        autostart: false
      };
      try{
        const saved = JSON.parse(localStorage.getItem(STORAGE_KEY) || 'null');
        if (saved && typeof saved === 'object') Object.assign(dflt, saved);
      }catch{}
      $('runMode').value = dflt.runMode;
      $('diff').value = dflt.diff;
      $('style').value = dflt.style;
      $('time').value = dflt.time;
      $('seed').value = dflt.seed || nowSeed();
      $('hub').value  = dflt.hub || './index.html';
      $('autostart').checked = !!dflt.autostart;
      refreshUrl();
    }

    function saveDefaults(){
      const payload = {
        runMode: $('runMode').value,
        diff: $('diff').value,
        style: $('style').value,
        time: $('time').value,
        seed: ($('seed').value || '').trim(),
        hub:  ($('hub').value || '').trim(),
        autostart: $('autostart').checked
      };
      try{ localStorage.setItem(STORAGE_KEY, JSON.stringify(payload)); }catch{}
    }

    function buildUrl(forceAutostart=false){
      const runMode = $('runMode').value;
      const diff = $('diff').value;
      const style = $('style').value;
      const time = $('time').value;
      const seed = ($('seed').value || '').trim() || nowSeed();
      const hub  = ($('hub').value || '').trim() || './index.html';
      const autostart = forceAutostart ? '1' : ($('autostart').checked ? '1' : '0');
      const v = String(Date.now());

      const base = './vr-groups/groups-vr.html';
      const qs = new URLSearchParams();
      qs.set('runMode', runMode);
      qs.set('diff', diff);
      qs.set('style', style);
      qs.set('time', time);
      qs.set('seed', seed);
      qs.set('hub', hub);
      if (autostart === '1') qs.set('autostart', '1');
      qs.set('v', v);
      return base + '?' + qs.toString();
    }

    function refreshUrl(){
      saveDefaults();
      const url = buildUrl(false);
      $('outUrl').textContent = 'URL: ' + url;
      return url;
    }

    function goHub(){
      const hub = ($('hub').value || '').trim() || './index.html';
      location.href = hub;
    }
    $('btnHub').addEventListener('click', goHub);

    ['runMode','diff','style','time','seed','hub','autostart'].forEach(id=>{
      $(id).addEventListener('change', refreshUrl);
      $(id).addEventListener('input', ()=> { if (id==='seed'||id==='hub') refreshUrl(); });
    });

    $('btnRandom').addEventListener('click', ()=>{ $('seed').value = nowSeed(); refreshUrl(); });

    $('btnNormal').addEventListener('click', ()=>{
      $('runMode').value = 'play';
      $('diff').value = 'normal';
      $('style').value = 'mix';
      $('time').value = '90';
      $('seed').value = nowSeed();
      $('autostart').checked = false;
      refreshUrl();
    });

    $('btnResearch').addEventListener('click', ()=>{
      $('runMode').value = 'research';
      $('diff').value = 'normal';
      $('style').value = 'mix';
      $('time').value = '90';
      $('seed').value = nowSeed();
      $('autostart').checked = true;
      refreshUrl();
    });

    $('btnStart').addEventListener('click', ()=>{ location.href = refreshUrl(); });

    $('btnStartVR').addEventListener('click', ()=>{
      saveDefaults();
      const url = buildUrl(true);
      $('outUrl').textContent = 'URL: ' + url;
      location.href = url;
    });

    $('btnCopy').addEventListener('click', async ()=>{
      const url = refreshUrl();
      try{
        await navigator.clipboard.writeText(url);
        $('outUrl').textContent = '‚úÖ Copied: ' + url;
      }catch{
        $('outUrl').textContent = '‚ö†Ô∏è Copy ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‚Äî ' + url;
      }
    });

    loadDefaults();
  </script>
</body>
</html>