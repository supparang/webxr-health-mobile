<!-- === /herohealth/goodjunk-vr.html ===
GoodJunkVR LAUNCHER — ROOT (No menu, auto detect)
✅ Redirects to ./vr-goodjunk/goodjunk-vr.html
✅ Respects existing ?view= (does NOT override)
✅ If no view: mobile => view=mobile, desktop => view=pc
✅ Pass-through: hub/run/diff/time/seed/studyId/phase/conditionGroup/log/style/ai/telemetry
-->
<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>HeroHealth — GoodJunkVR</title>
  <meta name="color-scheme" content="dark" />
  <link rel="icon" href="./favicon.ico" />
  <style>
    :root{ --bg:#020617; --text:#e5e7eb; --muted:#94a3b8; --stroke:rgba(148,163,184,.18); }
    html,body{ height:100%; margin:0; background:var(--bg); color:var(--text); font-family:system-ui,-apple-system,"Segoe UI","Noto Sans Thai",sans-serif; }
    .wrap{ height:100%; display:flex; align-items:center; justify-content:center; padding:24px; }
    .card{ width:min(560px, 92vw); border:1px solid var(--stroke); border-radius:22px; padding:16px; background:rgba(2,6,23,.70); }
    .t{ font-weight:1200; font-size:16px; }
    .s{ margin-top:8px; color:var(--muted); font-weight:900; font-size:13px; line-height:1.4; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="t">กำลังเข้าเกม GoodJunkVR…</div>
      <div class="s" id="status">Auto-detect view และส่งพารามิเตอร์ไปหน้าเล่น</div>
    </div>
  </div>

  <script>
    (function(){
      const status = document.getElementById('status');
      const from = new URL(location.href);
      const to = new URL('./vr-goodjunk/goodjunk-vr.html', location.href);

      function isMobileUA(){
        try{
          const ua = navigator.userAgent || '';
          return /Android|iPhone|iPad|iPod|Mobile/i.test(ua);
        }catch(_){ return false; }
      }

      // pass-through whitelist
      const keys = [
        'hub','run','diff','time','seed',
        'studyId','phase','conditionGroup','siteCode',
        'log','style','ai','telemetry',
        'view' // keep if provided
      ];

      for(const k of keys){
        const v = from.searchParams.get(k);
        if(v != null) to.searchParams.set(k, v);
      }

      // auto view only if not provided
      if(!to.searchParams.get('view')){
        const v = isMobileUA() ? 'mobile' : 'pc';
        to.searchParams.set('view', v);
      }

      // make sure we at least have seed (deterministic-friendly)
      if(!to.searchParams.get('seed')){
        to.searchParams.set('seed', String(Date.now()));
      }

      if(status){
        status.textContent = `ไปหน้าเล่น: view=${to.searchParams.get('view')} · run=${to.searchParams.get('run')||'play'} · diff=${to.searchParams.get('diff')||'normal'}`;
      }

      location.replace(to.toString());
    })();
  </script>
</body>
</html>