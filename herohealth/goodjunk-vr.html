<!-- === /herohealth/goodjunk-vr.html ===
GoodJunkVR ‚Äî FULL HTML (MORE GAMEPLAY SPACE v2)
‚úÖ IDs match: /vr-goodjunk/goodjunk-vr.boot.js
‚úÖ Bigger gameplay: thinner HUD + auto-compact after start + peek HUD
-->

<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>HeroHealth ‚Äî GoodJunk VR</title>
  <meta name="color-scheme" content="light dark" />
  <link rel="icon" href="./favicon.ico" type="image/x-icon" />

  <!-- A-Frame (VR) -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

  <!-- Global FX + logger + UI binders (IIFE) -->
  <script src="./vr/particles.js" defer></script>
  <script src="./vr/hha-cloud-logger.js" defer></script>
  <script src="./vr/ui-fever.js" defer></script>
  <script src="./vr/hha-hud.js" defer></script>

  <!-- Boot (module) -->
  <script type="module" src="./vr-goodjunk/goodjunk-vr.boot.js"></script>

  <style>
    :root{
      color-scheme: light dark;
      --bg:#020617;
      --panel:rgba(2,6,23,.72);
      --panel2:rgba(15,23,42,.58);
      --stroke:rgba(148,163,184,.18);
      --text:#e5e7eb;
      --muted:#94a3b8;
      --accent:#22c55e;
      --warn:#f59e0b;
      --bad:#ef4444;

      --safeTop: env(safe-area-inset-top, 0px);
      --safeBottom: env(safe-area-inset-bottom, 0px);

      /* ‚úÖ gameplay space */
      --hudH: 40px;              /* was 44 */
      --pad: 10px;               /* was 12 */
      --radius: 18px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      background:
        radial-gradient(1200px 700px at 50% -10%, rgba(59,130,246,.18), transparent 55%),
        radial-gradient(900px 600px at 70% 10%, rgba(34,197,94,.12), transparent 55%),
        var(--bg);
      color:var(--text);
      overflow:hidden;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans Thai", "Noto Sans",
                   Arial, "Apple Color Emoji","Segoe UI Emoji";
    }

    /* ---------- A-Frame background (optional, safe) ---------- */
    .sceneWrap{
      position:fixed; inset:0;
      z-index:0;
      pointer-events:none;
    }
    a-scene{ width:100%; height:100%; }

    /* ---------- Gameplay DOM layer (targets spawn here) ---------- */
    #gj-layer{
      position:fixed; inset:0;
      z-index:2;
      overflow:hidden;
      touch-action:none;
      user-select:none;
      -webkit-user-select:none;
    }

    /* ---------- FX overlay hooks ---------- */
    #fx-chroma{
      position:fixed; inset:0;
      z-index:8;
      pointer-events:none;
      opacity:0;
      transition: opacity .12s ease;
      background: radial-gradient(700px 380px at 50% 52%, rgba(59,130,246,.18), transparent 65%);
      mix-blend-mode: screen;
    }
    #fx-chroma.show{ opacity:1; }
    #fx-chroma.hero{
      background: radial-gradient(700px 380px at 50% 52%, rgba(34,197,94,.22), transparent 65%);
    }

    /* game cam shake target (DOM wrapper) */
    #game-cam{
      position:fixed; inset:0;
      z-index:1;
      pointer-events:none;
      transform: translate3d(0,0,0);
    }
    #game-cam.shake{ animation: hhaShake var(--shakeDur, .26s) infinite linear; }
    #game-cam.kick{ animation: hhaKick .26s ease-out 1; }
    @keyframes hhaShake{
      0%{ transform: translate3d(calc(var(--shakeAmp,0px)*-1), 0, 0); }
      50%{ transform: translate3d(var(--shakeAmp,0px), 0, 0); }
      100%{ transform: translate3d(calc(var(--shakeAmp,0px)*-1), 0, 0); }
    }
    @keyframes hhaKick{
      0%{ transform: translate3d(0,0,0) rotate(0deg); }
      50%{ transform: translate3d(var(--kickAmp,10px), 0, 0) rotate(var(--kickRot,4deg)); }
      100%{ transform: translate3d(0,0,0) rotate(0deg); }
    }

    /* ---------- HUD TOP (thinner) ---------- */
    .hud-top{
      position:fixed;
      left:var(--pad); right:var(--pad);
      top: calc(var(--safeTop) + 8px);
      height: var(--hudH);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:8px;
      padding: 4px 8px;                 /* thinner */
      border:1px solid rgba(148,163,184,.14);
      border-radius:999px;
      background: rgba(2,6,23,.40);
      backdrop-filter: blur(12px);
      box-shadow: 0 10px 40px rgba(0,0,0,.22);
      z-index:10;
      min-width:0;
    }
    #hud-pill.research{
      border-color: rgba(34,197,94,.35);
      box-shadow: 0 0 0 2px rgba(34,197,94,.08), 0 10px 40px rgba(0,0,0,.22);
    }

    .hud-group{ display:flex; align-items:center; gap:8px; min-width:0; }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:5px 8px;                  /* thinner */
      border-radius:999px;
      border:1px solid rgba(148,163,184,.14);
      background: rgba(15,23,42,.26);
      white-space:nowrap;
      min-width:0;
    }
    .dot{ width:7px; height:7px; border-radius:50%; background:var(--accent); box-shadow:0 0 12px rgba(34,197,94,.45); }
    .kv{ display:flex; flex-direction:column; gap:0; min-width:0; }
    .kv .label{ font-size:9px; color:rgba(148,163,184,.92); letter-spacing:.06em; }
    .kv .big{ font-size:16px; font-weight:1000; line-height:1; }

    /* ---------- Meta pills (will hide in compact) ---------- */
    .hud-meta{
      position:fixed;
      left:var(--pad); right:var(--pad);
      top: calc(var(--safeTop) + 8px + var(--hudH) + 6px);
      z-index:10;
      display:flex;
      justify-content:flex-start;
      gap:8px;
      pointer-events:none;
    }
    .meta-pill{
      display:inline-flex;
      gap:8px;
      align-items:center;
      padding:5px 8px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.12);
      background: rgba(2,6,23,.30);
      backdrop-filter: blur(10px);
      color: rgba(148,163,184,.95);
      font-size:11px;
      font-weight:900;
    }
    .meta-pill b{ color: var(--text); }

    /* ---------- Judge text (hide in compact to gain space) ---------- */
    #hud-judge{
      position:fixed;
      left:0; right:0;
      top: calc(var(--safeTop) + 70px);
      z-index:10;
      text-align:center;
      font-weight:1000;
      letter-spacing:.02em;
      color: rgba(229,231,235,.92);
      text-shadow: 0 10px 30px rgba(0,0,0,.55);
      pointer-events:none;
    }

    /* ---------- Fever / Shield panel (right) ---------- */
    .hud-right{
      position:fixed;
      right:var(--pad);
      top: calc(var(--safeTop) + 8px + var(--hudH) + 8px);
      z-index:10;
      display:flex;
      flex-direction:column;
      gap:8px;
      width: min(240px, 48vw);          /* smaller */
      transform: translateZ(0);
    }
    .card{
      border:1px solid rgba(148,163,184,.14);
      background: rgba(2,6,23,.36);
      backdrop-filter: blur(12px);
      border-radius: var(--radius);
      padding: 8px 10px;               /* smaller */
      box-shadow: 0 14px 50px rgba(0,0,0,.22);
    }
    .row{ display:flex; align-items:center; justify-content:space-between; gap:10px; }
    .card h4{
      margin:0;
      font-size:11px;
      letter-spacing:.08em;
      color: rgba(148,163,184,.95);
      font-weight:1000;
    }
    .pct{ font-weight:1000; color:var(--text); font-size:11px; }
    .bar{
      margin-top:7px;
      height:9px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.12);
      background: rgba(148,163,184,.08);
      overflow:hidden;
      position:relative;
    }
    #fever-fill{
      position:absolute; inset:0 auto 0 0;
      width:0%;
      background: linear-gradient(90deg, rgba(245,158,11,.9), rgba(239,68,68,.85));
      border-radius:999px;
      box-shadow:0 0 18px rgba(239,68,68,.18);
    }
    #shield-count{
      font-weight:1100;
      font-size:15px;
      color: var(--text);
    }
    #hud-stun{
      display:none;
      margin-top:7px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(239,68,68,.16);
      background: rgba(239,68,68,.08);
      font-weight:1000;
      font-size:11px;
      color: rgba(255,255,255,.92);
    }
    #hud-stun.show{ display:inline-flex; gap:8px; align-items:center; }

    /* ---------- Coach bubble (bottom-left) ---------- */
    #coach-bubble{
      position:fixed;
      left:var(--pad);
      bottom: calc(var(--safeBottom) + 78px);  /* up a bit */
      z-index:10;
      max-width: min(72vw, 420px);
      display:flex;
      gap:10px;
      align-items:center;
      padding:7px 9px;
      border-radius:16px;
      background: rgba(2,6,23,.42);
      border: 1px solid rgba(148,163,184,.14);
      backdrop-filter: blur(10px);
      box-shadow: 0 14px 50px rgba(0,0,0,.26);
      opacity:0;
      transform: translateY(8px);
      transition: opacity .18s ease, transform .18s ease;
      pointer-events:none;
    }
    #coach-bubble.show{ opacity:1; transform: translateY(0); }
    #coach-emoji{
      width:34px; height:34px;
      border-radius:12px;
      background-size: contain;
      background-repeat:no-repeat;
      background-position:center;
      filter: drop-shadow(0 10px 20px rgba(0,0,0,.35));
    }
    #coach-text{
      font-size:12px;
      line-height:1.25;
      font-weight:900;
      overflow:hidden;
      display:-webkit-box;
      -webkit-line-clamp:2;
      -webkit-box-orient: vertical;
    }

    /* ---------- Quest HUD (bottom) ---------- */
    .hud-bottom{
      position:fixed;
      left:var(--pad); right:var(--pad);
      bottom: calc(var(--safeBottom) + 10px);
      z-index:10;
      border-radius: var(--radius);
      border:1px solid rgba(148,163,184,.16);
      background: rgba(2,6,23,.44);
      backdrop-filter: blur(10px);
      box-shadow: 0 14px 50px rgba(0,0,0,.28);
      padding: 9px 10px;               /* thinner */
      max-height: 112px;               /* slightly smaller */
      overflow:hidden;
      cursor:pointer;
    }
    .qtitle{
      font-size:12.5px;
      font-weight:1100;
      line-height:1.15;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .qcap{
      font-size:11.5px;
      color: rgba(148,163,184,.95);
      font-weight:900;
      white-space:nowrap;
    }
    .qline{ margin-top:7px; display:flex; align-items:center; gap:9px; }
    .qbar{
      flex:1;
      height:9px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.12);
      background: rgba(148,163,184,.08);
      overflow:hidden;
      position:relative;
    }
    #hud-quest-main-bar, #hud-quest-mini-bar{
      position:absolute; inset:0 auto 0 0;
      width:0%;
      border-radius:999px;
      background: linear-gradient(90deg, rgba(34,197,94,.9), rgba(59,130,246,.85));
      box-shadow:0 0 18px rgba(59,130,246,.18);
    }
    #hud-quest-mini-bar{
      background: linear-gradient(90deg, rgba(245,158,11,.9), rgba(34,197,94,.80));
      box-shadow:0 0 18px rgba(245,158,11,.16);
    }
    #hud-quest-hint{ margin-top:6px; font-size:11.5px; font-weight:1100; color: rgba(229,231,235,.92); }
    #hud-mini-count{ margin-top:6px; font-size:11.5px; font-weight:900; color: rgba(148,163,184,.95); }

    /* ---------- Compact mode after start (major space gain) ---------- */
    body.hha-compact .hud-meta{ display:none; }
    body.hha-compact #logBadge{ display:none; }
    body.hha-compact #hud-judge{ opacity:0; } /* keep slot free */

    /* Top becomes a slim ribbon */
    body.hha-compact .hud-top{
      opacity:.82;
      background: rgba(2,6,23,.30);
      border-color: rgba(148,163,184,.10);
      padding: 3px 6px;
      height: 34px;
    }
    body.hha-compact .hud-top .pill{ padding:4px 7px; }
    body.hha-compact .kv .label{ display:none; }
    body.hha-compact .kv .big{ font-size:15px; }

    /* Right panel smaller + more transparent */
    body.hha-compact .hud-right{
      width: min(210px, 44vw);
      opacity:.78;
      gap:7px;
    }
    body.hha-compact .card{ padding: 7px 9px; }

    /* Bottom quest becomes a thin strip (tap to peek 2s) */
    body.hha-compact .hud-bottom{
      max-height: 54px;
      padding: 7px 9px;
      opacity:.86;
    }
    body.hha-compact #coach-bubble{ opacity:.0; transform: translateY(10px); } /* hide coach in compact unless it shows */

    /* Peek expands */
    body.hha-compact.hha-peek .hud-bottom{ max-height: 112px; opacity:1; }
    body.hha-compact.hha-peek #coach-bubble{ opacity:1; transform: translateY(0); }

    /* ---------- Start overlay (IDs that boot expects) ---------- */
    #start-overlay{
      position:fixed; inset:0;
      z-index:30;
      display:flex;
      align-items:flex-end;
      justify-content:center;
      padding: 22px 16px calc(var(--safeBottom) + 18px);
      background:
        radial-gradient(900px 500px at 50% 5%, rgba(59,130,246,.18), transparent 60%),
        rgba(2,6,23,.80);
      backdrop-filter: blur(12px);
    }
    .startCard{
      width:min(680px, 100%);
      border:1px solid rgba(148,163,184,.18);
      border-radius:24px;
      background: rgba(2,6,23,.68);
      box-shadow: 0 18px 70px rgba(0,0,0,.45);
      padding: 16px 16px 14px;
    }
    .startTitle{ font-size:20px; font-weight:1100; margin:0 0 6px 0; }
    #start-sub{ margin:0 0 12px 0; color:rgba(148,163,184,.95); font-size:13px; line-height:1.3; }
    .controls{ display:flex; gap:10px; flex-wrap:wrap; margin-bottom:12px; }
    select{
      appearance:none;
      border:1px solid rgba(148,163,184,.18);
      background: rgba(15,23,42,.40);
      color: var(--text);
      border-radius:14px;
      padding: 10px 12px;
      font-weight:1000;
      font-size:14px;
      outline:none;
    }
    .btnRow{ display:flex; gap:10px; flex-wrap:wrap; }
    button{
      appearance:none;
      border:1px solid rgba(148,163,184,.18);
      background: rgba(15,23,42,.45);
      color:var(--text);
      border-radius:14px;
      padding: 12px 14px;
      font-weight:1100;
      font-size:14px;
      display:inline-flex;
      align-items:center;
      gap:10px;
      cursor:pointer;
    }
    button.primary{
      border-color: rgba(34,197,94,.35);
      background: linear-gradient(180deg, rgba(34,197,94,.28), rgba(34,197,94,.10));
    }
    button:active{ transform: translateY(1px); }

    /* Countdown */
    #start-countdown{
      margin-top:10px;
      font-size:40px;
      font-weight:1200;
      text-align:center;
      letter-spacing:1px;
    }
    .countdown-hidden{ display:none; }

    /* ---------- Logger badge ---------- */
    #logBadge{
      position:fixed;
      left:var(--pad);
      top: calc(var(--safeTop) + 8px + var(--hudH) + 8px);
      z-index:10;
      display:flex;
      align-items:center;
      gap:8px;
      padding:5px 8px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.12);
      background: rgba(2,6,23,.28);
      backdrop-filter: blur(10px);
      color: rgba(148,163,184,.95);
      font-size:11px;
      font-weight:900;
      pointer-events:none;
    }
    #logdot{ width:8px; height:8px; border-radius:50%; background:#9ca3af; }
    #logtext{ white-space:nowrap; }

    /* ---------- Aim/Vortex + Beacon ---------- */
    #stun-vortex{
      position:fixed;
      left:50%; top:62%;
      transform: translate(-50%,-50%);
      width: 54px; height:54px;
      border-radius:999px;
      border:2px solid rgba(239,68,68,.0);
      box-shadow: 0 0 0 0 rgba(239,68,68,.0);
      z-index:9;
      pointer-events:none;
      opacity:0;
      transition: opacity .12s ease;
    }
    #stun-vortex.show{
      opacity:1;
      border-color: rgba(239,68,68,.45);
      box-shadow: 0 0 0 10px rgba(239,68,68,.12);
    }
    #stun-vortex.lock{ animation: lockPulse .9s ease-out 1; }
    @keyframes lockPulse{
      0%{ transform: translate(-50%,-50%) scale(1); opacity:1; }
      60%{ transform: translate(-50%,-50%) scale(1.35); opacity:1; }
      100%{ transform: translate(-50%,-50%) scale(1.05); opacity:.85; }
    }

    #boss-beacon{
      position:fixed;
      left:50%; top:50%;
      transform: translate(-50%,-50%);
      width: 58px; height:58px;
      border-radius:999px;
      border:2px solid rgba(245,158,11,.55);
      box-shadow: 0 0 0 10px rgba(245,158,11,.14);
      z-index:9;
      pointer-events:none;
      opacity:0;
      transition: opacity .12s ease;
    }
    #boss-beacon.show{ opacity:1; }

    /* ---------- Boss HUD ---------- */
    #boss-wrap{
      position:fixed;
      left:50%;
      top: calc(var(--safeTop) + 8px + var(--hudH) + 42px);
      transform: translateX(-50%);
      z-index:10;
      display:none;
      gap:10px;
      align-items:center;
      padding:5px 8px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.12);
      background: rgba(2,6,23,.28);
      backdrop-filter: blur(10px);
      color: rgba(148,163,184,.95);
      font-size:11px;
      font-weight:1100;
    }
    #boss-wrap.show{ display:flex; }
    .bossbar{
      width: 150px;
      height:9px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.12);
      background: rgba(148,163,184,.08);
      overflow:hidden;
      position:relative;
    }
    #boss-fill{
      position:absolute; inset:0 auto 0 0;
      width:0%;
      background: linear-gradient(90deg, rgba(239,68,68,.9), rgba(245,158,11,.85));
      border-radius:999px;
    }

    /* ---------- Summary overlay ---------- */
    #sum-overlay{
      position:fixed; inset:0;
      z-index:40;
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px 14px;
      background: rgba(2,6,23,.78);
      backdrop-filter: blur(14px);
    }
    #sum-overlay.show{ display:flex; }
    .sumCard{
      width:min(720px, 100%);
      border-radius:26px;
      border:1px solid rgba(148,163,184,.18);
      background: rgba(2,6,23,.70);
      box-shadow: 0 18px 70px rgba(0,0,0,.45);
      padding: 16px;
    }
    .sumTitle{ font-size:22px; font-weight:1200; margin:0 0 10px; }
    .grid{
      display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap:10px;
      margin-top:10px;
    }
    .stat{
      border:1px solid rgba(148,163,184,.12);
      background: rgba(15,23,42,.32);
      border-radius:18px;
      padding: 12px 12px;
    }
    .stat .k{
      font-size:11px;
      color: rgba(148,163,184,.95);
      font-weight:1100;
      letter-spacing:.08em;
    }
    .stat .v{
      margin-top:6px;
      font-size:26px;
      font-weight:1200;
      line-height:1;
    }
    .sumActions{
      display:flex;
      gap:10px;
      justify-content:flex-end;
      flex-wrap:wrap;
      margin-top:12px;
    }

    @media (max-width: 420px){
      .hud-right{ width: min(210px, 52vw); }
      .grid{ grid-template-columns: 1fr; }
    }
  </style>
</head>

<body>

  <!-- A-Frame bg -->
  <div class="sceneWrap" aria-hidden="true">
    <a-scene embedded renderer="antialias: true; colorManagement: true" vr-mode-ui="enabled: true">
      <a-entity id="gj-camera" camera position="0 1.6 0" look-controls="enabled:true"></a-entity>
      <a-sky color="#050b1a"></a-sky>
      <a-entity light="type: ambient; intensity: 0.8"></a-entity>
      <a-entity light="type: directional; intensity: 0.6" position="1 2 1"></a-entity>
    </a-scene>
  </div>

  <!-- DOM game cam wrapper for shake/kick -->
  <div id="game-cam" aria-hidden="true"></div>

  <!-- Gameplay DOM layer -->
  <div id="gj-layer" aria-label="GoodJunk gameplay layer"></div>

  <!-- FX -->
  <div id="fx-chroma" aria-hidden="true"></div>

  <!-- HUD TOP -->
  <div id="hud-pill" class="hud-top" title="‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠ Peek HUD 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ">
    <div class="hud-group" style="min-width:0">
      <div class="pill">
        <span class="dot"></span>
        <span style="font-weight:1100;font-size:12px;letter-spacing:.06em;">MODE</span>
        <span style="opacity:.65">‚Ä¢</span>
        <span style="font-weight:1100;font-size:12px;">GOODJUNK</span>
        <span style="opacity:.65">‚Ä¢</span>
        <span id="hud-run-label" style="font-weight:1100;font-size:12px;">PLAY</span>
      </div>
    </div>

    <div class="hud-group">
      <div class="pill"><div class="kv"><div class="label">SCORE</div><div class="big" id="hud-score">0</div></div></div>
      <div class="pill"><div class="kv"><div class="label">COMBO MAX</div><div class="big" id="hud-combo">0</div></div></div>
      <div class="pill"><div class="kv"><div class="label">MISS</div><div class="big" id="hud-miss">0</div></div></div>
    </div>
  </div>

  <!-- meta pills -->
  <div class="hud-meta" aria-hidden="true">
    <div class="meta-pill">DIFF <b id="hud-diff-label">‚Äî</b></div>
    <div class="meta-pill">CH <b id="hud-challenge-label">‚Äî</b></div>
    <div class="meta-pill">TIME <b id="hud-time-label">‚Äî</b></div>
  </div>

  <!-- logger badge -->
  <div id="logBadge" aria-hidden="true">
    <span id="logdot"></span>
    <span id="logtext">logger: ‚Äî</span>
  </div>

  <!-- judge label -->
  <div id="hud-judge">&nbsp;</div>

  <!-- fever/shield panel -->
  <div class="hud-right" id="hud-right" title="‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠ Peek HUD 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ">
    <div class="card">
      <div class="row">
        <h4>üî• FEVER</h4>
        <div class="pct" id="fever-pct">0%</div>
      </div>
      <div class="bar"><i id="fever-fill"></i></div>
      <div id="hud-stun">‚ö° STUN</div>
    </div>

    <div class="card">
      <div class="row">
        <h4>üõ°Ô∏è SHIELD</h4>
        <div id="shield-count">0</div>
      </div>
      <div style="margin-top:8px; display:flex; gap:10px; justify-content:flex-end;">
        <button id="btn-vr" style="padding:9px 10px; border-radius:14px; font-weight:1100;">Enter VR</button>
      </div>
    </div>
  </div>

  <!-- boss HUD -->
  <div id="boss-wrap">
    <span style="opacity:.85">BOSS</span>
    <div class="bossbar"><i id="boss-fill"></i></div>
    <span id="boss-phase">P1</span>
  </div>

  <!-- coach bubble -->
  <div id="coach-bubble" aria-live="polite">
    <div id="coach-emoji" style="background-image:url('./img/coach-neutral.png')"></div>
    <div id="coach-text">‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏•‡∏∏‡∏¢! ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡∏≠‡∏á‡∏î‡∏µ ‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏Ç‡∏¢‡∏∞‡∏ô‡∏∞ üí™</div>
  </div>

  <!-- quest HUD bottom -->
  <div class="hud-bottom" id="hud-quest-wrap" title="‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠ peek 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ">
    <div class="qtitle" id="hud-quest-main">Goal: ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‚Ä¶</div>
    <div class="qline">
      <div class="qbar"><i id="hud-quest-main-bar"></i></div>
      <div class="qcap" id="hud-quest-main-caption"></div>
    </div>

    <div style="height:8px"></div>

    <div class="qtitle" id="hud-quest-mini">Mini: ‚Äî</div>
    <div class="qline">
      <div class="qbar"><i id="hud-quest-mini-bar"></i></div>
      <div class="qcap" id="hud-quest-mini-caption"></div>
    </div>

    <div id="hud-quest-hint"></div>
    <div id="hud-mini-count"></div>
  </div>

  <!-- aim helpers -->
  <div id="stun-vortex" aria-hidden="true"></div>
  <div id="boss-beacon" aria-hidden="true"></div>

  <!-- START overlay -->
  <div id="start-overlay">
    <div class="startCard">
      <h1 class="startTitle">GoodJunk VR ü•¶üóëÔ∏è</h1>
      <p id="start-sub">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å + ‡πÇ‡∏´‡∏°‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡∏ô‡∏™‡πå ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏° 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‚úÖ</p>

      <div class="controls">
        <select id="sel-diff" aria-label="difficulty">
          <option value="easy">easy</option>
          <option value="normal" selected>normal</option>
          <option value="hard">hard</option>
        </select>

        <select id="sel-challenge" aria-label="challenge">
          <option value="rush" selected>rush</option>
          <option value="boss">boss</option>
          <option value="survival">survival</option>
        </select>
      </div>

      <div class="btnRow">
        <button id="btn-start-2d" class="primary">‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô (2D)</button>
        <button id="btn-start-vr">ü•Ω ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô (VR)</button>
      </div>

      <div id="start-countdown" class="countdown-hidden">3</div>
    </div>
  </div>

  <!-- SUMMARY overlay -->
  <div id="sum-overlay" aria-hidden="true">
    <div class="sumCard">
      <div class="sumTitle">‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô</div>

      <div class="grid">
        <div class="stat"><div class="k">SCORE</div><div class="v" id="sum-score">0</div></div>
        <div class="stat"><div class="k">COMBO MAX</div><div class="v" id="sum-combo">0</div></div>
        <div class="stat"><div class="k">GOOD HITS</div><div class="v" id="sum-good">0</div></div>
        <div class="stat"><div class="k">MISS</div><div class="v" id="sum-miss">0</div></div>
      </div>

      <div class="sumActions">
        <button id="btn-exit">‚Ü©Ô∏è ‡πÄ‡∏°‡∏ô‡∏π</button>
        <button id="btn-replay" class="primary">üîÅ ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
      </div>
    </div>
  </div>

  <!-- Layout helper (no game logic touch) -->
  <script>
    (function(){
      const body = document.body;
      const q = document.getElementById('hud-quest-wrap');
      const top = document.getElementById('hud-pill');
      const right = document.getElementById('hud-right');

      const b2d = document.getElementById('btn-start-2d');
      const bvr = document.getElementById('btn-start-vr');

      function peek(){
        body.classList.add('hha-peek');
        clearTimeout(window.__hhaPeekT);
        window.__hhaPeekT = setTimeout(()=> body.classList.remove('hha-peek'), 2000);
      }

      if (q) q.addEventListener('click', peek, { passive:true });
      if (top) top.addEventListener('click', peek, { passive:true });
      if (right) right.addEventListener('click', peek, { passive:true });

      function makeCompact(){
        body.classList.add('hha-compact');
        // peek once right after start so player sees HUD then it shrinks
        peek();
      }
      if (b2d) b2d.addEventListener('click', makeCompact, { passive:true });
      if (bvr) bvr.addEventListener('click', makeCompact, { passive:true });

      window.addEventListener('hha:end', ()=> {
        body.classList.remove('hha-compact');
        body.classList.remove('hha-peek');
      });
    })();
  </script>

</body>
</html>