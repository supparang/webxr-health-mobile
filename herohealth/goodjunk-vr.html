<!-- === /herohealth/goodjunk-vr.html ===
GoodJunkVR LAUNCHER ‚Äî PRODUCTION (ROOT -> FOLDER RUN)
‚úÖ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å PC/Mobile/Cardboard(cVR)/VR
‚úÖ ‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠ hub/run/diff/time/seed/pid/study/phase/cond
‚úÖ ‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏° Open RUN
-->
<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>HeroHealth ‚Äî GoodJunkVR (Launcher)</title>
  <meta name="color-scheme" content="dark"/>
  <link rel="icon" href="./favicon.ico"/>

  <style>
    :root{
      --bg1:#020617; --bg2:#0b1226;
      --panel: rgba(2,6,23,.62);
      --panel2: rgba(15,23,42,.66);
      --stroke: rgba(148,163,184,.18);
      --text:#e5e7eb; --muted:#94a3b8;
      --radius:18px;
      --sat: env(safe-area-inset-top, 0px);
      --sar: env(safe-area-inset-right, 0px);
      --sab: env(safe-area-inset-bottom, 0px);
      --sal: env(safe-area-inset-left, 0px);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans Thai", "Noto Sans", Arial;
      background:
        radial-gradient(1200px 700px at 12% 10%, rgba(34,197,94,.15), transparent 55%),
        radial-gradient(1000px 600px at 85% 18%, rgba(34,211,238,.12), transparent 55%),
        radial-gradient(900px 520px at 55% 92%, rgba(167,139,250,.10), transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      overflow:hidden;
    }
    .wrap{
      min-height:100%;
      padding: calc(14px + var(--sat)) calc(14px + var(--sar)) calc(18px + var(--sab)) calc(14px + var(--sal));
      display:flex; align-items:center; justify-content:center;
    }
    .card{
      width:min(920px, 96vw);
      background: linear-gradient(180deg, var(--panel), var(--panel2));
      border:1px solid var(--stroke);
      border-radius: 22px;
      box-shadow: 0 18px 60px rgba(0,0,0,.45);
      padding: 16px;
    }
    .top{
      display:flex; flex-wrap:wrap; gap:10px; align-items:flex-start; justify-content:space-between;
      margin-bottom: 12px;
    }
    .title{
      display:flex; flex-direction:column; gap:4px;
    }
    .title h1{ margin:0; font-size:18px; letter-spacing:.2px; font-weight:1000; }
    .title p{ margin:0; color:var(--muted); font-size:13px; line-height:1.35; }
    .grid{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap: 12px;
    }
    @media (max-width: 820px){ .grid{ grid-template-columns: 1fr; } }
    .panel{
      border:1px solid var(--stroke);
      border-radius: 18px;
      padding: 12px;
      background: rgba(2,6,23,.40);
    }
    .row{ display:flex; flex-wrap:wrap; gap:10px; align-items:center; }
    label{ font-size:12px; color:var(--muted); font-weight:900; letter-spacing:.2px; }
    select,input{
      width:100%;
      padding: 10px 10px;
      border-radius: 12px;
      border:1px solid rgba(148,163,184,.22);
      background: rgba(2,6,23,.50);
      color: var(--text);
      outline: none;
    }
    .field{ display:flex; flex-direction:column; gap:6px; flex:1 1 180px; min-width: 180px; }
    .btns{ display:flex; flex-wrap:wrap; gap:10px; justify-content:flex-end; }
    button{
      border:1px solid rgba(148,163,184,.22);
      background: rgba(2,6,23,.45);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 12px;
      font-weight: 1000;
      cursor:pointer;
    }
    button.primary{
      background: rgba(34,197,94,.18);
      border-color: rgba(34,197,94,.35);
    }
    button.warn{
      background: rgba(245,158,11,.16);
      border-color: rgba(245,158,11,.32);
    }
    .preview{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 12px;
      color: rgba(229,231,235,.88);
      background: rgba(2,6,23,.45);
      border:1px dashed rgba(148,163,184,.22);
      border-radius: 14px;
      padding: 10px;
      overflow:auto;
      max-height: 180px;
      white-space: pre-wrap;
      word-break: break-word;
    }
    .hint{ margin-top:10px; color: var(--muted); font-size:12.5px; line-height:1.4; }
    .chips{ display:flex; flex-wrap:wrap; gap:8px; margin-top:10px; }
    .chip{
      padding: 6px 10px;
      border-radius: 999px;
      border:1px solid rgba(148,163,184,.18);
      background: rgba(2,6,23,.40);
      font-size: 12px;
      color: rgba(229,231,235,.86);
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="top">
        <div class="title">
          <h1>üçÄ GoodJunkVR</h1>
          <p>Launcher (ROOT) ‚Üí RUN ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå <b>/herohealth/vr-goodjunk/goodjunk-vr.html</b></p>
        </div>
        <div class="btns">
          <button id="btnRandSeed" class="warn" type="button">‡∏™‡∏∏‡πà‡∏° Seed</button>
          <button id="btnOpen" class="primary" type="button">‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏•‡πà‡∏ô</button>
        </div>
      </div>

      <div class="grid">
        <div class="panel">
          <div class="row">
            <div class="field">
              <label>VIEW</label>
              <select id="fView">
                <option value="pc">PC</option>
                <option value="mobile">Mobile</option>
                <option value="cvr">Cardboard (cVR)</option>
                <option value="vr">VR (WebXR)</option>
              </select>
            </div>
            <div class="field">
              <label>RUN MODE</label>
              <select id="fRun">
                <option value="play">play</option>
                <option value="research">research</option>
              </select>
            </div>
            <div class="field">
              <label>DIFFICULTY</label>
              <select id="fDiff">
                <option value="easy">easy</option>
                <option value="normal" selected>normal</option>
                <option value="hard">hard</option>
              </select>
            </div>
          </div>

          <div class="row" style="margin-top:10px;">
            <div class="field">
              <label>TIME (sec)</label>
              <input id="fTime" type="number" min="20" max="300" value="80"/>
            </div>
            <div class="field">
              <label>SEED</label>
              <input id="fSeed" type="text" value=""/>
            </div>
            <div class="field">
              <label>PID</label>
              <input id="fPid" type="text" value="anon"/>
            </div>
          </div>

          <div class="row" style="margin-top:10px;">
            <div class="field">
              <label>HUB (return)</label>
              <input id="fHub" type="text" value="./hub.html"/>
            </div>
            <div class="field">
              <label>STUDY ID</label>
              <input id="fStudy" type="text" value=""/>
            </div>
            <div class="field">
              <label>PHASE / COND</label>
              <div class="row" style="gap:8px;">
                <input id="fPhase" type="text" placeholder="phase" style="flex:1 1 110px; min-width:110px;"/>
                <input id="fCond"  type="text" placeholder="cond"  style="flex:1 1 110px; min-width:110px;"/>
              </div>
            </div>
          </div>

          <div class="chips">
            <span class="chip">‚úÖ Launcher = ROOT</span>
            <span class="chip">‚úÖ Run = FOLDER</span>
            <span class="chip">‚úÖ No-dup engine</span>
            <span class="chip">‚úÖ Pass-through params</span>
          </div>

          <div class="hint">
            Tips: ‡∏ñ‡πâ‡∏≤‡πÄ‡∏•‡πà‡∏ô‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏•‡∏∑‡∏≠‡∏Å <b>mobile</b> ‡∏´‡∏£‡∏∑‡∏≠ <b>cvr</b>. ‡∏ñ‡πâ‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πâ Enter VR ‡∏à‡∏£‡∏¥‡∏á ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å <b>vr</b> ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡∏Å‡∏î Enter VR ‡πÉ‡∏ô‡πÄ‡∏Å‡∏° (vr-ui.js)
          </div>
        </div>

        <div class="panel">
          <label>RUN URL (preview)</label>
          <div class="preview" id="urlPreview"></div>
          <div class="hint">‡∏ñ‡πâ‡∏≤‡πÅ‡∏Ñ‡∏ä‡πÅ‡∏£‡∏á: ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô seed ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏î‡∏™‡∏∏‡πà‡∏° seed ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö refresh</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const DOC = document;
      const $ = (id)=> DOC.getElementById(id);

      const fView  = $('fView');
      const fRun   = $('fRun');
      const fDiff  = $('fDiff');
      const fTime  = $('fTime');
      const fSeed  = $('fSeed');
      const fPid   = $('fPid');
      const fHub   = $('fHub');
      const fStudy = $('fStudy');
      const fPhase = $('fPhase');
      const fCond  = $('fCond');

      const urlPreview = $('urlPreview');
      const btnOpen = $('btnOpen');
      const btnRandSeed = $('btnRandSeed');

      function qs(k, def=null){
        try { return new URL(location.href).searchParams.get(k) ?? def; }
        catch { return def; }
      }
      function clampNum(v, min, max, def){
        const n = Number(v);
        if(!Number.isFinite(n)) return def;
        return Math.max(min, Math.min(max, n));
      }
      function autoView(){
        const ua = String(navigator.userAgent||'').toLowerCase();
        return /android|iphone|ipad|ipod/.test(ua) ? 'mobile' : 'pc';
      }
      function nowSeed(){ return String(Date.now()); }

      function buildUrl(){
        const base = './vr-goodjunk/goodjunk-vr.html';

        const view = String(fView.value || 'mobile').toLowerCase();
        const run  = String(fRun.value || 'play').toLowerCase();
        const diff = String(fDiff.value || 'normal').toLowerCase();
        const time = clampNum(fTime.value, 20, 300, 80);

        const seed = (fSeed.value || '').trim() || nowSeed();
        const pid  = (fPid.value || 'anon').trim() || 'anon';
        const hub  = (fHub.value || './hub.html').trim() || './hub.html';

        const study = (fStudy.value || '').trim();
        const phase = (fPhase.value || '').trim();
        const cond  = (fCond.value  || '').trim();

        const u = new URL(base, location.href);
        u.searchParams.set('view', view);
        u.searchParams.set('run', run);
        u.searchParams.set('diff', diff);
        u.searchParams.set('time', String(time));
        u.searchParams.set('seed', seed);
        u.searchParams.set('pid', pid);
        u.searchParams.set('hub', hub);

        if(study) u.searchParams.set('studyId', study);
        if(phase) u.searchParams.set('phase', phase);
        if(cond)  u.searchParams.set('conditionGroup', cond);

        // cache-bust
        u.searchParams.set('v', seed);

        return u.toString();
      }

      function syncFromQS(){
        fView.value  = String(qs('view', autoView()) || autoView()).toLowerCase();
        fRun.value   = String(qs('run','play') || 'play').toLowerCase();
        fDiff.value  = String(qs('diff','normal') || 'normal').toLowerCase();
        fTime.value  = String(clampNum(qs('time','80'),20,300,80));
        fSeed.value  = String(qs('seed','') || '');
        fPid.value   = String(qs('pid','anon') || 'anon');
        fHub.value   = String(qs('hub','./hub.html') || './hub.html');
        fStudy.value = String(qs('studyId','') || '');
        fPhase.value = String(qs('phase','') || '');
        fCond.value  = String(qs('conditionGroup','') || '');
      }

      function render(){
        urlPreview.textContent = buildUrl();
      }

      btnOpen.addEventListener('click', ()=>{
        const url = buildUrl();
        location.href = url;
      });

      btnRandSeed.addEventListener('click', ()=>{
        fSeed.value = nowSeed();
        render();
      });

      [fView,fRun,fDiff,fTime,fSeed,fPid,fHub,fStudy,fPhase,fCond].forEach(el=>{
        el.addEventListener('input', render);
        el.addEventListener('change', render);
      });

      syncFromQS();
      render();
    })();
  </script>
</body>
</html>