<!-- === /herohealth/goodjunk-vr.html ===
     GoodJunkVR (PRODUCTION) ‚Äî H+ (LATEST LAYOUT)
     ‚úÖ Ultra-Extreme HUD layout for mobile A15/A54
     ‚úÖ Pin Quest top, Auto-fit quest, Score strip S/M/T, Hide ComboMax on tight
     ‚úÖ Move Fever/Shield to Score card on mobile (and move back on desktop)
     ‚úÖ Quest 2-line compact + mini badge, Critical hides coach
     ‚úÖ Boss overlays: #atk-ring #atk-laser
-->
<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Hero Health ‚Äî GoodJunk VR</title>
  <meta name="color-scheme" content="light dark" />
  <link rel="icon" href="./favicon.ico" type="image/x-icon" />

  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

  <style>
    :root{
      color-scheme: light dark;
      --bg-main:#020617;
      --panel:#020617;
      --panel-soft:#0b1120;
      --accent:#22c55e;
      --accent-soft:rgba(34,197,94,0.18);
      --danger:#f97316;
      --text-main:#e5e7eb;
      --text-soft:#9ca3af;

      --shakeAmp: 0px;
      --shakeDur: 0.24s;

      --kickAmp: 10px;
      --kickRot: 4deg;

      --ringSize: 420px;
      --ringGapStart: 40deg; /* updated by JS */
      --ringGapSize: 70deg;  /* updated by JS */

      --sa-top: env(safe-area-inset-top, 0px);
      --sa-right: env(safe-area-inset-right, 0px);
      --sa-bottom: env(safe-area-inset-bottom, 0px);
      --sa-left: env(safe-area-inset-left, 0px);

      --hudGap: 8px;
      --questScale: 1;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      min-height:100vh;
      font-family:system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background:
        radial-gradient(circle at top left, rgba(56,189,248,0.16), transparent 55%),
        radial-gradient(circle at bottom right, rgba(34,197,94,0.22), transparent 55%),
        var(--bg-main);
      color:var(--text-main);
      overflow:hidden;
    }

    #game-root{
      position:fixed; inset:0;
      z-index:0;
      pointer-events:none;
    }
    #game-cam{
      position:absolute; inset:0;
      transform: translate3d(0,0,0);
      will-change: transform, filter;
      pointer-events:none;
    }

    #game-cam.shake{ animation: gj-shake var(--shakeDur) linear infinite; }
    #game-cam.kick{ animation: gj-kick .22s ease-out 1; }
    #game-cam.shake.kick{
      animation: gj-shake var(--shakeDur) linear infinite, gj-kick .22s ease-out 1;
    }

    @keyframes gj-shake{
      0%   { transform: translate3d(calc(var(--shakeAmp) * 0.15), calc(var(--shakeAmp) * -0.30), 0); }
      20%  { transform: translate3d(calc(var(--shakeAmp) * -0.35), calc(var(--shakeAmp) * 0.25), 0); }
      45%  { transform: translate3d(calc(var(--shakeAmp) * 0.42), calc(var(--shakeAmp) * 0.18), 0); }
      70%  { transform: translate3d(calc(var(--shakeAmp) * -0.28), calc(var(--shakeAmp) * -0.40), 0); }
      100% { transform: translate3d(calc(var(--shakeAmp) * 0.12), calc(var(--shakeAmp) * 0.30), 0); }
    }
    @keyframes gj-kick{
      0%{ transform: translate3d(calc(var(--kickAmp) * 0.55), calc(var(--kickAmp) * -0.45), 0) rotate(calc(var(--kickRot) * -0.7)); }
      45%{ transform: translate3d(calc(var(--kickAmp) * -0.75), calc(var(--kickAmp) * 0.55), 0) rotate(var(--kickRot)); }
      100%{ transform: translate3d(0,0,0) rotate(0deg); }
    }

    /* STUN fire overlay */
    #game-cam.stun-fire::before{
      content:"";
      position:absolute; inset:-12%;
      background:
        radial-gradient(circle at 25% 80%, rgba(255,120,0,0.22), transparent 52%),
        radial-gradient(circle at 55% 85%, rgba(255,200,0,0.18), transparent 55%),
        radial-gradient(circle at 80% 78%, rgba(255,40,0,0.20), transparent 55%),
        radial-gradient(circle at 50% 40%, rgba(255,255,255,0.06), transparent 60%);
      filter: blur(2px) saturate(1.2);
      mix-blend-mode: screen;
      opacity:0;
      animation: firePulse 0.55s ease-in-out infinite;
      pointer-events:none;
    }
    #game-cam.stun-fire::after{
      content:"";
      position:absolute; inset:0;
      border:2px solid rgba(255,120,0,0.45);
      box-shadow: 0 0 0 9999px rgba(2,6,23,0.05) inset;
      opacity:0;
      animation: fireEdge 0.38s linear infinite;
      pointer-events:none;
    }
    @keyframes firePulse{
      0%{ opacity:0.10; transform:translateY(0) scale(1); }
      50%{ opacity:0.28; transform:translateY(-6px) scale(1.02); }
      100%{ opacity:0.12; transform:translateY(0) scale(1); }
    }
    @keyframes fireEdge{
      0%{ opacity:0.20; }
      50%{ opacity:0.52; }
      100%{ opacity:0.20; }
    }

    /* Chromatic overlay */
    #fx-chroma{
      position:absolute; inset:0;
      pointer-events:none;
      opacity:0;
      mix-blend-mode: screen;
      background:
        radial-gradient(circle at 40% 40%, rgba(56,189,248,0.18), transparent 55%),
        radial-gradient(circle at 60% 60%, rgba(249,115,22,0.18), transparent 58%),
        linear-gradient(90deg, rgba(255,0,100,0.06), transparent 40%, rgba(0,255,220,0.06));
      filter: saturate(1.4) contrast(1.1);
    }
    #fx-chroma.show{ animation: chromaFlash .18s ease-out 1; }
    @keyframes chromaFlash{
      0%{ opacity:0.00; transform:scale(1); }
      30%{ opacity:0.55; transform:scale(1.01); }
      100%{ opacity:0.00; transform:scale(1); }
    }
    #fx-chroma.hero{
      background:
        radial-gradient(circle at 50% 60%, rgba(34,197,94,0.18), transparent 58%),
        radial-gradient(circle at 45% 45%, rgba(56,189,248,0.16), transparent 55%),
        linear-gradient(90deg, rgba(34,197,94,0.06), transparent 40%, rgba(56,189,248,0.06));
    }

    /* ===== H+ Boss Attack Overlay: RING ===== */
    #atk-ring{
      position:absolute;
      width: var(--ringSize);
      height: var(--ringSize);
      left: 50%;
      top: 50%;
      transform: translate(-50%,-50%);
      pointer-events:none;
      z-index:7;
      opacity:0;
      filter: drop-shadow(0 0 18px rgba(251,191,36,0.22));
    }
    #atk-ring.show{ opacity:1; animation: ringPulse .22s ease-in-out infinite; }
    @keyframes ringPulse{
      0%{ transform: translate(-50%,-50%) scale(0.995); }
      50%{ transform: translate(-50%,-50%) scale(1.01); }
      100%{ transform: translate(-50%,-50%) scale(0.995); }
    }
    #atk-ring::before{
      content:"";
      position:absolute; inset:0;
      border-radius:999px;
      border: 4px dashed rgba(251,191,36,0.85);
      box-shadow: inset 0 0 18px rgba(251,191,36,0.16);
      opacity:0.95;
    }
    #atk-ring::after{
      content:"";
      position:absolute; inset:-10px;
      border-radius:999px;
      background:
        conic-gradient(
          from var(--ringGapStart),
          rgba(249,115,22,0.24) 0deg,
          rgba(249,115,22,0.24) calc(360deg - var(--ringGapSize)),
          rgba(0,0,0,0) calc(360deg - var(--ringGapSize)),
          rgba(0,0,0,0) 360deg
        );
      -webkit-mask:
        radial-gradient(circle, transparent 54%, #000 56%, #000 64%, transparent 66%);
      mask:
        radial-gradient(circle, transparent 54%, #000 56%, #000 64%, transparent 66%);
      box-shadow: 0 0 22px rgba(249,115,22,0.18);
    }

    /* ===== H+ Boss Attack Overlay: LASER ===== */
    #atk-laser{
      position:absolute;
      left:50%;
      top:50%;
      width: min(92vw, 900px);
      height: 18px;
      transform: translate(-50%,-50%);
      border-radius: 999px;
      background:
        linear-gradient(90deg,
          rgba(56,189,248,0.00),
          rgba(56,189,248,0.25),
          rgba(56,189,248,0.85),
          rgba(56,189,248,0.25),
          rgba(56,189,248,0.00)
        );
      box-shadow: 0 0 26px rgba(56,189,248,0.22);
      opacity:0;
      pointer-events:none;
      z-index:7;
    }
    #atk-laser.warn{
      opacity:0.85;
      animation: laserWarn .12s linear infinite;
    }
    #atk-laser.fire{
      opacity:1;
      height:26px;
      box-shadow: 0 0 36px rgba(56,189,248,0.45);
      filter: saturate(1.25);
      animation: none;
    }
    @keyframes laserWarn{
      0%{ transform: translate(-50%,-50%) scaleY(0.9); opacity:0.65; }
      50%{ transform: translate(-50%,-50%) scaleY(1.05); opacity:0.95; }
      100%{ transform: translate(-50%,-50%) scaleY(0.9); opacity:0.65; }
    }

    a-scene{
      width:100vw; height:100vh;
      position:absolute; inset:0;
      z-index:0;
      pointer-events:auto;
    }

    /* DOM target layer */
    #gj-layer{
      position:absolute; inset:0;
      z-index:5;
      pointer-events:auto;
      touch-action:none;
    }

    /* Emoji sticker feel */
    .gj-target{
      position:absolute;
      transform: translate(-50%,-50%) scale(var(--tScale, 1)) rotate(var(--tRot, 0deg));
      font-size: clamp(48px, 8.4vw, 82px);
      line-height:1;
      user-select:none;
      pointer-events:auto;
      cursor:pointer;
      will-change: transform, left, top, opacity, filter;
      opacity:0;
      filter:
        drop-shadow(0 10px 18px rgba(0,0,0,0.58))
        drop-shadow(0 2px 0 rgba(255,255,255,0.10));
      transition: opacity .18s ease-out, transform .18s ease-out;
    }
    .gj-target.spawn{ opacity:1; }
    .gj-target.gone{ opacity:0; transform:translate(-50%,-50%) scale(0.72) rotate(var(--tRot, 0deg)); }

    .gj-junk{ filter: drop-shadow(0 14px 24px rgba(249,115,22,0.28)) drop-shadow(0 2px 0 rgba(255,255,255,0.08)); }
    .gj-gold{ filter: drop-shadow(0 16px 30px rgba(250,204,21,0.36)) drop-shadow(0 2px 0 rgba(255,255,255,0.10)); }
    .gj-fake{ filter: drop-shadow(0 14px 26px rgba(168,85,247,0.30)) drop-shadow(0 2px 0 rgba(255,255,255,0.09)); }
    .gj-power{ filter: drop-shadow(0 14px 26px rgba(56,189,248,0.32)) drop-shadow(0 2px 0 rgba(255,255,255,0.10)); }
    .gj-boss{
      font-size: clamp(62px, 11vw, 120px);
      filter: drop-shadow(0 20px 34px rgba(250,204,21,0.28)) drop-shadow(0 2px 0 rgba(255,255,255,0.12));
    }

    /* VORTEX */
    #stun-vortex{
      position:absolute;
      width:18px; height:18px;
      border-radius:999px;
      left:50%; top:62%;
      transform:translate(-50%,-50%);
      z-index:6;
      pointer-events:none;
      opacity:0;
    }
    #stun-vortex.show{ opacity:1; }
    #stun-vortex::before{
      content:"";
      position:absolute; inset:-44px;
      border-radius:999px;
      border:2px solid rgba(56,189,248,0.75);
      box-shadow:0 0 18px rgba(56,189,248,0.35), inset 0 0 18px rgba(56,189,248,0.20);
      animation: vortexSpin 1.15s linear infinite;
    }
    #stun-vortex::after{
      content:"";
      position:absolute; inset:-8px;
      border-radius:999px;
      background:rgba(56,189,248,0.95);
      box-shadow:0 0 18px rgba(56,189,248,0.85);
      animation: vortexPulse 0.42s ease-in-out infinite;
    }
    @keyframes vortexSpin{ from{ transform:rotate(0deg); } to{ transform:rotate(360deg);} }
    @keyframes vortexPulse{ 0%{transform:scale(0.9)} 50%{transform:scale(1.12)} 100%{transform:scale(0.9)} }

    /* Boss Beacon */
    #boss-beacon{
      position:absolute;
      left:50%; top:50%;
      width:18px; height:18px;
      border-radius:999px;
      transform:translate(-50%,-50%);
      z-index:7;
      pointer-events:none;
      opacity:0;
    }
    #boss-beacon.show{ opacity:1; }
    #boss-beacon::before{
      content:"";
      position:absolute; inset:-54px;
      border-radius:999px;
      border:2px dashed rgba(251,191,36,0.85);
      box-shadow:0 0 22px rgba(251,191,36,0.20), inset 0 0 18px rgba(251,191,36,0.12);
      animation: beaconSpin 0.9s linear infinite;
    }
    #boss-beacon::after{
      content:"";
      position:absolute; inset:-10px;
      border-radius:999px;
      background:rgba(251,191,36,0.96);
      box-shadow:0 0 22px rgba(251,191,36,0.95);
      animation: beaconPulse 0.28s ease-in-out infinite;
    }
    @keyframes beaconSpin{ from{transform:rotate(0)} to{transform:rotate(360deg)} }
    @keyframes beaconPulse{ 0%{transform:scale(0.86)} 50%{transform:scale(1.18)} 100%{transform:scale(0.86)} }

    /* ===== HUD / Start / Summary ===== */
    .hud-root{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:650;
      display:flex;
      flex-direction:column;
      justify-content:space-between;

      padding-top: calc(10px + var(--sa-top));
      padding-left: calc(10px + var(--sa-left));
      padding-right: calc(10px + var(--sa-right));
      padding-bottom: calc(14px + var(--sa-bottom));
    }

    .hud-top{
      display:grid;
      grid-template-columns: 1.35fr 1fr;
      gap: var(--hudGap);
      align-items:start;
    }

    .hud-card{
      background:linear-gradient(135deg, rgba(15,23,42,0.94), rgba(15,23,42,0.78));
      border-radius:18px;
      padding:8px 10px;
      box-shadow:0 18px 40px rgba(15,23,42,0.65);
      border:1px solid rgba(148,163,184,0.18);
      pointer-events:auto;
      min-width:0;
      max-width:100%;
    }

    .hud-main{ display:flex; gap:10px; align-items:center; margin-bottom:4px; }
    .hud-main-title{ font-size:14px; font-weight:600; letter-spacing:.03em; text-transform:uppercase; color:var(--text-soft); }
    .hud-pill{
      font-size:11px;
      padding:2px 8px;
      border-radius:999px;
      background:rgba(15,118,110,0.2);
      border:1px solid rgba(45,212,191,0.4);
      color:#a5f3fc;
      font-weight:600;
      display:inline-flex;
      align-items:center;
      gap:6px;
    }
    .hud-pill.research{
      background:rgba(37,99,235,0.18);
      border-color:rgba(59,130,246,0.55);
      color:#bfdbfe;
    }

    .hud-metrics{ display:flex; gap:10px; flex-wrap:wrap; align-items:flex-start; }
    .metric{ min-width:92px; }
    .metric-label{ font-size:10px; text-transform:uppercase; letter-spacing:.06em; color:var(--text-soft); }
    .metric-value{ font-size:15px; font-weight:800; margin-top:2px; }
    .metric-value.accent{ color:var(--accent); }
    .metric-value.danger{ color:var(--danger); }

    .hud-quest{ max-width:360px; font-size:12px; }
    .quest-title{ font-size:11px; text-transform:uppercase; letter-spacing:.12em; color:var(--text-soft); margin-bottom:2px; }
    .quest-main-label{ font-size:13px; font-weight:700; }
    .quest-mini-label{ font-size:12px; color:var(--text-soft); margin-top:4px; }
    .quest-progress-wrap{ margin-top:5px; display:flex; flex-direction:column; gap:4px; }
    .quest-bar{ position:relative; width:100%; height:4px; border-radius:999px; background:rgba(15,23,42,0.9); overflow:hidden; }
    .quest-bar-fill{ position:absolute; inset:0; width:0%; border-radius:999px; background:linear-gradient(90deg, var(--accent-soft), var(--accent)); transition:width .18s ease-out; }
    .quest-caption{ font-size:10px; color:var(--text-soft); display:flex; justify-content:space-between; gap:8px; }

    .hud-fever{ margin-top:6px; display:flex; flex-direction:column; gap:6px; }
    .fever-row{ display:flex; align-items:center; gap:8px; }
    .fever-label{ font-size:10px; letter-spacing:.14em; text-transform:uppercase; color:#9ca3af; font-weight:900; }
    .fever-bar{ width:140px; height:6px; border-radius:999px; background:rgba(15,23,42,0.9); overflow:hidden; border:1px solid rgba(148,163,184,0.18); }
    .fever-fill{ height:100%; width:0%; border-radius:999px; background:linear-gradient(90deg, rgba(250,204,21,0.25), rgba(250,204,21,0.95)); transition:width .16s ease-out; }
    .fever-pct{ font-size:10px; color:#fde68a; font-weight:900; min-width:44px; text-align:right; }
    .shield-row{ display:flex; align-items:center; gap:6px; }
    .shield-count{ font-weight:950; color:#93c5fd; }

    #hud-stun{
      display:none; align-items:center; gap:8px;
      font-weight:950; letter-spacing:.10em; text-transform:uppercase; font-size:11px;
      color:#fff7ed;
      background:linear-gradient(135deg, rgba(249,115,22,0.20), rgba(250,204,21,0.14));
      border:1px solid rgba(251,146,60,0.55);
      border-radius:999px;
      padding:4px 10px;
      box-shadow:0 0 22px rgba(249,115,22,0.18);
    }
    #hud-stun.show{ display:inline-flex; }
    #hud-stun .dot{
      width:8px; height:8px; border-radius:999px;
      background:#fb923c;
      box-shadow:0 0 12px rgba(249,115,22,0.85);
      animation: stunDot 0.22s linear infinite;
    }
    @keyframes stunDot{ 0%{transform:scale(1)} 50%{transform:scale(1.25)} 100%{transform:scale(1)} }

    .boss-wrap{ margin-top:6px; display:none; flex-direction:column; gap:4px; }
    .boss-wrap.show{ display:flex; }
    .boss-top{ display:flex; justify-content:space-between; align-items:center; gap:10px; }
    .boss-name{ font-size:11px; font-weight:950; letter-spacing:.10em; text-transform:uppercase; color:#fde68a; }
    .boss-phase{ font-size:11px; font-weight:900; color:#93c5fd; }
    .boss-bar{ height:7px; border-radius:999px; background:rgba(15,23,42,0.9); border:1px solid rgba(148,163,184,0.18); overflow:hidden; }
    .boss-fill{ height:100%; width:0%; border-radius:999px; background:linear-gradient(90deg, rgba(251,191,36,0.22), rgba(251,191,36,0.98)); transition: width .14s ease-out; }

    .hud-bottom{ display:flex; flex-direction:column; align-items:center; gap:8px; padding-bottom:72px; }
    .coach-bubble{
      min-width:60%;
      max-width:680px;
      text-align:left;
      background:radial-gradient(circle at top left, rgba(52,211,153,0.18), transparent 55%), rgba(15,23,42,0.96);
      border-radius:999px;
      padding:8px 14px;
      border:1px solid rgba(52,211,153,0.45);
      font-size:13px;
      display:none;
      align-items:center;
      gap:8px;
      pointer-events:auto;
      position:relative;
      overflow:hidden;
      box-shadow:0 18px 40px rgba(15,23,42,0.65);
    }
    .coach-bubble.show{ display:flex; }
    .coach-emoji{
      width:40px; height:40px;
      border-radius:999px;
      background-size:cover;
      background-position:center;
      flex-shrink:0;
      box-shadow:0 0 12px rgba(16,185,129,0.8);
      animation:coach-idle 1.4s ease-in-out infinite;
    }
    @keyframes coach-idle{
      0%{ transform:translateY(0) scale(1); }
      30%{ transform:translateY(-2px) scale(1.03); }
      60%{ transform:translateY(1px) scale(0.99); }
      100%{ transform:translateY(0) scale(1); }
    }

    .vr-btn{
      position:fixed; right: calc(12px + var(--sa-right)); bottom: calc(16px + var(--sa-bottom)); z-index:653;
      border-radius:999px;
      border:1px solid rgba(56,189,248,0.7);
      padding:8px 14px;
      font-size:12px;
      font-weight:800;
      cursor:pointer;
      background:radial-gradient(circle at top left, rgba(56,189,248,0.35), transparent 55%), rgba(15,23,42,0.96);
      color:#e0f2fe;
      display:inline-flex;
      align-items:center;
      gap:6px;
      box-shadow:0 14px 30px rgba(15,23,42,0.9);
    }
    .vr-btn span{ font-size:16px; }

    .countdown-overlay{
      position:fixed; inset:0;
      display:flex; align-items:center; justify-content:center;
      z-index:655;
      font-size:clamp(3rem, 10vw, 5rem);
      font-weight:900;
      color:#fbbf24;
      text-shadow:0 0 40px rgba(0,0,0,0.85);
      pointer-events:none;
      transition:opacity .25s ease-out, transform .25s ease-out;
    }
    .countdown-hidden{ opacity:0; visibility:hidden; transform:scale(0.8); }

    .start-overlay{
      position:fixed; inset:0;
      z-index:700;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:18px;
      background:radial-gradient(circle at 50% 35%, rgba(34,197,94,0.18), transparent 55%), rgba(2,6,23,0.92);
    }
    .start-card{
      width:min(560px, 96vw);
      border-radius:22px;
      background:linear-gradient(135deg, rgba(15,23,42,0.98), rgba(15,23,42,0.84));
      border:1px solid rgba(148,163,184,0.2);
      box-shadow:0 30px 80px rgba(0,0,0,0.55);
      padding:16px 16px 14px;
      text-align:left;
    }
    .start-title{ font-size:18px; font-weight:950; margin:0 0 6px; letter-spacing:.02em; }
    .start-sub{ margin:0 0 12px; color:var(--text-soft); font-size:13px; line-height:1.35; }
    .start-grid{ display:grid; grid-template-columns:1fr 1fr; gap:10px; }
    .start-label{ font-size:11px; color:var(--text-soft); text-transform:uppercase; letter-spacing:.14em; }
    select{
      width:100%;
      border-radius:12px;
      border:1px solid rgba(30,64,175,0.6);
      background:rgba(15,23,42,0.9);
      padding:7px 9px;
      color:var(--text-main);
      font-size:13px;
      outline:none;
    }
    .start-row{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:flex-end; margin-top:12px; }
    .start-btn{
      border-radius:999px;
      border:1px solid rgba(187,247,208,0.9);
      background:linear-gradient(135deg,#22c55e,#16a34a);
      color:#052e16;
      padding:10px 14px;
      font-weight:950;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:8px;
    }
    .start-btn.secondary{
      border:1px solid rgba(148,163,184,0.6);
      background:rgba(15,23,42,0.86);
      color:var(--text-main);
      font-weight:850;
    }

    .sum-overlay{
      position:fixed; inset:0;
      z-index:800;
      display:none;
      align-items:center;
      justify-content:center;
      padding:18px;
      background:radial-gradient(circle at 50% 35%, rgba(56,189,248,0.12), transparent 55%), rgba(2,6,23,0.92);
    }
    .sum-overlay.show{ display:flex; }
    .sum-card{
      width:min(560px, 96vw);
      border-radius:22px;
      background:linear-gradient(135deg, rgba(15,23,42,0.98), rgba(15,23,42,0.84));
      border:1px solid rgba(148,163,184,0.2);
      box-shadow:0 30px 80px rgba(0,0,0,0.55);
      padding:16px 16px 14px;
      text-align:left;
    }
    .sum-title{ margin:0 0 6px; font-size:18px; font-weight:950; }
    .sum-grid{ display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:10px; }
    .sum-item{
      border:1px solid rgba(148,163,184,0.18);
      border-radius:14px;
      padding:10px;
      background:rgba(2,6,23,0.35);
    }
    .sum-k{ font-size:10px; letter-spacing:.12em; text-transform:uppercase; color:var(--text-soft); }
    .sum-v{ font-size:16px; font-weight:950; margin-top:2px; }
    .sum-row{ display:flex; justify-content:flex-end; gap:10px; margin-top:12px; flex-wrap:wrap; }
    .sum-btn{
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.6);
      background:rgba(15,23,42,0.86);
      color:var(--text-main);
      font-weight:900;
      padding:10px 14px;
      cursor:pointer;
    }
    .sum-btn.primary{
      border-color:rgba(187,247,208,0.9);
      background:linear-gradient(135deg,#22c55e,#16a34a);
      color:#052e16;
    }

    /* =========================
       LATEST LAYOUT PATCH (Ultra-Extreme)
       ========================= */

    /* override inline min-width styles */
    .hud-top > .hud-card[style]{
      min-width:0 !important;
      width:100% !important;
    }

    /* MOBILE flags */
    .hud-root.compact .hud-top{ grid-template-columns: 1fr !important; }
    .hud-root.tight .hud-card{ padding: 7px 9px !important; }

    /* Pin Quest on top always (mobile) */
    .hud-root.compact .hud-top{
      grid-template-areas:
        "quest"
        "score" !important;
    }
    .hud-root.compact .hud-top > .hud-card.hud-quest{ grid-area: quest !important; }
    .hud-root.compact .hud-top > .hud-card:not(.hud-quest){ grid-area: score !important; }

    /* Auto-scale quest only */
    .hud-root.compact .hud-card.hud-quest{
      font-size: calc(12px * var(--questScale)) !important;
      overflow:hidden !important;
    }
    .hud-root.compact .hud-card.hud-quest .quest-title{ font-size: calc(11px * var(--questScale)) !important; }
    .hud-root.compact .hud-card.hud-quest .quest-main-label{ font-size: calc(13px * var(--questScale)) !important; }
    .hud-root.compact .hud-card.hud-quest .quest-mini-label{ font-size: calc(12px * var(--questScale)) !important; }
    .hud-root.compact .hud-card.hud-quest .quest-caption{ font-size: calc(10px * var(--questScale)) !important; }

    /* Rare fallback: allow quest scroll */
    html[data-quest-overflow="1"] .hud-root.compact .hud-card.hud-quest{
      overflow:auto !important;
      -webkit-overflow-scrolling: touch;
      overscroll-behavior: contain;
    }

    /* Move Fever/Shield into score card (mobile) */
    .hud-side-fever{
      margin-top: 8px;
      display:none;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      padding-top: 6px;
      border-top: 1px solid rgba(148,163,184,0.14);
    }
    .hud-root.compact .hud-side-fever{ display:flex; }
    .hud-side-fever .fever-label{ display:none; }
    .hud-side-fever .fever-bar{ width:118px; height:6px; }
    .hud-side-fever .fever-pct{ font-size:10px; font-weight:900; min-width:40px; }
    .hud-side-fever .shield-row{ font-size:10px; }
    .hud-side-fever .shield-row > div:nth-child(2){ display:none; }

    html[data-fever-moved="1"] .hud-card.hud-quest .hud-fever{ display:none !important; }

    /* CRITICAL priority-fit */
    html[data-fit="2"] #hud-quest-hint{ display:none !important; }
    html[data-fit="2"] #boss-wrap{ display:none !important; }
    html[data-fit="2"] #coach-bubble{ display:none !important; }
    html[data-fit="2"] .hud-card.hud-quest .quest-bar{ height: 3px !important; }

    /* ULTRA: Score becomes one-line strip on tight/critical */
    .hud-root.tight .hud-top > .hud-card:not(.hud-quest) .hud-main,
    html[data-fit="2"] .hud-top > .hud-card:not(.hud-quest) .hud-main{ display:none !important; }

    .hud-root.tight .hud-top > .hud-card:not(.hud-quest) div[style*="margin-top:6px"],
    html[data-fit="2"] .hud-top > .hud-card:not(.hud-quest) div[style*="margin-top:6px"]{ display:none !important; }

    .hud-root.tight .hud-top > .hud-card:not(.hud-quest) .hud-metrics,
    html[data-fit="2"] .hud-top > .hud-card:not(.hud-quest) .hud-metrics{
      display:flex !important;
      flex-wrap:nowrap !important;
      align-items:baseline !important;
      justify-content:space-between !important;
      gap:10px !important;
    }
    .hud-root.tight .hud-top > .hud-card:not(.hud-quest) .metric-label,
    html[data-fit="2"] .hud-top > .hud-card:not(.hud-quest) .metric-label{ display:none !important; }

    .hud-root.tight .hud-top > .hud-card:not(.hud-quest) .metric,
    html[data-fit="2"] .hud-top > .hud-card:not(.hud-quest) .metric{
      flex:1 1 0 !important;
      min-width:0 !important;
    }

    /* Hide ComboMax */
    .hud-root.tight .metric.metric-combo,
    html[data-fit="2"] .metric.metric-combo{ display:none !important; }

    /* Prefix S/M/T */
    .hud-root.tight .metric.metric-score .metric-value::before,
    html[data-fit="2"] .metric.metric-score .metric-value::before{
      content:"S "; font-size:11px; font-weight:900; opacity:.75; margin-right:4px;
    }
    .hud-root.tight .metric.metric-miss .metric-value::before,
    html[data-fit="2"] .metric.metric-miss .metric-value::before{
      content:"M "; font-size:11px; font-weight:900; opacity:.75; margin-right:4px;
    }
    .hud-root.tight .metric.metric-time .metric-value::before,
    html[data-fit="2"] .metric.metric-time .metric-value::before{
      content:"T "; font-size:11px; font-weight:900; opacity:.75; margin-right:4px;
    }

    .hud-root.tight #hud-score,
    html[data-fit="2"] #hud-score{ font-size:18px !important; font-weight:950 !important; }
    .hud-root.tight #hud-miss,
    html[data-fit="2"] #hud-miss{ font-size:15px !important; font-weight:900 !important; }
    .hud-root.tight #hud-time-label,
    html[data-fit="2"] #hud-time-label{ font-size:14px !important; font-weight:900 !important; opacity:.95 !important; }

    /* FINAL: Quest 2-line compact + mini badge */
    .hud-root.tight .hud-card.hud-quest,
    html[data-fit="2"] .hud-card.hud-quest{
      padding: 7px 9px !important;
      min-height: 230px !important;
    }
    .hud-root.tight .hud-card.hud-quest .quest-title,
    html[data-fit="2"] .hud-card.hud-quest .quest-title{ display:none !important; }

    .hud-root.tight #hud-quest-hint,
    html[data-fit="2"] #hud-quest-hint{ display:none !important; }

    .hud-root.tight .hud-card.hud-quest .quest-caption span:last-child,
    html[data-fit="2"] .hud-card.hud-quest .quest-caption span:last-child{ display:none !important; }

    .hud-root.tight .hud-card.hud-quest .quest-progress-wrap,
    html[data-fit="2"] .hud-card.hud-quest .quest-progress-wrap{
      display:grid !important;
      grid-template-columns: 1fr auto !important;
      grid-template-areas:
        "bar badge"
        "cap badge" !important;
      gap: 2px 8px !important;
      margin-top: 3px !important;
      align-items:center !important;
    }
    .hud-root.tight .hud-card.hud-quest .quest-bar,
    html[data-fit="2"] .hud-card.hud-quest .quest-bar{
      grid-area: bar !important;
      height: 3px !important;
    }
    .hud-root.tight .hud-card.hud-quest .quest-caption,
    html[data-fit="2"] .hud-card.hud-quest .quest-caption{
      grid-area: cap !important;
      font-size: 9px !important;
      line-height: 1.05 !important;
      opacity: .92 !important;
    }

    #hud-mini-count.hud-mini-badge{
      grid-area: badge !important;
      justify-self:end !important;
      align-self:center !important;
      font-size: 9px !important;
      font-weight: 950 !important;
      letter-spacing: .06em !important;
      text-transform: uppercase !important;
      color:#bfdbfe !important;
      background: rgba(37,99,235,0.16) !important;
      border: 1px solid rgba(59,130,246,0.45) !important;
      border-radius: 999px !important;
      padding: 3px 7px !important;
      line-height: 1 !important;
      white-space: nowrap !important;
    }
  </style>

  <!-- game FX + UI -->
  <script src="./vr/particles.js"></script>
  <script src="./vr/ui-fever.js"></script>
  <script src="./vr/hha-hud.js"></script>
  <script src="./vr/hha-summary.js"></script>
  <script src="./vr/hha-cloud-logger.js"></script>

  <script type="module">
    const $ = (sel) => document.querySelector(sel);

    function setBadge(ok, msg){
      const dot = $('#logdot');
      const text = $('#logtext');
      if (dot) dot.style.background = ok ? '#22c55e' : '#ef4444';
      if (text) text.textContent = msg;
    }

    async function loadBoot(){
      const candidates = [
        './vr-goodjunk/goodjunk-vr.boot.js',
        './vr-goodjunk/goodjunk-vr.boot.mjs',
        './vr-goodjunk/goodjunk.boot.js',
        './vr-goodjunk/goodjunk.safe.js'
      ];

      let lastErr = null;
      for (const p of candidates){
        try{
          const mod = await import(p);
          const bootFn = mod.boot || mod.start || mod.init || mod.default;
          if (typeof bootFn === 'function'){
            setBadge(true, 'boot: ' + p);
            bootFn();
            return;
          }
          lastErr = new Error('Boot loaded but no boot/start/init/default: ' + p);
        }catch(e){ lastErr = e; }
      }
      console.error('[GoodJunk] BOOT LOAD FAILED', lastErr);
      setBadge(false, 'boot failed: ' + (lastErr?.message || 'unknown'));
      const sub = $('#start-sub');
      if (sub) sub.textContent = '‚ùå ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏ö‡∏π‡∏ï‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‚Äî ‡∏ï‡∏£‡∏ß‡∏à path ./vr-goodjunk/goodjunk-vr.boot.js';
    }

    window.addEventListener('load', ()=>{ setBadge(false,'boot: loading‚Ä¶'); loadBoot(); });

    // =========================
    // LATEST HUD Layout Controller (Ultra-Extreme)
    // =========================
    (function(){
      const root = document.documentElement;

      function applyHudClasses(){
        const hud = document.querySelector('.hud-root');
        if (!hud) return;
        const w = window.innerWidth || 0;
        const isMobile = (w <= 430);
        const isTight  = isMobile && (w <= 390); // A15/A54
        hud.classList.toggle('compact', isMobile);
        hud.classList.toggle('tight', isTight);
      }

      function ensureSideFeverBox(){
        const leftCard = document.querySelector('.hud-top > .hud-card:not(.hud-quest)');
        if (!leftCard) return null;
        let box = leftCard.querySelector('.hud-side-fever');
        if (!box){
          box = document.createElement('div');
          box.className = 'hud-side-fever';
          leftCard.appendChild(box);
        }
        return box;
      }

      function moveFeverIfNeeded(){
        const quest = document.querySelector('.hud-card.hud-quest');
        if (!quest) return;

        const w = window.innerWidth || 0;
        const isMobile = (w <= 430);

        const feverWrap = quest.querySelector('.hud-fever');
        if (!feverWrap) return;

        const sideBox = ensureSideFeverBox();
        if (!sideBox) return;

        const feverRow = feverWrap.querySelector('.fever-row') || sideBox.querySelector('.fever-row');
        const shieldRow = feverWrap.querySelector('.shield-row') || sideBox.querySelector('.shield-row');

        if (isMobile){
          if (feverRow && shieldRow){
            sideBox.replaceChildren();
            sideBox.appendChild(feverRow);
            sideBox.appendChild(shieldRow);
            root.dataset.feverMoved = '1';
          }
        } else {
          // MOVE BACK (desktop/tablet)
          const moved = (root.dataset.feverMoved === '1');
          if (moved){
            // put rows back at top of feverWrap (before bossWrap)
            const bossWrap = feverWrap.querySelector('#boss-wrap') || feverWrap.querySelector('.boss-wrap');
            if (feverRow) feverWrap.insertBefore(feverRow, bossWrap || null);
            if (shieldRow) feverWrap.insertBefore(shieldRow, bossWrap || null);
            root.dataset.feverMoved = '0';
          }
        }
      }

      function getQuestMaxHeightPx(){
        const h = window.innerHeight || 0;
        const w = window.innerWidth || 0;
        const isTight = (w <= 390);

        const critical = (root.dataset.fit === '2');
        const moved = (root.dataset.feverMoved === '1');

        // reserve ‡∏•‡∏î‡∏•‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠ critical / moved ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏∑‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà quest
        const bottomReserve =
          critical ? (isTight ? 120 : 128)
                   : (moved ? (isTight ? 148 : 150) : (isTight ? 170 : 160));

        const vh = isTight ? 0.60 : 0.54;

        const saBottom = parseInt(getComputedStyle(document.documentElement)
          .getPropertyValue('--sa-bottom')) || 0;

        return Math.max(230, Math.floor(h * vh) - bottomReserve - saBottom);
      }

      function fits(quest){
        return quest.scrollHeight <= (quest.clientHeight + 1);
      }

      function tryScaleFit(hud, quest, minS, maxS){
        root.dataset.questOverflow = '0';
        hud.style.setProperty('--questScale', maxS.toFixed(3));
        if (fits(quest)) return maxS;

        hud.style.setProperty('--questScale', minS.toFixed(3));
        if (!fits(quest)) return null;

        let lo = minS, hi = maxS, best = minS;
        for (let i=0;i<12;i++){
          const mid = (lo + hi) / 2;
          hud.style.setProperty('--questScale', mid.toFixed(3));
          if (fits(quest)){ best = mid; lo = mid; }
          else hi = mid;
        }
        hud.style.setProperty('--questScale', best.toFixed(3));
        return best;
      }

      function autoFitQuest(){
        const hud = document.querySelector('.hud-root');
        const quest = document.querySelector('.hud-card.hud-quest');
        if (!hud || !quest) return;

        const w = window.innerWidth || 0;
        const isMobile = (w <= 430);
        if (!isMobile){
          hud.style.removeProperty('--questScale');
          quest.style.removeProperty('max-height');
          root.dataset.questOverflow = '0';
          root.dataset.fit = '0';
          return;
        }

        // max height
        quest.style.maxHeight = getQuestMaxHeightPx() + 'px';

        // Layer 0
        root.dataset.fit = '0';
        const s0 = tryScaleFit(hud, quest, (w<=390)?0.82:0.86, 1.02);
        if (s0 !== null) return;

        // Layer 2 (critical)
        root.dataset.fit = '2';
        const s2 = tryScaleFit(hud, quest, (w<=390)?0.72:0.76, 0.98);
        if (s2 !== null) return;

        // fallback scroll
        root.dataset.questOverflow = '1';
        hud.style.setProperty('--questScale', ((w<=390)?0.72:0.76).toFixed(3));
      }

      function applyQuestCompact(){
        const miniCount = document.getElementById('hud-mini-count');
        if (miniCount) miniCount.classList.add('hud-mini-badge');

        const miniLabel = document.getElementById('hud-quest-mini');
        if (miniLabel){
          const t = (miniLabel.textContent || '').trim();
          miniLabel.textContent = t.replace(/^mini:\s*/i, '').replace(/^‡∏°‡∏¥‡∏ô‡∏¥:\s*/i, '');
          if (miniLabel.textContent.length > 40){
            miniLabel.textContent = miniLabel.textContent.slice(0, 38) + '‚Ä¶';
          }
        }

        const mainLabel = document.getElementById('hud-quest-main');
        if (mainLabel){
          const t = (mainLabel.textContent || '').trim();
          if (t.length > 52) mainLabel.textContent = t.slice(0, 50) + '‚Ä¶';
        }
      }

      const refitSoon = (() => {
        let raf = 0;
        return () => {
          if (raf) cancelAnimationFrame(raf);
          raf = requestAnimationFrame(() => {
            raf = 0;
            applyHudClasses();
            moveFeverIfNeeded();
            applyQuestCompact();
            autoFitQuest();
          });
        };
      })();

      root.dataset.fit = root.dataset.fit || '0';
      root.dataset.questOverflow = root.dataset.questOverflow || '0';
      root.dataset.feverMoved = root.dataset.feverMoved || '0';
      root.dataset.boss = root.dataset.boss || '0';

      window.addEventListener('load', refitSoon, { passive:true });
      window.addEventListener('resize', refitSoon, { passive:true });
      window.addEventListener('orientationchange', refitSoon, { passive:true });

      window.addEventListener('quest:update', () => { applyQuestCompact(); refitSoon(); }, { passive:true });
      window.addEventListener('hha:fever', refitSoon, { passive:true });

      window.addEventListener('hha:score', (e)=>{
        const d = e?.detail || {};
        root.dataset.boss = d.bossAlive ? '1' : '0';
        refitSoon();
      }, { passive:true });

      // Observe quest card once DOM is ready
      window.addEventListener('load', ()=>{
        const questCard = document.querySelector('.hud-card.hud-quest');
        if (!questCard) return;
        const mo = new MutationObserver(refitSoon);
        mo.observe(questCard, { childList:true, subtree:true, characterData:true });
        if (window.ResizeObserver){
          const ro = new ResizeObserver(refitSoon);
          ro.observe(questCard);
        }
      }, { passive:true });

      setTimeout(refitSoon, 120);
      setTimeout(refitSoon, 520);
    })();
  </script>
</head>

<body>
  <div id="game-root">
    <div id="game-cam">
      <a-scene embedded vr-mode-ui="enabled: false" renderer="colorManagement: true; physicallyCorrectLights: true">
        <a-entity id="gj-camera" camera look-controls="enabled: true" position="0 1.6 0"></a-entity>
        <a-entity light="type: ambient; intensity: 1.0"></a-entity>
        <a-entity light="type: directional; intensity: 0.7" position="1 2 1"></a-entity>
        <a-sky color="#061225"></a-sky>
      </a-scene>

      <div id="gj-layer" aria-label="GoodJunk Targets Layer"></div>

      <div id="stun-vortex" aria-hidden="true"></div>
      <div id="boss-beacon" aria-hidden="true"></div>

      <!-- H+ overlays -->
      <div id="atk-ring" aria-hidden="true"></div>
      <div id="atk-laser" aria-hidden="true"></div>

      <div id="fx-chroma" aria-hidden="true"></div>
    </div>
  </div>

  <!-- HUD -->
  <div class="hud-root" aria-label="HUD">
    <div class="hud-top">
      <!-- SCORE / METRICS -->
      <div class="hud-card">
        <div class="hud-main">
          <div class="hud-main-title">GOODJUNK</div>
          <div class="hud-pill" id="hud-pill"><span>‚óè</span><span id="hud-run-label">PLAY</span></div>
          <div id="hud-stun"><span class="dot"></span><span>STUN</span></div>
        </div>

        <div class="hud-metrics">
          <div class="metric metric-score">
            <div class="metric-label">Score</div>
            <div class="metric-value accent" id="hud-score">0</div>
          </div>

          <div class="metric metric-combo">
            <div class="metric-label">Combo Max</div>
            <div class="metric-value" id="hud-combo">0</div>
          </div>

          <div class="metric metric-miss">
            <div class="metric-label">Miss</div>
            <div class="metric-value danger" id="hud-miss">0</div>
          </div>

          <div class="metric metric-time">
            <div class="metric-label">Time</div>
            <div class="metric-value" id="hud-time-label">‚Äî</div>
          </div>
        </div>

        <div style="margin-top:6px; font-size:11px; color:var(--text-soft);">
          Diff: <b id="hud-diff-label">NORMAL</b> ‚Ä¢ Challenge: <b id="hud-challenge-label">RUSH</b>
          <span style="margin-left:8px;">|</span>
          <span id="hud-judge" style="margin-left:8px; font-weight:900;">&nbsp;</span>
        </div>
      </div>

      <!-- QUEST -->
      <div class="hud-card hud-quest">
        <div class="quest-title">Quest</div>

        <div class="quest-main-label" id="hud-quest-main">‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏´‡∏•‡∏±‡∏Å</div>
        <div class="quest-progress-wrap">
          <div class="quest-bar"><div class="quest-bar-fill" id="hud-quest-main-bar"></div></div>
          <div class="quest-caption">
            <span id="hud-quest-main-caption">0 / 0</span>
            <span id="hud-quest-hint"></span>
          </div>
        </div>

        <div class="quest-mini-label" id="hud-quest-mini">Mini: ‚Äî</div>
        <div class="quest-progress-wrap">
          <div class="quest-bar"><div class="quest-bar-fill" id="hud-quest-mini-bar"></div></div>
          <div class="quest-caption">
            <span id="hud-quest-mini-caption">0 / 0</span>
            <span id="hud-mini-count">mini ‡∏ú‡πà‡∏≤‡∏ô 0 ‚Ä¢ ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏¢‡∏π‡πà 1</span>
          </div>
        </div>

        <!-- Fever/Shield lives here by default; moved to left card on mobile -->
        <div class="hud-fever">
          <div class="fever-row">
            <div class="fever-label">FEVER</div>
            <div class="fever-bar"><div class="fever-fill" id="fever-fill" style="width:0%"></div></div>
            <div class="fever-pct" id="fever-pct">0%</div>
          </div>

          <div class="shield-row">
            <div class="shield-label">üõ°Ô∏è</div>
            <div>Shield</div>
            <div class="shield-count" id="shield-count">0</div>
          </div>

          <div class="boss-wrap" id="boss-wrap">
            <div class="boss-top">
              <div class="boss-name">BOSS</div>
              <div class="boss-phase" id="boss-phase">P1</div>
            </div>
            <div class="boss-bar"><div class="boss-fill" id="boss-fill" style="width:0%"></div></div>
          </div>
        </div>
      </div>
    </div>

    <div class="hud-bottom">
      <div class="coach-bubble" id="coach-bubble">
        <div class="coach-emoji" id="coach-emoji" style="background-image:url('./img/coach-neutral.png')"></div>
        <div style="display:flex; flex-direction:column; gap:2px;">
          <div style="font-size:11px; text-transform:uppercase; letter-spacing:.16em; color:#6ee7b7; font-weight:800;">Coach</div>
          <div id="coach-text">‡πÅ‡∏ï‡∏∞‡∏Ç‡∏≠‡∏á‡∏î‡∏µ! ‡∏´‡∏•‡∏ö junk! ‚ö°</div>
        </div>
      </div>
    </div>
  </div>

  <div class="countdown-overlay countdown-hidden" id="start-countdown">3</div>
  <button class="vr-btn" id="btn-vr" type="button" aria-label="Enter VR"><span>ü•Ω</span> Enter VR</button>

  <div id="logbadge" style="position:fixed; left: calc(10px + var(--sa-left)); bottom: calc(10px + var(--sa-bottom)); z-index:690;
    background:rgba(15,23,42,0.88); border:1px solid rgba(148,163,184,0.22); border-radius:999px;
    padding:6px 10px; font-size:11px; color:#e5e7eb; display:flex; align-items:center; gap:8px;
    pointer-events:none; max-width:92vw; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;">
    <div id="logdot" style="width:8px;height:8px;border-radius:999px;background:#9ca3af;"></div>
    <div id="logtext">boot: loading‚Ä¶</div>
  </div>

  <div class="start-overlay" id="start-overlay">
    <div class="start-card">
      <h1 class="start-title">GoodJunk VR</h1>
      <p class="start-sub" id="start-sub">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å + ‡πÇ‡∏´‡∏°‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡∏ô‡∏™‡πå ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏° 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‚úÖ</p>

      <div class="start-grid">
        <div>
          <div class="start-label">Difficulty</div>
          <select id="sel-diff">
            <option value="easy">Easy</option>
            <option value="normal" selected>Normal</option>
            <option value="hard">Hard</option>
          </select>
        </div>
        <div>
          <div class="start-label">Challenge</div>
          <select id="sel-challenge">
            <option value="rush" selected>Rush</option>
            <option value="boss">Boss</option>
            <option value="survival">Survival</option>
          </select>
        </div>
      </div>

      <div class="start-row">
        <button class="start-btn secondary" id="btn-start-2d" type="button">‚ñ∂ Start 2D</button>
        <button class="start-btn" id="btn-start-vr" type="button">ü•Ω Start VR</button>
      </div>

      <div style="font-size:11px; color:var(--text-soft); margin-top:8px;">
        * ‡πÇ‡∏´‡∏°‡∏î‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡∏à‡∏∞‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏à‡∏≤‡∏Å Hub ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô
      </div>
    </div>
  </div>

  <div class="sum-overlay" id="sum-overlay">
    <div class="sum-card">
      <h2 class="sum-title">üéâ ‡∏à‡∏ö‡πÄ‡∏Å‡∏°‡πÅ‡∏•‡πâ‡∏ß!</h2>
      <div style="color:var(--text-soft); font-size:13px;">‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡∏£‡∏≠‡∏ö‡∏ô‡∏µ‡πâ</div>

      <div class="sum-grid">
        <div class="sum-item"><div class="sum-k">Score</div><div class="sum-v" id="sum-score">0</div></div>
        <div class="sum-item"><div class="sum-k">Good Hits</div><div class="sum-v" id="sum-good">0</div></div>
        <div class="sum-item"><div class="sum-k">Miss</div><div class="sum-v" id="sum-miss">0</div></div>
        <div class="sum-item"><div class="sum-k">Combo Max</div><div class="sum-v" id="sum-combo">0</div></div>
      </div>

      <div class="sum-row">
        <button class="sum-btn" id="btn-replay">üîÅ ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
        <button class="sum-btn primary" id="btn-exit">üè† ‡∏Å‡∏•‡∏±‡∏ö Hub</button>
      </div>
    </div>
  </div>
</body>
</html>