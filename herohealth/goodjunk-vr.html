<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>HeroHealth — GoodJunk (Launcher)</title>
  <meta name="color-scheme" content="dark light" />
  <link rel="icon" href="./favicon.ico" />
</head>
<body>
<script>
(() => {
  'use strict';
  function getQS(){
    try { return new URL(location.href).searchParams; }
    catch { return new URLSearchParams(); }
  }
  const QS = getQS();

  // ✅ Set your hub here (default to hub.html in same folder)
  const HUB = QS.get('hub') || new URL('./hub.html', location.href).toString();

  // ✅ NEXT = actual RUN page for GoodJunk
  const NEXT = new URL('./vr-goodjunk/goodjunk-vr.html', location.href).toString();

  // passthrough all params except next/phase/dur/cdur (gate will handle those)
  const deny = new Set(['next','phase','dur','cdur']);
  const pass = new URLSearchParams();
  QS.forEach((v,k)=>{ if(!deny.has(k)) pass.set(k,v); });

  // build gate url
  const gate = new URL('./quest-gate.html', location.href);
  gate.searchParams.set('phase','warmup');
  gate.searchParams.set('next', NEXT);
  gate.searchParams.set('hub', HUB);

  // carry all original params forward (pid/diff/mode/seed/... etc.)
  pass.forEach((v,k)=> gate.searchParams.set(k,v));

  location.replace(gate.toString());
})();
</script>
</body>
</html>
