<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>HeroHealth — GoodJunkVR Launcher</title>
  <meta name="color-scheme" content="light dark" />
  <link rel="icon" href="./favicon.ico" />

  <style>
    :root{ color-scheme: dark; --bg:#020617; --panel:rgba(15,23,42,.72); --stroke:rgba(148,163,184,.22); --text:#e5e7eb; --muted:#94a3b8; --accent:#22c55e; }
    html,body{ margin:0; height:100%; background: radial-gradient(circle at 20% 15%, rgba(34,211,238,.18), transparent 55%), linear-gradient(180deg,#020617,#020617); color:var(--text); font-family:system-ui,-apple-system,"Segoe UI","Noto Sans Thai",sans-serif; }
    .wrap{ min-height:100%; display:grid; place-items:center; padding:22px; }
    .card{ width:min(720px,94vw); background:var(--panel); border:1px solid var(--stroke); border-radius:22px; padding:18px; box-shadow:0 18px 55px rgba(0,0,0,.45); }
    .h{ font-size:22px; font-weight:1200; }
    .sub{ margin-top:8px; color:var(--muted); font-weight:900; font-size:13px; }
    .row{ margin-top:14px; display:flex; gap:10px; flex-wrap:wrap; }
    .btn{ flex:1; min-width:220px; height:54px; border-radius:16px; border:1px solid rgba(148,163,184,.22); background:rgba(2,6,23,.55); color:var(--text); font-weight:1200; font-size:16px; cursor:pointer; }
    .btn.primary{ border-color:rgba(34,197,94,.35); background:rgba(34,197,94,.14); }
    .meta{ margin-top:12px; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; font-size:12px; color:rgba(229,231,235,.88); background:rgba(2,6,23,.55); border:1px solid rgba(148,163,184,.18); border-radius:14px; padding:10px; overflow:auto; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="h">GoodJunkVR</div>
      <div class="sub">Launcher (root) → ส่งต่อไป <b>/vr-goodjunk/goodjunk.html</b> พร้อมพารามิเตอร์ทั้งหมด</div>

      <div class="row">
        <button class="btn primary" id="btnStart">เริ่มเล่น (Auto)</button>
        <button class="btn" id="btnBack">กลับ HUB</button>
      </div>

      <div class="meta" id="meta">…</div>
    </div>
  </div>

  <script>
    (function(){
      const url = new URL(location.href);
      const hub = url.searchParams.get('hub');

      // ส่งต่อทุก query แบบเดิมเป๊ะ (ไม่แก้ view)
      const runUrl = new URL('./vr-goodjunk/goodjunk.html', location.href);
      for (const [k,v] of url.searchParams.entries()) runUrl.searchParams.set(k, v);

      // ถ้าไม่มี time ให้ default 80
      if(!runUrl.searchParams.get('time')) runUrl.searchParams.set('time','80');
      if(!runUrl.searchParams.get('diff')) runUrl.searchParams.set('diff','normal');
      if(!runUrl.searchParams.get('run'))  runUrl.searchParams.set('run','play');

      document.getElementById('meta').textContent = runUrl.toString();

      document.getElementById('btnStart').addEventListener('click', ()=> location.href = runUrl.toString());
      document.getElementById('btnBack').addEventListener('click', ()=>{
        if(hub) location.href = hub;
        else history.back();
      });

      // auto-redirect ถ้ามาจาก hub แล้วอยากเข้าทันที: ใส่ ?autostart=1
      if(runUrl.searchParams.get('autostart') === '1'){
        location.replace(runUrl.toString());
      }
    })();
  </script>
</body>
</html>