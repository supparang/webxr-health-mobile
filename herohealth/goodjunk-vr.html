<!-- === /herohealth/goodjunk-vr.html ===
GoodJunkVR (PRODUCTION) ‚Äî HHA Standard + VR Compact HUD + VR Toast + Universal VR UI
‚úÖ DOM emoji targets (dual-eye for VR/cVR)
‚úÖ HUD + Quest + Coach + Fever/Shield
‚úÖ Boot gate: engine starts ONLY after pressing "‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô"
‚úÖ Quest Peek (missions visible even when HUD is hidden in VR)
‚úÖ VR compact HUD: Score/Time/Grade (‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢ ‡πÑ‡∏°‡πà‡∏£‡∏Å)
‚úÖ VR toast: low-time warnings + judge warn/bad (‡πÑ‡∏°‡πà‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô‡∏´‡∏±‡∏ß)
‚úÖ Universal VR UI (/vr/vr-ui.js): Enter VR/Exit/Recenter + emits hha:shoot
-->

<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>HeroHealth ‚Äî GoodJunk VR</title>
  <meta name="color-scheme" content="dark" />
  <link rel="icon" href="./favicon.ico" type="image/x-icon" />

  <!-- UI -->
  <link rel="stylesheet" href="./vr-goodjunk/goodjunk-vr.css" />

  <!-- Global FX + Fever + HUD + Logger + Universal VR UI -->
  <script src="./vr/particles.js" defer></script>
  <script src="./vr/ui-fever.js" defer></script>
  <script src="./vr/hha-hud.js" defer></script>
  <script src="./vr/hha-cloud-logger.js" defer></script>
  <script src="./vr/vr-ui.js" defer></script>

  <!-- Boot (ESM) -->
  <script type="module" src="./vr-goodjunk/goodjunk-vr.boot.js"></script>

  <!-- ===== Inline PATCH (safe) ‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡∏¢‡πâ‡∏≤‡∏¢‡πÑ‡∏õ‡πÉ‡∏™‡πà‡πÉ‡∏ô goodjunk-vr.css ‡∏Å‡πá‡πÑ‡∏î‡πâ ===== -->
  <style>
    /* each eye should clip its own targets (important in VR/cVR) */
    .gj-eye{ overflow:hidden; }

    /* when HUD hidden: hide panels (quest peek + compact HUD still shows) */
    body.hud-hidden .hha-hud{ opacity:0; pointer-events:none; }
    body.hud-hidden .hha-fever{ opacity:.88; }

    /* In cVR: disable direct clicking targets (‡∏¢‡∏¥‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠‡∏ú‡πà‡∏≤‡∏ô hha:shoot) */
    body.view-cvr .gj-layer,
    body.view-cvr .gj-target{
      pointer-events:none !important;
    }

    /* ===== Quest Peek show/hide ===== */
    .gj-peek{
      position: fixed;
      left: 50%;
      top: calc(env(safe-area-inset-top, 0px) + 62px);
      transform: translateX(-50%);
      z-index: 118;
      pointer-events: none;
      opacity: 0;
      transition: opacity 140ms ease;
    }
    .gj-peek.show{ opacity: 1; }
    .peek-card{
      width: min(520px, 92vw);
      background: rgba(2,6,23,.68);
      border: 1px solid rgba(148,163,184,.22);
      border-radius: 18px;
      padding: 12px 14px;
      box-shadow: 0 18px 60px rgba(0,0,0,.40);
      backdrop-filter: blur(10px);
      text-align: center;
    }
    .peek-title{ font-weight:1100; font-size:14px; letter-spacing:.2px; }
    .peek-sub, .peek-mini{ margin-top:6px; font-weight:900; color: rgba(229,231,235,.95); }
    .peek-tip{ margin-top:6px; font-size:11px; font-weight:850; color: rgba(148,163,184,.95); }

    /* ===== VR Compact HUD + Toast (‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ id ‡πÉ‡∏´‡πâ boot.js ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÑ‡∏î‡πâ) ===== */
    .vr-compact-hud{
      position: fixed;
      top: calc(env(safe-area-inset-top, 0px) + 10px);
      left: 50%;
      transform: translateX(-50%);
      z-index: 120;
      pointer-events: none;
      display: none;
    }
    body.view-vr .vr-compact-hud,
    body.view-cvr .vr-compact-hud{ display:block; }

    .vrhud-row{ display:flex; gap:8px; align-items:center; }
    .vrhud-pill{
      display:flex; gap:10px; align-items:baseline;
      padding:10px 12px;
      border-radius: 999px;
      background: rgba(2,6,23,.55);
      border: 1px solid rgba(148,163,184,.22);
      box-shadow: 0 14px 50px rgba(0,0,0,.35), 0 0 0 1px rgba(255,255,255,.04) inset;
      backdrop-filter: blur(10px);
      min-width: 110px;
      justify-content: space-between;
    }
    .vrhud-pill span{
      font-size: 11px;
      font-weight: 900;
      color: rgba(148,163,184,.95);
      letter-spacing: .2px;
    }
    .vrhud-pill b{
      font-size: 18px;
      font-weight: 1100;
      color: #e5e7eb;
    }
    .vrhud-pill.time b{ font-variant-numeric: tabular-nums; }

    @keyframes vrPulseGlow{
      0%{ box-shadow: 0 14px 50px rgba(0,0,0,.35), 0 0 0 1px rgba(255,255,255,.04) inset; }
      50%{ box-shadow: 0 14px 50px rgba(0,0,0,.35), 0 0 0 1px rgba(245,158,11,.45) inset, 0 0 22px rgba(245,158,11,.18); }
      100%{ box-shadow: 0 14px 50px rgba(0,0,0,.35), 0 0 0 1px rgba(255,255,255,.04) inset; }
    }
    body.gj-lowtime .vrhud-pill.time{
      border-color: rgba(245,158,11,.40);
      animation: vrPulseGlow 0.9s ease-in-out infinite;
    }

    @keyframes vrTick{
      0%{ transform: translateX(-50%) scale(1); }
      35%{ transform: translateX(-50%) scale(1.015); }
      100%{ transform: translateX(-50%) scale(1); }
    }
    .vr-compact-hud.tick{ animation: vrTick 140ms ease-out 1; }

    .vr-toast{
      position: fixed;
      left: 50%;
      top: calc(env(safe-area-inset-top, 0px) + 60px);
      transform: translateX(-50%);
      z-index: 125;
      pointer-events: none;
    }
    .vr-toast[hidden]{ display:none !important; }
    .vr-toast-card{
      padding: 10px 14px;
      border-radius: 16px;
      font-weight: 1000;
      letter-spacing: .2px;
      background: rgba(2,6,23,.66);
      border: 1px solid rgba(148,163,184,.22);
      box-shadow: 0 18px 60px rgba(0,0,0,.40);
      backdrop-filter: blur(10px);
      color: #e5e7eb;
      max-width: min(520px, 92vw);
      text-align:center;
      line-height: 1.2;
    }
    .vr-toast-card.warn{
      border-color: rgba(245,158,11,.40);
      box-shadow: 0 18px 60px rgba(0,0,0,.40), 0 0 18px rgba(245,158,11,.14);
    }
    .vr-toast-card.bad{
      border-color: rgba(239,68,68,.40);
      box-shadow: 0 18px 60px rgba(0,0,0,.40), 0 0 18px rgba(239,68,68,.12);
    }
  </style>
</head>

<body>
  <!-- ===== HUD ===== -->
  <div class="hha-hud">
    <div class="hud-top">
      <div class="hud-badge">
        <div class="hud-title">GoodJunkVR</div>
        <div class="hud-sub" id="hudMeta">‚Äî</div>

        <div class="viewbar" id="viewbar">
          <button class="pill" id="btnViewPC" type="button">PC</button>
          <button class="pill" id="btnViewMobile" type="button">Mobile</button>
          <button class="pill" id="btnViewVR" type="button">VR</button>
          <button class="pill" id="btnViewCVR" type="button">cVR</button>

          <button class="pill ghost" id="btnPeek" type="button">Missions</button>
          <!-- ‚úÖ IMPORTANT: id ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô btnToggleHUD ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö boot.js -->
          <button class="pill ghost" id="btnToggleHUD" type="button">HUD</button>

          <button class="pill ghost" id="btnEnterFS" type="button">Enter Fullscreen</button>
          <button class="pill ghost" id="btnEnterVR" type="button">Enter VR</button>
        </div>
      </div>

      <div class="hud-stats">
        <div class="hud-stat"><div class="k">Score</div><div class="v" id="hhaScore">0</div></div>
        <div class="hud-stat"><div class="k">Combo</div><div class="v" id="hhaCombo">0</div></div>
        <div class="hud-stat"><div class="k">Miss</div><div class="v" id="hhaMiss">0</div></div>
        <div class="hud-stat"><div class="k">Time</div><div class="v" id="hhaTime">0</div></div>
        <div class="hud-stat grade"><div class="k">Grade</div><div class="v" id="hhaGrade">‚Äî</div></div>
      </div>
    </div>

    <div class="hud-mid">
      <div class="hud-quest">
        <div class="q-row">
          <div class="q-title" id="hudGoalTitle">Goal: ‚Äî</div>
          <div class="q-count" id="hudGoalCount">0/0</div>
        </div>
        <div class="q-row">
          <div class="q-title mini" id="hudMiniTitle">Mini: ‚Äî</div>
          <div class="q-count" id="hudMiniCount">0/0</div>
          <div class="q-timer" id="hudMiniTimer"></div>
        </div>
        <div class="q-progress" id="hudQProgress">Goals 0/0 ‚Ä¢ Minis 0/0</div>
      </div>

      <div class="hud-coach">
        <img id="hudCoachImg" class="coach-img" src="./img/coach-neutral.png" alt="coach" />
        <div class="coach-talk">
          <div class="coach-line" id="hudCoachLine">‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏•‡∏∏‡∏¢! ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡∏≠‡∏á‡∏î‡∏µ ‡∏´‡∏•‡∏µ‡∏Å‡∏Ç‡∏¢‡∏∞ ü•¶üö´</div>
          <div class="coach-sub" id="hudCoachSub">‡πÄ‡∏•‡πá‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡∏¢‡∏¥‡∏á / ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏õ‡πâ‡∏≤‡∏Å‡πá‡πÑ‡∏î‡πâ</div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== Fever/Shield UI ===== -->
  <div class="hha-fever" id="hhaFever">
    <div class="fever-row">
      <div class="fever-label">FEVER</div>
      <div class="fever-bar"><div class="fever-fill" id="feverBar"></div></div>
      <div class="fever-text" id="feverText">0%</div>
    </div>
    <div class="shield-row">
      <div class="shield-label">SHIELD</div>
      <div class="shield-pills" id="shieldPills"></div>
    </div>
  </div>

  <!-- ===== VR Compact HUD (Score/Time/Grade) ===== -->
  <div id="vrCompactHud" class="vr-compact-hud" aria-hidden="true">
    <div class="vrhud-row">
      <div class="vrhud-pill score"><span>SCORE</span><b id="vrScore">0</b></div>
      <div class="vrhud-pill time"><span>TIME</span><b id="vrTime">0</b></div>
      <div class="vrhud-pill grade"><span>GRADE</span><b id="vrGrade">‚Äî</b></div>
    </div>
  </div>

  <!-- ===== VR Toast (warnings) ===== -->
  <div id="vrToast" class="vr-toast" hidden>
    <div id="vrToastText" class="vr-toast-card warn">‚Äî</div>
  </div>

  <!-- ===== Quest Peek (always available) ===== -->
  <div class="gj-peek" id="gjPeek" aria-hidden="true">
    <div class="peek-card">
      <div class="peek-title">üéØ ‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</div>
      <div class="peek-sub" id="gjPeekGoal">Goal: ‚Äî</div>
      <div class="peek-mini" id="gjPeekMini">Mini: ‚Äî</div>
      <div class="peek-tip">Tip: ‡πÇ‡∏´‡∏°‡∏î VR ‡∏ã‡πà‡∏≠‡∏ô HUD ‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏Å‡∏î ‚ÄúMissions‚Äù ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡πÑ‡∏î‡πâ‡∏ï‡∏•‡∏≠‡∏î</div>
    </div>
  </div>

  <!-- ===== Playfield (dual-eye) ===== -->
  <div id="gj-stage" aria-label="playfield">
    <div class="gj-eye eye-l" id="eyeL">
      <div class="gj-layer" id="gj-layer-l" aria-label="targets layer left"></div>
      <div class="gj-crosshair" id="gj-crosshair-l" aria-hidden="true"></div>
      <div class="atk-ring" id="atk-ring-l" aria-hidden="true"></div>
      <div class="atk-laser" id="atk-laser-l" aria-hidden="true"></div>
    </div>

    <div class="gj-eye eye-r" id="eyeR" aria-hidden="true">
      <div class="gj-layer" id="gj-layer-r" aria-label="targets layer right"></div>
      <div class="gj-crosshair" id="gj-crosshair-r" aria-hidden="true"></div>
      <div class="atk-ring" id="atk-ring-r" aria-hidden="true"></div>
      <div class="atk-laser" id="atk-laser-r" aria-hidden="true"></div>
    </div>

    <div id="end-summary"></div>
  </div>

  <!-- ===== Controls ===== -->
  <div class="hha-controls">
    <button id="btnShoot" class="btn-shoot" type="button">‡∏¢‡∏¥‡∏á</button>
  </div>

  <!-- ===== Start Overlay ===== -->
  <div id="startOverlay" class="start-overlay" hidden>
    <div class="start-card">
      <div class="start-title">GoodJunk VR</div>
      <div class="start-desc">
        ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡∏≠‡∏á‡∏î‡∏µ ü•¶ ‡πÅ‡∏•‡∏∞‡∏´‡∏•‡∏µ‡∏Å‡∏Ç‡∏¢‡∏∞ üçü<br/>
        <span class="muted">‡∏ä‡πà‡∏ß‡∏á‡πÅ‡∏£‡∏Å‡∏ô‡∏∏‡πà‡∏° ‡πÜ ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡πÇ‡∏´‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏≠‡∏á</span>
      </div>
      <div class="start-meta" id="startMeta">‚Äî</div>
      <button id="btnStart" class="btn-start" type="button">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô</button>
    </div>
  </div>

  <!-- ===== VR Hint Overlay ===== -->
  <div id="vrHint" class="vr-hint" hidden>
    <div class="vr-card">
      <div class="vr-title">‡πÇ‡∏´‡∏°‡∏î VR/‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ö‡∏≠‡∏£‡πå‡∏î</div>
      <div class="vr-desc">
        ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏´‡∏°‡∏∏‡∏ô‡∏à‡∏≠‡πÄ‡∏õ‡πá‡∏ô <b>‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô</b> ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πâ‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏≤‡∏¢‡∏ï‡∏≤<br/>
        <span class="muted">Tip: ‡∏Å‡∏î ‚ÄúEnter Fullscreen‚Äù ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤ VR/cVR ‡∏à‡∏∞‡∏ô‡∏¥‡πà‡∏á‡∏Å‡∏ß‡πà‡∏≤</span>
      </div>
      <button id="btnVrOk" class="btn-start" type="button">‡πÇ‡∏≠‡πÄ‡∏Ñ</button>
    </div>
  </div>
</body>
</html>