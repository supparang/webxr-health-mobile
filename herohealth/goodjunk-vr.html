<!-- === /herohealth/goodjunk-vr.html ===
GoodJunkVR LAUNCHER ‚Äî ROOT (Production)
‚úÖ Redirects to: ./vr-goodjunk/goodjunk-vr.html
‚úÖ Does NOT override view if ?view= already exists
‚úÖ Pass-through: hub/run/diff/time/seed/studyId/phase/conditionGroup/style/log/telemetry + any extra params
‚úÖ Adds best-effort view=auto only when missing (optional)
-->
<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>HeroHealth ‚Äî GoodJunkVR</title>
  <meta name="color-scheme" content="dark light" />
  <link rel="icon" href="./favicon.ico" />
  <style>
    :root{
      --bg:#020617; --panel:rgba(2,6,23,.78); --stroke:rgba(148,163,184,.18);
      --text:#e5e7eb; --muted:#94a3b8; --accent:#22c55e;
      --radius:22px; --pill:999px;
      --sat: env(safe-area-inset-top, 0px);
    }
    html,body{height:100%;}
    body{
      margin:0; background:radial-gradient(1200px 800px at 50% 20%, rgba(34,197,94,.12), transparent 55%), var(--bg);
      color:var(--text); font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      display:flex; align-items:center; justify-content:center; padding:calc(16px + var(--sat)) 16px 16px;
    }
    .card{
      width:min(720px, 100%);
      background:var(--panel);
      border:1px solid var(--stroke);
      border-radius:var(--radius);
      padding:22px;
      box-shadow:0 18px 70px rgba(0,0,0,.35);
    }
    .top{
      display:flex; gap:12px; align-items:center; justify-content:space-between; flex-wrap:wrap;
    }
    .pill{
      display:inline-flex; gap:8px; align-items:center;
      border:1px solid var(--stroke);
      padding:8px 12px; border-radius:var(--pill);
      background:rgba(15,23,42,.55);
      font-weight:700;
    }
    .muted{color:var(--muted); font-weight:500;}
    .btns{display:flex; gap:10px; flex-wrap:wrap; margin-top:14px;}
    button{
      appearance:none; border:1px solid var(--stroke);
      background:rgba(15,23,42,.55); color:var(--text);
      padding:10px 14px; border-radius:14px; cursor:pointer;
      font-weight:700;
    }
    button.primary{ background:rgba(34,197,94,.18); border-color:rgba(34,197,94,.35); }
    .row{display:flex; gap:12px; flex-wrap:wrap; margin-top:12px;}
    code{
      background:rgba(0,0,0,.25);
      border:1px solid rgba(148,163,184,.18);
      padding:2px 6px; border-radius:10px;
    }
    .small{font-size:13px; line-height:1.45;}
  </style>
</head>

<body>
  <div class="card" role="main" aria-label="GoodJunkVR Launcher">
    <div class="top">
      <div class="pill">ü•¶ GoodJunkVR <span class="muted">Launcher</span></div>
      <div class="muted small" id="meta">redirecting‚Ä¶</div>
    </div>

    <div class="row small">
      <div>Run page: <code>./vr-goodjunk/goodjunk-vr.html</code></div>
      <div>Mode: <code id="mRun">‚Äî</code></div>
      <div>Diff: <code id="mDiff">‚Äî</code></div>
      <div>Time: <code id="mTime">‚Äî</code></div>
      <div>View: <code id="mView">‚Äî</code></div>
    </div>

    <div class="btns">
      <button class="primary" id="btnGo" type="button">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</button>
      <button id="btnCopy" type="button">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ô‡∏µ‡πâ</button>
      <button id="btnHub" type="button">‚Ü© ‡∏Å‡∏•‡∏±‡∏ö HUB</button>
    </div>

    <p class="muted small" style="margin:14px 0 0;">
      ‡∏ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏à‡∏≤‡∏Å HUB ‡∏õ‡∏Å‡∏ï‡∏¥‡∏à‡∏∞‡πÄ‡∏î‡πâ‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏Å‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 0.2 ‡∏ß‡∏¥ (‡∏õ‡∏∏‡πà‡∏°‡∏°‡∏µ‡πÑ‡∏ß‡πâ‡∏Å‡∏±‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ö‡∏•‡πá‡∏≠‡∏Ñ redirect)
    </p>
  </div>

  <script>
    (function(){
      const RUN_PATH = './vr-goodjunk/goodjunk-vr.html';

      const meta = document.getElementById('meta');
      const mRun  = document.getElementById('mRun');
      const mDiff = document.getElementById('mDiff');
      const mTime = document.getElementById('mTime');
      const mView = document.getElementById('mView');

      const btnGo = document.getElementById('btnGo');
      const btnCopy = document.getElementById('btnCopy');
      const btnHub = document.getElementById('btnHub');

      const u = new URL(location.href);
      const p = u.searchParams;

      // --- defaults (only if missing) ---
      if(!p.get('run'))  p.set('run','play');
      if(!p.get('diff')) p.set('diff','normal');
      if(!p.get('time')) p.set('time','80');
      if(!p.get('seed')) p.set('seed', String(Date.now()));

      // IMPORTANT: do NOT override view if provided
      if(!p.get('view')){
        // best effort default ‚Äî safe for downstream boot (it will detect again)
        p.set('view','auto');
      }

      // UI meta
      mRun.textContent  = p.get('run')  || '‚Äî';
      mDiff.textContent = p.get('diff') || '‚Äî';
      mTime.textContent = p.get('time') || '‚Äî';
      mView.textContent = p.get('view') || '‚Äî';

      // build destination URL (pass through everything)
      const dest = new URL(RUN_PATH, u);
      // copy all params (including hub, log, telemetry, studyId, phase, conditionGroup, etc.)
      for(const [k,v] of p.entries()){
        dest.searchParams.set(k, v);
      }

      // Hub button uses hub param if present
      function goHub(){
        const hub = dest.searchParams.get('hub');
        if(hub){
          location.href = hub;
        }else{
          alert('‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏™‡πà ?hub=');
        }
      }
      btnHub?.addEventListener('click', goHub);

      btnCopy?.addEventListener('click', async ()=>{
        try{
          await navigator.clipboard.writeText(location.href);
          meta.textContent = '‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÅ‡∏•‡πâ‡∏ß ‚úÖ';
          setTimeout(()=> meta.textContent = '‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°', 1200);
        }catch(_){
          meta.textContent = '‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ö‡∏•‡πá‡∏≠‡∏Ñ)';
        }
      });

      function go(){
        meta.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏Å‡∏°‚Ä¶';
        location.replace(dest.toString());
      }
      btnGo?.addEventListener('click', go);

      // auto redirect quickly
      setTimeout(go, 220);
    })();
  </script>
</body>
</html>