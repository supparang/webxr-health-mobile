<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>HeroHealth ‚Äî Brush (Launcher)</title>
  <meta name="color-scheme" content="dark light"/>
  <link rel="icon" href="./favicon.ico"/>
  <style>
    /* ‡πÉ‡∏ä‡πâ‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö handwash-vr.html ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏°‡∏ò‡∏µ‡∏° */
    :root{--bg:#020617;--panel:rgba(2,6,23,.72);--panel2:rgba(15,23,42,.55);--stroke:rgba(148,163,184,.18);--text:#e5e7eb;--muted:#94a3b8;--good:#22c55e;--cyan:#22d3ee;--violet:#a78bfa;--warn:#f59e0b;--sat:env(safe-area-inset-top,0px);--sar:env(safe-area-inset-right,0px);--sab:env(safe-area-inset-bottom,0px);--sal:env(safe-area-inset-left,0px);--r:20px}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans Thai",sans-serif}
    a{color:inherit;text-decoration:none}
    .wrap{min-height:100%;padding:calc(16px + var(--sat)) calc(14px + var(--sar)) calc(18px + var(--sab)) calc(14px + var(--sal));max-width:980px;margin:0 auto}
    header{display:flex;gap:12px;align-items:flex-start;justify-content:space-between;flex-wrap:wrap}
    .title{font-weight:1000;letter-spacing:.2px;font-size:22px;margin:0}
    .sub{color:var(--muted);font-size:12px;font-weight:800;margin:6px 0 0 0;max-width:72ch;line-height:1.35}
    .chiprow{display:flex;gap:8px;flex-wrap:wrap}
    .chip{border:1px solid var(--stroke);background:rgba(2,6,23,.35);border-radius:999px;padding:7px 10px;font-size:12px;font-weight:900}
    .chip b{color:#fff}
    .grid{margin-top:14px;display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px}
    @media (max-width: 860px){ .grid{grid-template-columns:repeat(2,minmax(0,1fr));} }
    @media (max-width: 560px){ .grid{grid-template-columns:1fr;} }
    .card{border:1px solid var(--stroke);background:linear-gradient(180deg, rgba(2,6,23,.86), rgba(2,6,23,.55));border-radius:var(--r);padding:14px;box-shadow:0 14px 50px rgba(0,0,0,.35)}
    .card h3{margin:0;font-size:14px;font-weight:1000}
    .card p{margin:6px 0 0 0;color:rgba(229,231,235,.78);font-weight:750;font-size:12px;line-height:1.35}
    .btn{display:flex;gap:10px;align-items:center;justify-content:space-between;border:1px solid var(--stroke);
      background:rgba(2,6,23,.35);padding:12px 12px;border-radius:16px;margin-top:10px;font-weight:1000}
    .btn .k{display:flex;flex-direction:column;gap:3px}
    .btn .k span{font-size:13px}
    .btn .k small{font-size:11px;color:rgba(229,231,235,.70);font-weight:800}
    .pill{border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.06);border-radius:999px;padding:7px 10px;font-size:11px;font-weight:1000;white-space:nowrap}
    .pill.good{border-color:rgba(34,197,94,.35);background:rgba(34,197,94,.14)}
    .pill.cyan{border-color:rgba(34,211,238,.35);background:rgba(34,211,238,.10)}
    .pill.violet{border-color:rgba(167,139,250,.35);background:rgba(167,139,250,.12)}
  </style>
</head>
<body>
<div class="wrap">
  <header>
    <div>
      <h1 class="title">ü™• Brush ‚Äî Launcher</h1>
      <p class="sub">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏•‡πà‡∏ô ‚Ä¢ ‡∏™‡πà‡∏á‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ï‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</p>
    </div>
    <div class="chiprow">
      <div class="chip">run: <b id="cRun">play</b></div>
      <div class="chip">diff: <b id="cDiff">normal</b></div>
      <div class="chip">time: <b id="cTime">80</b>s</div>
      <div class="chip">pid: <b id="cPid">anon</b></div>
    </div>
  </header>

  <div class="grid">
    <div class="card">
      <h3>üñ•Ô∏è PC</h3>
      <p>‡πÄ‡∏°‡∏≤‡∏™‡πå/‡∏Ñ‡∏•‡∏¥‡∏Å</p>
      <a class="btn" id="goPC" href="./vr-brush/brush.html">
        <div class="k"><span>‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏•‡πà‡∏ô (PC)</span><small>view=pc</small></div>
        <span class="pill good">Recommended</span>
      </a>
    </div>

    <div class="card">
      <h3>üì± Mobile</h3>
      <p>‡πÅ‡∏ï‡∏∞‡∏à‡∏≠</p>
      <a class="btn" id="goMobile" href="./vr-brush/brush.html">
        <div class="k"><span>‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏•‡πà‡∏ô (Mobile)</span><small>view=mobile</small></div>
        <span class="pill cyan">Touch</span>
      </a>
    </div>

    <div class="card">
      <h3>üï∂Ô∏è Cardboard / cVR</h3>
      <p>crosshair + tap-to-shoot</p>
      <a class="btn" id="goCVR" href="./vr-brush/brush.html">
        <div class="k"><span>‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏•‡πà‡∏ô (cVR)</span><small>view=cvr</small></div>
        <span class="pill violet">VR</span>
      </a>
    </div>
  </div>
</div>

<script>
(function(){
  'use strict';
  function qs(k,d=''){ try{ return new URL(location.href).searchParams.get(k) ?? d; }catch{ return d; } }
  function clamp(v,min,max){ v=Number(v); if(!Number.isFinite(v)) v=min; return Math.max(min, Math.min(max, v)); }
  function nowSeed(){ return String(Date.now()); }

  const P = {
    run:  String(qs('run','play')).toLowerCase() || 'play',
    diff: String(qs('diff','normal')).toLowerCase() || 'normal',
    time: clamp(qs('time','80'), 20, 300),
    seed: String(qs('seed','') || nowSeed()),
    pid:  String(qs('pid','')).trim() || 'anon',
    view: String(qs('view','')).toLowerCase(),
    log:  String(qs('log','')),
    studyId: String(qs('studyId','')),
    phase: String(qs('phase','')),
    conditionGroup: String(qs('conditionGroup','')),
    hub: String(qs('hub','./hub.html')) || './hub.html'
  };

  document.getElementById('cRun').textContent = P.run;
  document.getElementById('cDiff').textContent = P.diff;
  document.getElementById('cTime').textContent = String(P.time);
  document.getElementById('cPid').textContent = P.pid;

  const LS = 'HHA_LAST_VIEW::brush';
  function remember(v){ try{ localStorage.setItem(LS, v); }catch(_){} }
  function recall(){ try{ return localStorage.getItem(LS)||''; }catch(_){ return ''; } }

  function withCommon(url, view){
    const u = new URL(url, location.href);
    const sp = u.searchParams;
    sp.set('hub', P.hub || './hub.html');
    sp.set('run', P.run);
    sp.set('diff', P.diff);
    sp.set('time', String(P.time));
    sp.set('seed', P.seed);
    sp.set('pid', P.pid);
    sp.set('view', view);
    if(P.log) sp.set('log', P.log);
    if(P.studyId) sp.set('studyId', P.studyId);
    if(P.phase) sp.set('phase', P.phase);
    if(P.conditionGroup) sp.set('conditionGroup', P.conditionGroup);
    return u.toString();
  }

  const runHref = './vr-brush/brush.html';
  const aPC = document.getElementById('goPC');
  const aM  = document.getElementById('goMobile');
  const aV  = document.getElementById('goCVR');

  aPC.href = withCommon(runHref, 'pc');
  aM.href  = withCommon(runHref, 'mobile');
  aV.href  = withCommon(runHref, 'cvr');

  aPC.addEventListener('click', ()=>remember('pc'), {passive:true});
  aM.addEventListener('click',  ()=>remember('mobile'), {passive:true});
  aV.addEventListener('click',  ()=>remember('cvr'), {passive:true});

  const auto = (qs('autostart','0')==='1');
  if(auto){
    const last = P.view || recall() || 'pc';
    location.href = withCommon(runHref, last);
  }
})();
</script>
</body>
</html>