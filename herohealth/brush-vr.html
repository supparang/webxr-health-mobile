<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>HeroHealth ‚Äî BrushVR Launcher</title>
  <meta name="color-scheme" content="dark light" />
  <style>
    :root{
      --bg:#050814; --txt:#e5e7eb; --mut:#94a3b8; --line:rgba(148,163,184,.18);
      --panel:rgba(2,6,23,.72);
    }
    html,body{height:100%;margin:0;background:
      radial-gradient(1200px 800px at 20% 0%, rgba(99,102,241,.18), transparent 55%),
      radial-gradient(900px 700px at 90% 20%, rgba(34,211,238,.14), transparent 55%),
      var(--bg);
      color:var(--txt); font-family:system-ui,-apple-system,"Noto Sans Thai",Segoe UI,Roboto,sans-serif;
    }
    .wrap{min-height:100%;display:grid;place-items:center;padding:18px}
    .card{
      width:min(560px,92vw);
      border:1px solid var(--line);
      border-radius:24px;
      background:var(--panel);
      backdrop-filter:blur(14px);
      box-shadow:0 22px 90px rgba(0,0,0,.45);
      padding:14px;
    }
    .title{font-size:20px;font-weight:1000;margin:0}
    .sub{margin:6px 0 0;color:rgba(229,231,235,.75);font-weight:800}
    .pill{display:inline-flex;align-items:center;gap:8px;margin-top:10px;padding:6px 10px;border:1px solid var(--line);border-radius:999px;background:rgba(2,6,23,.55);color:var(--mut);font-weight:1000}
    .mono{margin-top:12px;padding:10px 12px;border-radius:16px;border:1px solid var(--line);background:rgba(2,6,23,.45);font:900 12px/1.4 ui-monospace,SFMono-Regular,Menlo,monospace;white-space:pre-wrap;word-break:break-word}
    .row{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .btn{
      appearance:none;border:none;border-radius:999px;padding:10px 12px;
      background:rgba(16,185,129,.20); border:1px solid rgba(16,185,129,.35);
      color:rgba(229,231,235,.96); font:1000 12px/1 system-ui,-apple-system,"Noto Sans Thai",Segoe UI,Roboto,sans-serif;
      box-shadow:0 16px 40px rgba(0,0,0,.30); cursor:pointer; text-decoration:none;
      display:inline-flex; align-items:center; justify-content:center;
    }
    .ghost{background:rgba(2,6,23,.55);border-color:rgba(148,163,184,.22)}
    .mut{color:var(--mut)}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1 class="title">ü¶∑ BrushVR Launcher</h1>
      <p class="sub">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏Å‡∏°‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô run page (vr-brush/brush.html)‚Ä¶</p>
      <div class="pill">HeroHealth ¬∑ Hygiene ¬∑ Launcher-only</div>
      <div id="dbg" class="mono">Preparing redirect‚Ä¶</div>
      <div class="row">
        <a id="openNow" class="btn" href="#">‚ñ∂ ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏Å‡∏°‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</a>
        <a id="goHub" class="btn ghost" href="./hub.html">üè∞ ‡∏Å‡∏•‡∏±‡∏ö HUB</a>
      </div>
      <div class="sub mut" style="margin-top:10px">‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà redirect ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡πÉ‡∏´‡πâ‡∏Å‡∏î ‚Äú‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏Å‡∏°‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‚Äù</div>
    </div>
  </div>

  <script>
  (function(){
    'use strict';
    const WIN = window, DOC = document;

    function qs(name, def=''){
      try{ return new URL(location.href).searchParams.get(name) ?? def; }
      catch(_){ return def; }
    }
    function clamp(v,min,max){
      v = Number(v);
      if(!Number.isFinite(v)) v = min;
      return Math.max(min, Math.min(max, v));
    }
    function nowSeed(){ return String(Date.now()); }

    // ---- source params from launcher URL ----
    const p = {
      view: String(qs('view','mobile') || 'mobile').toLowerCase(),
      run:  String(qs('run','play') || 'play').toLowerCase(),
      diff: String(qs('diff','normal') || 'normal').toLowerCase(),
      time: String(clamp(qs('time','80'), 20, 300)),
      seed: String(qs('seed', nowSeed()) || nowSeed()),
      pid:  String(qs('pid','anon') || 'anon'),
      hub:  String(qs('hub','./hub.html') || './hub.html'),
      api:  String(qs('api','') || ''),
      health:String(qs('health','') || ''),
      ai:   String(qs('ai','0') || '0'),
      debug:String(qs('debug','0') || '0')
    };

    // run page target (‡πÉ‡∏ô folder vr-brush)
    // ‚úÖ ‡πÉ‡∏ä‡πâ brush.html ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô
    const target = new URL('./vr-brush/brush.html', location.href);

    // pass-through queries
    Object.entries(p).forEach(([k,v])=>{
      if(v !== '' && v != null) target.searchParams.set(k, v);
    });

    // ‡∏Å‡∏±‡∏ô launcher ‡πÑ‡∏õ‡∏ä‡∏ô flow ‡πÄ‡∏Å‡πà‡∏≤
    target.searchParams.set('launcher', 'brush-vr.html');
    target.searchParams.set('src', 'launcher');

    // debug text
    const dbg = DOC.getElementById('dbg');
    if(dbg){
      dbg.textContent =
`Launcher: ${location.pathname}
Run page:  ${target.pathname}

view=${p.view}
run=${p.run}
diff=${p.diff}
time=${p.time}
seed=${p.seed}
pid=${p.pid}
ai=${p.ai}
debug=${p.debug}`;
    }

    const openNow = DOC.getElementById('openNow');
    if(openNow) openNow.href = target.href;

    const goHub = DOC.getElementById('goHub');
    if(goHub) goHub.href = p.hub || './hub.html';

    // auto redirect (‡πÄ‡∏ö‡∏≤ ‡πÜ)
    setTimeout(function(){
      try{ location.replace(target.href); }catch(_){ /* fallback manual */ }
    }, 220);
  })();
  </script>
</body>
</html>