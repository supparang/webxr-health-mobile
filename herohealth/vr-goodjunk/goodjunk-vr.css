/* === /herohealth/vr-goodjunk/goodjunk-vr.css ===
   GoodJunkVR RUN CSS ‚Äî PRODUCTION
   FULL v20260220-fxHARDEN

   ‚úÖ Layout base (layer + HUD safe helpers)
   ‚úÖ Targets (spawn/expire/gone)
   ‚úÖ FX Layer hardened (#gj-fx) + per-kind bursts + shards + text pop
   ‚úÖ Screen pulse classes (BLOCK/HURT/BOOM/etc.)
*/

:root{
  --sat: env(safe-area-inset-top, 0px);
  --sab: env(safe-area-inset-bottom, 0px);
  --sal: env(safe-area-inset-left, 0px);
  --sar: env(safe-area-inset-right, 0px);

  /* boot computes these */
  --gj-top-safe: 140px;
  --gj-bottom-safe: 140px;

  --bg:#050814;
  --panel: rgba(2,6,23,.72);
  --panel2: rgba(2,6,23,.55);
  --line: rgba(148,163,184,.18);
  --txt: rgba(229,231,235,.94);
  --mut: rgba(148,163,184,.96);

  --good: rgba(34,197,94,.95);
  --bad: rgba(239,68,68,.95);
  --warn: rgba(250,204,21,.95);
  --cyan: rgba(56,189,248,.95);
  --purple: rgba(168,85,247,.95);
  --orange: rgba(249,115,22,.95);
}

html,body{
  height:100%;
  margin:0;
  background:
    radial-gradient(1200px 800px at 20% 0%, rgba(99,102,241,.18), transparent 55%),
    radial-gradient(900px 700px at 90% 20%, rgba(34,211,238,.14), transparent 55%),
    var(--bg);
  color:var(--txt);
  font-family: system-ui, -apple-system, "Noto Sans Thai", "Prompt", "Segoe UI", sans-serif;
  overscroll-behavior:none;
}

body.gj{ min-height:100%; }

/* ---------------- layers ---------------- */
.gj-layer{
  position:fixed;
  left:0; right:0;
  top:0; bottom:0;
  padding-left: var(--sal);
  padding-right: var(--sar);
  padding-top: 0;
  padding-bottom: 0;
  z-index: 20;
  overflow:hidden;
  touch-action: manipulation;
}

/* right-eye layer for cVR */
.gj-layer-r{
  z-index: 19;
  opacity: .98;
  pointer-events:auto;
}

/* ---------------- targets ---------------- */
.gj-target{
  position:absolute;
  transform: translate(-50%, -50%) scale(1);
  user-select:none;
  -webkit-user-select:none;
  cursor:pointer;
  filter: drop-shadow(0 10px 22px rgba(0,0,0,.45));
  transition: transform 120ms ease, opacity 120ms ease, filter 120ms ease;
  will-change: transform, opacity;
}

.gj-target.spawn{ animation: gjSpawn 140ms ease-out both; }
@keyframes gjSpawn{
  from{ transform: translate(-50%, -50%) scale(.72); opacity: .0; }
  to  { transform: translate(-50%, -50%) scale(1);   opacity: 1; }
}

.gj-target:active{
  transform: translate(-50%, -50%) scale(.92);
  filter: drop-shadow(0 10px 22px rgba(0,0,0,.45)) brightness(1.04);
}

.gj-target.gone{
  opacity:0;
  transform: translate(-50%, -50%) scale(.75);
}

body.storm .gj-target{ filter: drop-shadow(0 10px 26px rgba(0,0,0,.55)) saturate(1.05); }
body.rage  .gj-target{ filter: drop-shadow(0 12px 28px rgba(0,0,0,.60)) saturate(1.12) contrast(1.02); }

/* ---------------- HUD helpers ---------------- */
#hud{
  position:fixed;
  left:12px; right:12px;
  top:calc(56px + var(--sat));
  z-index:110;
  pointer-events:none;
}

body.hud-hidden #hud{
  opacity:0;
  transform: translateY(-8px);
  transition: opacity 140ms ease, transform 140ms ease;
}

/* Low time overlay */
#lowTimeOverlay{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:210;
  pointer-events:none;
}
#lowTimeOverlay[aria-hidden="true"]{ opacity:0; }

/* ---------------- FX (HARDEN) ---------------- */
/* FX container is injected/ensured by JS; keep absolute covering layer */
#gj-fx{
  position:absolute;
  inset:0;
  pointer-events:none;
  overflow:hidden;
  z-index:140;
}

/* base */
.gj-fx{
  position:absolute;
  left:0; top:0;
  transform: translate(-50%, -50%);
  pointer-events:none;
  will-change: transform, opacity, filter;
}

.gj-fx::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:999px;
  opacity:.95;
  filter: blur(.5px);
  transform: scale(.35);
  animation: gjBurst var(--life, 340ms) ease-out forwards;
}

@keyframes gjBurst{
  0%   { transform: scale(.35); opacity: .92; }
  60%  { transform: scale(1.02); opacity: .78; }
  100% { transform: scale(1.38); opacity: 0; }
}

/* shards */
.gj-fx-shards{
  transform: translate(-50%, -50%);
  animation: gjShardWrap var(--life, 560ms) ease-out forwards;
}
@keyframes gjShardWrap{
  0%   { opacity:.95; transform: translate(-50%, -50%) scale(.9); }
  100% { opacity:0;   transform: translate(-50%, -50%) scale(1.05); }
}
.gj-fx-shards .gj-shard{
  position:absolute;
  left:0; top:0;
  border-radius:999px;
  animation: gjShard var(--life, 560ms) cubic-bezier(.2,.9,.2,1) forwards;
  will-change: transform, opacity;
}
@keyframes gjShard{
  0%   { opacity:.95; transform: translate(0,0) scale(1); }
  100% { opacity:0;   transform: translate(var(--tx, 60px), var(--ty, -30px)) scale(.6); }
}

/* floating text */
.gj-fx-text{
  position:absolute;
  left:0; top:0;
  transform: translate(-50%, -50%);
  font-weight:900;
  letter-spacing:.3px;
  font-size:18px;
  line-height:1;
  opacity:.98;
  text-shadow:
    0 6px 18px rgba(0,0,0,.45),
    0 0 18px rgba(255,255,255,.12);
  animation: gjText 620ms ease-out forwards;
  pointer-events:none;
  user-select:none;
}
@keyframes gjText{
  0%   { transform: translate(-50%, -50%) scale(.96); opacity:.98; }
  65%  { transform: translate(-50%, calc(-50% - 22px)) scale(1.06); opacity:.90; }
  100% { transform: translate(-50%, calc(-50% - 42px)) scale(1.02); opacity:0; }
}

/* ---------- per-kind burst styles ---------- */
/* GOOD */
.gj-fx-good::before{
  background: radial-gradient(circle at 35% 35%,
    rgba(255,255,255,.95),
    rgba(34,197,94,.85) 36%,
    rgba(34,197,94,0) 70%);
  box-shadow: 0 0 22px rgba(34,197,94,.30), 0 0 40px rgba(34,197,94,.18);
}
.gj-fx-shards.gj-fx-good .gj-shard{ background: rgba(34,197,94,.88); }

/* JUNK HIT (‡πÅ‡∏£‡∏á/‡∏ä‡∏±‡∏î) */
.gj-fx-junk::before{
  background: radial-gradient(circle at 40% 40%,
    rgba(255,255,255,.92),
    rgba(239,68,68,.92) 34%,
    rgba(239,68,68,0) 72%);
  box-shadow: 0 0 28px rgba(239,68,68,.40), 0 0 62px rgba(239,68,68,.22);
  filter: blur(.25px) saturate(1.2);
}
.gj-fx-shards.gj-fx-junk .gj-shard{ background: rgba(239,68,68,.92); }

/* BLOCK (‡∏ô‡∏∏‡πà‡∏°/‡∏™‡∏±‡πâ‡∏ô) */
.gj-fx-block::before{
  background: radial-gradient(circle at 40% 40%,
    rgba(255,255,255,.90),
    rgba(59,130,246,.78) 32%,
    rgba(59,130,246,0) 70%);
  box-shadow: 0 0 18px rgba(59,130,246,.28), 0 0 34px rgba(59,130,246,.14);
}
.gj-fx-shards.gj-fx-block .gj-shard{ background: rgba(96,165,250,.88); }

/* STAR */
.gj-fx-star::before{
  background: radial-gradient(circle at 45% 45%,
    rgba(255,255,255,.92),
    rgba(250,204,21,.88) 34%,
    rgba(250,204,21,0) 72%);
  box-shadow: 0 0 22px rgba(250,204,21,.30), 0 0 46px rgba(250,204,21,.18);
}
.gj-fx-shards.gj-fx-star .gj-shard{ background: rgba(250,204,21,.92); }

/* SHIELD */
.gj-fx-shield::before{
  background: radial-gradient(circle at 45% 45%,
    rgba(255,255,255,.92),
    rgba(14,165,233,.88) 34%,
    rgba(14,165,233,0) 72%);
  box-shadow: 0 0 22px rgba(14,165,233,.30), 0 0 46px rgba(14,165,233,.18);
}
.gj-fx-shards.gj-fx-shield .gj-shard{ background: rgba(56,189,248,.92); }

/* DIAMOND */
.gj-fx-diamond::before{
  background: radial-gradient(circle at 45% 45%,
    rgba(255,255,255,.95),
    rgba(168,85,247,.86) 34%,
    rgba(168,85,247,0) 72%);
  box-shadow: 0 0 24px rgba(168,85,247,.34), 0 0 54px rgba(168,85,247,.18);
}
.gj-fx-shards.gj-fx-diamond .gj-shard{ background: rgba(168,85,247,.92); }

/* üíÄ SKULL */
.gj-fx-skull::before{
  background: radial-gradient(circle at 45% 45%,
    rgba(255,255,255,.90),
    rgba(244,63,94,.94) 32%,
    rgba(244,63,94,0) 74%);
  box-shadow: 0 0 34px rgba(244,63,94,.45), 0 0 76px rgba(244,63,94,.24);
  filter: saturate(1.25);
}
.gj-fx-shards.gj-fx-skull .gj-shard{ background: rgba(244,63,94,.95); }

/* üí£ BOMB */
.gj-fx-bomb::before{
  background: radial-gradient(circle at 45% 45%,
    rgba(255,255,255,.92),
    rgba(249,115,22,.95) 30%,
    rgba(249,115,22,0) 76%);
  box-shadow: 0 0 38px rgba(249,115,22,.46), 0 0 86px rgba(249,115,22,.26);
  filter: saturate(1.25);
}
.gj-fx-shards.gj-fx-bomb .gj-shard{ background: rgba(249,115,22,.95); }

/* DEFUSE */
.gj-fx-defuse::before{
  background: radial-gradient(circle at 45% 45%,
    rgba(255,255,255,.92),
    rgba(34,197,94,.82) 34%,
    rgba(34,197,94,0) 72%);
  box-shadow: 0 0 22px rgba(34,197,94,.26), 0 0 54px rgba(34,197,94,.14);
}
.gj-fx-shards.gj-fx-defuse .gj-shard{ background: rgba(34,197,94,.92); }

/* misc */
.gj-fx-miss::before{
  background: radial-gradient(circle at 45% 45%,
    rgba(255,255,255,.70),
    rgba(148,163,184,.55) 40%,
    rgba(148,163,184,0) 76%);
  box-shadow: 0 0 18px rgba(148,163,184,.22);
}
.gj-fx-expire::before{
  background: radial-gradient(circle at 45% 45%,
    rgba(255,255,255,.72),
    rgba(239,68,68,.55) 40%,
    rgba(239,68,68,0) 78%);
  box-shadow: 0 0 20px rgba(239,68,68,.20);
}

/* text tones */
.gj-fx-text.t-good{ color: rgba(34,197,94,.96); }
.gj-fx-text.t-bad{ color: rgba(239,68,68,.96); }
.gj-fx-text.t-block{ color: rgba(96,165,250,.96); }
.gj-fx-text.t-star{ color: rgba(250,204,21,.96); }
.gj-fx-text.t-shield{ color: rgba(56,189,248,.96); }
.gj-fx-text.t-diamond{ color: rgba(168,85,247,.96); }
.gj-fx-text.t-danger{ color: rgba(244,63,94,.96); }
.gj-fx-text.t-defuse{ color: rgba(34,197,94,.96); }
.gj-fx-text.t-bomb{ color: rgba(249,115,22,.96); }
.gj-fx-text.t-miss{ color: rgba(148,163,184,.92); }

/* ---------- screen pulses ---------- */
@keyframes gjPulseSoft{
  0%{ filter:none; }
  35%{ filter: brightness(1.06) saturate(1.05); }
  100%{ filter:none; }
}
@keyframes gjPulseHurt{
  0%{ filter:none; }
  18%{ filter: brightness(1.15) saturate(1.22) contrast(1.03); }
  55%{ filter: brightness(1.06) saturate(1.10); }
  100%{ filter:none; }
}
@keyframes gjPulseBoom{
  0%{ filter:none; }
  10%{ filter: brightness(1.22) saturate(1.35) contrast(1.06); }
  30%{ filter: brightness(1.12) saturate(1.18); }
  100%{ filter:none; }
}

body.gj-pulse-block{ animation: gjPulseSoft 110ms ease-out; }
body.gj-pulse-hurt{  animation: gjPulseHurt 220ms ease-out; }
body.gj-pulse-star{  animation: gjPulseSoft 120ms ease-out; }
body.gj-pulse-shield{animation: gjPulseSoft 120ms ease-out; }
body.gj-pulse-diamond{animation: gjPulseSoft 140ms ease-out; }
body.gj-pulse-danger{animation: gjPulseHurt 260ms ease-out; }
body.gj-pulse-defuse{animation: gjPulseSoft 160ms ease-out; }
body.gj-pulse-explode{animation: gjPulseBoom 360ms ease-out; }

/* reduce motion */
@media (prefers-reduced-motion: reduce){
  .gj-target.spawn{ animation-duration: 1ms !important; }
  .gj-fx::before,
  .gj-fx-text,
  .gj-fx-shards,
  .gj-fx-shards .gj-shard,
  body.gj-pulse-block,
  body.gj-pulse-hurt,
  body.gj-pulse-explode{
    animation-duration: 1ms !important;
    animation-iteration-count: 1 !important;
  }
}