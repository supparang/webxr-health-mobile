/* === /herohealth/vr-goodjunk/goodjunk-vr.css ===
   GoodJunkVR UI + Layers + Targets — v20260215
   ✅ Works with goodjunk.safe.js + goodjunk-vr.boot.js
   ✅ Supports view: pc / mobile / cvr
   ✅ Safe areas + spawn-safe vars: --gj-top-safe / --gj-bottom-safe
*/

:root{
  --bg:#040610;
  --panel: rgba(4,6,16,.78);
  --panel2: rgba(10,16,36,.55);
  --stroke: rgba(148,163,184,.18);

  --text:#e5e7eb;
  --muted:#94a3b8;

  --good:#22c55e;
  --bad:#ef4444;
  --warn:#f59e0b;
  --cyan:#22d3ee;
  --violet:#a78bfa;

  --sat: env(safe-area-inset-top, 0px);
  --sar: env(safe-area-inset-right, 0px);
  --sab: env(safe-area-inset-bottom, 0px);
  --sal: env(safe-area-inset-left, 0px);

  /* ✅ Spawn safe vars (engine reads these) */
  --gj-top-safe: 92px;
  --gj-bottom-safe: 104px;

  /* base sizing */
  --hud-w: 320px;
  --hud-radius: 18px;
  --hud-pad: 12px;
}

*{ box-sizing:border-box; }
html,body{ height:100%; margin:0; }
body{
  background: radial-gradient(1200px 800px at 20% -10%, rgba(34,211,238,.12), transparent 55%),
              radial-gradient(1200px 800px at 110% 20%, rgba(167,139,250,.10), transparent 55%),
              var(--bg);
  color: var(--text);
  font-family: system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans Thai",sans-serif;
  overflow: hidden;
  -webkit-tap-highlight-color: transparent;
}

a{ color:inherit; text-decoration:none; }
button{ font: inherit; }

/* =========================
   VIEW MODES
========================= */
body.view-pc{
  --hud-w: 340px;
  --gj-top-safe: 88px;
  --gj-bottom-safe: 96px;
}
body.view-mobile{
  --hud-w: min(92vw, 360px);
  --gj-top-safe: calc(92px + var(--sat));
  --gj-bottom-safe: calc(108px + var(--sab));
}
body.view-cvr{
  /* in cVR we keep center area clear and a bit more safe margin */
  --hud-w: min(92vw, 360px);
  --gj-top-safe: calc(104px + var(--sat));
  --gj-bottom-safe: calc(116px + var(--sab));
}

/* =========================
   LAYERS (PLAYFIELD)
========================= */
.gj-layer{
  position: fixed;
  inset: 0;
  overflow: hidden;
  /* Allow targets to receive pointerdown */
  pointer-events: auto;
  touch-action: manipulation;
}

/* right-eye layer for cardboard */
.gj-layer-r{
  display: none;
}
body.view-cvr .gj-layer-r{
  display: block;
}

/* Optional: split-screen feel (depends on your HTML; both layers exist) */
body.view-cvr #gj-layer,
body.view-cvr #gj-layer-r{
  width: 50vw;
  height: 100vh;
  top: 0;
  bottom: 0;
}
body.view-cvr #gj-layer{
  left: 0;
  right: auto;
}
body.view-cvr #gj-layer-r{
  left: 50vw;
  right: 0;
}

/* =========================
   TARGETS
========================= */
.gj-target{
  position: absolute;
  display: grid;
  place-items: center;
  user-select: none;
  -webkit-user-select: none;

  width: auto;
  height: auto;
  transform: translate(-50%, -50%);
  filter: drop-shadow(0 10px 24px rgba(0,0,0,.38));
  cursor: pointer;

  /* reduce "double tap zoom" issues */
  touch-action: manipulation;
}

.gj-target.spawn{
  animation: gjPop .12s ease-out;
}

@keyframes gjPop{
  from{ transform: translate(-50%, -50%) scale(.86); opacity:.85; }
  to{ transform: translate(-50%, -50%) scale(1); opacity:1; }
}

/* subtle hover on desktop */
@media (hover:hover){
  .gj-target:hover{
    filter: drop-shadow(0 12px 26px rgba(0,0,0,.46));
    transform: translate(-50%, -50%) scale(1.04);
  }
}

/* =========================
   HUD
========================= */
#hud{
  position: fixed;
  left: calc(12px + var(--sal));
  top:  calc(12px + var(--sat));
  z-index: 5000;

  width: var(--hud-w);
  border: 1px solid var(--stroke);
  border-radius: var(--hud-radius);
  padding: var(--hud-pad);

  background: linear-gradient(180deg, rgba(2,6,23,.80), rgba(2,6,23,.55));
  box-shadow: 0 16px 56px rgba(0,0,0,.38);
  backdrop-filter: blur(6px);
}

/* compact HUD on very small phones */
@media (max-width: 390px){
  body.view-mobile{
    --hud-pad: 10px;
    --hud-radius: 16px;
    --gj-top-safe: calc(96px + var(--sat)); /* keep spawns below HUD */
  }
}

#hud > div{
  font-size: 12px;
  font-weight: 850;
  color: rgba(229,231,235,.92);
  line-height: 1.25;
  margin: 2px 0;
}

#hud-score, #hud-time, #hud-miss, #hud-grade{
  font-weight: 1000;
  color: #fff;
}

/* goal block */
#hud-goal{
  margin-top: 8px;
  font-weight: 1000;
  letter-spacing: .2px;
}
#goalDesc{
  margin-top: 2px;
  color: rgba(229,231,235,.78);
  font-weight: 800;
  font-size: 11px;
  line-height: 1.3;
}

/* goal progress line */
#hud-goal-cur, #hud-goal-target{
  font-weight: 1000;
}

/* mini quest */
#hud-mini{
  margin-top: 8px;
  font-weight: 950;
}
#miniTimer{
  color: rgba(148,163,184,.95);
  font-weight: 950;
}

/* fever bar */
#feverBox{
  margin-top: 10px;
  position: relative;
  height: 12px;
  border-radius: 999px;
  border: 1px solid rgba(148,163,184,.18);
  background: rgba(2,6,23,.35);
  overflow: hidden;
}
#feverFill{
  position: absolute;
  inset: 0;
  width: 0%;
  border-radius: 999px;
  background: linear-gradient(90deg, rgba(34,197,94,.55), rgba(34,211,238,.45), rgba(167,139,250,.45));
}
#feverText{
  margin-top: 6px;
  font-size: 11px;
  font-weight: 950;
  color: rgba(229,231,235,.90);
}

/* shield pills */
#shieldPills{
  margin-top: 6px;
  font-size: 12px;
  font-weight: 1000;
  color: rgba(229,231,235,.92);
}

/* progress bar (time progress) */
#gjProgress{
  margin-top: 10px;
  position: relative;
  height: 10px;
  border-radius: 999px;
  border: 1px solid rgba(148,163,184,.18);
  background: rgba(2,6,23,.35);
  overflow: hidden;
}
#gjProgressFill{
  position: absolute;
  inset: 0;
  width: 0%;
  border-radius: 999px;
  background: linear-gradient(90deg, rgba(34,211,238,.42), rgba(167,139,250,.36));
}

/* =========================
   BOSS BAR
========================= */
#bossBar{
  margin-top: 10px;
  border-radius: 16px;
  padding: 10px 10px;
  border: 1px solid rgba(148,163,184,.16);
  background: rgba(2,6,23,.32);
}
#bossBar[aria-hidden="true"]{ display:none; }

#bossFill{
  height: 10px;
  border-radius: 999px;
  width: 100%;
  background: linear-gradient(90deg, rgba(239,68,68,.55), rgba(245,158,11,.42));
  border: 1px solid rgba(148,163,184,.18);
}
#bossHint{
  margin-top: 6px;
  font-size: 11px;
  font-weight: 850;
  color: rgba(229,231,235,.78);
  line-height: 1.3;
}

/* =========================
   LOW TIME OVERLAY
========================= */
#lowTimeOverlay{
  position: fixed;
  inset: 0;
  z-index: 6500;
  display: grid;
  place-items: center;
  pointer-events: none;
  background: radial-gradient(700px 500px at 50% 60%, rgba(239,68,68,.10), transparent 60%);
  opacity: 1;
}
#lowTimeOverlay[aria-hidden="true"]{ display:none; }

#gj-lowtime-num{
  width: 118px;
  height: 118px;
  border-radius: 999px;
  border: 1px solid rgba(239,68,68,.35);
  background: rgba(2,6,23,.55);
  display: grid;
  place-items: center;
  box-shadow: 0 18px 70px rgba(0,0,0,.45);
  font-size: 52px;
  font-weight: 1000;
  color: rgba(229,231,235,.95);
}

/* =========================
   SMALL QUALITY-OF-LIFE
========================= */
/* Prevent VR-UI buttons from being blocked by layers if any overlay exists */
#vrui, .vrui, .vr-ui, [data-vrui]{
  position: relative;
  z-index: 8000;
}

/* If you mount the End Summary overlay from JS, ensure it is above everything */
#gjEndOverlay{
  z-index: 9999;
}

/* Debug panel is at 9999 too (from boot.js), so keep HUD below it */
#hud{ z-index: 5000; }

/* =========================
   OPTIONAL: CENTER GUIDE (debug only)
========================= */
body.debug-crosshair::after{
  content:"";
  position: fixed;
  left: 50%;
  top: 50%;
  width: 14px;
  height: 14px;
  border: 2px solid rgba(34,211,238,.65);
  border-radius: 999px;
  transform: translate(-50%, -50%);
  z-index: 9000;
  pointer-events: none;
  opacity: .45;
}