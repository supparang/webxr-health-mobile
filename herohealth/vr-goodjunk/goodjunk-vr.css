/* === PATCH: VR layout compact + low-time tick toast (comfort safe) === */

/* each eye should clip its own targets (important in VR/cVR) */
.gj-eye{ overflow:hidden; }

/* when HUD hidden: fully hide panels (quest peek will still show) */
body.hud-hidden .hha-hud{
  opacity:0;
  pointer-events:none;
}
body.hud-hidden .hha-fever{
  opacity:.88;
}

/* ===== VR layout compact (show only Score/Time/Grade) ===== */
body.view-vr .hud-mid,
body.view-cvr .hud-mid{
  display:none !important;
}

/* hide title/meta/viewbar in VR to reduce clutter */
body.view-vr .hud-badge .hud-title,
body.view-vr .hud-badge .hud-sub,
body.view-vr .hud-badge .viewbar,
body.view-cvr .hud-badge .hud-title,
body.view-cvr .hud-badge .hud-sub,
body.view-cvr .hud-badge .viewbar{
  display:none !important;
}

/* compact top strip */
body.view-vr .hha-hud .hud-top,
body.view-cvr .hha-hud .hud-top{
  position:fixed;
  top: calc(env(safe-area-inset-top, 0px) + 10px);
  left:50%;
  transform: translateX(-50%);
  width: min(520px, 94vw);
  border-radius: 18px;
  padding: 10px 12px;
  z-index: 120;
  background: rgba(2,6,23,.62);
  border: 1px solid rgba(148,163,184,.20);
  backdrop-filter: blur(10px);
}

/* show only Score / Time / Grade */
body.view-vr .hud-stats .hud-stat:nth-child(2),
body.view-vr .hud-stats .hud-stat:nth-child(3),
body.view-cvr .hud-stats .hud-stat:nth-child(2),
body.view-cvr .hud-stats .hud-stat:nth-child(3){
  display:none !important;
}

/* bigger numbers for VR */
body.view-vr .hud-stats .v,
body.view-cvr .hud-stats .v{
  font-size: 22px;
  font-weight: 1100;
}

/* keep labels smaller */
body.view-vr .hud-stats .k,
body.view-cvr .hud-stats .k{
  font-size: 11px;
  opacity: .9;
}

/* Fever UI: keep lower-left but smaller in VR */
body.view-vr .hha-fever,
body.view-cvr .hha-fever{
  transform: scale(.92);
  transform-origin: left bottom;
}

/* ===== low-time class (visual but not nausea) ===== */
body.gj-lowtime .hha-hud .hud-top{
  border-color: rgba(245,158,11,.35);
  box-shadow: 0 18px 60px rgba(0,0,0,.40);
}

/* ===== VR Toast (per-eye, centered, no motion) ===== */
.gj-vr-toast{
  position:absolute;
  left:50%;
  top: 12%;
  transform: translateX(-50%);
  width: min(520px, 92%);
  padding: 14px 16px;
  border-radius: 18px;
  background: rgba(2,6,23,.68);
  border: 1px solid rgba(148,163,184,.22);
  backdrop-filter: blur(10px);
  box-shadow: 0 18px 60px rgba(0,0,0,.45);
  color: #e5e7eb;
  font-weight: 1000;
  letter-spacing: .2px;
  opacity: 0;
  pointer-events:none;
  z-index: 130;
  transition: opacity 140ms ease;
}

.gj-vr-toast .sub{
  margin-top: 6px;
  font-size: 12px;
  font-weight: 850;
  color: rgba(148,163,184,.95);
}

.gj-vr-toast.show{
  opacity: 1;
}

.gj-vr-toast.warn{
  border-color: rgba(245,158,11,.40);
}

.gj-vr-toast.danger{
  border-color: rgba(239,68,68,.44);
}

/* End overlay (ของเดิมคุณคงมีแล้ว—คงไว้ได้) */
.end-overlay{ position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:140;
  background: rgba(2,6,23,.62); backdrop-filter: blur(10px);
}
.end-overlay[hidden]{ display:none !important; }