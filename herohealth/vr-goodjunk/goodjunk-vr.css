/* --- A PATCH: Topbar + End summary + Hide HUD + VR missions peek --- */

/* optional: hide HUD to expand playfield */
body.gj.hud-hidden .gj-hud-top,
body.gj.hud-hidden .gj-hud-bot{ display:none; }

/* topbar actions */
.gj-topbar{
  position:fixed;
  left:10px; right:10px;
  top: calc(10px + var(--sat));
  z-index: 210;
  display:flex;
  gap:10px;
  align-items:center;
  justify-content:space-between;
  pointer-events:none;
}
.gj-topbar .left, .gj-topbar .right{
  display:flex; gap:8px; align-items:center;
  pointer-events:none;
}
.gj-chip{
  pointer-events:auto;
  border:1px solid rgba(148,163,184,.18);
  background: rgba(2,6,23,.58);
  color:#e5e7eb;
  border-radius:999px;
  padding:9px 12px;
  font: 1000 12px/1 system-ui;
  backdrop-filter: blur(8px);
}
.gj-btn{
  pointer-events:auto;
  cursor:pointer;
  border:1px solid rgba(148,163,184,.20);
  background: rgba(2,6,23,.55);
  color:#e5e7eb;
  border-radius:999px;
  padding:10px 12px;
  font: 1100 12px/1 system-ui;
}
.gj-btn.primary{
  border-color: rgba(34,197,94,.34);
  background: rgba(34,197,94,.14);
  color:#eafff3;
}
.gj-btn:active{ transform: translateY(1px); }

/* VR/cVR: ลดความหนา HUD และซ่อน quest-row ปกติ (ใช้ Missions Peek) */
body.view-vr .quest-row,
body.view-cvr .quest-row{
  display:none;
}
body.view-vr.show-missions .quest-row,
body.view-cvr.show-missions .quest-row{
  display:grid;
}

/* end summary overlay */
.gj-end{
  position:fixed; inset:0;
  z-index: 260;
  display:none;
  align-items:center;
  justify-content:center;
  background: rgba(2,6,23,.86);
  backdrop-filter: blur(10px);
  pointer-events:auto;
}
.gj-end .card{
  width:min(760px,92vw);
  border:1px solid rgba(148,163,184,.20);
  background: rgba(2,6,23,.82);
  border-radius: 22px;
  padding: 16px;
  box-shadow: 0 18px 50px rgba(0,0,0,.45);
  color:#e5e7eb;
}
.gj-end .title{font: 1200 22px/1.1 system-ui; }
.gj-end .sub{margin-top:6px;color:#94a3b8;font: 900 12px/1.35 system-ui;}
.gj-end .grid{margin-top:12px;display:grid;grid-template-columns:1fr 1fr;gap:10px;}
@media (max-width:720px){ .gj-end .grid{grid-template-columns:1fr;} }
.gj-end .stat{
  border:1px solid rgba(148,163,184,.18);
  background: rgba(15,23,42,.45);
  border-radius: 16px;
  padding: 10px 12px;
  display:flex; align-items:baseline; justify-content:space-between; gap:10px;
  font: 900 12px/1 system-ui;
}
.gj-end .stat b{font-size:16px;}
.gj-end .actions{margin-top:12px;display:flex;gap:10px;flex-wrap:wrap;}
.gj-end .btn{
  min-width: 210px;
  height: 52px;
  border-radius: 16px;
  border: 1px solid rgba(34,197,94,.35);
  background: rgba(34,197,94,.16);
  color:#eafff3;
  font: 1100 16px/1 system-ui;
  cursor:pointer;
}
.gj-end .btn.alt{
  border-color: rgba(148,163,184,.22);
  background: rgba(2,6,23,.55);
  color:#e5e7eb;
}