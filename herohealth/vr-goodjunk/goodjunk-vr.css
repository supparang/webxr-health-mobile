/* === CONTINUE: /herohealth/vr-goodjunk/goodjunk-vr.css ===
   (ต่อจาก @keyframes gjPulseVictory ...)
   ✅ เติม HUD / Boss bar / Quest / Progress / Low-time / End overlay
   ✅ รองรับ mobile / pc / vr / cvr + safe-area
*/

/* =========================================================
   HUD layout (top)
========================================================= */

#gj-hud{
  position: absolute;
  left: calc(12px + var(--sal));
  right: calc(12px + var(--sar));
  top: calc(10px + var(--sat));
  z-index: 160;
  pointer-events: none;
}

.gj-hud-row{
  display:flex;
  gap:10px;
  align-items:stretch;
  justify-content:space-between;
}

/* compact chips */
.gj-chip{
  pointer-events:none;
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding: 10px 12px;
  border-radius: 16px;
  border: 1px solid rgba(148,163,184,.18);
  background: rgba(2,6,23,.58);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  box-shadow: 0 14px 40px rgba(0,0,0,.30);
  color: rgba(229,231,235,.95);
  min-height: 38px;
}

.gj-chip .k{ color: rgba(148,163,184,.92); font-weight: 900; font-size: 12px; letter-spacing:.2px; }
.gj-chip .v{ font-weight: 1000; font-size: 16px; letter-spacing:.2px; }

#hud-score{ font-variant-numeric: tabular-nums; }
#hud-time{ font-variant-numeric: tabular-nums; }
#hud-miss{ font-variant-numeric: tabular-nums; }
#hud-grade{
  font-weight: 1100;
  letter-spacing:.6px;
}

/* left group / right group */
.gj-hud-left,
.gj-hud-right{
  display:flex;
  gap:10px;
  align-items:center;
}

/* =========================================================
   Quest panel (goal + mini)
========================================================= */

#gj-quest{
  margin-top: 10px;
  display:flex;
  gap:10px;
  align-items:stretch;
  justify-content:space-between;
}

.gj-quest-card{
  pointer-events:none;
  flex: 1 1 auto;
  min-width: 0;
  padding: 10px 12px;
  border-radius: 18px;
  border: 1px solid rgba(148,163,184,.18);
  background: rgba(2,6,23,.52);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  box-shadow: 0 14px 40px rgba(0,0,0,.26);
}

.gj-quest-title{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  font-weight: 1000;
  font-size: 13px;
  color: rgba(229,231,235,.95);
}

.gj-quest-sub{
  margin-top: 6px;
  display:flex;
  gap:10px;
  align-items:baseline;
  justify-content:space-between;
  color: rgba(148,163,184,.96);
  font-weight: 900;
  font-size: 12px;
}

.gj-quest-metric{
  display:flex;
  gap:6px;
  align-items:baseline;
  color: rgba(229,231,235,.95);
  font-variant-numeric: tabular-nums;
}
.gj-quest-metric b{ font-weight: 1100; }

#goalDesc{
  margin-top: 6px;
  color: rgba(148,163,184,.96);
  font-size: 12px;
  line-height: 1.25;
}

/* =========================================================
   Fever bar + Shield
========================================================= */

#gj-meta{
  margin-top: 10px;
  display:flex;
  gap:10px;
  align-items:center;
  justify-content:space-between;
}

#gj-fever{
  flex: 1 1 auto;
  min-width: 0;
  padding: 10px 12px;
  border-radius: 18px;
  border: 1px solid rgba(148,163,184,.18);
  background: rgba(2,6,23,.48);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  box-shadow: 0 14px 40px rgba(0,0,0,.24);
}

#gj-fever-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  font-weight: 1000;
  font-size: 12px;
  color: rgba(229,231,235,.95);
}
#feverText{ font-variant-numeric: tabular-nums; color: rgba(148,163,184,.96); font-weight: 1000; }

#feverTrack{
  margin-top: 8px;
  height: 10px;
  border-radius: 999px;
  border: 1px solid rgba(148,163,184,.18);
  background: rgba(2,6,23,.35);
  overflow:hidden;
}
#feverFill{
  height:100%;
  width:0%;
  border-radius: 999px;
  background: linear-gradient(90deg, rgba(34,211,238,.70), rgba(251,191,36,.70), rgba(244,63,94,.72));
}

#gj-shield{
  width: 178px;
  max-width: 40vw;
  padding: 10px 12px;
  border-radius: 18px;
  border: 1px solid rgba(148,163,184,.18);
  background: rgba(2,6,23,.48);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  box-shadow: 0 14px 40px rgba(0,0,0,.24);
}
#gj-shield .k{
  font-size: 12px;
  font-weight: 1000;
  color: rgba(229,231,235,.95);
}
#shieldPills{
  margin-top: 6px;
  font-size: 16px;
  letter-spacing: 2px;
  color: rgba(229,231,235,.95);
  min-height: 22px;
  font-variant-numeric: tabular-nums;
}

/* =========================================================
   Boss bar (center-top)
========================================================= */

#bossBar{
  position:absolute;
  left: calc(12px + var(--sal));
  right: calc(12px + var(--sar));
  top: calc(128px + var(--sat));
  z-index: 165;
  pointer-events:none;
}

#bossBar[aria-hidden="true"]{ display:none; }

#bossWrap{
  padding: 10px 12px;
  border-radius: 18px;
  border: 1px solid rgba(244,63,94,.28);
  background: rgba(2,6,23,.56);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  box-shadow: 0 18px 46px rgba(0,0,0,.34);
}

#bossHint{
  font-weight: 1100;
  font-size: 12px;
  color: rgba(229,231,235,.95);
  letter-spacing: .2px;
}

#bossTrack{
  margin-top: 8px;
  height: 10px;
  border-radius: 999px;
  border: 1px solid rgba(244,63,94,.28);
  background: rgba(2,6,23,.35);
  overflow:hidden;
}

#bossFill{
  height:100%;
  width:0%;
  border-radius: 999px;
  background: linear-gradient(90deg, rgba(244,63,94,.74), rgba(251,191,36,.64));
}

/* =========================================================
   Progress bar (bottom)
========================================================= */

#gjProgress{
  position:absolute;
  left: calc(12px + var(--sal));
  right: calc(12px + var(--sar));
  bottom: calc(12px + var(--sab));
  height: 10px;
  border-radius: 999px;
  border: 1px solid rgba(148,163,184,.18);
  background: rgba(2,6,23,.40);
  overflow:hidden;
  z-index: 160;
  pointer-events:none;
}

#gjProgressFill{
  height:100%;
  width:0%;
  border-radius: 999px;
  background: linear-gradient(90deg, rgba(99,102,241,.68), rgba(34,211,238,.62));
}

/* =========================================================
   Low time overlay (center)
========================================================= */

#lowTimeOverlay{
  position:absolute;
  inset:0;
  display:flex;
  align-items:flex-start;
  justify-content:center;
  padding-top: calc(18vh + var(--sat));
  z-index: 170;
  pointer-events:none;
}

#lowTimeOverlay[aria-hidden="true"]{ display:none; }

#lowTimeBadge{
  padding: 12px 16px;
  border-radius: 999px;
  border: 1px solid rgba(251,191,36,.30);
  background: rgba(2,6,23,.58);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  box-shadow: 0 20px 60px rgba(0,0,0,.38);
  display:flex;
  gap:10px;
  align-items:center;
  font-weight: 1100;
}

#gj-lowtime-num{
  font-size: 26px;
  font-variant-numeric: tabular-nums;
  letter-spacing: .6px;
  color: rgba(229,231,235,.98);
}

/* =========================================================
   End overlay
========================================================= */

#endOverlay{
  position:absolute;
  inset:0;
  z-index: 200;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: calc(16px + var(--sat)) calc(14px + var(--sar)) calc(16px + var(--sab)) calc(14px + var(--sal));
  background: radial-gradient(900px 700px at 50% 40%, rgba(2,6,23,.62), rgba(2,6,23,.86));
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

#endOverlay[aria-hidden="true"]{ display:none; }

#endCard{
  width: min(520px, 96vw);
  border-radius: 26px;
  border: 1px solid rgba(148,163,184,.18);
  background: rgba(2,6,23,.68);
  box-shadow: 0 26px 80px rgba(0,0,0,.52);
  padding: 16px 16px 14px;
}

#endTitle{
  font-weight: 1200;
  font-size: 22px;
  letter-spacing: .4px;
  color: rgba(229,231,235,.98);
}

#endSub{
  margin-top: 6px;
  color: rgba(148,163,184,.96);
  font-weight: 900;
  font-size: 12px;
  line-height: 1.2;
  word-break: break-word;
}

#endGrid{
  margin-top: 12px;
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

.endStat{
  border-radius: 18px;
  border: 1px solid rgba(148,163,184,.16);
  background: rgba(2,6,23,.42);
  padding: 10px 12px;
}

.endStat .k{
  color: rgba(148,163,184,.96);
  font-weight: 1000;
  font-size: 12px;
}
.endStat .v{
  margin-top: 4px;
  color: rgba(229,231,235,.98);
  font-weight: 1200;
  font-size: 18px;
  font-variant-numeric: tabular-nums;
}

#endGrade{
  font-size: 22px;
  letter-spacing: 1px;
}

#endFooter{
  margin-top: 12px;
  display:flex;
  justify-content:space-between;
  gap:10px;
  align-items:center;
  color: rgba(148,163,184,.96);
  font-size: 12px;
  font-weight: 1000;
}

/* =========================================================
   Responsive tweaks
========================================================= */

@media (max-width: 420px){
  :root{
    --gj-top-safe: 130px;
    --gj-bottom-safe: 130px;
  }

  .gj-chip{ padding: 9px 10px; border-radius: 14px; }
  .gj-chip .v{ font-size: 15px; }

  #gj-quest{ flex-direction: column; }
  #gj-shield{ width: 160px; }

  #bossBar{ top: calc(120px + var(--sat)); }
}

@media (min-width: 760px){
  #gj-hud{
    left: calc(16px + var(--sal));
    right: calc(16px + var(--sar));
    top: calc(14px + var(--sat));
  }
  .gj-chip{ padding: 10px 14px; }
  #endCard{ padding: 18px 18px 16px; }
}

/* view:vr / cvr — ให้ HUD ไม่ไปบังปุ่ม ENTER VR ของ vr-ui.js */
body.view-vr #gj-hud,
body.view-cvr #gj-hud{
  top: calc(54px + var(--sat));
}
body.view-vr #bossBar,
body.view-cvr #bossBar{
  top: calc(168px + var(--sat));
}

/* =========================================================
   Accessibility: reduce motion
========================================================= */

@media (prefers-reduced-motion: reduce){
  .gj-target.spawn,
  .gj-target.gone,
  .gj-fx,
  .gj-fx-shards,
  .gj-fx-text,
  body.gj-tick,
  body.gj-pulse-hurt,
  body.gj-pulse-block,
  body.gj-pulse-star,
  body.gj-pulse-shield,
  body.gj-pulse-diamond,
  body.gj-pulse-danger,
  body.gj-pulse-explode,
  body.gj-pulse-defuse,
  body.gj-miss-shot,
  body.gj-storm,
  body.gj-boss,
  body.gj-rage,
  body.gj-tele,
  body.gj-burst,
  body.gj-boss-down,
  body.gj-stomp{
    animation: none !important;
  }
}