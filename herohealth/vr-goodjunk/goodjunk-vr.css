/* === /herohealth/vr-goodjunk/goodjunk-vr.css ===
   GoodJunkVR RUN (FOLDER) ‚Äî PRODUCTION
   FULL v20260220-cssFXHARDEN

   ‚úÖ Safe-area vars: --sat/--sab/--sal/--sar
   ‚úÖ Safe spawn vars: --gj-top-safe / --gj-bottom-safe (set by boot.js)
   ‚úÖ HUD compact + hud-hidden
   ‚úÖ Target FX-ready (gj-fx overlay hardened by safe.js)
   ‚úÖ Per-kind feel: GOOD / JUNK(block/hit) / STAR / SHIELD / DIAMOND / üí£ / üíÄ
*/

:root{
  --bg:#050814;
  --panel: rgba(2,6,23,.72);
  --panel2: rgba(2,6,23,.52);
  --line: rgba(148,163,184,.18);
  --txt: rgba(229,231,235,.94);
  --mut: rgba(148,163,184,.96);

  --good: rgba(16,185,129,.95);
  --cyan: rgba(34,211,238,.95);
  --warn: rgba(251,191,36,.95);
  --bad: rgba(239,68,68,.95);
  --pink: rgba(244,114,182,.95);

  --sat: env(safe-area-inset-top, 0px);
  --sab: env(safe-area-inset-bottom, 0px);
  --sal: env(safe-area-inset-left, 0px);
  --sar: env(safe-area-inset-right, 0px);

  /* updated by boot */
  --gj-top-safe: 160px;
  --gj-bottom-safe: 150px;

  --shadow: 0 18px 60px rgba(0,0,0,.45);
  --shadow2: 0 12px 32px rgba(0,0,0,.40);

  --r: 18px;
}

*{ box-sizing:border-box; }
html,body{ height:100%; margin:0; }
body.gj{
  min-height:100%;
  background:
    radial-gradient(1200px 800px at 18% 0%, rgba(99,102,241,.18), transparent 55%),
    radial-gradient(900px 700px at 90% 20%, rgba(34,211,238,.14), transparent 55%),
    var(--bg);
  color:var(--txt);
  font-family: system-ui,-apple-system,"Noto Sans Thai",Segoe UI,Roboto,Arial,sans-serif;
  overflow:hidden;
}

/* allow taps */
button{ -webkit-tap-highlight-color: transparent; }
.gj-btn{ cursor:pointer; }

/* ---------- layers ---------- */
.gj-layer{
  position:fixed;
  left:0; top:0; right:0; bottom:0;
  padding-left: var(--sal);
  padding-right: var(--sar);
  padding-top: var(--sat);
  padding-bottom: var(--sab);
  overflow:hidden;
  z-index:10;
  pointer-events:none; /* targets themselves are pointer-events:auto */
}

/* right-eye clone only for cVR */
.gj-layer-r{
  position:fixed;
  left:0; top:0; right:0; bottom:0;
  padding-left: var(--sal);
  padding-right: var(--sar);
  padding-top: var(--sat);
  padding-bottom: var(--sab);
  overflow:hidden;
  z-index:11;
  pointer-events:none;
  display:none;
}
body.view-cvr .gj-layer-r{ display:block; }

/* FX overlay (safe.js will create #gj-fx / #gj-fx-r if missing) */
#gj-fx, #gj-fx-r{
  position:absolute;
  left:0; top:0; right:0; bottom:0;
  pointer-events:none;
}
#gj-fx{ z-index:12; }
#gj-fx-r{ z-index:13; }

/* ---------- targets ---------- */
.gj-target{
  position:absolute;
  transform: translate(-50%, -50%) scale(1);
  filter: drop-shadow(0 18px 26px rgba(0,0,0,.55));
  user-select:none;
  pointer-events:auto;
  will-change: transform, opacity, filter;
  line-height:1;
}

.gj-target.spawn{
  animation: gj-pop .14s ease-out both;
}
@keyframes gj-pop{
  from{ transform: translate(-50%,-50%) scale(.72); opacity:.0; }
  to  { transform: translate(-50%,-50%) scale(1.0); opacity:1; }
}
.gj-target.gone{
  animation: gj-gone .14s ease-in both;
}
@keyframes gj-gone{
  from{ transform: translate(-50%,-50%) scale(1); opacity:1; }
  to  { transform: translate(-50%,-50%) scale(.85); opacity:0; }
}

/* kind hint (subtle glow) */
.gj-target[data-kind="good"]{ filter: drop-shadow(0 18px 26px rgba(16,185,129,.16)) drop-shadow(0 10px 18px rgba(0,0,0,.52)); }
.gj-target[data-kind="junk"]{ filter: drop-shadow(0 18px 26px rgba(239,68,68,.16)) drop-shadow(0 10px 18px rgba(0,0,0,.52)); }
.gj-target[data-kind="star"]{ filter: drop-shadow(0 18px 26px rgba(251,191,36,.15)) drop-shadow(0 10px 18px rgba(0,0,0,.52)); }
.gj-target[data-kind="shield"]{ filter: drop-shadow(0 18px 26px rgba(34,211,238,.15)) drop-shadow(0 10px 18px rgba(0,0,0,.52)); }
.gj-target[data-kind="diamond"]{ filter: drop-shadow(0 18px 26px rgba(244,114,182,.14)) drop-shadow(0 10px 18px rgba(0,0,0,.52)); }
.gj-target[data-kind="skull"],
.gj-target[data-kind="bomb"]{ filter: drop-shadow(0 18px 28px rgba(239,68,68,.22)) drop-shadow(0 12px 22px rgba(0,0,0,.60)); }

/* ---------- HUD ---------- */
#hud{
  position:fixed;
  left:12px; right:12px;
  top:calc(60px + var(--sat));
  z-index:180;
  pointer-events:none;
}

#hud .hud-top{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:12px;
  flex-wrap:wrap;
}

.hud-title{
  pointer-events:none;
  min-width: 180px;
}
.hud-name{
  font-weight:1100;
  font-size:20px;
  letter-spacing:.2px;
}
.hud-sub{
  color:rgba(148,163,184,.95);
  margin-top:2px;
  font-size:12px;
  font-weight:800;
}

.hud-stats{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  pointer-events:none;
}
.pill{
  display:flex;
  align-items:center;
  gap:8px;
  padding:8px 10px;
  border:1px solid rgba(148,163,184,.18);
  background:rgba(2,6,23,.45);
  border-radius:999px;
  box-shadow: var(--shadow2);
}
.pill .k{
  font-size:11px;
  color:rgba(148,163,184,.95);
  font-weight:1000;
}
.pill .v{
  font-size:14px;
  font-weight:1100;
  color:rgba(229,231,235,.95);
}
.pill.grade{
  border-color: rgba(34,211,238,.25);
  background: rgba(34,211,238,.10);
}

.hud-mid{
  margin-top:10px;
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:10px;
  pointer-events:none;
}
.goal,.mini{
  border:1px solid rgba(148,163,184,.18);
  background:rgba(2,6,23,.55);
  border-radius: var(--r);
  padding:10px 12px;
  box-shadow: var(--shadow2);
}
.goal .row, .mini .row{
  display:flex;
  align-items:baseline;
  justify-content:space-between;
  gap:10px;
}
.goal-name{
  font-weight:1100;
}
.goal-metric{
  color:rgba(34,211,238,.90);
  font-weight:1100;
}
.goal-desc,.mini-desc{
  margin-top:6px;
  color:rgba(229,231,235,.86);
  font-size:12px;
  font-weight:850;
}
.mini-title{
  font-weight:1100;
}
.mini-time{
  color:rgba(251,191,36,.95);
  font-weight:1100;
}

/* bottom meters */
.hud-bottom{
  margin-top:10px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  pointer-events:none;
}
.meter, .shield{
  border:1px solid rgba(148,163,184,.18);
  background:rgba(2,6,23,.55);
  border-radius: var(--r);
  padding:10px 12px;
  box-shadow: var(--shadow2);
}
.meter{ flex: 1 1 220px; min-width: 220px; }
.shield{ flex: 0 0 auto; min-width: 160px; }

.meter-head{
  display:flex;
  align-items:baseline;
  justify-content:space-between;
}
.meter-title{
  font-weight:1100;
  letter-spacing:.3px;
}
.meter-val{
  color:rgba(34,211,238,.92);
  font-weight:1100;
}
.meter-bar{
  margin-top:8px;
  height:12px;
  border-radius:999px;
  background:rgba(148,163,184,.16);
  overflow:hidden;
}
.meter-fill{
  height:100%;
  width:0%;
  border-radius:999px;
  background: linear-gradient(90deg, rgba(34,211,238,.95), rgba(16,185,129,.95));
  transition: width .12s linear;
}

.shield-title{
  font-weight:1100;
}
.shield-val{
  margin-top:8px;
  font-weight:1100;
}

/* progress bar */
.progress{
  margin-top:10px;
  border-radius: 999px;
  background: rgba(148,163,184,.16);
  height:10px;
  overflow:hidden;
  box-shadow: var(--shadow2);
}
.progress-bar{ height:10px; }
.progress-fill{
  height:10px;
  width:0%;
  background: linear-gradient(90deg, rgba(99,102,241,.95), rgba(34,211,238,.95));
  transition: width .12s linear;
}

/* boss bar */
.boss{
  margin-top:10px;
  border:1px solid rgba(239,68,68,.24);
  background: rgba(239,68,68,.10);
  border-radius: var(--r);
  padding:10px 12px;
  box-shadow: var(--shadow2);
}
.boss[aria-hidden="true"]{ display:none; }
.boss-row{ display:flex; align-items:center; justify-content:space-between; gap:10px; }
.boss-title{ font-weight:1100; letter-spacing:.4px; color: rgba(255,160,160,.98); }
.boss-hp{
  flex:1;
  height:12px;
  border-radius:999px;
  background: rgba(255,255,255,.08);
  overflow:hidden;
}
.boss-fill{
  height:100%;
  width:0%;
  border-radius:999px;
  background: linear-gradient(90deg, rgba(239,68,68,.95), rgba(251,191,36,.95));
  transition: width .12s linear;
}
.boss-hint{
  margin-top:6px;
  color: rgba(255,210,210,.92);
  font-size:12px;
  font-weight:900;
}

/* ---------- overlays ---------- */
#missionsPeek{
  backdrop-filter: blur(3px);
}
#lowTimeOverlay{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:240;
  pointer-events:none;
  opacity:1;
}
#lowTimeOverlay[aria-hidden="true"]{ display:none; }
.lowtime-card{
  width:min(240px,84vw);
  border:1px solid rgba(251,191,36,.26);
  background: rgba(251,191,36,.10);
  border-radius: 22px;
  padding:16px 16px 14px;
  box-shadow: var(--shadow);
  text-align:center;
}
.lowtime-label{
  font-weight:1100;
  color: rgba(255,240,200,.95);
  letter-spacing:.3px;
}
.lowtime-num{
  margin-top:6px;
  font-weight:1200;
  font-size:46px;
  color: rgba(255,230,170,.98);
}

/* ---------- HUD hide mode ---------- */
body.hud-hidden #hud{
  opacity:0;
  transform: translateY(-6px);
  pointer-events:none;
  transition: opacity .12s ease, transform .12s ease;
}
body:not(.hud-hidden) #hud{
  opacity:1;
  transform: translateY(0);
  transition: opacity .12s ease, transform .12s ease;
}

/* ---------- responsive tightening ---------- */
@media (max-width: 760px){
  #hud{ left:10px; right:10px; top:calc(58px + var(--sat)); }
  .hud-name{ font-size:18px; }
  .hud-mid{ grid-template-columns: 1fr; }
  .meter{ min-width: 180px; }
}
@media (max-height: 680px){
  #hud{ top:calc(54px + var(--sat)); }
  .goal,.mini,.meter,.shield,.boss{ padding:9px 10px; }
  .hud-sub{ font-size:11px; }
  .progress{ margin-top:8px; }
}
@media (max-height: 560px){
  #hud{ top:calc(50px + var(--sat)); }
  .hud-mid{ gap:8px; margin-top:8px; }
  .hud-bottom{ gap:8px; margin-top:8px; }
  .boss{ margin-top:8px; }
}

/* ---------- Gameplay feedback (pulses) ---------- */
/* general tick */
body.gj-tick{
  animation: gj-tick .12s ease-in-out;
}
@keyframes gj-tick{
  0%{ filter: brightness(1); }
  50%{ filter: brightness(1.12); }
  100%{ filter: brightness(1); }
}

/* GOOD expire / miss */
body.gj-good-expire{
  animation: gj-miss .16s ease-out;
}
@keyframes gj-miss{
  0%{ filter: brightness(1); }
  50%{ filter: brightness(.82) contrast(1.06); }
  100%{ filter: brightness(1); }
}

/* JUNK HIT (‡πÅ‡∏£‡∏á/‡∏ä‡∏±‡∏î) */
body.gj-junk-hit{
  animation: gj-junk-hit .22s ease-out;
}
@keyframes gj-junk-hit{
  0%{ transform: translateZ(0); filter: brightness(1); }
  35%{ transform: translate3d(0,1px,0); filter: brightness(1.18) contrast(1.12) saturate(1.2); }
  100%{ transform: translateZ(0); filter: brightness(1); }
}

/* JUNK BLOCK (‡∏ô‡∏∏‡πà‡∏°/‡∏™‡∏±‡πâ‡∏ô) */
body.gj-junk-block{
  animation: gj-block .12s ease-out;
}
@keyframes gj-block{
  0%{ filter: brightness(1); }
  50%{ filter: brightness(1.10); }
  100%{ filter: brightness(1); }
}

/* Bomb / Skull heavy */
body.gj-bomb{
  animation: gj-bomb .32s cubic-bezier(.2,.9,.2,1);
}
@keyframes gj-bomb{
  0%{ transform: translateZ(0); filter: brightness(1); }
  28%{ transform: translate3d(0,2px,0); filter: brightness(1.28) contrast(1.18) saturate(1.28); }
  100%{ transform: translateZ(0); filter: brightness(1); }
}
body.gj-skull-hit{
  animation: gj-skull .24s ease-out;
}
@keyframes gj-skull{
  0%{ filter: brightness(1); }
  40%{ filter: brightness(1.22) contrast(1.16); }
  100%{ filter: brightness(1); }
}

/* Boss events */
body.gj-boss{ animation: gj-boss .28s ease-out; }
@keyframes gj-boss{
  0%{ filter: brightness(1); }
  45%{ filter: brightness(1.12) contrast(1.05); }
  100%{ filter: brightness(1); }
}
body.gj-tele{ animation: gj-tele .18s ease-out; }
@keyframes gj-tele{
  0%{ filter: brightness(1); }
  45%{ filter: brightness(1.10); }
  100%{ filter: brightness(1); }
}
body.gj-stomp{ animation: gj-stomp .24s ease-out; }
@keyframes gj-stomp{
  0%{ filter: brightness(1); }
  40%{ filter: brightness(.88) contrast(1.08); }
  100%{ filter: brightness(1); }
}
body.gj-burst{ animation: gj-burst .24s ease-out; }
@keyframes gj-burst{
  0%{ filter: brightness(1); }
  45%{ filter: brightness(1.14) contrast(1.06); }
  100%{ filter: brightness(1); }
}
body.gj-rage{ animation: gj-rage .32s ease-out; }
@keyframes gj-rage{
  0%{ filter: brightness(1); }
  35%{ filter: brightness(1.22) contrast(1.10) saturate(1.25); }
  100%{ filter: brightness(1); }
}
body.gj-storm{ animation: gj-storm .24s ease-out; }
@keyframes gj-storm{
  0%{ filter: brightness(1); }
  40%{ filter: brightness(1.10); }
  100%{ filter: brightness(1); }
}
body.gj-boss-down{ animation: gj-bossdown .26s ease-out; }
@keyframes gj-bossdown{
  0%{ filter: brightness(1); }
  40%{ filter: brightness(1.18) contrast(1.06); }
  100%{ filter: brightness(1); }
}

/* missed shot (shoot with no target) */
body.gj-miss-shot{
  animation: gj-missshot .12s ease-out;
}
@keyframes gj-missshot{
  0%{ filter: brightness(1); }
  50%{ filter: brightness(.92); }
  100%{ filter: brightness(1); }
}

/* ---------- FX particles primitives (used by safe.js) ---------- */
.gj-fx-burst{
  position:absolute;
  width:10px; height:10px;
  border-radius:999px;
  opacity:.95;
  transform: translate(-50%,-50%) scale(1);
  will-change: transform, opacity;
  pointer-events:none;
}
.gj-fx-text{
  position:absolute;
  transform: translate(-50%,-50%);
  font-weight:1200;
  letter-spacing:.2px;
  text-shadow: 0 14px 26px rgba(0,0,0,.55);
  pointer-events:none;
  opacity:.98;
  will-change: transform, opacity;
}

/* different "feel" keyframes */
@keyframes fx-pop-soft{
  0%{ transform: translate(-50%,-50%) scale(.85); opacity:0; }
  25%{ opacity:.98; }
  100%{ transform: translate(-50%,-50%) scale(1.6); opacity:0; }
}
@keyframes fx-pop-mid{
  0%{ transform: translate(-50%,-50%) scale(.75); opacity:0; }
  20%{ opacity:1; }
  100%{ transform: translate(-50%,-50%) scale(2.1); opacity:0; }
}
@keyframes fx-pop-hard{
  0%{ transform: translate(-50%,-50%) scale(.7); opacity:0; }
  16%{ opacity:1; }
  65%{ opacity:.95; }
  100%{ transform: translate(-50%,-50%) scale(2.7); opacity:0; }
}

@keyframes fx-float-soft{
  0%{ transform: translate(-50%,-50%) translateY(0); opacity:0; }
  18%{ opacity:1; }
  100%{ transform: translate(-50%,-50%) translateY(-26px); opacity:0; }
}
@keyframes fx-float-hard{
  0%{ transform: translate(-50%,-50%) translateY(0); opacity:0; }
  12%{ opacity:1; }
  100%{ transform: translate(-50%,-50%) translateY(-38px); opacity:0; }
}

/* view-cvr: tighten HUD a bit so crosshair stays clear */
body.view-cvr #hud{
  top:calc(56px + var(--sat));
}
body.view-cvr .hud-sub{ opacity:.92; }