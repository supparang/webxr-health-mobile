/* === PATCH: prevent targets showing behind HUD + end overlay + hud-hidden === */

/* each eye should clip its own targets (important in VR/cVR) */
.gj-eye{ overflow:hidden; }

/* when HUD hidden: fully hide panels (quest peek will still show) */
body.hud-hidden .hha-hud{
  opacity:0;
  pointer-events:none;
}
body.hud-hidden .hha-fever{
  opacity:.88;
}

/* End overlay */
.end-overlay{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:140;
  background: rgba(2,6,23,.62);
  backdrop-filter: blur(10px);
}
.end-overlay[hidden]{ display:none !important; }

.end-card{
  width:min(780px, 94vw);
  background: rgba(2,6,23,.86);
  border:1px solid rgba(148,163,184,.22);
  border-radius: 24px;
  padding:18px;
  box-shadow: 0 22px 70px rgba(0,0,0,.55);
}
.end-head{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:12px;
}
.end-title{ font-size:24px; font-weight:1000; letter-spacing:.2px; }
.end-sub{ margin-top:6px; color: rgba(148,163,184,.95); font-weight:800; font-size:12px; }
.end-grade{
  min-width:88px;
  text-align:center;
  font-weight:1100;
  font-size:28px;
  padding:10px 12px;
  border-radius:18px;
  border:1px solid rgba(34,197,94,.35);
  background: rgba(34,197,94,.14);
}

.end-grid{
  margin-top:14px;
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap:10px;
}
.end-item{
  background: rgba(15,23,42,.55);
  border:1px solid rgba(148,163,184,.18);
  border-radius:18px;
  padding:10px 12px;
}
.end-item .k{ color: rgba(148,163,184,.95); font-weight:850; font-size:12px; }
.end-item .v{ margin-top:4px; font-weight:1100; font-size:20px; }

.end-actions{
  margin-top:14px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}
.btn-primary, .btn-ghost{
  height:54px;
  border-radius:16px;
  font-weight:1000;
  font-size:16px;
  border:1px solid rgba(148,163,184,.20);
  padding:0 16px;
  cursor:pointer;
}
.btn-primary{
  background: rgba(34,197,94,.18);
  border-color: rgba(34,197,94,.35);
  color:#eafff3;
}
.btn-ghost{
  background: rgba(2,6,23,.55);
  color: var(--text);
}
.btn-primary:active, .btn-ghost:active{ transform: translateY(1px); }

.end-foot{
  margin-top:10px;
  color: rgba(148,163,184,.95);
  font-weight:850;
  font-size:12px;
}
@media (max-width:700px){
  .end-grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
}