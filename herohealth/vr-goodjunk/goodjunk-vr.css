/* === /herohealth/vr-goodjunk/goodjunk-vr.css ===
GoodJunkVR UI + Layout (PRODUCTION)
✅ Bigger play area (targets visible, not hidden by HUD)
✅ Safe-area support (env inset)
✅ Safe spawn vars for engine: --gj-top-safe / --gj-bottom-safe
✅ HUD hide mode expands play area (body.hud-hidden)
✅ Does NOT block vr-ui buttons (z-index discipline + pointer-events)
✅ cVR: right layer visible + split look
*/

:root{
  color-scheme: dark;

  --bg0:#020617;
  --bg1:#071227;

  --panel: rgba(2,6,23,.62);
  --panel2: rgba(15,23,42,.55);
  --stroke: rgba(148,163,184,.20);
  --stroke2: rgba(148,163,184,.14);

  --text: rgba(229,231,235,.96);
  --muted: rgba(148,163,184,.92);

  --accent: rgba(34,197,94,1);
  --accentSoft: rgba(34,197,94,.16);
  --warn: rgba(245,158,11,1);
  --warnSoft: rgba(245,158,11,.14);
  --cyan: rgba(34,211,238,1);
  --cyanSoft: rgba(34,211,238,.14);

  --radius: 22px;
  --radius2: 18px;
  --pill: 999px;

  /* safe-area */
  --sat: env(safe-area-inset-top, 0px);
  --sab: env(safe-area-inset-bottom, 0px);
  --sal: env(safe-area-inset-left, 0px);
  --sar: env(safe-area-inset-right, 0px);

  /* layout spacing */
  --padX: 12px;
  --padY: 10px;

  /* header / blocks heights (used to derive safe spawn) */
  --topbarH: 64px;
  --cardsH: 86px;
  --goalH: 110px;
  --miniH: 92px;
  --bottomH: 220px; /* fever+shield */

  /* ✅ engine reads these */
  --gj-top-safe: calc(var(--sat) + var(--topbarH) + var(--cardsH) + 8px);
  --gj-bottom-safe: calc(var(--sab) + var(--bottomH) + 10px);
}

*{ box-sizing:border-box; }
html,body{
  width:100%;
  height:100%;
  margin:0;
  overflow:hidden;
  font-family: system-ui, -apple-system, "Segoe UI", "Noto Sans Thai", sans-serif;
  background:
    radial-gradient(circle at 18% 10%, rgba(34,211,238,.14), transparent 52%),
    radial-gradient(circle at 85% 88%, rgba(34,197,94,.12), transparent 56%),
    radial-gradient(circle at 50% 45%, rgba(148,163,184,.08), transparent 60%),
    linear-gradient(180deg, var(--bg1), var(--bg0));
  color: var(--text);
}

/* -----------------------------
   PLAY LAYERS (targets)
------------------------------ */
.gj-layer{
  position:fixed;
  inset:0;
  z-index: 40;          /* below HUD, above background */
  pointer-events:none;  /* targets handle pointer on themselves */
  overflow:hidden;
}

/* Right eye layer (cVR) */
.gj-layer-r{
  display:none;
}
body.view-cvr .gj-layer-r{
  display:block;
  clip-path: inset(0 0 0 50%);
}
body.view-cvr #gj-layer{
  clip-path: inset(0 50% 0 0);
}

/* -----------------------------
   HUD (UI)
------------------------------ */
.gj-ui{
  position:fixed;
  inset:0;
  z-index: 80; /* below vr-ui (110) but above targets */
  pointer-events:none; /* allow targets to be tappable in play area */
  padding:
    calc(var(--padY) + var(--sat))
    calc(var(--padX) + var(--sar))
    calc(var(--padY) + var(--sab))
    calc(var(--padX) + var(--sal));
  display:flex;
  flex-direction:column;
  gap: 10px;
}

/* make buttons clickable */
.gj-ui button{ pointer-events:auto; }

.gj-topbar{
  height: var(--topbarH);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;
}

.gj-chip{
  display:inline-flex;
  align-items:center;
  gap:10px;
  padding: 10px 12px;
  border-radius: var(--pill);
  background: rgba(2,6,23,.55);
  border: 1px solid var(--stroke2);
  backdrop-filter: blur(10px);
  box-shadow: 0 14px 44px rgba(0,0,0,.35);
  font-weight: 900;
  font-size: 12px;
  max-width: 62vw;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.gj-actions{
  display:flex;
  align-items:center;
  gap: 10px;
  flex-wrap:wrap;
  justify-content:flex-end;
}

.gj-btn{
  appearance:none;
  border: 1px solid var(--stroke);
  background: rgba(2,6,23,.55);
  color: var(--text);
  padding: 10px 12px;
  border-radius: 16px;
  font-weight: 1100;
  font-size: 12.5px;
  cursor:pointer;
  user-select:none;
  backdrop-filter: blur(10px);
  box-shadow: 0 14px 44px rgba(0,0,0,.35);
}
.gj-btn:active{ transform: translateY(1px); }
.gj-btn.primary{
  border-color: rgba(34,197,94,.30);
  background: rgba(34,197,94,.16);
}

/* cards row */
.gj-cards{
  height: var(--cardsH);
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}
.gj-card{
  border-radius: var(--radius2);
  background: var(--panel);
  border: 1px solid var(--stroke2);
  backdrop-filter: blur(10px);
  box-shadow: 0 16px 52px rgba(0,0,0,.35);
  padding: 12px 14px;
  display:flex;
  flex-direction:column;
  justify-content:center;
  gap: 6px;
  pointer-events:none; /* purely display */
}
.gj-card .k{
  color: var(--muted);
  font-weight: 1000;
  letter-spacing:.08em;
  font-size: 11px;
}
.gj-card .v{
  font-weight: 1300;
  font-size: 26px;
  line-height:1;
}
.gj-card.warn{
  border-color: rgba(245,158,11,.22);
}
.gj-card.cyan{
  border-color: rgba(34,211,238,.22);
}

/* Panels */
.gj-panel{
  border-radius: var(--radius);
  background: var(--panel);
  border: 1px solid var(--stroke2);
  backdrop-filter: blur(10px);
  box-shadow: 0 18px 58px rgba(0,0,0,.38);
  padding: 14px 14px;
  pointer-events:none;
}
.gj-panel .h{
  font-weight: 1200;
  font-size: 16px;
}
.gj-panel .desc{
  margin-top: 8px;
  color: var(--muted);
  font-weight: 950;
  font-size: 13px;
}
.gj-panel .row{
  margin-top: 10px;
  display:flex;
  align-items:flex-end;
  justify-content:space-between;
  gap: 10px;
}
.gj-panel .big{
  font-weight: 1300;
  font-size: 22px;
}
.gj-panel .muted{
  color: rgba(148,163,184,.90);
  font-weight: 950;
  font-size: 12px;
  text-align:right;
}

/* Fever bar */
.bar{
  margin-top:10px;
  height: 14px;
  border-radius: 999px;
  background: rgba(148,163,184,.18);
  border: 1px solid rgba(148,163,184,.16);
  overflow:hidden;
}
.bar .fill{
  height:100%;
  width:0%;
  background: rgba(34,197,94,.92);
  transition: width .18s ease;
}

/* Low time overlay */
.gj-lowtime-overlay{
  position:fixed;
  inset:0;
  z-index: 160;
  display:flex;
  align-items:center;
  justify-content:center;
  pointer-events:none;
  background: rgba(2,6,23,.35);
  backdrop-filter: blur(6px);
  opacity:0;
  transform: scale(.98);
  transition: opacity .15s ease, transform .15s ease;
}
.gj-lowtime-overlay[aria-hidden="false"]{
  opacity:1;
  transform: scale(1);
}
.gj-lowtime-overlay .n{
  width: 110px;
  height: 110px;
  border-radius: 999px;
  border: 2px solid rgba(245,158,11,.55);
  background: rgba(2,6,23,.65);
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight: 1400;
  font-size: 54px;
  box-shadow: 0 26px 70px rgba(0,0,0,.45);
}

/* -----------------------------
   TARGETS
------------------------------ */
.gj-target{
  position:absolute;
  transform: translate(-50%,-50%);
  line-height:1;
  user-select:none;
  pointer-events:auto; /* tappable */
  filter: drop-shadow(0 12px 24px rgba(0,0,0,.35));
  will-change: transform, opacity;
  opacity: 0;
}
.gj-target.spawn{ opacity: 1; }
.gj-target.gone{
  opacity: 0;
  transform: translate(-50%,-50%) scale(.86);
  transition: opacity .12s ease, transform .12s ease;
}

/* boss */
.gj-target.gj-boss{
  filter:
    drop-shadow(0 18px 34px rgba(0,0,0,.42))
    drop-shadow(0 0 22px rgba(245,158,11,.18));
}

/* warp flash */
.gj-target.warp{
  animation: gjWarp .14s ease-in-out;
}
@keyframes gjWarp{
  0%{ transform: translate(-50%,-50%) scale(.92); opacity:.65; }
  100%{ transform: translate(-50%,-50%) scale(1); opacity:1; }
}

/* -----------------------------
   EFFECT body pulses (optional)
------------------------------ */
body.gj-junk-hit .gj-ui{ filter: saturate(1.06); }
body.gj-boss-p2 .gj-ui{ filter: saturate(1.08); }
body.gj-mini-clear .gj-ui{ filter: saturate(1.10); }

/* -----------------------------
   HUD HIDE MODE
   - Collapse cards+panels, keep only top bar
   - Expand play area => update safe vars
------------------------------ */
body.hud-hidden .gj-cards,
body.hud-hidden .gj-panel{
  display:none !important;
}
body.hud-hidden{
  /* reduce safe zones so targets can use almost full screen */
  --gj-top-safe: calc(var(--sat) + var(--topbarH) + 10px);
  --gj-bottom-safe: calc(var(--sab) + 18px);
}

/* -----------------------------
   RESPONSIVE tuning
------------------------------ */
@media (max-width: 420px){
  :root{
    --topbarH: 60px;
    --cardsH: 82px;
    --bottomH: 210px;
  }
  .gj-card .v{ font-size: 24px; }
  .gj-panel .h{ font-size: 15px; }
}

@media (min-width: 760px){
  :root{
    --padX: 16px;
    --padY: 12px;
  }
  .gj-cards{
    grid-template-columns: repeat(4, 1fr);
  }
}

/* -----------------------------
   cVR strict (recommended)
   - Make targets non-pointer if you want only crosshair shooting
   - (Game-side can also apply; here is optional)
------------------------------ */
/* body.view-cvr .gj-target{ pointer-events:none; } */