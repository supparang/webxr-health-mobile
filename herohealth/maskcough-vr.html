<!-- === /herohealth/maskcough-vr.html ===
MaskCough LAUNCHER — ROOT
✅ Redirects to ./maskcough/maskcough.html
✅ Pass-through hub/run/diff/time/seed/studyId/phase/conditionGroup/log/view/pid/mode/research/sessionId
-->
<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>HeroHealth — Mask & Cough (Launcher)</title>
  <meta name="color-scheme" content="dark" />
  <link rel="icon" href="./favicon.ico" />
</head>
<body style="margin:0; background:#020617; color:#e5e7eb; font-family:system-ui, -apple-system, Segoe UI, Roboto, Noto Sans Thai, Arial;">
<script>
(function(){
  'use strict';
  const PASS = ['pid','run','diff','time','seed','studyId','phase','conditionGroup','log','view','mode','research','sessionId'];

  function pageUrl(){ return location.href.split('#')[0]; }
  function qs(){ try{ return new URL(pageUrl()).searchParams; }catch{ return new URLSearchParams(); } }
  const Q = qs();

  // auto-detect view only if not provided
  function detectView(){
    const v = (Q.get('view')||'').trim();
    if(v) return v;
    // basic heuristic
    const ua = navigator.userAgent || '';
    const mobile = /Android|iPhone|iPad|iPod/i.test(ua);
    return mobile ? 'mobile' : 'pc';
  }

  const target = new URL('./maskcough/maskcough.html', location.href);
  for(const k of PASS){
    if(Q.has(k)){
      const v = Q.get(k);
      if(v != null && String(v).trim() !== '') target.searchParams.set(k, v);
    }
  }
  if(!target.searchParams.has('view')) target.searchParams.set('view', detectView());

  // always attach hub back link
  if(!target.searchParams.has('hub') || String(target.searchParams.get('hub')||'').trim()===''){
    target.searchParams.set('hub', location.href.replace(/maskcough-vr\.html.*$/,'hub.html'));
  }

  location.replace(target.toString());
})();
</script>
</body>
</html>