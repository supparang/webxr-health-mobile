/* ==== Rhythm Boxer — HADO-style Finish FX ==== */

/* เลน (ให้แน่ใจว่ามี z-index ต่ำกว่าผลสรุป) */
.rb-lane{
  z-index: 20;
}

/* ทำเลนตอนจบให้จางหาย */
.rb-lane.fade-out{
  opacity: 0;
  transform: translateY(8px) scale(.97);
  transition: opacity .35s ease, transform .35s ease;
}

/* วงสแกนแบบ HADO (ระเบิดออกจากกลางจอ) */
.rb-ripple{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index: 950;
  background:radial-gradient(circle at center,
              rgba(56,189,248,0.9) 0,
              rgba(56,189,248,0.4) 20%,
              transparent 55%);
  mix-blend-mode:screen;
  opacity:0;
  transform:scale(.4);
  animation: rbRipple 0.8s ease-out forwards;
}

@keyframes rbRipple{
  0%{
    opacity:.9;
    transform:scale(.4);
    filter:blur(0px);
  }
  60%{
    opacity:.7;
    transform:scale(1.6);
    filter:blur(2px);
  }
  100%{
    opacity:0;
    transform:scale(2.3);
    filter:blur(4px);
  }
}

/* เส้น scan วิ่งแนวตั้งแบบ AR */
.rb-scan{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index: 945;
  background:
    repeating-linear-gradient(
      to right,
      rgba(148,163,184,.30) 0,
      rgba(148,163,184,.30) 1px,
      transparent 1px,
      transparent 4px
    );
  mix-blend-mode:screen;
  opacity:0;
  animation: rbScan 0.9s linear forwards;
}

@keyframes rbScan{
  0%{
    opacity:0;
    transform:translateY(40px);
  }
  20%{
    opacity:.45;
  }
  80%{
    opacity:.35;
    transform:translateY(-40px);
  }
  100%{
    opacity:0;
    transform:translateY(-80px);
  }
}

/* ให้ result backdrop ลอยทับสุด */
.sb-result-backdrop{
  z-index: 999 !important;
}
/* เมื่อเกมจบ: ซ่อน lane / track ทั้งหมด แบบไม่เหลือ */
body.rb-finished .rb-lane,
body.rb-finished .track {
  display: none !important;
}