<!-- === vr-fitness/games/shadow-breaker/shadow-breaker.html ===
Shadow Breaker ‚Äî Production
‚úÖ Works with shadow-breaker.js (v1.*)
‚úÖ Optional: vr-ui.js (crosshair / tap-to-shoot emits hha:shoot)
‚úÖ Research form + CSV + end overlay
‚úÖ hub passthrough + mode/diff/time/seed/research/studyId
-->
<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>VR Fitness ‚Äî Shadow Breaker</title>
  <meta name="color-scheme" content="dark light" />

  <link rel="icon" href="../../favicon.ico" />

  <!-- CSS -->
  <link rel="stylesheet" href="./shadow-breaker.css" />

  <!-- Optional: Universal VR UI (if your repo has it) -->
  <!-- Put correct path according to your project -->
  <script>
    // If you have universal VR UI in your project, set path here.
    // Example: /herohealth/vr/vr-ui.js or /vr-fitness/vr/vr-ui.js
    // If not found, game still works (click/tap targets directly).
    (function(){
      const CANDIDATES = [
        '../../vr/vr-ui.js',                 // example inside vr-fitness/vr/
        '../../../herohealth/vr/vr-ui.js',   // example shared from herohealth
        '../vr/vr-ui.js',
      ];
      function tryLoad(i){
        if(i>=CANDIDATES.length) return;
        const s=document.createElement('script');
        s.src=CANDIDATES[i];
        s.onload=()=>{ /* ok */ };
        s.onerror=()=>tryLoad(i+1);
        document.head.appendChild(s);
      }
      tryLoad(0);
    })();
  </script>
</head>

<body>
  <div class="page">

    <!-- ===== Research Meta Card ===== -->
    <section class="card research-card" aria-label="Research Meta">
      <header class="card-header">
        <div class="title">
          <span class="icon">üìä</span>
          <div>
            <h1 id="metaTitle">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢</h1>
            <p id="metaHint">
              ‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏° ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏õ‡πá‡∏ô 1 ‡∏£‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏•‡∏≠‡∏á.
            </p>
          </div>
        </div>

        <div class="lang-toggle" aria-label="Language Toggle">
          <button type="button" class="lang-btn active" data-lang="th">TH</button>
          <button type="button" class="lang-btn" data-lang="en">EN</button>
        </div>
      </header>

      <div class="research-grid">
        <label>
          <span>Student ID</span>
          <input id="studentId" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô 65001" autocomplete="off" />
        </label>

        <label>
          <span>Device</span>
          <select id="deviceType">
            <option value="auto" selected>Auto detect</option>
            <option value="pc">PC / Notebook</option>
            <option value="mobile">Mobile / Tablet</option>
            <option value="vrHeadset">VR Headset</option>
          </select>
        </label>

        <label>
          <span>School / Institution</span>
          <input id="schoolName" type="text" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô / ‡∏™‡∏ñ‡∏≤‡∏ö‡∏±‡∏ô" autocomplete="off" />
        </label>

        <label>
          <span>Class / Room</span>
          <input id="classRoom" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏õ.5/1" autocomplete="off" />
        </label>

        <label>
          <span>Group / Code</span>
          <input id="groupCode" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏î‡∏•‡∏≠‡∏á / Control ‡∏Ø‡∏•‡∏Ø" autocomplete="off" />
        </label>

        <label>
          <span>Note (optional)</span>
          <input id="note" type="text" placeholder="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°" autocomplete="off" />
        </label>
      </div>

      <p id="metaPDPA" class="hint">
        * ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡∏î‡πâ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡πÅ‡∏•‡∏∞‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ú‡∏¢‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡∏£‡∏≤‡∏¢‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•
      </p>
    </section>

    <!-- ===== Game Card ===== -->
    <section class="card game-card" aria-label="Shadow Breaker Game">

      <!-- HUD (top) -->
      <div class="hud" aria-label="HUD">
        <div class="hud-block">
          <span id="lblTime" class="label">TIME</span>
          <span class="value"><span id="timeVal">60</span> s</span>
        </div>
        <div class="hud-block">
          <span id="lblScore" class="label">SCORE</span>
          <span class="value" id="scoreVal">0</span>
        </div>
        <div class="hud-block">
          <span id="lblHit" class="label">HIT</span>
          <span class="value" id="hitVal">0</span>
        </div>
        <div class="hud-block">
          <span id="lblMiss" class="label">MISS</span>
          <span class="value" id="missVal">0</span>
        </div>
        <div class="hud-block">
          <span id="lblCombo" class="label">COMBO</span>
          <span class="value" id="comboVal">x0</span>
        </div>
      </div>

      <!-- Start -->
      <div class="start-row">
        <button id="startBtn" class="btn btn-main" type="button">
          ‚ñ∂ <span id="startLabel">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô</span>
        </button>
      </div>

      <!-- Goal -->
      <p id="tagGoal" class="hint goal-text">
        ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡∏ï‡πà‡∏≠‡∏¢/‡∏¢‡∏¥‡∏á‡πÄ‡∏õ‡πâ‡∏≤ emoji ‡πÉ‡∏´‡πâ‡∏ó‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ ‡πÄ‡∏ô‡πâ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á (‡∏°‡∏µ‡∏ö‡∏≠‡∏™ 4 ‡∏ï‡∏±‡∏ß‡πÇ‡∏ú‡∏•‡πà‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏¢‡∏∞).
      </p>

      <!-- Game Panel -->
      <div class="game-panel" aria-label="Play Area">
        <div id="gameArea"></div>
        <div id="feedback" class="feedback" aria-live="polite"></div>
      </div>

      <!-- Coach -->
      <p id="coachLine" class="coach">
        ‡πÇ‡∏Ñ‡πâ‡∏ä‡∏û‡∏∏‡πà‡∏á: ‡πÄ‡∏•‡πá‡∏á‡πÉ‡∏´‡πâ‡πÑ‡∏ß ‡πÅ‡∏•‡πâ‡∏ß‡∏ï‡πà‡∏≠‡∏¢‡πÉ‡∏´‡πâ‡πÇ‡∏î‡∏ô‡πÄ‡∏õ‡πâ‡∏≤! üëä
      </p>

      <!-- Controls -->
      <div class="controls">
        <h2>‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏•‡πà‡∏ô / Controls</h2>
        <ul>
          <li><strong>PC / Notebook:</strong> ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏°‡∏≤‡∏™‡πå‡∏ö‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÇ‡∏ú‡∏•‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤ (‡∏Å‡∏î Space ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏¥‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠‡πÑ‡∏î‡πâ)</li>
          <li><strong>Mobile / Tablet:</strong> ‡πÅ‡∏ï‡∏∞‡∏ô‡∏¥‡πâ‡∏ß‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏ó‡∏±‡∏ô (‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏ï‡∏∞‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏¥‡∏á crosshair ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ vr-ui.js)</li>
          <li><strong>VR Headset:</strong> ‡πÉ‡∏ä‡πâ pointer / controller ‡πÄ‡∏•‡πá‡∏á‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î trigger ‡∏´‡∏£‡∏∑‡∏≠‡πÇ‡∏´‡∏°‡∏î crosshair</li>
        </ul>
        <p class="hint">
          ‡∏ï‡πà‡∏≠‡πÄ‡∏õ‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏ó‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏≠‡∏™‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏±‡πâ‡∏á 4 ‡∏ï‡∏±‡∏ß‡πÉ‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏£‡∏≠‡∏ö.
        </p>
        <p class="hint small">
          Hint: ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏ô VR ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏õ‡∏¥‡∏î fullscreen ‡πÉ‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡πÅ‡∏ß‡πà‡∏ô
        </p>
      </div>
    </section>

    <!-- ===== Result Overlay ===== -->
    <div id="resultOverlay" class="overlay hidden" role="dialog" aria-modal="true">
      <div class="overlay-box">
        <h2 id="resultTitle">üèÅ ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏• Shadow Breaker</h2>

        <div class="result-grid">
          <div>
            <span id="rScoreLabel" class="label">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°</span>
            <span id="rScore" class="value">0</span>
          </div>
          <div>
            <span id="rHitLabel" class="label">‡πÇ‡∏î‡∏ô‡πÄ‡∏õ‡πâ‡∏≤</span>
            <span id="rHit" class="value">0</span>
          </div>
          <div>
            <span id="rPerfectLabel" class="label">Perfect</span>
            <span id="rPerfect" class="value">0</span>
          </div>
          <div>
            <span id="rGoodLabel" class="label">Good</span>
            <span id="rGood" class="value">0</span>
          </div>
          <div>
            <span id="rMissLabel" class="label">Miss</span>
            <span id="rMiss" class="value">0</span>
          </div>
          <div>
            <span id="rAccLabel" class="label">Accuracy</span>
            <span id="rAcc" class="value">0%</span>
          </div>
          <div>
            <span id="rComboLabel" class="label">‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î</span>
            <span id="rCombo" class="value">x0</span>
          </div>
          <div>
            <span id="rTimeUsedLabel" class="label">‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏•‡πà‡∏ô‡∏ï‡πà‡∏≠‡∏£‡∏≠‡∏ö</span>
            <span id="rTimeUsed" class="value">0s</span>
          </div>
        </div>

        <hr />

        <button id="downloadCsvBtn" class="btn btn-secondary btn-full" type="button">
          üì• <span id="downloadCsvLabel">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î CSV ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏¥‡∏à‡∏±‡∏¢ (‡∏ó‡∏∏‡∏Å session)</span>
        </button>

        <div class="overlay-actions">
          <button id="playAgainBtn" class="btn btn-main btn-full" type="button">
            ‚ñ∂ <span id="playAgainLabel">‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</span>
          </button>
          <button id="backHubBtn" class="btn btn-secondary btn-full" type="button">
            üè† <span id="backHubLabel">‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å</span>
          </button>
        </div>
      </div>
    </div>

  </div><!-- /.page -->

  <!-- JS -->
  <script src="./shadow-breaker.js"></script>

  <!-- Optional: auto-apply play mode class (pure UI) -->
  <script>
    (function(){
      // If you set mode-play in URL, hide research & CSV automatically (CSS supports it)
      try{
        const u = new URL(location.href);
        const m = (u.searchParams.get('run') || u.searchParams.get('modeView') || '').toLowerCase();
        // common flags: run=play / view=play / modeView=play
        if(m === 'play') document.body.classList.add('mode-play');
      }catch(e){}
    })();
  </script>
</body>
</html>