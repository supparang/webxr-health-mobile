<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>VR Fitness ‚Äî Shadow Breaker (Play)</title>
  <meta name="color-scheme" content="dark light" />
  <style>
    :root { color-scheme: dark; }
    * { box-sizing:border-box; }

    body {
      margin:0;
      min-height:100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background:
        radial-gradient(circle at top left, rgba(56,189,248,.18), transparent 55%),
        radial-gradient(circle at bottom right, rgba(34,197,94,.2), transparent 55%),
        #020617;
      color:#e5e7eb;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:0;
    }

    .wrap {
      width:100%;
      max-width:1100px;
      margin:auto;
      padding:10px 12px 16px;
      display:flex;
      flex-direction:column;
      gap:8px;
    }

    header.top {
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:4px 4px 0;
    }

    .title-block {
      display:flex;
      flex-direction:column;
      gap:2px;
    }

    .title-main {
      display:flex;
      align-items:center;
      gap:8px;
      font-size:1.1rem;
      font-weight:600;
    }

    .title-main .logo {
      width:28px; height:28px;
      border-radius:999px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      background:radial-gradient(circle at 30% 20%, #a5f3fc, #0ea5e9);
      box-shadow:0 0 0 1px rgba(8,47,73,.5);
      font-size:16px;
    }

    .subtitle {
      font-size:.8rem;
      color:#9ca3af;
    }

    .pill {
      font-size:.7rem;
      text-transform:uppercase;
      letter-spacing:.08em;
      padding:4px 9px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.5);
      color:#e5e7eb;
      background:rgba(15,23,42,.7);
      display:inline-flex;
      align-items:center;
      gap:6px;
      white-space:nowrap;
    }
    .pill .dot {
      width:6px; height:6px; border-radius:999px;
      background:#22c55e;
      box-shadow:0 0 0 4px rgba(34,197,94,.3);
    }

    .hud {
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:6px 8px;
      border-radius:12px;
      border:1px solid rgba(148,163,184,.45);
      background:rgba(15,23,42,.9);
    }

    .hud-left {
      display:flex;
      flex-wrap:wrap;
      gap:8px 16px;
      align-items:center;
      font-size:.78rem;
    }

    .hud-item {
      display:flex;
      align-items:center;
      gap:4px;
      color:#e5e7eb;
    }
    .hud-item span.label {
      font-size:.72rem;
      text-transform:uppercase;
      letter-spacing:.06em;
      color:#9ca3af;
    }
    .hud-item span.value {
      font-weight:600;
    }

    #startBtn {
      border:none;
      border-radius:999px;
      padding:7px 14px;
      font-size:.85rem;
      font-weight:600;
      letter-spacing:.03em;
      text-transform:uppercase;
      background:linear-gradient(135deg,#22d3ee,#0ea5e9);
      color:#0f172a;
      box-shadow:0 10px 24px rgba(8,47,73,.7);
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:6px;
    }
    #startBtn span.icon { font-size:1rem; }
    #startBtn:active { transform:translateY(1px); box-shadow:0 7px 18px rgba(8,47,73,.65); }

    .layout {
      display:grid;
      grid-template-columns: minmax(0,3fr) minmax(0,1.6fr);
      gap:10px;
      margin-top:4px;
    }
    @media (max-width:900px) {
      .layout { grid-template-columns: minmax(0,1fr); }
    }

    .game-shell {
      border-radius:16px;
      border:1px solid rgba(148,163,184,.5);
      background:#020617;
      overflow:hidden;
      position:relative;
      min-height:260px;
      display:flex;
      flex-direction:column;
    }

    .game-area {
      position:relative;
      flex:1;
      overflow:hidden;
      background:
        radial-gradient(circle at top, rgba(148,163,253,.16), transparent 60%),
        radial-gradient(circle at bottom, rgba(45,212,191,.14), transparent 60%),
        #020617;
    }

    .hit-line {
      position:absolute;
      left:0; right:0;
      bottom:12%;
      height:3px;
      background:linear-gradient(90deg, rgba(56,189,248,.3), rgba(16,185,129,.8), rgba(59,130,246,.3));
      box-shadow:0 0 14px rgba(34,197,94,.9);
    }

    #gameArena {
      position:absolute;
      inset:0;
      overflow:hidden;
    }

    .boss-hud {
      position:absolute;
      left:10px;
      top:8px;
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:4px 7px;
      border-radius:999px;
      background:rgba(15,23,42,.8);
      border:1px solid rgba(148,163,184,.5);
      font-size:.72rem;
    }

    .boss-face {
      font-size:1rem;
    }
    .boss-bar-wrap {
      width:90px;
      height:6px;
      border-radius:999px;
      background:#020617;
      overflow:hidden;
    }
    .boss-bar-fill {
      width:100%;
      height:100%;
      background:linear-gradient(90deg,#f97316,#ef4444);
      transform-origin:left center;
    }

    .coach {
      min-height:46px;
      padding:6px 8px 4px;
      font-size:.8rem;
      color:#cbd5f5;
    }

    .coach strong { color:#facc15; }

    .side-card {
      border-radius:16px;
      border:1px solid rgba(148,163,184,.5);
      background:rgba(15,23,42,.9);
      padding:10px 10px 12px;
      font-size:.78rem;
      display:flex;
      flex-direction:column;
      gap:6px;
    }

    .side-card h2 {
      margin:0;
      font-size:.9rem;
      display:flex;
      align-items:center;
      gap:6px;
    }

    .side-card ul {
      margin:4px 0 0;
      padding-left:18px;
    }
    .side-card li { margin-bottom:2px; color:#9ca3af; }

    .side-card small { color:#6b7280; }

    .footer-hint {
      margin-top:4px;
      font-size:.72rem;
      color:#6b7280;
      text-align:right;
    }

    .overlay {
      position:fixed;
      inset:0;
      background:rgba(15,23,42,.88);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:16px;
      z-index:30;
    }
    .overlay.hidden { display:none; }

    .overlay-card {
      width:100%;
      max-width:420px;
      border-radius:20px;
      background:#020617;
      border:1px solid rgba(148,163,184,.7);
      padding:16px 16px 14px;
      box-shadow:0 26px 70px rgba(0,0,0,.9);
    }

    .overlay-card h2 {
      margin:0 0 8px;
      font-size:1.1rem;
      display:flex;
      align-items:center;
      gap:8px;
    }

    .overlay-card h2 span.icon { font-size:1.4rem; }

    .result-grid {
      display:grid;
      grid-template-columns: repeat(2,minmax(0,1fr));
      gap:6px 12px;
      font-size:.8rem;
      margin-bottom:10px;
    }

    .result-row {
      display:flex;
      justify-content:space-between;
      gap:6px;
    }

    .result-label { color:#9ca3af; }
    .result-value { font-weight:600; }

    .overlay-actions {
      display:flex;
      justify-content:space-between;
      gap:8px;
      margin-top:8px;
    }

    .btn {
      border-radius:999px;
      border:none;
      padding:8px 10px;
      font-size:.8rem;
      font-weight:600;
      letter-spacing:.03em;
      text-transform:uppercase;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:6px;
      text-decoration:none;
    }

    .btn-primary {
      background:linear-gradient(135deg,#22d3ee,#0ea5e9);
      color:#020617;
    }
    .btn-secondary {
      background:rgba(15,23,42,1);
      color:#e5e7eb;
      border:1px solid rgba(148,163,184,.8);
    }

    #flashMsg {
      position:absolute;
      left:50%; top:52%;
      transform:translate(-50%,-50%);
      font-size:2.2rem;
      font-weight:800;
      text-shadow:0 0 18px rgba(0,0,0,.9);
      opacity:0;
      pointer-events:none;
    }

    .flash-show {
      animation:flashPop 420ms ease-out;
    }

    @keyframes flashPop {
      0% { opacity:0; transform:translate(-50%,-50%) scale(.6); }
      30% { opacity:1; transform:translate(-50%,-50%) scale(1.1); }
      100% { opacity:0; transform:translate(-50%,-50%) scale(1); }
    }

    @media (max-width:640px) {
      .wrap { padding:6px 8px 10px; }
      header.top { padding-inline:2px; }
      .hud { flex-direction:column; align-items:flex-start; }
      #startBtn { align-self:stretch; justify-content:center; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header class="top">
      <div class="title-block">
        <div class="title-main">
          <span class="logo">ü•ä</span>
          <span>Shadow Breaker</span>
        </div>
        <div class="subtitle">
          ‡∏ï‡πà‡∏≠‡∏¢‡πÄ‡∏õ‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏ó‡∏±‡∏ô‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞‡πÅ‡∏•‡∏∞‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á ‡∏ö‡∏≠‡∏™‡∏à‡∏∞‡πÇ‡∏ú‡∏•‡πà‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡∏à‡∏≤‡∏Å‡∏á‡πà‡∏≤‡∏¢‡πÑ‡∏õ‡∏¢‡∏≤‡∏Å
          <br><small id="modeInfo">‡πÇ‡∏´‡∏°‡∏î: <span id="modeLabel">Timed</span> ‚Ä¢ ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ <span id="timeLabel">90</span> ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</small>
        </div>
      </div>
      <div class="pill">
        <span class="dot"></span>
        <span>Play session</span>
      </div>
    </header>

    <section class="hud">
      <div class="hud-left">
        <div class="hud-item">
          <span class="label">Time</span>
          <span class="value" id="timeVal">90</span><span>s</span>
        </div>
        <div class="hud-item">
          <span class="label">Score</span>
          <span class="value" id="scoreVal">0</span>
        </div>
        <div class="hud-item">
          <span class="label">Combo</span>
          <span class="value" id="comboVal">x0</span>
        </div>
        <div class="hud-item">
          <span class="label">Boss</span>
          <span class="value" id="bossIndexVal">1/4</span>
        </div>
      </div>
      <button id="startBtn">
        <span class="icon">‚ñ∂</span>
        <span>‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô</span>
      </button>
    </section>

    <section class="layout">
      <div class="game-shell">
        <div class="game-area">
          <div id="gameArena"></div>
          <div class="hit-line"></div>

          <div class="boss-hud" id="bossHud">
            <span class="boss-face" id="bossFace">üü¶</span>
            <div class="boss-bar-wrap">
              <div class="boss-bar-fill" id="bossHpBar"></div>
            </div>
          </div>

          <div id="flashMsg"></div>
        </div>
        <div class="coach" id="coachLine">
          ‡πÅ‡∏ï‡∏∞‡πÄ‡∏õ‡πâ‡∏≤ / ‡∏ï‡πà‡∏≠‡∏¢‡πÉ‡∏´‡πâ‡πÇ‡∏î‡∏ô‡∏ß‡∏á‡∏Å‡∏•‡∏°‡∏ó‡∏µ‡πà‡πÇ‡∏ú‡∏•‡πà‡∏°‡∏≤‡∏ï‡∏≤‡∏°‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞ ‡∏¢‡∏¥‡πà‡∏á‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö‡∏¢‡∏¥‡πà‡∏á‡∏™‡∏π‡∏á!
        </div>
      </div>

      <aside class="side-card">
        <h2>‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏•‡πà‡∏ô / Controls</h2>
        <ul>
          <li><strong>PC / Notebook:</strong> ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏°‡∏≤‡∏™‡πå‡∏ö‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÇ‡∏ú‡∏•‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤</li>
          <li><strong>Mobile / Tablet:</strong> ‡πÅ‡∏ï‡∏∞‡∏ô‡∏¥‡πâ‡∏ß‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏ó‡∏±‡∏ô</li>
          <li><strong>VR Headset:</strong> ‡πÉ‡∏ä‡πâ pointer / controller ‡πÄ‡∏•‡πá‡∏á‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î trigger ‡πÉ‡∏´‡πâ‡πÇ‡∏î‡∏ô</li>
        </ul>
        <small>‡∏ï‡πà‡∏≠‡∏¢‡πÄ‡∏õ‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏ó‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏≠‡∏™‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏±‡πâ‡∏á 4 ‡∏ï‡∏±‡∏ß‡πÉ‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏£‡∏≠‡∏ö.</small>
      </aside>
    </section>

    <div class="footer-hint">
      Hint: ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏ô VR ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠ (fullscreen) ‡πÉ‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡πÅ‡∏ß‡πà‡∏ô
    </div>
  </div>

  <!-- Result Overlay -->
  <div class="overlay hidden" id="resultOverlay">
    <div class="overlay-card">
      <h2>
        <span class="icon">üèÅ</span>
        <span>‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏• Shadow Breaker</span>
      </h2>

      <div class="result-grid">
        <div class="result-row">
          <span class="result-label">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°</span>
          <span class="result-value" id="rScore">0</span>
        </div>
        <div class="result-row">
          <span class="result-label">‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏à‡∏£‡∏¥‡∏á</span>
          <span class="result-value" id="rTimeUsed">0s</span>
        </div>
        <div class="result-row">
          <span class="result-label">‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î</span>
          <span class="result-value" id="rMaxCombo">x0</span>
        </div>
        <div class="result-row">
          <span class="result-label">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ö‡∏≠‡∏™‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå</span>
          <span class="result-value" id="rBossCleared">0/4</span>
        </div>
      </div>

      <div class="overlay-actions">
        <button class="btn btn-secondary" id="backBtn">
          ‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π
        </button>
        <button class="btn btn-primary" id="playAgainBtn">
          ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‚ñ∂
        </button>
      </div>
    </div>
  </div>

  <!-- ‡πÄ‡∏Å‡∏°‡∏´‡∏•‡∏±‡∏Å (‡πÉ‡∏ä‡πâ shadow-breaker.js ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î) -->
  <script src="./shadow-breaker.js"></script>
  <script>
    // ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤‡πÇ‡∏´‡∏°‡∏î/‡πÄ‡∏ß‡∏•‡∏≤/‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏à‡∏≤‡∏Å query string ‡∏°‡∏≤‡πÇ‡∏ä‡∏ß‡πå‡∏ó‡∏µ‡πà‡∏´‡∏±‡∏ß
    (function () {
      const p = new URLSearchParams(location.search);
      const mode = p.get('mode') || 'timed';
      const diff = p.get('diff') || 'normal';
      const time = parseInt(p.get('time') || '90', 10);

      const modeLabel = document.getElementById('modeLabel');
      const timeLabel = document.getElementById('timeVal');
      const timeLabelTop = document.getElementById('timeLabel');

      let modeText = 'Timed';
      if (mode === 'endless') modeText = 'Endless';
      const diffTh =
        diff === 'easy' ? '‡∏á‡πà‡∏≤‡∏¢' : diff === 'hard' ? '‡∏¢‡∏≤‡∏Å' : '‡∏õ‡∏Å‡∏ï‡∏¥';

      modeLabel.textContent = `${modeText} ‚Ä¢ ${diffTh}`;
      timeLabel.textContent = isNaN(time) ? '90' : String(time);
      timeLabelTop.textContent = isNaN(time) ? '90' : String(time);
    })();
  </script>
</body>
</html>