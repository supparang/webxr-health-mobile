<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>VR Fitness ‚Äî Shadow Breaker</title>
  <meta name="color-scheme" content="dark light" />
  <link rel="stylesheet" href="./shadow-breaker-play.css" />
</head>
<body>
  <div class="page">

    <!-- ===== ‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏¥‡∏à‡∏±‡∏¢ ===== -->
    <section class="card research-card">
      <header class="card-header">
        <div class="title">
          <span class="icon">üìä</span>
          <div>
            <h1 id="metaTitle">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢</h1>
            <p id="metaHint">
              ‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏° ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏õ‡πá‡∏ô 1 ‡∏£‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏•‡∏≠‡∏á.
            </p>
          </div>
        </div>
        <div class="lang-toggle">
          <button type="button" class="lang-btn active" data-lang="th">TH</button>
          <button type="button" class="lang-btn" data-lang="en">EN</button>
        </div>
      </header>

      <div class="research-grid">
        <label>
          <span>Student ID</span>
          <input id="studentId" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô 65001" />
        </label>
        <label>
          <span>Device</span>
          <select id="deviceType">
            <option value="auto" selected>Auto detect</option>
            <option value="pc">PC / Notebook</option>
            <option value="mobile">Mobile / Tablet</option>
            <option value="vrHeadset">VR Headset</option>
          </select>
        </label>
        <label>
          <span>School / Institution</span>
          <input id="schoolName" type="text" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô / ‡∏™‡∏ñ‡∏≤‡∏ö‡∏±‡∏ô" />
        </label>
        <label>
          <span>Class / Room</span>
          <input id="classRoom" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏õ.5/1" />
        </label>
        <label>
          <span>Group / Code</span>
          <input id="groupCode" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏î‡∏•‡∏≠‡∏á / Control ‡∏Ø‡∏•‡∏Ø" />
        </label>
        <label>
          <span>Note (optional)</span>
          <input id="note" type="text" placeholder="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°" />
        </label>
      </div>

      <p id="metaPDPA" class="hint">
        * ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡∏î‡πâ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡πÅ‡∏•‡∏∞‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ú‡∏¢‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡∏£‡∏≤‡∏¢‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•
      </p>
    </section>

    <!-- ===== ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô Shadow Breaker ===== -->
    <section class="card game-card">

      <!-- HUD ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô -->
      <div class="hud">
        <div class="hud-block">
          <span id="lblTime" class="label">TIME</span>
          <span class="value"><span id="timeVal">60</span> s</span>
        </div>
        <div class="hud-block">
          <span id="lblScore" class="label">SCORE</span>
          <span class="value" id="scoreVal">0</span>
        </div>
        <div class="hud-block">
          <span id="lblHit" class="label">HIT</span>
          <span class="value" id="hitVal">0</span>
        </div>
        <div class="hud-block">
          <span id="lblMiss" class="label">MISS</span>
          <span class="value" id="missVal">0</span>
        </div>
        <div class="hud-block">
          <span id="lblCombo" class="label">COMBO</span>
          <span class="value" id="comboVal">x0</span>
        </div>
      </div>

      <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏° -->
      <div class="start-row">
        <button id="startBtn" class="btn btn-main">
          ‚ñ∂ <span id="startLabel">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô</span>
        </button>
      </div>

      <!-- ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏Å‡∏° -->
      <p id="tagGoal" class="hint goal-text">
        ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡∏ï‡πà‡∏≠‡∏¢‡πÄ‡∏õ‡πâ‡∏≤ emoji ‡πÉ‡∏´‡πâ‡∏ó‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ ‡πÄ‡∏ô‡πâ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á (‡∏°‡∏µ‡∏ö‡∏≠‡∏™ 4 ‡∏ï‡∏±‡∏ß‡πÇ‡∏ú‡∏•‡πà‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏¢‡∏∞).
      </p>

      <!-- ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏° -->
      <div class="game-panel">
        <div id="gameArea"></div>
        <div id="feedback" class="feedback"></div>
      </div>

      <!-- ‡πÇ‡∏Ñ‡πâ‡∏ä -->
      <p id="coachLine" class="coach">
        ‡πÇ‡∏Ñ‡πâ‡∏ä‡∏û‡∏∏‡πà‡∏á: ‡πÄ‡∏•‡πá‡∏á‡πÉ‡∏´‡πâ‡πÑ‡∏ß ‡πÅ‡∏•‡πâ‡∏ß‡∏ï‡πà‡∏≠‡∏¢‡πÉ‡∏´‡πâ‡πÇ‡∏î‡∏ô‡πÄ‡∏õ‡πâ‡∏≤! üëä
      </p>

      <!-- ‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏•‡πà‡∏ô -->
      <div class="controls">
        <h2>‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏•‡πà‡∏ô / Controls</h2>
        <ul>
          <li><strong>PC / Notebook:</strong> ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏°‡∏≤‡∏™‡πå‡∏ö‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÇ‡∏ú‡∏•‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤</li>
          <li><strong>Mobile / Tablet:</strong> ‡πÅ‡∏ï‡∏∞‡∏ô‡∏¥‡πâ‡∏ß‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏ó‡∏±‡∏ô</li>
          <li><strong>VR Headset:</strong> ‡πÉ‡∏ä‡πâ pointer / controller ‡πÄ‡∏•‡πá‡∏á‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î trigger ‡πÉ‡∏´‡πâ‡πÇ‡∏î‡∏ô</li>
        </ul>
        <p class="hint">‡∏ï‡πà‡∏≠‡πÄ‡∏õ‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏ó‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏≠‡∏™‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏±‡πâ‡∏á 4 ‡∏ï‡∏±‡∏ß‡πÉ‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏£‡∏≠‡∏ö.</p>
        <p class="hint small">Hint: ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏ô VR ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠ (fullscreen) ‡πÉ‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡πÅ‡∏ß‡πà‡∏ô</p>
      </div>
    </section>

    <!-- ===== Overlay ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏• ===== -->
    <div id="resultOverlay" class="overlay hidden">
      <div class="overlay-box">
        <h2 id="resultTitle">üèÅ ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏• Shadow Breaker</h2>

        <div class="result-grid">
          <div><span id="rScoreLabel" class="label">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°</span><span id="rScore" class="value">0</span></div>
          <div><span id="rHitLabel" class="label">‡πÇ‡∏î‡∏ô‡πÄ‡∏õ‡πâ‡∏≤</span><span id="rHit" class="value">0</span></div>
          <div><span id="rPerfectLabel" class="label">Perfect</span><span id="rPerfect" class="value">0</span></div>
          <div><span id="rGoodLabel" class="label">Good</span><span id="rGood" class="value">0</span></div>
          <div><span id="rMissLabel" class="label">Miss</span><span id="rMiss" class="value">0</span></div>
          <div><span id="rAccLabel" class="label">Accuracy</span><span id="rAcc" class="value">0%</span></div>
          <div><span id="rComboLabel" class="label">‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î</span><span id="rCombo" class="value">x0</span></div>
          <div><span id="rTimeUsedLabel" class="label">‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏•‡πà‡∏ô‡∏ï‡πà‡∏≠‡∏£‡∏≠‡∏ö</span><span id="rTimeUsed" class="value">0s</span></div>
        </div>

        <hr />

        <button id="downloadCsvBtn" class="btn btn-secondary btn-full">
          üì• <span id="downloadCsvLabel">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î CSV ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏¥‡∏à‡∏±‡∏¢ (‡∏ó‡∏∏‡∏Å session)</span>
        </button>

        <div class="overlay-actions">
          <button id="playAgainBtn" class="btn btn-main btn-full">‚ñ∂ <span id="playAgainLabel">‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</span></button>
          <button id="backHubBtn" class="btn btn-secondary btn-full">üè† <span id="backHubLabel">‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å</span></button>
        </div>
      </div>
    </div>

  </div>

  <!-- ‚úÖ ‡πÇ‡∏´‡∏°‡∏î play/research ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥:
       - ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ ?research=1 ‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢ (log/studyId) => research
       - ‡πÑ‡∏°‡πà‡∏á‡∏±‡πâ‡∏ô => play mode (‡∏ã‡πà‡∏≠‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏° + ‡∏ã‡πà‡∏≠‡∏ô‡∏õ‡∏∏‡πà‡∏° CSV) -->
  <script>
    (function(){
      const qs=(k,d=null)=>{ try{return new URL(location.href).searchParams.get(k) ?? d;}catch{return d;} };
      const r=(qs('research','')||'').toLowerCase();
      const isResearch = (r==='1'||r==='true'||r==='on') || !!qs('studyId','') || !!qs('log','');
      if(!isResearch) document.body.classList.add('mode-play');
    })();
  </script>

  <script src="./shadow-breaker.js"></script>
</body>
</html>