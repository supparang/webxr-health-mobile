<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <title>Shadow Breaker тАФ р╣Ар╕ер╣Ир╕Щр╣Ар╕Бр╕б</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <link rel="stylesheet" href="./shadow-breaker.css"/>
</head>
<body>

<!-- р╕Йр╕▓р╕Бр╕лр╕ер╕▒р╕Бр╕Вр╕нр╕Зр╣Ар╕Бр╕б -->
<div id="sb-stage"></div>

<!-- HUD р╕Фр╣Йр╕▓р╕Щр╕Ър╕Щ -->
<div class="sb-hud">
  <div>тП▒ р╣Ар╕зр╕ер╕▓: <b id="hud-time">90</b>s</div>
  <div>ЁЯТп р╕Др╕░р╣Бр╕Щр╕Щ: <b id="hud-score">0</b></div>
  <div>ЁЯФе р╕Др╕нр╕бр╣Вр╕Ъ: <b id="hud-combo">x0</b></div>
  <button id="btn-pause" class="sb-btn-ghost">тП╕ р╕Юр╕▒р╕Б</button>
</div>

<!-- р╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╣Вр╕Др╣Йр╕К -->
<div id="sb-msg" class="sb-msg"></div>

<!-- Leaderboard -->
<aside id="sb-leaderboard" class="sb-leaderboard"></aside>

<!-- Result Modal -->
<div id="result-box" class="sb-result-backdrop">
  <div class="sb-result-card">
    <h2>ЁЯПБ р╕Ьр╕ер╕Бр╕▓р╕гр╣Ар╕ер╣Ир╕Щ Shadow Breaker</h2>
    <p>р╕Др╕░р╣Бр╕Щр╕Щр╕гр╕зр╕б: <b id="res-score">0</b></p>
    <p>р╕Хр╣Ир╕нр╕вр╣Вр╕Фр╕Щр╣Ар╕Ыр╣Йр╕▓: <b id="res-hits">0</b> / р╕Юр╕ер╕▓р╕Ф: <b id="res-miss">0</b></p>
    <p>р╕Др╕зр╕▓р╕бр╣Бр╕бр╣Ир╕Щр╕вр╕│: <b id="res-acc">0%</b></p>
    <p>р╕Др╕нр╕бр╣Вр╕Ър╕кр╕╣р╕Зр╕кр╕╕р╕Ф: <b id="res-best">x0</b></p>
    <p>р╕гр╕░р╕Фр╕▒р╕Ъ (Rank): <b id="res-rank">C</b></p>

    <hr/>

    <button id="btn-pdf" class="sb-btn-primary">ЁЯУД р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╕гр╕▓р╕вр╕Зр╕▓р╕Щ PDF</button>

    <div class="sb-result-actions">
      <button id="btn-retry" class="sb-btn-secondary">ЁЯФБ р╣Ар╕ер╣Ир╕Щр╕нр╕╡р╕Бр╕Др╕гр╕▒р╣Йр╕З</button>
      <button id="btn-home" class="sb-btn-ghost">ЁЯПа р╕Бр╕ер╕▒р╕Ър╣Ар╕бр╕Щр╕╣</button>
    </div>
  </div>
</div>

<script type="module">
import { ShadowBreaker } from './shadow-breaker.js';

const game = new ShadowBreaker({
  stage: document.querySelector('#sb-stage'),
  hud: {
    time:  document.querySelector('#hud-time'),
    score: document.querySelector('#hud-score'),
    combo: document.querySelector('#hud-combo'),
  },
  result: {
    box:   document.querySelector('#result-box'),
    score: document.querySelector('#res-score'),
    hits:  document.querySelector('#res-hits'),
    miss:  document.querySelector('#res-miss'),
    acc:   document.querySelector('#res-acc'),
    best:  document.querySelector('#res-best'),
    rank:  document.querySelector('#res-rank'),
  },
  msgBox: document.querySelector('#sb-msg'),
  lbBox:  document.querySelector('#sb-leaderboard'),
  pdfBtn: document.querySelector('#btn-pdf'),
});

// р╕Ыр╕╕р╣Ир╕б pause / resume / retry / home
const btnPause = document.querySelector('#btn-pause');
const btnRetry = document.querySelector('#btn-retry');
const btnHome  = document.querySelector('#btn-home');

let isPaused = false;
btnPause?.addEventListener('click', ()=>{
  isPaused = !isPaused;
  if (isPaused){
    game.pause(true);
    btnPause.textContent = 'тЦ╢ р╕Хр╣Ир╕н';
  } else {
    game.pause(false);
    btnPause.textContent = 'тП╕ р╕Юр╕▒р╕Б';
  }
});

btnRetry?.addEventListener('click', ()=>{
  isPaused = false;
  btnPause.textContent = 'тП╕ р╕Юр╕▒р╕Б';
  game.start();
});

btnHome?.addEventListener('click', ()=>{
  location.href = './index.html';
});

// р╣Ар╕гр╕┤р╣Ир╕бр╣Ар╕Бр╕бр╕Чр╕▒р╕Щр╕Чр╕╡р╣Ар╕бр╕╖р╣Ир╕нр╣Вр╕лр╕ер╕Фр╕лр╕Щр╣Йр╕▓
game.start();
</script>

</body>
</html>