<!-- === vr-fitness/games/shadow-breaker/index.html ===
Shadow Breaker ‚Äî Run Page (Production v1.1.0)
‚úÖ Links: shadow-breaker.css + shadow-breaker.js
‚úÖ Uses: /herohealth/vr/vr-ui.js (Enter VR/Exit/Recenter + crosshair => hha:shoot)
‚úÖ Pass-through: hub/view/seed/research/studyId/log/run/diff/time etc.
‚úÖ UI: meta form (research), HUD, goal, coach, game area, result overlay
-->
<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>VR Fitness ‚Äî Shadow Breaker</title>
  <meta name="color-scheme" content="dark" />
  <meta name="theme-color" content="#020617" />

  <!-- CSS (same folder) -->
  <link rel="stylesheet" href="./shadow-breaker.css" />

  <!-- (Optional) favicon -->
  <link rel="icon" href="../../favicon.ico" />

  <style>
    /* small safety: avoid selecting text while tapping */
    *{ -webkit-user-select:none; user-select:none; }
    input,select,textarea{ -webkit-user-select:text; user-select:text; }
  </style>
</head>

<body>
  <div class="page">

    <!-- ===== Top card: title + lang toggle ===== -->
    <div class="card top-panel">
      <div class="card-header">
        <div class="title">
          <div class="icon">ü•ä</div>
          <div>
            <h1>Shadow Breaker</h1>
            <p>VR Fitness ‚Ä¢ Tap / Crosshair Shoot ‚Ä¢ Boss Rush</p>
          </div>
        </div>

        <div class="lang-toggle">
          <button class="lang-btn active" data-lang="th" type="button">TH</button>
          <button class="lang-btn" data-lang="en" type="button">EN</button>
        </div>
      </div>

      <p id="tagGoal" class="goal-text">
        ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡∏ï‡πà‡∏≠‡∏¢/‡∏¢‡∏¥‡∏á‡πÄ‡∏õ‡πâ‡∏≤ emoji ‡πÉ‡∏´‡πâ‡∏ó‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ ‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö ‡πÅ‡∏•‡∏∞‡∏û‡∏¥‡∏ä‡∏¥‡∏ï‡∏ö‡∏≠‡∏™‡∏ó‡∏±‡πâ‡∏á 4 ‡∏ï‡∏±‡∏ß.
      </p>

      <div class="start-row">
        <button id="startBtn" class="btn btn-main btn-full" type="button">
          <span id="startLabel">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô</span> üöÄ
        </button>
      </div>

      <p class="hint small">
        ‡πÇ‡∏´‡∏°‡∏î VR: ‡∏Å‡∏î ENTER VR ‡∏°‡∏∏‡∏°‡∏•‡πà‡∏≤‡∏á‡∏Ç‡∏ß‡∏≤ ‚Ä¢ ‡πÇ‡∏´‡∏°‡∏î‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠/cVR: ‡πÄ‡∏•‡πá‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏ï‡∏∞‡∏¢‡∏¥‡∏á‡πÑ‡∏î‡πâ
      </p>
    </div>

    <!-- ===== Research meta (hidden in play mode by CSS: body.mode-play) ===== -->
    <div class="card meta-panel research-card">
      <div class="card-header">
        <div class="title">
          <div class="icon">üßæ</div>
          <div>
            <h1>Research Meta (Optional)</h1>
            <p>‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏•‡∏≠‡∏á (‡∏à‡∏∞‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö Student ID ‡πÄ‡∏°‡∏∑‡πà‡∏≠ research=1)</p>
          </div>
        </div>
      </div>

      <div class="research-grid">
        <label>
          <span>Student ID</span>
          <input id="studentId" placeholder="‡πÄ‡∏ä‡πà‡∏ô S001" />
        </label>

        <label>
          <span>School</span>
          <input id="schoolName" placeholder="‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô..." />
        </label>

        <label>
          <span>Classroom</span>
          <input id="classRoom" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏õ.5/2" />
        </label>

        <label>
          <span>Group Code</span>
          <input id="groupCode" placeholder="‡πÄ‡∏ä‡πà‡∏ô A / B" />
        </label>

        <label>
          <span>Device Type</span>
          <select id="deviceType">
            <option value="auto" selected>auto-detect</option>
            <option value="pc">pc</option>
            <option value="mobile">mobile</option>
            <option value="vrHeadset">vrHeadset</option>
          </select>
        </label>

        <label>
          <span>Note</span>
          <input id="note" placeholder="‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°..." />
        </label>
      </div>

      <div id="metaPDPA" class="hint">
        *‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏à‡∏±‡∏¢/‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ú‡∏•‡πÄ‡∏Å‡∏° (‡∏ï‡∏≤‡∏°‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô)
      </div>
    </div>

    <!-- ===== Game card ===== -->
    <div class="card game-card">
      <!-- HUD -->
      <div class="hud sb-hud" id="hud">
        <div class="hud-block">
          <span class="label">TIME</span>
          <span class="value" id="timeVal">60</span>
        </div>
        <div class="hud-block">
          <span class="label">SCORE</span>
          <span class="value" id="scoreVal">0</span>
        </div>
        <div class="hud-block">
          <span class="label">HIT</span>
          <span class="value" id="hitVal">0</span>
        </div>
        <div class="hud-block">
          <span class="label">MISS</span>
          <span class="value" id="missVal">0</span>
        </div>
        <div class="hud-block">
          <span class="label">COMBO</span>
          <span class="value" id="comboVal">x0</span>
        </div>
        <div class="hud-block" style="flex:1; min-width:160px;">
          <span class="label">COACH</span>
          <span class="value" id="coachLine">‡πÇ‡∏Ñ‡πâ‡∏ä‡∏û‡∏∏‡πà‡∏á: ‡πÄ‡∏•‡πá‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏ï‡∏∞/‡∏¢‡∏¥‡∏á‡πÉ‡∏´‡πâ‡πÇ‡∏î‡∏ô! üëä</span>
        </div>
      </div>

      <!-- Game panel -->
      <div class="game-panel">
        <div id="gameArea" aria-label="Shadow Breaker play area"></div>
        <div id="feedback" class="feedback" aria-live="polite"></div>
      </div>

      <!-- Controls hint -->
      <div class="controls">
        <h2>‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏•‡πà‡∏ô</h2>
        <ul>
          <li>‡πÅ‡∏ï‡∏∞‡πÄ‡∏õ‡πâ‡∏≤ emoji ‡πÉ‡∏´‡πâ‡∏ó‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏≤‡∏¢‡πÑ‡∏õ</li>
          <li>‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö ‚â• 5 ‡∏à‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤ FEVER</li>
          <li>‡∏ö‡∏≠‡∏™‡∏°‡∏µ HP ‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏∏‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á (‡∏î‡∏π‡πÅ‡∏ñ‡∏ö‡∏û‡∏•‡∏±‡∏á‡∏ö‡∏≠‡∏™)</li>
          <li>‡πÇ‡∏´‡∏°‡∏î VR/cVR: ‡πÄ‡∏•‡πá‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠‡πÅ‡∏•‡πâ‡∏ß ‚Äú‡∏¢‡∏¥‡∏á‚Äù (‡∏ú‡πà‡∏≤‡∏ô vr-ui.js ‚Üí hha:shoot)</li>
        </ul>
        <div class="hint small">
          ‡∏ó‡∏¥‡∏õ: ‡∏ñ‡πâ‡∏≤ HUD ‡∏ö‡∏±‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏•‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠/‡∏´‡∏°‡∏∏‡∏ô‡∏à‡∏≠ Landscape ‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏£‡∏±‡∏ö safe-top ‡πÉ‡∏ô CSS
        </div>
      </div>
    </div>
  </div>

  <!-- ===== Result overlay ===== -->
  <div id="resultOverlay" class="overlay hidden" role="dialog" aria-modal="true">
    <div class="overlay-box card">
      <h2>‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•</h2>

      <div class="result-grid">
        <div><span class="label">Score</span><span class="value" id="rScore">0</span></div>
        <div><span class="label">Accuracy</span><span class="value" id="rAcc">0%</span></div>
        <div><span class="label">Hit</span><span class="value" id="rHit">0</span></div>
        <div><span class="label">Miss</span><span class="value" id="rMiss">0</span></div>
        <div><span class="label">Perfect</span><span class="value" id="rPerfect">0</span></div>
        <div><span class="label">Good</span><span class="value" id="rGood">0</span></div>
        <div><span class="label">Max Combo</span><span class="value" id="rCombo">x0</span></div>
        <div><span class="label">Time Used</span><span class="value" id="rTimeUsed">0s</span></div>
      </div>

      <div class="overlay-actions">
        <button id="playAgainBtn" class="btn btn-main" type="button">‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
        <button id="backHubBtn" class="btn btn-secondary" type="button">‡∏Å‡∏•‡∏±‡∏ö HUB</button>
        <button id="downloadCsvBtn" class="btn btn-secondary" type="button">Download CSV</button>
      </div>

      <p class="hint small" style="margin-top:10px;">
        *‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏•‡πà‡∏ô (run=play) ‡∏à‡∏∞‡∏ã‡πà‡∏≠‡∏ô‡∏õ‡∏∏‡πà‡∏° CSV ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
      </p>
    </div>
  </div>

  <!-- ===== HeroHealth Universal VR UI =====
       IMPORTANT: adjust path based on your repo.
       If your VR Fitness is separate from /herohealth, change to correct relative path.
  -->
  <script>
    // Optional config for crosshair lock
    window.HHA_VRUI_CONFIG = Object.assign(
      { lockPx: 28, cooldownMs: 90 },
      window.HHA_VRUI_CONFIG || {}
    );
  </script>
  <script src="../../herohealth/vr/vr-ui.js"></script>

  <!-- ===== Game JS ===== -->
  <script src="./shadow-breaker.js"></script>

</body>
</html>