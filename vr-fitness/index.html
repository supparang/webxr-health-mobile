<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>VR Fitness Academy ¬∑ Sport Tech</title>
  <link rel="stylesheet" href="core/themes/sport-tech.css"/>
  <style>
    body{margin:0;background:#070b10;color:#e6f7ff;font:14px/1.4 system-ui}
    .header,.footer{padding:12px 18px;display:flex;justify-content:space-between;align-items:center;background:#0b1118;border-bottom:1px solid #203446}
    .brand{font-weight:700;font-size:18px;color:#00ffa3}
    .container{padding:16px}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px;margin-top:10px}
    .game-card{background:#0b1118;border:1px solid #203446;border-radius:12px;padding:14px;color:#e6f7ff;text-decoration:none;display:flex;flex-direction:column;justify-content:space-between;transition:transform .15s}
    .game-card:hover{transform:translateY(-3px)}
    .btn{padding:8px 12px;border:0;border-radius:10px;background:#0e2233;color:#e6f7ff;cursor:pointer}
  </style>
</head>
<body>
  <header class="header">
    <div class="brand">VR Fitness Academy</div>
    <div>
      <select id="langSel" class="btn">
        <option value="en">English</option>
        <option value="th">‡πÑ‡∏ó‡∏¢</option>
      </select>
      <button class="btn" id="muteBtn">üîä</button>
    </div>
  </header>

  <main class="container">
    <h1>Choose your workout</h1>
    <p style="opacity:.8;margin-bottom:14px">4 mini-games ‚Ä¢ scoring ‚Ä¢ VR/PC/Mobile compatible</p>

    <div class="grid" id="gameGrid">
      <!-- Shadow Breaker -->
      <a id="link-sb" class="game-card" href="#">
        <div>
          <h3>Shadow Breaker</h3>
          <p>‡∏ö‡∏≠‡∏™‡πÅ‡∏û‡∏ó‡πÄ‡∏ó‡∏¥‡∏£‡πå‡∏ô + ‡∏û‡∏≤‡∏£‡πå‡∏£‡∏µ / ‡πÄ‡∏°‡∏≤‡∏™‡πå - ‡∏ó‡∏±‡∏ä‡∏Ñ‡∏•‡∏¥‡∏Å‡πÑ‡∏î‡πâ / VR ‡∏û‡∏£‡πâ‡∏≠‡∏°</p>
        </div>
        <div>
          <span id="sbDiffBadge" style="font-size:13px;opacity:.8">Diff: NORMAL</span><br>
          <button class="btn" style="margin-top:8px">Play</button>
        </div>
      </a>

      <!-- Rhythm Boxer -->
      <a id="link-rb" class="game-card" href="#">
        <div>
          <h3>Rhythm Boxer</h3>
          <p>‡∏Å‡∏î‡∏ï‡∏≤‡∏°‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞ / ‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö ‚Äì Fever / ‡πÄ‡∏°‡∏≤‡∏™‡πå - ‡∏ó‡∏±‡∏ä‡∏Ñ‡∏•‡∏¥‡∏Å‡πÑ‡∏î‡πâ / VR ‡∏û‡∏£‡πâ‡∏≠‡∏°</p>
        </div>
        <div>
          <span id="rbDiffBadge" style="font-size:13px;opacity:.8">Diff: NORMAL</span><br>
          <button class="btn" style="margin-top:8px">Play</button>
        </div>
      </a>

      <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡∏≠‡∏∑‡πà‡∏ô ‡πÜ ‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
    </div>
  </main>

  <footer class="footer">
    <span>Sport Tech UI ¬∑ Press ESC to exit VR</span>
  </footer>

  <!-- Core scripts -->
  <script src="core/i18n.js"></script>
  <script src="core/audio.js"></script>
  <script src="core/engine.js"></script>
  <script src="core/ui.js"></script>
  <script src="core/leaderboard.js"></script>

  <script>
    // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏õ‡∏¥‡∏î/‡πÄ‡∏õ‡∏¥‡∏î
    document.getElementById('muteBtn').addEventListener('click', ()=>{ 
      try { AudioBus.mute(true); }catch(_){}
    });

    // ---------- ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡πÄ‡∏Å‡∏° ----------
    (function(){
      const BASE = '/webxr-health-mobile/vr-fitness';
      const sbDiff = localStorage.getItem('sb_diff') || 'normal';
      const rbDiff = localStorage.getItem('rb_diff') || 'normal';
      const show = k => ({easy:'EASY',normal:'NORMAL',hard:'HARD',final:'FINAL'})[k] || 'NORMAL';

      // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï URL + ‡∏õ‡πâ‡∏≤‡∏¢ Diff
      const sbURL = `${BASE}/games/shadow-breaker/?diff=${encodeURIComponent(sbDiff)}`;
      const rbURL = `${BASE}/games/rhythm-boxer/?diff=${encodeURIComponent(rbDiff)}`;

      const sbA=document.getElementById('link-sb');
      const rbA=document.getElementById('link-rb');
      const sbBadge=document.getElementById('sbDiffBadge');
      const rbBadge=document.getElementById('rbDiffBadge');
      if(sbA){sbA.href=sbURL; sbA.querySelector('button').onclick=(e)=>{e.preventDefault();location.href=sbURL;}; sbBadge.textContent='Diff: '+show(sbDiff);}
      if(rbA){rbA.href=rbURL; rbA.querySelector('button').onclick=(e)=>{e.preventDefault();location.href=rbURL;}; rbBadge.textContent='Diff: '+show(rbDiff);}
    })();

    // ---------- ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î ----------
    (function(){
      try{
        const list = Leaderboard?.recent?.(8) || [];
        const grid = document.getElementById('gameGrid');
        if(!list.length)return;
        const box=document.createElement('div');
        box.innerHTML='<h2>Recent Results</h2>'+list.map(e=>{
          const when=new Date(e.ts).toLocaleString();
          const game=e.gameId||'unknown';
          const acc=(e.accuracy!=null?(e.accuracy+'%'):'-');
          return `<div style="font:12px system-ui;opacity:.8">${when} ‚Äì <b>${game}</b> ¬∑ Score <b>${e.score||0}</b> ¬∑ Combo ${e.maxCombo||0} ¬∑ Acc ${acc}</div>`;
        }).join('');
        grid.after(box);
      }catch(_){}
    })();
  </script>
</body>
</html>
