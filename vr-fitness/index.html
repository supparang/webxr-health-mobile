<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>VR Fitness — Hub (Single Page)</title>
  <link rel="stylesheet" href="./hub.css"/>
</head>
<body>
  <!-- HUB: เลือกเกม -->
  <header class="topbar">
    <h1 class="brand">VR Fitness — Hub</h1>
    <button id="btnBack" class="btn hidden" data-action="back">← Back to Hub</button>
  </header>

  <main id="hub" class="hub">
    <section class="grid">
      <!-- Card: Shadow Breaker -->
      <article class="card">
        <h2>Shadow Breaker</h2>
        <p class="desc">ชกตามแพทเทิร์น—ฟิตแรง แข่งเวลา</p>
        <div class="row">
          <label>Difficulty</label>
          <select data-name="diff-sb">
            <option value="easy">Easy</option>
            <option value="normal" selected>Normal</option>
            <option value="hard">Hard</option>
            <option value="final">Final</option>
          </select>
        </div>
        <div class="row">
          <label>Time (sec)</label>
          <input data-name="time-sb" type="number" min="30" max="180" step="5" value="90"/>
        </div>
        <button class="btn" data-action="play" data-game="shadow-breaker">Play</button>
      </article>

      <!-- Card: Rhythm Boxer -->
      <article class="card">
        <h2>Rhythm Boxer</h2>
        <p class="desc">ต่อจังหวะ—แม่นจังหวะเพื่อคอมโบ</p>
        <div class="row">
          <label>Difficulty</label>
          <select data-name="diff-rb">
            <option value="easy">Easy</option>
            <option value="normal" selected>Normal</option>
            <option value="hard">Hard</option>
          </select>
        </div>
        <div class="row">
          <label>Time (sec)</label>
          <input data-name="time-rb" type="number" min="45" max="180" step="5" value="85"/>
        </div>
        <button class="btn" data-action="play" data-game="rhythm-boxer">Play</button>
      </article>

      <!-- Card: Jump-Duck -->
      <article class="card">
        <h2>Jump–Duck</h2>
        <p class="desc">กระโดด–ก้ม หลบสิ่งกีดขวาง</p>
        <div class="row">
          <label>Difficulty</label>
          <select data-name="diff-jd">
            <option value="easy" selected>Easy</option>
            <option value="normal">Normal</option>
            <option value="hard">Hard</option>
          </select>
        </div>
        <div class="row">
          <label>Time (sec)</label>
          <input data-name="time-jd" type="number" min="45" max="180" step="5" value="80"/>
        </div>
        <button class="btn" data-action="play" data-game="jump-duck">Play</button>
      </article>

      <!-- Card: Balance-Hold -->
      <article class="card">
        <h2>Balance–Hold</h2>
        <p class="desc">ทรงตัว นิ่ง ควบคุมแกนแกนกลาง</p>
        <div class="row">
          <label>Difficulty</label>
          <select data-name="diff-bh">
            <option value="easy">Easy</option>
            <option value="normal" selected>Normal</option>
            <option value="hard">Hard</option>
          </select>
        </div>
        <div class="row">
          <label>Time (sec)</label>
          <input data-name="time-bh" type="number" min="30" max="180" step="5" value="75"/>
        </div>
        <button class="btn" data-action="play" data-game="balance-hold">Play</button>
      </article>
    </section>
  </main>

  <!-- GAME STAGE: โหลดเกมใน iFrame -->
  <section id="stage" class="stage hidden" aria-hidden="true">
    <iframe id="gameFrame" class="frame" allow="autoplay; xr-spatial-tracking; fullscreen *; accelerometer; gyroscope;"></iframe>
    <div id="overlay" class="overlay">
      <div class="pill">Paused</div>
    </div>
  </section>

  <!-- RESULT MODAL -->
  <dialog id="resultModal" class="modal">
    <h3>Result</h3>
    <div class="rows">
      <div><b>Game:</b> <span id="rGame">-</span></div>
      <div><b>Score:</b> <span id="rScore">0</span></div>
      <div><b>Combo:</b> <span id="rCombo">0</span></div>
      <div><b>Stars:</b> <span id="rStars">0</span></div>
      <div><b>Time:</b> <span id="rTime">0s</span></div>
    </div>
    <menu>
      <button id="btnRetry" class="btn">Retry</button>
      <button id="btnClose" class="btn btn-secondary">Close</button>
    </menu>
  </dialog>

  <script type="module" src="./hub.js"></script>
</body>
</html>
