
<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Fitness Duo VR ‚Äî Menu (with Missions)</title>
  <style>
    :root{--bg:#0b1220;--panel:#0f172a;--text:#e2e8f0;--accent:#7dfcc6}
    *{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--text);font:16px/1.5 system-ui,Segoe UI,Roboto,TH,sans-serif}
    header{padding:16px 20px;border-bottom:1px solid #1e293b}
    h1{margin:0;font-size:20px}
    main{max-width:1080px;margin:0 auto;padding:16px}
    .grid{display:grid;gap:16px}
    @media(min-width:900px){.grid{grid-template-columns: 1fr 1fr}}
    .card{background:var(--panel);border:1px solid #233047;border-radius:16px;padding:16px}
    .row{display:grid;grid-template-columns: 140px 1fr;align-items:center; gap:8px; margin:10px 0}
    label{color:#cbd5e1}
    select,input{width:100%;padding:10px;border-radius:10px;border:1px solid #334155;background:#0b1220;color:var(--text)}
    .actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px;align-items:center}
    button,a.btn{appearance:none;border:0;border-radius:12px;padding:12px 16px;font-weight:600;cursor:pointer;text-decoration:none;text-align:center}
    .btn{display:inline-block}
    .primary{background:var(--accent);color:#053b2a}
    .secondary{background:#1e293b;color:#e2e8f0}
    .gameButtons{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:12px}
    .hint{font-size:13px;color:#9fb1d1}
    .task{margin:6px 0;padding:6px;border:1px solid #334155;border-radius:10px}
    .task button{padding:6px 10px;border-radius:10px}
  </style>
</head>
<body>
  <header><h1>üéÆ Fitness Duo VR ‚Äî Menu</h1></header>
  <main>
    <div class="grid">
      <section class="card">
        <h2 style="margin:0 0 6px">‚öôÔ∏è ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏•‡∏±‡∏Å</h2>
        <div class="row"><label>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å</label>
          <select id="difficulty"><option value="easy">Easy</option><option value="normal" selected>Normal</option><option value="hard">Hard</option></select>
        </div>
        <div class="row"><label>‡∏ò‡∏µ‡∏°‡∏ß‡∏¥‡∏ß (Adventure)</label>
          <select id="theme"><option value="jungle" selected>Jungle</option><option value="city">City</option><option value="space">Space</option></select>
        </div>
        <div class="row"><label>‡πÄ‡∏Ñ‡∏ß‡∏™ (Adventure)</label>
          <select id="quest"><option value="collect" selected>Collect Orbs</option><option value="survive">Survive</option><option value="streak">Dodge Streak</option></select>
        </div>
        <div class="row"><label>BPM (Rhythm)</label>
          <select id="bpm"><option>96</option><option selected>108</option><option>120</option><option>128</option></select>
        </div>
        <div class="row"><label>Training (Rhythm)</label>
          <select id="training"><option value="on" selected>On</option><option value="off">Off</option></select>
        </div>
        <div class="row"><label>Task (Rhythm)</label>
          <select id="task"><option value="bathe">‡∏≠‡∏≤‡∏ö‡∏ô‡πâ‡∏≥</option><option value="oral">‡∏ä‡πà‡∏≠‡∏á‡∏õ‡∏≤‡∏Å/‡∏ü‡∏±‡∏ô</option><option value="hands" selected>‡∏•‡πâ‡∏≤‡∏á‡∏°‡∏∑‡∏≠ 7 ‡∏Ç‡∏±‡πâ‡∏ô</option><option value="nails">‡∏î‡∏π‡πÅ‡∏•‡πÄ‡∏•‡πá‡∏ö</option></select>
        </div>
        <div class="actions">
          <button class="secondary" id="save">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</button>
          <button class="secondary" id="reset">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>
          <label class="hint"><input type="checkbox" id="autostart" /> Auto-start</label>
        </div>
      </section>
      <section class="card">
        <h2 style="margin:0 0 6px">üïπÔ∏è ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Å‡∏°</h2>
        <div class="gameButtons">
          <a id="goAdventure" class="btn primary" href="#">üèÉ Adventure Runner</a>
          <a id="goRhythm" class="btn primary" href="#">üéµ Hygiene Rhythm</a>
        </div>
        <p class="hint">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏Å‡∏° ‚Äî ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÄ‡∏Å‡∏°‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</p>
        <div class="actions">
          <a id="openAdventureNew" class="btn secondary" target="_blank">‡πÄ‡∏õ‡∏¥‡∏î Adventure (‡πÅ‡∏ó‡πá‡∏ö‡πÉ‡∏´‡∏°‡πà)</a>
          <a id="openRhythmNew" class="btn secondary" target="_blank">‡πÄ‡∏õ‡∏¥‡∏î Rhythm (‡πÅ‡∏ó‡πá‡∏ö‡πÉ‡∏´‡∏°‡πà)</a>
        </div>
      </section>
      <section class="card" id="profileCard">
        <h2 style="margin:0 0 6px">üë§ ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå & ‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à</h2>
        <div id="profileBox" class="hint">loading‚Ä¶</div>
        <div style="margin-top:10px">
          <h3 style="margin:12px 0 6px">üî• Daily</h3>
          <div id="dailyBox" class="hint"></div>
          <h3 style="margin:12px 0 6px">üìÖ Weekly</h3>
          <div id="weeklyBox" class="hint"></div>
          <h3 style="margin:12px 0 6px">‚õìÔ∏è Chain-3</h3>
          <div id="chainBox" class="hint"></div>
        </div>
      </section>
    </div>
  </main>
  <footer style="padding:14px 20px;color:#9fb1d1">¬© Fitness Duo VR</footer>
  <script src="./menu.js"></script>
  <script src="./profile.js"></script>
  <script src="./missions.js"></script>
  <script>
  (function(){
    function rMoney(n){ return new Intl.NumberFormat().format(n||0); }
    function render(){
      const p = DuoProfile.load();
      document.getElementById('profileBox').innerHTML =
        `‡∏ä‡∏∑‡πà‡∏≠: <b>${p.name}</b> ‚Ä¢ Lv ${p.level} ‚Ä¢ XP ${p.xp}/${DuoProfile.needXP(p.level)} ‚Ä¢ ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç: ${rMoney(p.coins)}<br>
         ‡∏£‡∏ß‡∏°‡πÄ‡∏•‡πà‡∏ô: ${p.totals.play} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‚Ä¢ ‡∏™‡∏Å‡∏≠‡∏£‡πå‡∏£‡∏ß‡∏°: ${rMoney(p.totals.score)} ‚Ä¢ Combo-best: ${p.totals.comboBest} ‚Ä¢ ACC-best: ${(p.totals.accBest*100).toFixed(0)}%<br>
         ‡πÅ‡∏ö‡∏î‡∏à‡πå: ${p.badges.length? p.badges.join(', ') : '‚Äî'}`;
      const m = DuoMissions.getProgress();
      const make = t => t.map(x=>{
        const goal = x.metric==='acc' ? `${(x.target*100).toFixed(0)}%` : x.target;
        const btn = x.claimed ? `<button disabled>CLAIMED</button>` : (x.cleared? `<button data-claim="${x.id}">CLAIM</button>` : `<button disabled>LOCKED</button>`);
        return `<div class="task"><b>${x.id}</b> ‚Äì ${x.name} (‡πÄ‡∏õ‡πâ‡∏≤: ${goal}) ${btn}</div>`;
      }).join('');
      document.getElementById('dailyBox').innerHTML  = make(m.daily);
      document.getElementById('weeklyBox').innerHTML = make(m.weekly);
      document.getElementById('chainBox').innerHTML  = make(m.chain);
      document.querySelectorAll('[data-claim]').forEach(b=>{
        b.addEventListener('click', (e)=>{ const id=e.currentTarget.getAttribute('data-claim'); if(DuoMissions.claim(id)){ alert('‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡πÅ‡∏•‡πâ‡∏ß!'); render(); } });
      });
    }
    render();
  })();
  </script>
</body>
</html>
