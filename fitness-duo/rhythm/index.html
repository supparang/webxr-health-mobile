<!doctype html><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Fitness Duo • Rhythm</title>
<script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
<style>body{margin:0;background:#000;color:#e2e8f0;font:16px system-ui}.overlay{position:fixed;left:0;right:0;top:0;padding:8px 10px;background:rgba(11,18,32,.85);z-index:10;display:flex;flex-wrap:wrap;gap:8px;align-items:center}
.row{display:inline-grid;grid-auto-flow:column;gap:6px;align-items:center}button,select,input{background:#0f172a;border:1px solid #334155;color:#e2e8f0;border-radius:10px;padding:6px 10px;cursor:pointer}#status{font-size:13px;color:#9fb1d1;margin-left:8px}</style>
<div class="overlay"><span class="row"><label>Theme</label><select id="theme"><option value="city" selected>City</option><option value="jungle">Jungle</option><option value="space">Space</option></select></span>
<span class="row"><label>Calib (ms)</label><input id="calib" type="range" min="-120" max="120" value="0" step="5" style="width:160px"/><span id="calibv" style="color:#9fb1d1">0</span></span>
<button id="btnStart">Start</button><button id="btnPause">Pause</button><button id="btnResume">Resume</button><button id="btnReset">Reset</button><span id="status">พร้อมเริ่ม</span></div>
<a-scene renderer="antialias:true; colorManagement:false; physicallyCorrectLights:false" background="color:#000">
  <a-assets></a-assets><a-sky id="sky" radius="30" color="#0b1220"></a-sky>
  <a-entity id="root" position="0 1.25 -3"></a-entity><a-entity id="hud" position="0 0 0"></a-entity>
  <a-entity position="0 1.6 0" camera look-controls></a-entity></a-scene>
<script>(function(){const qs=new URLSearchParams(location.search);const t=(qs.get('theme')||'city').toLowerCase();const sel=document.getElementById('theme');if(sel) sel.value=t;window.__OVERRIDE_THEME=t;
let calibMs=parseInt(localStorage.getItem('fd_rhythm_offset_ms')||'0',10);const elC=document.getElementById('calib');const elV=document.getElementById('calibv');elC.value=String(calibMs);elV.textContent=String(calibMs);
elC.addEventListener('input',()=>{calibMs=parseInt(elC.value,10);elV.textContent=elC.value;localStorage.setItem('fd_rhythm_offset_ms',String(calibMs));});
document.getElementById('status').textContent='Loaded • theme='+t+' • calib='+calibMs+'ms';
document.getElementById('btnStart').addEventListener('click',()=>{const val=sel.value;window.__OVERRIDE_THEME=val;const q=new URLSearchParams(location.search);q.set('theme',val);history.replaceState(null,'',location.pathname+'?'+q.toString());});})();</script>
<script src="./game.js"></script>