
<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Hygiene Rhythm</title>
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <script src="https://unpkg.com/troika-three-text/dist/troika-three-text.min.js"></script>
  <script src="https://unpkg.com/aframe-troika-text/dist/aframe-troika-text.min.js"></script>
  <style>
    body{margin:0;background:#000;color:#e2e8f0;font:16px system-ui}
    .overlay{position:fixed;left:0;right:0;top:0;padding:8px 10px;background:rgba(11,18,32,.85);z-index:10}
    .overlay *{font-size:14px}
    .row{display:inline-grid;grid-auto-flow:column;gap:6px;align-items:center;margin-right:12px}
    button,select{background:#0f172a;border:1px solid #334155;color:#e2e8f0;border-radius:10px;padding:6px 10px}
    #status{font-size:13px;color:#9fb1d1;margin-left:8px}
  </style>
</head>
<body>
  <div class="overlay">
    <span class="row"><label>Diff</label>
      <select id="difficulty"><option>easy</option><option selected>normal</option><option>hard</option></select>
    </span>
    <span class="row"><label>BPM</label>
      <select id="bpm"><option>96</option><option selected>108</option><option>120</option><option>128</option></select>
    </span>
    <span class="row"><label>Training</label>
      <select id="training"><option value="on" selected>On</option><option value="off">Off</option></select>
    </span>
    <span class="row"><label>Task</label>
      <select id="task"><option value="bathe">อาบน้ำ</option><option value="oral">ช่องปาก/ฟัน</option><option value="hands" selected>ล้างมือ 7 ขั้น</option><option value="nails">ดูแลเล็บ</option></select>
    </span>
    <button id="btnStart">Start</button><button id="btnReset">Reset</button><span id="status">พร้อมเริ่ม</span>
  </div>

  <a-scene renderer="antialias:true" background="color: #000" id="scene">
    <a-assets></a-assets>
    <a-entity id="root" position="0 1.25 -3"></a-entity>
    <a-entity position="0 1.6 0" camera look-controls></a-entity>
    <a-entity id="hud" position="0 0 0"></a-entity>
  </a-scene>

  <script src="../profile.js"></script>
  <script src="../rhythm-game.js"></script>
  <script>
    (function(){
      const qs = new URLSearchParams(location.search);
      const q = (k, d=null)=>qs.get(k) ?? d;
      const byId = (id)=>document.getElementById(id);
      if(q('diff'))     byId('difficulty').value = q('diff');
      if(q('bpm'))      byId('bpm').value = q('bpm');
      if(q('training')) byId('training').value = q('training');
      if(q('task'))     byId('task').value = q('task');
      document.getElementById('status').textContent =
        `Loaded • diff=${byId('difficulty').value}, bpm=${byId('bpm').value}, training=${byId('training').value}, task=${byId('task').value}`;
      if(q('autostart')==='1'){
        setTimeout(()=>{
          if(typeof window.start === 'function') window.start();
          else if(typeof window.startGame === 'function') window.startGame();
          else document.getElementById('btnStart')?.click();
        }, 200);
      }
    })();
  </script>
</body>
</html>
